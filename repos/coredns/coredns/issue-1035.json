{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "Faced with the issue:\r\non the project we use CoreDNS configured for using Unbound resolver as a caching DNS proxy.\r\nIf Unbound sends to external resolver some query and it responses with RcodeServerFailure (Unbound returns this answer to CoreDNS), CoreDNS makes decision \"unreachable backend\" (Unbound) and some queries in interval fail_timeout (default 10 sec) are also resolved as RcodeServerFailure (i.e. ignore proxy backend as down instance). As workaround we just set max_fails to 0 to avoid this.\r\n\r\nWould be useful to implement enhancement - add option:\r\ndns_health_check DURATION dns_name1, dns_name2, dns_name3 ...\r\n\r\nOn the project we use following list: \"amazon.com\", \"google.com\", \"youtube.com\", \"facebook.com\", \"yahoo.com\", \"apple.com\", \"microsoft.com\" (suppose that these names should be resolved always). The logic is: get first name and make sure that query ret code is RcodeSuccess, if not - get next name until RcodeSuccess or end of the list. This dns_health_check allows determine that proxy endpoint works (queries are resolved) and network route between proxy endpoint and the Internet is fine (option health_check not so useful - looks like inherited from caddy http feature).",
  "closed_at": "2018-01-07T20:59:20Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/353371?v=4",
    "events_url": "https://api.github.com/users/miekg/events{/privacy}",
    "followers_url": "https://api.github.com/users/miekg/followers",
    "following_url": "https://api.github.com/users/miekg/following{/other_user}",
    "gists_url": "https://api.github.com/users/miekg/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/miekg",
    "id": 353371,
    "login": "miekg",
    "node_id": "MDQ6VXNlcjM1MzM3MQ==",
    "organizations_url": "https://api.github.com/users/miekg/orgs",
    "received_events_url": "https://api.github.com/users/miekg/received_events",
    "repos_url": "https://api.github.com/users/miekg/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/miekg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/miekg/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/miekg"
  },
  "comments": 13,
  "comments_url": "https://api.github.com/repos/coredns/coredns/issues/1035/comments",
  "created_at": "2017-09-08T10:28:41Z",
  "events_url": "https://api.github.com/repos/coredns/coredns/issues/1035/events",
  "html_url": "https://github.com/coredns/coredns/issues/1035",
  "id": 256210240,
  "labels": [
    {
      "color": "fc2929",
      "default": true,
      "description": null,
      "id": 343986366,
      "name": "bug",
      "node_id": "MDU6TGFiZWwzNDM5ODYzNjY=",
      "url": "https://api.github.com/repos/coredns/coredns/labels/bug"
    },
    {
      "color": "d4c5f9",
      "default": false,
      "description": null,
      "id": 615851645,
      "name": "plugin",
      "node_id": "MDU6TGFiZWw2MTU4NTE2NDU=",
      "url": "https://api.github.com/repos/coredns/coredns/labels/plugin"
    }
  ],
  "labels_url": "https://api.github.com/repos/coredns/coredns/issues/1035/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2018-02-28T16:26:24Z",
    "closed_issues": 5,
    "created_at": "2017-07-25T20:11:30Z",
    "creator": {
      "avatar_url": "https://avatars1.githubusercontent.com/u/353371?v=4",
      "events_url": "https://api.github.com/users/miekg/events{/privacy}",
      "followers_url": "https://api.github.com/users/miekg/followers",
      "following_url": "https://api.github.com/users/miekg/following{/other_user}",
      "gists_url": "https://api.github.com/users/miekg/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/miekg",
      "id": 353371,
      "login": "miekg",
      "node_id": "MDQ6VXNlcjM1MzM3MQ==",
      "organizations_url": "https://api.github.com/users/miekg/orgs",
      "received_events_url": "https://api.github.com/users/miekg/received_events",
      "repos_url": "https://api.github.com/users/miekg/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/miekg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/miekg/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/miekg"
    },
    "description": "",
    "due_on": null,
    "html_url": "https://github.com/coredns/coredns/milestone/11",
    "id": 2661635,
    "labels_url": "https://api.github.com/repos/coredns/coredns/milestones/11/labels",
    "node_id": "MDk6TWlsZXN0b25lMjY2MTYzNQ==",
    "number": 11,
    "open_issues": 0,
    "state": "closed",
    "title": "1.0.1",
    "updated_at": "2018-02-28T16:26:24Z",
    "url": "https://api.github.com/repos/coredns/coredns/milestones/11"
  },
  "node_id": "MDU6SXNzdWUyNTYyMTAyNDA=",
  "number": 1035,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/coredns/coredns",
  "state": "closed",
  "title": "mw/proxy",
  "updated_at": "2018-01-07T20:59:20Z",
  "url": "https://api.github.com/repos/coredns/coredns/issues/1035",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/9447170?v=4",
    "events_url": "https://api.github.com/users/UladzimirTrehubenka/events{/privacy}",
    "followers_url": "https://api.github.com/users/UladzimirTrehubenka/followers",
    "following_url": "https://api.github.com/users/UladzimirTrehubenka/following{/other_user}",
    "gists_url": "https://api.github.com/users/UladzimirTrehubenka/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/UladzimirTrehubenka",
    "id": 9447170,
    "login": "UladzimirTrehubenka",
    "node_id": "MDQ6VXNlcjk0NDcxNzA=",
    "organizations_url": "https://api.github.com/users/UladzimirTrehubenka/orgs",
    "received_events_url": "https://api.github.com/users/UladzimirTrehubenka/received_events",
    "repos_url": "https://api.github.com/users/UladzimirTrehubenka/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/UladzimirTrehubenka/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/UladzimirTrehubenka/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/UladzimirTrehubenka"
  }
}