{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "External names in zone file are not resolved even with a upstream resolver configured:\r\n```\r\nexample.org:1053 {\r\n  file example.org example.org {\r\n    upstream 8.8.8.8\r\n  }\r\n\r\n  log stdout\r\n}\r\n```\r\n\r\nThe `example.org` file has a CNAME pointing to an [xip.io](http://xip.io/) subdomain, which resolves to `10.0.0.1`:\r\n```\r\n@       IN      SOA     sns.dns.icann.org. noc.dns.icann.org. 2017042703 7200 3600 1209600 3600\r\n        IN      NS      a.iana-servers.net.\r\n        IN      NS      b.iana-servers.net.\r\nwww     IN      CNAME   foobar.10.0.0.1.xip.io.\r\n```\r\n\r\nThe server however returns the CNAME record only:\r\n```\r\n$ dig www.example.org @127.0.0.1:1053\r\n;; ->>HEADER<<- opcode: QUERY; status: NOERROR; id: 9812\r\n;; Flags: qr aa rd ra; QUERY: 1; ANSWER: 1; AUTHORITY: 2; ADDITIONAL: 0\r\n\r\n;; QUESTION SECTION:\r\n;; www.example.org.    \t\tIN\tA\r\n\r\n;; ANSWER SECTION:\r\nwww.example.org.    \t3600\tIN\tCNAME\tfoobar.10.0.0.1.xip.io.\r\n\r\n;; AUTHORITY SECTION:\r\nexample.org.        \t3600\tIN\tNS\ta.iana-servers.net.\r\nexample.org.        \t3600\tIN\tNS\tb.iana-servers.net.\r\n```\r\n\r\nThe A record for `foobar.10.0.0.1.xip.io.` should be included in the answer section as well:\r\n```\r\nfoobar.10.0.0.1.xip.io.\t300\tIN\tA\t10.0.0.1\r\n```\r\n\r\nReproduced with latest build (4fc1318e).",
  "closed_at": "2017-05-03T15:36:42Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/353371?v=4",
    "events_url": "https://api.github.com/users/miekg/events{/privacy}",
    "followers_url": "https://api.github.com/users/miekg/followers",
    "following_url": "https://api.github.com/users/miekg/following{/other_user}",
    "gists_url": "https://api.github.com/users/miekg/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/miekg",
    "id": 353371,
    "login": "miekg",
    "node_id": "MDQ6VXNlcjM1MzM3MQ==",
    "organizations_url": "https://api.github.com/users/miekg/orgs",
    "received_events_url": "https://api.github.com/users/miekg/received_events",
    "repos_url": "https://api.github.com/users/miekg/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/miekg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/miekg/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/miekg"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/coredns/coredns/issues/657/comments",
  "created_at": "2017-05-02T07:52:39Z",
  "events_url": "https://api.github.com/repos/coredns/coredns/issues/657/events",
  "html_url": "https://github.com/coredns/coredns/issues/657",
  "id": 225617054,
  "labels": [],
  "labels_url": "https://api.github.com/repos/coredns/coredns/issues/657/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMjU2MTcwNTQ=",
  "number": 657,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/coredns/coredns",
  "state": "closed",
  "title": "middleware/file: external names not resolved",
  "updated_at": "2017-05-03T15:36:42Z",
  "url": "https://api.github.com/repos/coredns/coredns/issues/657",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/299999?v=4",
    "events_url": "https://api.github.com/users/ericyan/events{/privacy}",
    "followers_url": "https://api.github.com/users/ericyan/followers",
    "following_url": "https://api.github.com/users/ericyan/following{/other_user}",
    "gists_url": "https://api.github.com/users/ericyan/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ericyan",
    "id": 299999,
    "login": "ericyan",
    "node_id": "MDQ6VXNlcjI5OTk5OQ==",
    "organizations_url": "https://api.github.com/users/ericyan/orgs",
    "received_events_url": "https://api.github.com/users/ericyan/received_events",
    "repos_url": "https://api.github.com/users/ericyan/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ericyan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ericyan/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ericyan"
  }
}