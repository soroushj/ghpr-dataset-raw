{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "kubernetes plugin can not resolve service which using `externalName` to link another service. I guess this issue is similar to #1866 .\r\n\r\nCluster using `kubedns` cannot reproduce this issue.\r\n\r\n\r\n### How to reproduce\r\n\r\n```\r\n\u279c  kubectl get svc  # there is a service in default namespace named `kubernetes`\r\nNAME          TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)    AGE\r\nkubernetes    ClusterIP   172.21.0.1     <none>        443/TCP    9d\r\n\r\n\u279c  kubectl create -f -<<EOF # create a service link to service in default namespace\r\nheredoc> kind: Service\r\napiVersion: v1\r\nmetadata:\r\n  name: servicetest\r\n  namespace: testdns\r\nspec:\r\n  type: ExternalName\r\n  externalName: kubernetes.default.svc.cluster.local\r\nheredoc> EOF\r\nservice \"servicetest\" created\r\n\r\n\u279c  kubectl run -it --image registry.aliyuncs.com/wangbs/netdia --namespace testdns --rm busybox \r\nIf you don't see a command prompt, try pressing enter.\r\n/ # ping kubernetes.default.svc.cluster.local # `kubernetes` service can resolved directly\r\nPING kubernetes.default.svc.cluster.local. (172.21.0.1): 56 data bytes\r\n^C\r\n--- kubernetes.default.svc.cluster.local. ping statistics ---\r\n2 packets transmitted, 0 packets received, 100% packet loss\r\n\r\n/ # ping servicetest.testdns.svc.cluster.local # service linked to `kubernetes` cannot resolved\r\nping: bad address 'servicetest.testdns.svc.cluster.local'\r\n\r\n```\r\n\r\n\r\n### kubernetes version && coredns version\r\n\r\nk8s=1.10.4\r\ncoredns=1.2.0",
  "closed_at": "2018-08-25T12:53:42Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/14335541?v=4",
    "events_url": "https://api.github.com/users/chrisohaver/events{/privacy}",
    "followers_url": "https://api.github.com/users/chrisohaver/followers",
    "following_url": "https://api.github.com/users/chrisohaver/following{/other_user}",
    "gists_url": "https://api.github.com/users/chrisohaver/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/chrisohaver",
    "id": 14335541,
    "login": "chrisohaver",
    "node_id": "MDQ6VXNlcjE0MzM1NTQx",
    "organizations_url": "https://api.github.com/users/chrisohaver/orgs",
    "received_events_url": "https://api.github.com/users/chrisohaver/received_events",
    "repos_url": "https://api.github.com/users/chrisohaver/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/chrisohaver/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chrisohaver/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/chrisohaver"
  },
  "comments": 1,
  "comments_url": "https://api.github.com/repos/coredns/coredns/issues/2038/comments",
  "created_at": "2018-08-20T07:56:08Z",
  "events_url": "https://api.github.com/repos/coredns/coredns/issues/2038/events",
  "html_url": "https://github.com/coredns/coredns/issues/2038",
  "id": 352023669,
  "labels": [],
  "labels_url": "https://api.github.com/repos/coredns/coredns/issues/2038/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNTIwMjM2Njk=",
  "number": 2038,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/coredns/coredns",
  "state": "closed",
  "title": "Kubernetes service external-name link to another namespaces service not work.",
  "updated_at": "2019-02-19T20:48:52Z",
  "url": "https://api.github.com/repos/coredns/coredns/issues/2038",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/3598874?v=4",
    "events_url": "https://api.github.com/users/BSWANG/events{/privacy}",
    "followers_url": "https://api.github.com/users/BSWANG/followers",
    "following_url": "https://api.github.com/users/BSWANG/following{/other_user}",
    "gists_url": "https://api.github.com/users/BSWANG/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/BSWANG",
    "id": 3598874,
    "login": "BSWANG",
    "node_id": "MDQ6VXNlcjM1OTg4NzQ=",
    "organizations_url": "https://api.github.com/users/BSWANG/orgs",
    "received_events_url": "https://api.github.com/users/BSWANG/received_events",
    "repos_url": "https://api.github.com/users/BSWANG/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/BSWANG/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/BSWANG/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/BSWANG"
  }
}