{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/13387?v=4",
    "events_url": "https://api.github.com/users/jpkrohling/events{/privacy}",
    "followers_url": "https://api.github.com/users/jpkrohling/followers",
    "following_url": "https://api.github.com/users/jpkrohling/following{/other_user}",
    "gists_url": "https://api.github.com/users/jpkrohling/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jpkrohling",
    "id": 13387,
    "login": "jpkrohling",
    "node_id": "MDQ6VXNlcjEzMzg3",
    "organizations_url": "https://api.github.com/users/jpkrohling/orgs",
    "received_events_url": "https://api.github.com/users/jpkrohling/received_events",
    "repos_url": "https://api.github.com/users/jpkrohling/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jpkrohling/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jpkrohling/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jpkrohling"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/13387?v=4",
      "events_url": "https://api.github.com/users/jpkrohling/events{/privacy}",
      "followers_url": "https://api.github.com/users/jpkrohling/followers",
      "following_url": "https://api.github.com/users/jpkrohling/following{/other_user}",
      "gists_url": "https://api.github.com/users/jpkrohling/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jpkrohling",
      "id": 13387,
      "login": "jpkrohling",
      "node_id": "MDQ6VXNlcjEzMzg3",
      "organizations_url": "https://api.github.com/users/jpkrohling/orgs",
      "received_events_url": "https://api.github.com/users/jpkrohling/received_events",
      "repos_url": "https://api.github.com/users/jpkrohling/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jpkrohling/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jpkrohling/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jpkrohling"
    }
  ],
  "author_association": "NONE",
  "body": "Edit: duplicate of #961.\r\n\r\n## Requirement - what kind of business use case are you trying to solve?\r\n\r\nThe current behavior of clock skew adjustments is surprising and, why well-meant, not beneficial.\r\n\r\n## Problem - what in Jaeger blocks you from solving the requirement?\r\n\r\nExcuse the pun, I'm aware of the existing [issues](https://github.com/jaegertracing/jaeger/issues?q=adjuster).\r\n\r\n[The clock skew adjuster](https://github.com/jaegertracing/jaeger/blob/b5e2b65c690c3b4ed55e91f1afe1efb0570dc542/model/adjuster/clockskew.go#L148) currently makes the following assumptions:\r\n\r\n1. Spans are from different hosts, with parent and child span having roughly the same duration.\r\n2. Clock Skew is something unknown to people using monitoring\r\n3. It is best to hide this fact and instead of relying on administrators to fix this and offer a best guess workaround as an alternative, it's best to make things look \u201cnice\u201d\r\n\r\nConsidering 1.:\r\n\r\nThe algorithm uses the not well documented [`ip` tag](https://github.com/jaegertracing/jaeger/blob/b5e2b65c690c3b4ed55e91f1afe1efb0570dc542/model/adjuster/clockskew.go#L78) of the process to distinguish between hosts and assumes a missing tag [indicates a different host](https://github.com/jaegertracing/jaeger/blob/v1.11.0/model/adjuster/clockskew.go#L134).\r\n\r\nPeople using OpenTracing or OpenCensus usually only know about the service name, so a missing `ip` tag is expected, meaning the algorithm compensates nearly all spans. See\r\n\r\n- https://github.com/jaegertracing/jaeger/issues/722\r\n- https://github.com/jaegertracing/jaeger/issues/961\r\n- https://github.com/jaegertracing/jaeger/pull/606\r\n\r\nThen it [compares durations](https://github.com/jaegertracing/jaeger/blob/b5e2b65c690c3b4ed55e91f1afe1efb0570dc542/model/adjuster/clockskew.go#L154), which makes only sense one assumes that spans roughly have the same size.\r\n\r\nMost child spans would be shorter, so this is rarely the case. If a child span is a few nanoseconds longer I don't care, if it is really longer it should be flagged, but not shifted. It's wrong data and **really** hard to diagnose if it is processed afterwards.\r\n\r\nThen the algorithm checks if the end time of the child span is after the end time of the parent. While technically wrong, it is pretty easy to close the child span a couple of nanoseconds too late - probably a non-issue considering tracing, and at most something that should be a warning instead of moving the span around.\r\n\r\nLastly it assumes that span duration somehow correlates to network latency.\r\n\r\n## Proposal - what do you suggest to solve the problem or improve the existing situation?\r\n\r\nIf clock skew is an issue, the span context should try to compensate.\r\n\r\nConsidering 2. and 3. it would IMHO be best to not mess with the data by default and offer _beautification_ as an opt-in workaround, which is different than the currently solutions by turning it on by default and searching for a way to get rid of it.\r\n\r\nAlso, it might be useful to see clock skew by default, because it may affect other areas too.\r\n\r\n## Any open questions to address\r\n\r\nI saw very few comments where this skew adjustent is actually wanted. Maybe some of the supporters can chime in?",
  "closed_at": "2020-09-25T14:47:09Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/3523016?v=4",
    "events_url": "https://api.github.com/users/yurishkuro/events{/privacy}",
    "followers_url": "https://api.github.com/users/yurishkuro/followers",
    "following_url": "https://api.github.com/users/yurishkuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/yurishkuro/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/yurishkuro",
    "id": 3523016,
    "login": "yurishkuro",
    "node_id": "MDQ6VXNlcjM1MjMwMTY=",
    "organizations_url": "https://api.github.com/users/yurishkuro/orgs",
    "received_events_url": "https://api.github.com/users/yurishkuro/received_events",
    "repos_url": "https://api.github.com/users/yurishkuro/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/yurishkuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yurishkuro/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/yurishkuro"
  },
  "comments": 17,
  "comments_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1459/comments",
  "created_at": "2019-04-04T14:37:26Z",
  "events_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1459/events",
  "html_url": "https://github.com/jaegertracing/jaeger/issues/1459",
  "id": 429316260,
  "labels": [
    {
      "color": "cccccc",
      "default": true,
      "description": null,
      "id": 358839839,
      "name": "duplicate",
      "node_id": "MDU6TGFiZWwzNTg4Mzk4Mzk=",
      "url": "https://api.github.com/repos/jaegertracing/jaeger/labels/duplicate"
    }
  ],
  "labels_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1459/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MjkzMTYyNjA=",
  "number": 1459,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/jaegertracing/jaeger",
  "state": "closed",
  "title": "Clock Skew Adjuster considered harmful",
  "updated_at": "2020-09-25T14:47:09Z",
  "url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1459",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/604196?v=4",
    "events_url": "https://api.github.com/users/eikemeier/events{/privacy}",
    "followers_url": "https://api.github.com/users/eikemeier/followers",
    "following_url": "https://api.github.com/users/eikemeier/following{/other_user}",
    "gists_url": "https://api.github.com/users/eikemeier/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/eikemeier",
    "id": 604196,
    "login": "eikemeier",
    "node_id": "MDQ6VXNlcjYwNDE5Ng==",
    "organizations_url": "https://api.github.com/users/eikemeier/orgs",
    "received_events_url": "https://api.github.com/users/eikemeier/received_events",
    "repos_url": "https://api.github.com/users/eikemeier/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/eikemeier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eikemeier/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/eikemeier"
  }
}