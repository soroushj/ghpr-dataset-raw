{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "## Requirement - what kind of business use case are you trying to solve?\r\n\r\nForward traces from kafka storage to elasticsearch storage with jaeger-ingester deployed to kubernetes-cluster. There are periods when traced system is not used and no traces are being recorded.\r\n\r\n## Problem - what in Jaeger blocks you from solving the requirement?\r\n\r\nWhen ingester does not process any message for `Time.Minute` process dies with:\r\n\r\n```\r\n{\"level\":\"panic\",\"ts\":1539766162.6593273,\"caller\":\"consumer/deadlock_detector.go:69\",\"msg\":\"No messages processed in the last check interval\"\r\n```\r\n\r\nThat stops docker container. Kubernetes brings it back, but with exponential backoff. Each restart makes pauses longer.\r\nIf not using kubernetes or some systemd manager, that keeps starting ingester it would just die and stay that way.\r\n\r\n## Proposal - what do you suggest to solve the problem or improve the existing situation?\r\n\r\n* Trust kafka client (sarama) build in fail detection mechanism. Possibly in combination with exposing kafka consumer options (like read message timeouts) to be configurable.\r\n* Restart consumer within running process (build new consumer and bootstrap app without exiting).\r\n* Expose configuration for deadlock_detector tick duration - does not solve a problem, but helps managing impact on business.\r\n\r\n## Any open questions to address\r\n\r\nWhich of proposed solutions is best?",
  "closed_at": "2018-11-12T21:41:36Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5618424?v=4",
    "events_url": "https://api.github.com/users/pavolloffay/events{/privacy}",
    "followers_url": "https://api.github.com/users/pavolloffay/followers",
    "following_url": "https://api.github.com/users/pavolloffay/following{/other_user}",
    "gists_url": "https://api.github.com/users/pavolloffay/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pavolloffay",
    "id": 5618424,
    "login": "pavolloffay",
    "node_id": "MDQ6VXNlcjU2MTg0MjQ=",
    "organizations_url": "https://api.github.com/users/pavolloffay/orgs",
    "received_events_url": "https://api.github.com/users/pavolloffay/received_events",
    "repos_url": "https://api.github.com/users/pavolloffay/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pavolloffay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pavolloffay/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pavolloffay"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1125/comments",
  "created_at": "2018-10-17T09:03:06Z",
  "events_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1125/events",
  "html_url": "https://github.com/jaegertracing/jaeger/issues/1125",
  "id": 370969660,
  "labels": [],
  "labels_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1125/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNzA5Njk2NjA=",
  "number": 1125,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/jaegertracing/jaeger",
  "state": "closed",
  "title": "Ingester panics when no messages is processed in 1 minute",
  "updated_at": "2018-11-12T21:41:36Z",
  "url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1125",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/10026873?v=4",
    "events_url": "https://api.github.com/users/marqc/events{/privacy}",
    "followers_url": "https://api.github.com/users/marqc/followers",
    "following_url": "https://api.github.com/users/marqc/following{/other_user}",
    "gists_url": "https://api.github.com/users/marqc/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/marqc",
    "id": 10026873,
    "login": "marqc",
    "node_id": "MDQ6VXNlcjEwMDI2ODcz",
    "organizations_url": "https://api.github.com/users/marqc/orgs",
    "received_events_url": "https://api.github.com/users/marqc/received_events",
    "repos_url": "https://api.github.com/users/marqc/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/marqc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/marqc/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/marqc"
  }
}