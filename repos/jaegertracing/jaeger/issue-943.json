{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "## Requirement - what kind of business use case are you trying to solve?\r\nAvoiding dropping of spans on the collector side when the backing storage isn't really fast, but enough memory is available for a bigger buffer on the collector size\r\n\r\n## Problem - what in Jaeger blocks you from solving the requirement?\r\nUnder stress conditions, the default queue size of 2000 causes spans to be dropped quite frequently, even though there's enough memory to have a bigger queue size\r\n\r\n## Proposal - what do you suggest to solve the problem or improve the existing situation?\r\nThe first idea is to have a dynamic collector queue size, with the following characteristics\r\n\r\n- [ ] Heuristics to determine the \"average\" span size in memory (could also be used for the in-memory storage)\r\n- [ ] Flag to specify a memory size for the queue (default: half of the host's memory? 25%?)\r\n- [ ] Adjust the queue size based a simple division of the above\r\n- [ ] Update a metrics gauge with the current queue size\r\n- [ ] Flag to enable usage of this new collector queue mechanism",
  "closed_at": "2020-01-23T09:37:18Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/13387?v=4",
    "events_url": "https://api.github.com/users/jpkrohling/events{/privacy}",
    "followers_url": "https://api.github.com/users/jpkrohling/followers",
    "following_url": "https://api.github.com/users/jpkrohling/following{/other_user}",
    "gists_url": "https://api.github.com/users/jpkrohling/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jpkrohling",
    "id": 13387,
    "login": "jpkrohling",
    "node_id": "MDQ6VXNlcjEzMzg3",
    "organizations_url": "https://api.github.com/users/jpkrohling/orgs",
    "received_events_url": "https://api.github.com/users/jpkrohling/received_events",
    "repos_url": "https://api.github.com/users/jpkrohling/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jpkrohling/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jpkrohling/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jpkrohling"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/943/comments",
  "created_at": "2018-07-19T08:56:53Z",
  "events_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/943/events",
  "html_url": "https://github.com/jaegertracing/jaeger/issues/943",
  "id": 342638419,
  "labels": [
    {
      "color": "84b6eb",
      "default": true,
      "description": null,
      "id": 358839840,
      "name": "enhancement",
      "node_id": "MDU6TGFiZWwzNTg4Mzk4NDA=",
      "url": "https://api.github.com/repos/jaegertracing/jaeger/labels/enhancement"
    }
  ],
  "labels_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/943/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNDI2Mzg0MTk=",
  "number": 943,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/jaegertracing/jaeger",
  "state": "closed",
  "title": "Memory-sensitive collector queue size",
  "updated_at": "2020-01-23T09:37:18Z",
  "url": "https://api.github.com/repos/jaegertracing/jaeger/issues/943",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/13387?v=4",
    "events_url": "https://api.github.com/users/jpkrohling/events{/privacy}",
    "followers_url": "https://api.github.com/users/jpkrohling/followers",
    "following_url": "https://api.github.com/users/jpkrohling/following{/other_user}",
    "gists_url": "https://api.github.com/users/jpkrohling/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jpkrohling",
    "id": 13387,
    "login": "jpkrohling",
    "node_id": "MDQ6VXNlcjEzMzg3",
    "organizations_url": "https://api.github.com/users/jpkrohling/orgs",
    "received_events_url": "https://api.github.com/users/jpkrohling/received_events",
    "repos_url": "https://api.github.com/users/jpkrohling/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jpkrohling/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jpkrohling/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jpkrohling"
  }
}