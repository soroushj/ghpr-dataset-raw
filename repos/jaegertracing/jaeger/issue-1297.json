{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "\r\n<!--\r\nWelcome to the Jaeger project! \ud83d\udc4b\ud83c\udf89\r\n\r\n- Please search for existing issues to avoid creating duplicate bugs/feature requests.\r\n- Please be respectful and considerate of others when commenting on issues.\r\n- Please provide as much information as possible so we all understand the issue.\r\n- If you only have a question, you may get a faster response by asking in\r\n    - our chat room https://gitter.im/jaegertracing/Lobby, or\r\n    - the forum https://groups.google.com/d/forum/jaeger-tracing\r\n    (but please don't double post)\r\n-->\r\n\r\n## Requirement - what kind of business use case are you trying to solve?\r\nWhen using the  search function of jaeger-query, if the data to be queried is very large, the method multiRead in \"github.com/jaegertracing/jaeger/plugin/storage/es/spanstore/reader.go\" will query the storage more than once. There is a bug in this method that causes queried data may be repeated probably.\r\n[https://github.com/jaegertracing/jaeger/blob/master/plugin/storage/es/spanstore/reader.go](url)\r\n<!-- required section -->\r\n\r\n## Problem - what in Jaeger blocks you from solving the requirement?\r\n![default](https://user-images.githubusercontent.com/34932896/51676080-84239200-2010-11e9-85ff-bf650e473b9e.PNG)\r\nThe array of searchRequests is been maked  Outside the for loop\uff0cthe length of it equals the slice of traceIds.  When  it query second time in the for loop\uff0cthe length of traceIds will be changed\uff0cbut the length of searchRequests  will not. This bug may cause repeated traceId be queried.like this:\r\n![20190124-200601 espace](https://user-images.githubusercontent.com/34932896/51677337-458fd680-2014-11e9-9b9a-45822886a16a.png)\r\nThere is #duplicated span in this trace\r\n<!-- required section -->\r\n<!-- If possible, describe the impact of the problem. -->\r\n\r\n## Proposal - what do you suggest to solve the problem or improve the existing situation?\r\nMaybe  we can initial searchRequests in for loop\uff0cthe length of it will equals the slice of traceIds Always.\r\n<!-- It's ok if you don't have one. -->\r\n\r\n## Any open questions to address\r\n\r\n<!-- Questions that should be answered before proceeding with implementation. -->\r\n",
  "closed_at": "2019-08-14T12:18:10Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5618424?v=4",
    "events_url": "https://api.github.com/users/pavolloffay/events{/privacy}",
    "followers_url": "https://api.github.com/users/pavolloffay/followers",
    "following_url": "https://api.github.com/users/pavolloffay/following{/other_user}",
    "gists_url": "https://api.github.com/users/pavolloffay/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pavolloffay",
    "id": 5618424,
    "login": "pavolloffay",
    "node_id": "MDQ6VXNlcjU2MTg0MjQ=",
    "organizations_url": "https://api.github.com/users/pavolloffay/orgs",
    "received_events_url": "https://api.github.com/users/pavolloffay/received_events",
    "repos_url": "https://api.github.com/users/pavolloffay/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pavolloffay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pavolloffay/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pavolloffay"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1297/comments",
  "created_at": "2019-01-24T12:26:35Z",
  "events_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1297/events",
  "html_url": "https://github.com/jaegertracing/jaeger/issues/1297",
  "id": 402684145,
  "labels": [
    {
      "color": "ee0701",
      "default": true,
      "description": null,
      "id": 358839838,
      "name": "bug",
      "node_id": "MDU6TGFiZWwzNTg4Mzk4Mzg=",
      "url": "https://api.github.com/repos/jaegertracing/jaeger/labels/bug"
    },
    {
      "color": "fbca04",
      "default": false,
      "description": "",
      "id": 1013715498,
      "name": "storage/elasticsearch",
      "node_id": "MDU6TGFiZWwxMDEzNzE1NDk4",
      "url": "https://api.github.com/repos/jaegertracing/jaeger/labels/storage/elasticsearch"
    }
  ],
  "labels_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1297/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MDI2ODQxNDU=",
  "number": 1297,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/jaegertracing/jaeger",
  "state": "closed",
  "title": "querying data repeatedly makes duplicated span on jaeger-ui",
  "updated_at": "2019-08-14T12:18:10Z",
  "url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1297",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/34932896?v=4",
    "events_url": "https://api.github.com/users/crazycomputer/events{/privacy}",
    "followers_url": "https://api.github.com/users/crazycomputer/followers",
    "following_url": "https://api.github.com/users/crazycomputer/following{/other_user}",
    "gists_url": "https://api.github.com/users/crazycomputer/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/crazycomputer",
    "id": 34932896,
    "login": "crazycomputer",
    "node_id": "MDQ6VXNlcjM0OTMyODk2",
    "organizations_url": "https://api.github.com/users/crazycomputer/orgs",
    "received_events_url": "https://api.github.com/users/crazycomputer/received_events",
    "repos_url": "https://api.github.com/users/crazycomputer/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/crazycomputer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/crazycomputer/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/crazycomputer"
  }
}