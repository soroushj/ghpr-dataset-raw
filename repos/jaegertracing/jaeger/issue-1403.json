{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5618424?v=4",
    "events_url": "https://api.github.com/users/pavolloffay/events{/privacy}",
    "followers_url": "https://api.github.com/users/pavolloffay/followers",
    "following_url": "https://api.github.com/users/pavolloffay/following{/other_user}",
    "gists_url": "https://api.github.com/users/pavolloffay/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pavolloffay",
    "id": 5618424,
    "login": "pavolloffay",
    "node_id": "MDQ6VXNlcjU2MTg0MjQ=",
    "organizations_url": "https://api.github.com/users/pavolloffay/orgs",
    "received_events_url": "https://api.github.com/users/pavolloffay/received_events",
    "repos_url": "https://api.github.com/users/pavolloffay/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pavolloffay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pavolloffay/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pavolloffay"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/5618424?v=4",
      "events_url": "https://api.github.com/users/pavolloffay/events{/privacy}",
      "followers_url": "https://api.github.com/users/pavolloffay/followers",
      "following_url": "https://api.github.com/users/pavolloffay/following{/other_user}",
      "gists_url": "https://api.github.com/users/pavolloffay/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/pavolloffay",
      "id": 5618424,
      "login": "pavolloffay",
      "node_id": "MDQ6VXNlcjU2MTg0MjQ=",
      "organizations_url": "https://api.github.com/users/pavolloffay/orgs",
      "received_events_url": "https://api.github.com/users/pavolloffay/received_events",
      "repos_url": "https://api.github.com/users/pavolloffay/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/pavolloffay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pavolloffay/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/pavolloffay"
    }
  ],
  "author_association": "MEMBER",
  "body": "The init operation: `python3  plugin/storage/es/esRollover.py init http://localhost:9200` fails if the index already exists. I would like to make it idempotent. It's useful when Jaeger is re-deployed with the same storage.\r\n\r\nThe cassandra create schema is also idempotent.\r\n\r\n```\r\n oc logs po/simple-prod-elasticsearch-create-mapping-q9wq9                                                                                                 \ue0b2 3:07 \r\nPUT http://elasticsearch:9200/jaeger-span-000001 [status:400 request:0.006s]\r\nCreating index template jaeger-span\r\n{\"acknowledged\":true}\r\nCreating index jaeger-span-000001\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/actions.py\", line 450, in do_action\r\n    self.client.indices.create(index=self.name, body=self.body)\r\n  File \"/usr/local/lib/python3.7/site-packages/elasticsearch/client/utils.py\", line 76, in _wrapped\r\n    return func(*args, params=params, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/elasticsearch/client/indices.py\", line 88, in create\r\n    params=params, body=body)\r\n  File \"/usr/local/lib/python3.7/site-packages/elasticsearch/transport.py\", line 318, in perform_request\r\n    status, headers_response, data = connection.perform_request(method, url, params, body, headers=headers, ignore=ignore, timeout=timeout)\r\n  File \"/usr/local/lib/python3.7/site-packages/elasticsearch/connection/http_urllib3.py\", line 186, in perform_request\r\n    self._raise_error(response.status, raw_data)\r\n  File \"/usr/local/lib/python3.7/site-packages/elasticsearch/connection/base.py\", line 125, in _raise_error\r\n    raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)\r\nelasticsearch.exceptions.RequestError: RequestError(400, 'resource_already_exists_exception', 'index [jaeger-span-000001/kaGh5-YWSFu70bcphtmADQ] already exists')\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/es-rollover/esRollover.py\", line 194, in <module>\r\n    main()\r\n  File \"/es-rollover/esRollover.py\", line 73, in main\r\n    perform_action(action, client, write_alias, read_alias, prefix+'jaeger-span', 'jaeger-span')\r\n  File \"/es-rollover/esRollover.py\", line 87, in perform_action\r\n    create_index(client, index)\r\n  File \"/es-rollover/esRollover.py\", line 115, in create_index\r\n    create.do_action()\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/actions.py\", line 452, in do_action\r\n    utils.report_failure(e)\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/utils.py\", line 173, in report_failure\r\n    'Exception: {0}'.format(exception)\r\ncurator.exceptions.FailedExecution: Exception encountered.  Rerun with loglevel DEBUG and/or check Elasticsearch logs for more information. Exception: RequestError(400, 'resource_already_exists_exception', 'index [jaeger-span-000001/kaGh5-YWSFu70bcphtmADQ] already exists')\r\n```",
  "closed_at": "2019-03-06T16:04:19Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5618424?v=4",
    "events_url": "https://api.github.com/users/pavolloffay/events{/privacy}",
    "followers_url": "https://api.github.com/users/pavolloffay/followers",
    "following_url": "https://api.github.com/users/pavolloffay/following{/other_user}",
    "gists_url": "https://api.github.com/users/pavolloffay/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pavolloffay",
    "id": 5618424,
    "login": "pavolloffay",
    "node_id": "MDQ6VXNlcjU2MTg0MjQ=",
    "organizations_url": "https://api.github.com/users/pavolloffay/orgs",
    "received_events_url": "https://api.github.com/users/pavolloffay/received_events",
    "repos_url": "https://api.github.com/users/pavolloffay/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pavolloffay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pavolloffay/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pavolloffay"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1403/comments",
  "created_at": "2019-03-05T14:25:24Z",
  "events_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1403/events",
  "html_url": "https://github.com/jaegertracing/jaeger/issues/1403",
  "id": 417324266,
  "labels": [
    {
      "color": "fbca04",
      "default": false,
      "description": "",
      "id": 1013715498,
      "name": "storage/elasticsearch",
      "node_id": "MDU6TGFiZWwxMDEzNzE1NDk4",
      "url": "https://api.github.com/repos/jaegertracing/jaeger/labels/storage/elasticsearch"
    }
  ],
  "labels_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1403/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MTczMjQyNjY=",
  "number": 1403,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/jaegertracing/jaeger",
  "state": "closed",
  "title": "Make rollover init idempotent ",
  "updated_at": "2019-03-06T16:04:22Z",
  "url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1403",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5618424?v=4",
    "events_url": "https://api.github.com/users/pavolloffay/events{/privacy}",
    "followers_url": "https://api.github.com/users/pavolloffay/followers",
    "following_url": "https://api.github.com/users/pavolloffay/following{/other_user}",
    "gists_url": "https://api.github.com/users/pavolloffay/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pavolloffay",
    "id": 5618424,
    "login": "pavolloffay",
    "node_id": "MDQ6VXNlcjU2MTg0MjQ=",
    "organizations_url": "https://api.github.com/users/pavolloffay/orgs",
    "received_events_url": "https://api.github.com/users/pavolloffay/received_events",
    "repos_url": "https://api.github.com/users/pavolloffay/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pavolloffay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pavolloffay/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pavolloffay"
  }
}