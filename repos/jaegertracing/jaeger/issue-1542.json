{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "Jaeger 1.12.0 query/all-in-one generates 2 error messages on shutdown (SIGINT):\r\n\r\n> {\"level\":\"error\",\"ts\":1557924794.5416982,\"caller\":\"app/server.go:127\",\"msg\":\"Could not start multiplexed server\",\"error\":\"accept tcp [::]:16686: use of closed network connection\",\"stacktrace\":\"github.com/jaegertracing/jaeger/cmd/query/app.(*Server).Start.func3\\n\\t/home/ploffay/projects/golang/src/github.com/jaegertracing/jaeger/cmd/query/app/server.go:127\"}\r\n\r\n> {\"level\":\"error\",\"ts\":1557924794.5418048,\"caller\":\"app/server.go:109\",\"msg\":\"Could not start HTTP server\",\"error\":\"http: Server closed\",\"stacktrace\":\"github.com/jaegertracing/jaeger/cmd/query/app.(*Server).Start.func1\\n\\t/home/ploffay/projects/golang/src/github.com/jaegertracing/jaeger/cmd/query/app/server.go:109\"}\r\n\r\nThose messages should not be there as it is a normal termination of the process.\r\n\r\nJaeger 1.11.0 output\r\n```\r\n{\"level\":\"info\",\"ts\":1557923870.4618723,\"caller\":\"healthcheck/handler.go:99\",\"msg\":\"Health Check server started\",\"http-port\":14269,\"status\":\"unavailable\"}\r\n{\"level\":\"info\",\"ts\":1557923870.4620156,\"caller\":\"memory/factory.go:55\",\"msg\":\"Memory storage configuration\",\"configuration\":{\"MaxTraces\":0}}\r\n{\"level\":\"info\",\"ts\":1557923870.4621208,\"caller\":\"static/strategy_store.go:79\",\"msg\":\"No sampling strategies provided, using defaults\"}\r\nWARNING: 2019/05/15 14:37:50 grpc: addrConn.createTransport failed to connect to {127.0.0.1:14250 0  <nil>}. Err :connection error: desc = \"transport: Error while dialing dial tcp 127.0.0.1:14250: connect: connection refused\". Reconnecting...\r\n{\"level\":\"info\",\"ts\":1557923870.4652264,\"caller\":\"all-in-one/main.go:211\",\"msg\":\"Starting agent\"}\r\n{\"level\":\"info\",\"ts\":1557923870.465499,\"caller\":\"app/agent.go:68\",\"msg\":\"Starting jaeger-agent HTTP server\",\"http-port\":5778}\r\n{\"level\":\"info\",\"ts\":1557923870.465974,\"caller\":\"all-in-one/main.go:253\",\"msg\":\"Starting jaeger-collector TChannel server\",\"port\":14267}\r\n{\"level\":\"info\",\"ts\":1557923870.466026,\"caller\":\"grpcserver/grpc_server.go:64\",\"msg\":\"Starting jaeger-collector gRPC server\",\"grpc-port\":\"14250\"}\r\n{\"level\":\"info\",\"ts\":1557923870.4660544,\"caller\":\"all-in-one/main.go:271\",\"msg\":\"Starting jaeger-collector HTTP server\",\"http-port\":14268}\r\n{\"level\":\"info\",\"ts\":1557923870.4660826,\"caller\":\"all-in-one/main.go:399\",\"msg\":\"Archive storage not created\",\"reason\":\"Archive storage not supported\"}\r\n{\"level\":\"info\",\"ts\":1557923870.4677374,\"caller\":\"all-in-one/main.go:360\",\"msg\":\"Registering metrics handler with jaeger-query HTTP server\",\"route\":\"/metrics\"}\r\n{\"level\":\"info\",\"ts\":1557923870.4677625,\"caller\":\"all-in-one/main.go:366\",\"msg\":\"Starting jaeger-query HTTP server\",\"port\":16686}\r\n{\"level\":\"info\",\"ts\":1557923870.4677749,\"caller\":\"healthcheck/handler.go:133\",\"msg\":\"Health Check state change\",\"status\":\"ready\"}\r\n^C{\"level\":\"info\",\"ts\":1557923873.034265,\"caller\":\"all-in-one/main.go:149\",\"msg\":\"Shutting down\"}\r\n{\"level\":\"info\",\"ts\":1557923873.0343597,\"caller\":\"all-in-one/main.go:157\",\"msg\":\"Shutdown complete\"}\r\n```\r\n\r\nJaeger 1.12.0 output\r\n```\r\n{\"level\":\"info\",\"ts\":1557924790.7362473,\"caller\":\"flags/service.go:113\",\"msg\":\"Mounting metrics handler on admin server\",\"route\":\"/metrics\"}\r\n{\"level\":\"info\",\"ts\":1557924790.7364206,\"caller\":\"flags/admin.go:108\",\"msg\":\"Mounting health check on admin server\",\"route\":\"/\"}\r\n{\"level\":\"info\",\"ts\":1557924790.7364788,\"caller\":\"flags/admin.go:114\",\"msg\":\"Starting admin HTTP server\",\"http-port\":14269}\r\n{\"level\":\"info\",\"ts\":1557924790.736494,\"caller\":\"flags/admin.go:100\",\"msg\":\"Admin server started\",\"http-port\":14269,\"health-status\":\"unavailable\"}\r\n{\"level\":\"info\",\"ts\":1557924790.7381833,\"caller\":\"memory/factory.go:55\",\"msg\":\"Memory storage initialized\",\"configuration\":{\"MaxTraces\":0}}\r\n{\"level\":\"info\",\"ts\":1557924790.7383587,\"caller\":\"static/strategy_store.go:79\",\"msg\":\"No sampling strategies provided, using defaults\"}\r\n{\"level\":\"info\",\"ts\":1557924790.7411678,\"caller\":\"grpc/builder.go:75\",\"msg\":\"Agent requested insecure grpc connection to collector(s)\"}\r\nWARNING: 2019/05/15 14:53:10 grpc: addrConn.createTransport failed to connect to {127.0.0.1:14250 0  <nil>}. Err :connection error: desc = \"transport: Error while dialing dial tcp 127.0.0.1:14250: connect: connection refused\". Reconnecting...\r\n{\"level\":\"info\",\"ts\":1557924790.7417045,\"caller\":\"all-in-one/main.go:195\",\"msg\":\"Starting agent\"}\r\n{\"level\":\"info\",\"ts\":1557924790.7418346,\"caller\":\"app/agent.go:68\",\"msg\":\"Starting jaeger-agent HTTP server\",\"http-port\":5778}\r\n{\"level\":\"info\",\"ts\":1557924790.742618,\"caller\":\"all-in-one/main.go:238\",\"msg\":\"Starting jaeger-collector TChannel server\",\"port\":14267}\r\n{\"level\":\"info\",\"ts\":1557924790.7426636,\"caller\":\"grpcserver/grpc_server.go:64\",\"msg\":\"Starting jaeger-collector gRPC server\",\"grpc-port\":\"14250\"}\r\n{\"level\":\"info\",\"ts\":1557924790.742699,\"caller\":\"all-in-one/main.go:256\",\"msg\":\"Starting jaeger-collector HTTP server\",\"http-port\":14268}\r\n{\"level\":\"info\",\"ts\":1557924790.7427151,\"caller\":\"querysvc/query_service.go:130\",\"msg\":\"Archive storage not created\",\"reason\":\"archive storage not supported\"}\r\n{\"level\":\"info\",\"ts\":1557924790.742728,\"caller\":\"all-in-one/main.go:338\",\"msg\":\"Archive storage not initialized\"}\r\n{\"level\":\"info\",\"ts\":1557924790.7431312,\"caller\":\"healthcheck/handler.go:129\",\"msg\":\"Health Check state change\",\"status\":\"ready\"}\r\n{\"level\":\"info\",\"ts\":1557924790.743133,\"caller\":\"app/server.go:107\",\"msg\":\"Starting HTTP server\",\"port\":16686}\r\n{\"level\":\"info\",\"ts\":1557924790.7431507,\"caller\":\"app/server.go:125\",\"msg\":\"Starting CMUX server\",\"port\":16686}\r\n{\"level\":\"info\",\"ts\":1557924790.743178,\"caller\":\"app/server.go:116\",\"msg\":\"Starting GRPC server\",\"port\":16686}\r\n^C{\"level\":\"info\",\"ts\":1557924794.5406473,\"caller\":\"flags/service.go:143\",\"msg\":\"Shutting down\"}\r\n{\"level\":\"info\",\"ts\":1557924794.5407808,\"caller\":\"healthcheck/handler.go:129\",\"msg\":\"Health Check state change\",\"status\":\"unavailable\"}\r\n{\"level\":\"error\",\"ts\":1557924794.5416982,\"caller\":\"app/server.go:127\",\"msg\":\"Could not start multiplexed server\",\"error\":\"accept tcp [::]:16686: use of closed network connection\",\"stacktrace\":\"github.com/jaegertracing/jaeger/cmd/query/app.(*Server).Start.func3\\n\\t/home/ploffay/projects/golang/src/github.com/jaegertracing/jaeger/cmd/query/app/server.go:127\"}\r\n{\"level\":\"info\",\"ts\":1557924794.54186,\"caller\":\"flags/service.go:151\",\"msg\":\"Shutdown complete\"}\r\n{\"level\":\"error\",\"ts\":1557924794.5418048,\"caller\":\"app/server.go:109\",\"msg\":\"Could not start HTTP server\",\"error\":\"http: Server closed\",\"stacktrace\":\"github.com/jaegertracing/jaeger/cmd/query/app.(*Server).Start.func1\\n\\t/home/ploffay/projects/golang/src/github.com/jaegertracing/jaeger/cmd/query/app/server.go:109\"}\r\n```",
  "closed_at": "2019-06-17T18:19:18Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/3523016?v=4",
    "events_url": "https://api.github.com/users/yurishkuro/events{/privacy}",
    "followers_url": "https://api.github.com/users/yurishkuro/followers",
    "following_url": "https://api.github.com/users/yurishkuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/yurishkuro/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/yurishkuro",
    "id": 3523016,
    "login": "yurishkuro",
    "node_id": "MDQ6VXNlcjM1MjMwMTY=",
    "organizations_url": "https://api.github.com/users/yurishkuro/orgs",
    "received_events_url": "https://api.github.com/users/yurishkuro/received_events",
    "repos_url": "https://api.github.com/users/yurishkuro/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/yurishkuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yurishkuro/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/yurishkuro"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1542/comments",
  "created_at": "2019-05-16T08:52:04Z",
  "events_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1542/events",
  "html_url": "https://github.com/jaegertracing/jaeger/issues/1542",
  "id": 444831706,
  "labels": [
    {
      "color": "ee0701",
      "default": true,
      "description": null,
      "id": 358839838,
      "name": "bug",
      "node_id": "MDU6TGFiZWwzNTg4Mzk4Mzg=",
      "url": "https://api.github.com/repos/jaegertracing/jaeger/labels/bug"
    },
    {
      "color": "128A0C",
      "default": true,
      "description": "Features that maintainers are willing to accept but do not have cycles to implement",
      "id": 358839841,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWwzNTg4Mzk4NDE=",
      "url": "https://api.github.com/repos/jaegertracing/jaeger/labels/help%20wanted"
    }
  ],
  "labels_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1542/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0NDQ4MzE3MDY=",
  "number": 1542,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/jaegertracing/jaeger",
  "state": "closed",
  "title": "Query and all-in-one generates error message on SIGINT",
  "updated_at": "2019-06-17T18:19:18Z",
  "url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1542",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5618424?v=4",
    "events_url": "https://api.github.com/users/pavolloffay/events{/privacy}",
    "followers_url": "https://api.github.com/users/pavolloffay/followers",
    "following_url": "https://api.github.com/users/pavolloffay/following{/other_user}",
    "gists_url": "https://api.github.com/users/pavolloffay/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pavolloffay",
    "id": 5618424,
    "login": "pavolloffay",
    "node_id": "MDQ6VXNlcjU2MTg0MjQ=",
    "organizations_url": "https://api.github.com/users/pavolloffay/orgs",
    "received_events_url": "https://api.github.com/users/pavolloffay/received_events",
    "repos_url": "https://api.github.com/users/pavolloffay/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pavolloffay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pavolloffay/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pavolloffay"
  }
}