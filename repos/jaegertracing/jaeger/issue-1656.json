{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "## Requirement - what kind of business use case are you trying to solve?\r\n\r\nRun jaeger agent on armv7l architecture.\r\n\r\n## Problem - what in Jaeger blocks you from solving the requirement?\r\n\r\nRunning Jaeger agent on arm causes segfault in the go atomics library. \r\nLine 99 here: https://golang.org/src/runtime/internal/atomic/atomic_arm.go\r\n\r\nIn go it is the responsibility of the developer to properly pad structs such that they are 64 bit aligned. Issue referenced here: https://github.com/golang/go/issues/11891\r\n\r\n## Proposal - what do you suggest to solve the problem or improve the existing situation?\r\n\r\nI have not identified the exact struct which is not properly mem aligned, but if found, rearranging the ordering of struct fields would solve the problem.\r\n\r\n## Stack Trace\r\n\r\n```\r\n\r\nJuly 5th 2019, 14:03:27.050 | goroutine 35 [running]:\r\n-- | --\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.050 | u0009/go/src/github.com/jaegertracing/jaeger/vendor/github.com/uber-go/atomic/atomic.go:190\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.050 | github.com/jaegertracing/jaeger/vendor/github.com/uber-go/atomic.(*Uint64).Inc(...)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.050 | panic: runtime error: invalid memory address or nil pointer dereference\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.050 | \u00a0\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.050 | runtime/internal/atomic.goXadd64(0x1d34ef4, 0x1, 0x0, 0x1d83440, 0x88870)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.050 | u0009/go/src/github.com/jaegertracing/jaeger/vendor/github.com/uber-go/atomic/atomic.go:200\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.050 | github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go.(*PeerList).choosePeer(0x1d65400, 0x0, 0x1d65401, 0x0)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.050 | u0009/usr/local/go/src/runtime/internal/atomic/atomic_arm.go:99 +0x1c\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.050 | github.com/jaegertracing/jaeger/vendor/github.com/uber-go/atomic.(*Uint64).Add(...)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.050 | u0009/go/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go/peer.go:213 +0x238\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.050 | [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x120c0]\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.051 | github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go.(*PeerList).GetNew(0x1d65400, 0x0, 0x0, 0x0, 0x0)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.051 | u0009/go/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go/peer.go:146 +0x24\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.051 | github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go.(*PeerList).Get(0x1d65400, 0x0, 0x1ed200b, 0x895353, 0xd)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.051 | u0009/go/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go/peer.go:133 +0x98\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go.(*SubChannel).BeginCall(0x1d3b680, 0x9c6d18, 0x1df2450, 0x1ed2000, 0x18, 0x1eccbfc, 0x45892c, 0x0, 0x1eccbb8)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | u0009/go/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go/subchannel.go:86 +0x48\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go.(*Channel).RunWithRetry(0x1dd4000, 0x9c6d18, 0x1df2450, 0x1dd02c0, 0x0, 0x0)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/thrift-gen/jaeger.(*tchanCollectorClient).SubmitBatches(0x1c0dcc0, 0xb6d890d0, 0x1df2450, 0x1df2458, 0x1, 0x1, 0xb6d890d0, 0x9c6818, 0x681f34, 0x82bc28, ...)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | u0009/go/src/github.com/jaegertracing/jaeger/cmd/agent/app/reporter/tchannel/reporter.go:83 +0x80\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/thrift-gen/jaeger.(*agentProcessorEmitBatch).Process(0x1e1e160, 0x2, 0x9cebc0, 0x1eb36c0, 0x9cebc0, 0x1eb36c0, 0x0, 0x40fdb0, 0x20)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go/thrift.(*client).Call(0x1d83460, 0xb6d890d0, 0x1df2450, 0x891a71, 0x9, 0x895353, 0xd, 0x9c1218, 0x1e78070, 0x9c1230, ...)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/cmd/agent/app/reporter/tchannel.(*Reporter).submitAndReport(0x1c25830, 0x1e78050, 0x8a31be, 0x1d, 0x1, 0x0, 0x0, 0x0)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/cmd/agent/app/reporter.(*MetricsReporter).EmitBatch(0x1c8cd40, 0x1e78020, 0x0, 0x0)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | u0009/go/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go/thrift/client.go:136 +0x168\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | u0009/go/src/github.com/jaegertracing/jaeger/thrift-gen/jaeger/tchan-jaeger.go:44 +0xc0\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/cmd/agent/app/reporter/tchannel.(*Reporter).EmitBatch.func1(0xb6d890d0, 0x1df2450, 0x1df2450, 0xb6d890d0)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/cmd/agent/app/reporter/tchannel.(*Reporter).EmitBatch(0x1c25830, 0x1e78020, 0x0, 0x1ec601c)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | u0009/go/src/github.com/jaegertracing/jaeger/cmd/agent/app/reporter/metrics.go:77 +0x4c\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/thrift-gen/jaeger.(*AgentProcessor).Process(0x1c8d490, 0x9cebc0, 0x1eb36c0, 0x9cebc0, 0x1eb36c0, 0x1, 0x0, 0x0)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | u0009/go/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go/thrift/client.go:62 +0xc0\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | u0009/go/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go/thrift/client.go:139 +0x10c\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | u0009/go/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go/retry.go:223 +0x15c\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go/thrift.(*client).startCall(0x1d83460, 0x9c6d18, 0x1df2450, 0x1ed2000, 0x18, 0x1eccbfc, 0xd, 0x1ed2000, 0x18)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | github.com/jaegertracing/jaeger/vendor/github.com/uber/tchannel-go/thrift.(*client).Call.func1(0x9c6d18, 0x1df2450, 0x1def100, 0x82d220, 0x1def100)\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | u0009/go/src/github.com/jaegertracing/jaeger/cmd/agent/app/reporter/tchannel/reporter.go:97 +0xcc\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | u0009/go/src/github.com/jaegertracing/jaeger/cmd/agent/app/reporter/tchannel/reporter.go:86 +0x74\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.052 | u0009/go/src/github.com/jaegertracing/jaeger/thrift-gen/jaeger/agent.go:138 +0xa0\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.053 | u0009/go/src/github.com/jaegertracing/jaeger/cmd/agent/app/processors/thrift_processor.go:86 +0x4c\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.053 | u0009/go/src/github.com/jaegertracing/jaeger/cmd/agent/app/processors/thrift_processor.go:115 +0x220\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.053 | created by github.com/jaegertracing/jaeger/cmd/agent/app/processors.(*ThriftProcessor).Serve\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.053 | u0009/go/src/github.com/jaegertracing/jaeger/thrift-gen/jaeger/agent.go:112 +0x250\r\n\r\n\u00a0 | July 5th 2019, 14:03:27.053 | github.com/jaegertracing/jaeger/cmd/agent/app/processors.(*ThriftProcessor).processBuffer(0x1d2cfc0)\r\n\r\n```",
  "closed_at": "2020-05-29T09:25:59Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5618424?v=4",
    "events_url": "https://api.github.com/users/pavolloffay/events{/privacy}",
    "followers_url": "https://api.github.com/users/pavolloffay/followers",
    "following_url": "https://api.github.com/users/pavolloffay/following{/other_user}",
    "gists_url": "https://api.github.com/users/pavolloffay/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pavolloffay",
    "id": 5618424,
    "login": "pavolloffay",
    "node_id": "MDQ6VXNlcjU2MTg0MjQ=",
    "organizations_url": "https://api.github.com/users/pavolloffay/orgs",
    "received_events_url": "https://api.github.com/users/pavolloffay/received_events",
    "repos_url": "https://api.github.com/users/pavolloffay/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pavolloffay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pavolloffay/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pavolloffay"
  },
  "comments": 12,
  "comments_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1656/comments",
  "created_at": "2019-07-05T19:26:28Z",
  "events_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1656/events",
  "html_url": "https://github.com/jaegertracing/jaeger/issues/1656",
  "id": 464751934,
  "labels": [
    {
      "color": "17017c",
      "default": false,
      "description": "",
      "id": 1500679037,
      "name": "hacktoberfest",
      "node_id": "MDU6TGFiZWwxNTAwNjc5MDM3",
      "url": "https://api.github.com/repos/jaegertracing/jaeger/labels/hacktoberfest"
    },
    {
      "color": "128A0C",
      "default": true,
      "description": "Features that maintainers are willing to accept but do not have cycles to implement",
      "id": 358839841,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWwzNTg4Mzk4NDE=",
      "url": "https://api.github.com/repos/jaegertracing/jaeger/labels/help%20wanted"
    }
  ],
  "labels_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1656/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0NjQ3NTE5MzQ=",
  "number": 1656,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/jaegertracing/jaeger",
  "state": "closed",
  "title": "Jaeger agent arm support",
  "updated_at": "2020-05-29T09:25:59Z",
  "url": "https://api.github.com/repos/jaegertracing/jaeger/issues/1656",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/16505634?v=4",
    "events_url": "https://api.github.com/users/jishminor/events{/privacy}",
    "followers_url": "https://api.github.com/users/jishminor/followers",
    "following_url": "https://api.github.com/users/jishminor/following{/other_user}",
    "gists_url": "https://api.github.com/users/jishminor/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jishminor",
    "id": 16505634,
    "login": "jishminor",
    "node_id": "MDQ6VXNlcjE2NTA1NjM0",
    "organizations_url": "https://api.github.com/users/jishminor/orgs",
    "received_events_url": "https://api.github.com/users/jishminor/received_events",
    "repos_url": "https://api.github.com/users/jishminor/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jishminor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jishminor/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jishminor"
  }
}