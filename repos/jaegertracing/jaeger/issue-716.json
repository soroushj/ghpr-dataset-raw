{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/3523016?v=4",
    "events_url": "https://api.github.com/users/yurishkuro/events{/privacy}",
    "followers_url": "https://api.github.com/users/yurishkuro/followers",
    "following_url": "https://api.github.com/users/yurishkuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/yurishkuro/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/yurishkuro",
    "id": 3523016,
    "login": "yurishkuro",
    "node_id": "MDQ6VXNlcjM1MjMwMTY=",
    "organizations_url": "https://api.github.com/users/yurishkuro/orgs",
    "received_events_url": "https://api.github.com/users/yurishkuro/received_events",
    "repos_url": "https://api.github.com/users/yurishkuro/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/yurishkuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yurishkuro/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/yurishkuro"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/3523016?v=4",
      "events_url": "https://api.github.com/users/yurishkuro/events{/privacy}",
      "followers_url": "https://api.github.com/users/yurishkuro/followers",
      "following_url": "https://api.github.com/users/yurishkuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/yurishkuro/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/yurishkuro",
      "id": 3523016,
      "login": "yurishkuro",
      "node_id": "MDQ6VXNlcjM1MjMwMTY=",
      "organizations_url": "https://api.github.com/users/yurishkuro/orgs",
      "received_events_url": "https://api.github.com/users/yurishkuro/received_events",
      "repos_url": "https://api.github.com/users/yurishkuro/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/yurishkuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yurishkuro/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/yurishkuro"
    }
  ],
  "author_association": "NONE",
  "body": "Since 1.2.0 query won't start if using expvar backend, it panics with:\r\n```\r\n{\"level\":\"info\",\"ts\":1519836326.7820027,\"caller\":\"healthcheck/handler.go:99\",\"msg\":\"Health Check server started\",\"http-port\":16687,\"status\":\"unavailable\"}\r\n2018/02/28 16:45:26 Reuse of exported var name: jaeger-query.ServiceNames.attempts\r\npanic: Reuse of exported var name: jaeger-query.ServiceNames.attempts\r\n\r\n\r\ngoroutine 1 [running]:\r\nlog.Panicln(0xc4203327e0, 0x2, 0x2)\r\n        /usr/local/go/src/log/log.go:340 +0xc0\r\nexpvar.Publish(0xc4203fb320, 0x22, 0x106b160, 0xc4204236e0)\r\n        /usr/local/go/src/expvar/expvar.go:261 +0x2ee\r\nexpvar.NewFloat(0xc4203fb320, 0x22, 0xc420176a20)\r\n        /usr/local/go/src/expvar/expvar.go:287 +0x60\r\ngithub.com/jaegertracing/jaeger/vendor/github.com/go-kit/kit/metrics/expvar.NewCounter(0xc4203fb320, 0x22, 0xc4203fb320)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/vendor/github.com/go-kit/kit/metrics/expvar/expvar.go:23 +0x39\r\ngithub.com/jaegertracing/jaeger/vendor/github.com/uber/jaeger-lib/metrics/go-kit/expvar.factory.Counter(0xa, 0xc4203fb320, 0x22, 0xc4204ba390, 0xa)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/jaeger-lib/metrics/go-kit/expvar/factory.go:37 +0x35\r\ngithub.com/jaegertracing/jaeger/vendor/github.com/uber/jaeger-lib/metrics/go-kit/expvar.(*factory).Counter(0xc420015d68, 0xc4203fb320, 0x22, 0xc4204ba360, 0xc4203fb320)\r\n        <autogenerated>:1 +0x50\r\ngithub.com/jaegertracing/jaeger/vendor/github.com/uber/jaeger-lib/metrics/go-kit.(*factory).Counter(0xc420176a20, 0xa983cb, 0x8, 0xc4204ba360, 0x0, 0x0)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/jaeger-lib/metrics/go-kit/factory.go:108 +0xa9\r\ngithub.com/jaegertracing/jaeger/vendor/github.com/uber/jaeger-lib/metrics.initMetrics(0xb230a0, 0xc420208640, 0x1075760, 0xc420176a20, 0x0, 0x19, 0xc4204041c0)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/jaeger-lib/metrics/metrics.go:72 +0x447\r\ngithub.com/jaegertracing/jaeger/vendor/github.com/uber/jaeger-lib/metrics.Init(0xb230a0, 0xc420208640, 0x1075760, 0xc420176a20, 0x0)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/vendor/github.com/uber/jaeger-lib/metrics/metrics.go:25 +0x57\r\ngithub.com/jaegertracing/jaeger/pkg/cassandra/metrics.NewTable(0x1075760, 0xc4200510e0, 0xc22ab3, 0xc, 0xc1c7a8)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/pkg/cassandra/metrics/table.go:36 +0xa3\r\ngithub.com/jaegertracing/jaeger/plugin/storage/cassandra/spanstore.NewServiceNamesStorage(0x1072620, 0xc420146c80, 0x0, 0x1075760, 0xc4200510e0, 0xc420050cc0, 0x0)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/plugin/storage/cassandra/spanstore/service_names.go:56 +0x54\r\ngithub.com/jaegertracing/jaeger/plugin/storage/cassandra/spanstore.NewSpanReader(0x1072620, 0xc420146c80, 0x1075760, 0xc4200510e0, 0xc420050cc0, 0xb42620)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/plugin/storage/cassandra/spanstore/reader.go:117 +0xc9\r\ngithub.com/jaegertracing/jaeger/plugin/storage/cassandra.(*Factory).CreateSpanReader(0xc420050b40, 0xc42013d4a0, 0xc20ec5, 0x9, 0xc420089288)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/plugin/storage/cassandra/factory.go:94 +0x53\r\ngithub.com/jaegertracing/jaeger/plugin/storage.(*Factory).CreateSpanReader(0xc42013d440, 0xc420332fa0, 0x410bb6, 0xc420176960, 0x60)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/plugin/storage/factory.go:96 +0x6f\r\nmain.archiveOptions(0x10754e0, 0xc42013d440, 0xc420050cc0, 0x0, 0x0, 0x0)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/cmd/query/main.go:184 +0x4c\r\nmain.main.func1(0xc4200878c0, 0xc42014f4c0, 0x0, 0x2, 0x0, 0x0)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/cmd/query/main.go:116 +0xf69\r\ngithub.com/jaegertracing/jaeger/vendor/github.com/spf13/cobra.(*Command).execute(0xc4200878c0, 0xc42000e0a0, 0x2, 0x2, 0xc4200878c0, 0xc42000e0a0)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/vendor/github.com/spf13/cobra/command.go:698 +0x47a\r\ngithub.com/jaegertracing/jaeger/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0xc4200878c0, 0x0, 0x4, 0xc420050ba0)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/vendor/github.com/spf13/cobra/command.go:783 +0x30e\r\ngithub.com/jaegertracing/jaeger/vendor/github.com/spf13/cobra.(*Command).Execute(0xc4200878c0, 0xc4200878c0, 0xc420109f48)\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/vendor/github.com/spf13/cobra/command.go:736 +0x2b\r\nmain.main()\r\n        /var/cvs/open-tracing/src/github.com/jaegertracing/jaeger/cmd/query/main.go:165 +0x70f\r\n```\r\n\r\nconfig file used cfg.json\r\n```json\r\n{\r\n  \"log-level\":          \"info\",\r\n  \"metrics-backend\":    \"expvar\",\r\n  \"metrics-http-route\": \"/expvar\",\r\n  \"span-storage\":       {\"type\": \"cassandra\"},\r\n  \"dependency-storage\": {\"data-frequency\" : \"24h0m0s\"},\r\n\r\n  \"query\": {\r\n    \"port\":                   16686,\r\n    \"health-check-http-port\": 16687,\r\n    \"prefix\":                 \"api\",\r\n    \"static-files\":           \"/var/lib/jaeger/web\",\r\n    \"ui-config\":              \"\"\r\n  },\r\n\r\n  \"cassandra\": {\r\n    \"keyspace\": \"jaeger_v1_dc\",\r\n    \"max-retry-attempts\": 3,\r\n    \"connections-per-host\": 2,\r\n    \"proto\": 4,\r\n    \"servers\": \"cassandra01,cassandra02,cassandra03\",\r\n    \"port\": 9042,\r\n    \"socket-keep-alive\": \"10s\",\r\n    \"timeout\": \"0s\"\r\n  },\r\n  \"cassandra-archive\": {\r\n    \"enabled\": false\r\n  }\r\n}\r\n```\r\n\r\npanic goes if not using expvar metrics",
  "closed_at": "2018-03-06T17:11:57Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/3523016?v=4",
    "events_url": "https://api.github.com/users/yurishkuro/events{/privacy}",
    "followers_url": "https://api.github.com/users/yurishkuro/followers",
    "following_url": "https://api.github.com/users/yurishkuro/following{/other_user}",
    "gists_url": "https://api.github.com/users/yurishkuro/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/yurishkuro",
    "id": 3523016,
    "login": "yurishkuro",
    "node_id": "MDQ6VXNlcjM1MjMwMTY=",
    "organizations_url": "https://api.github.com/users/yurishkuro/orgs",
    "received_events_url": "https://api.github.com/users/yurishkuro/received_events",
    "repos_url": "https://api.github.com/users/yurishkuro/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/yurishkuro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yurishkuro/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/yurishkuro"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/716/comments",
  "created_at": "2018-02-28T16:59:01Z",
  "events_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/716/events",
  "html_url": "https://github.com/jaegertracing/jaeger/issues/716",
  "id": 301103023,
  "labels": [],
  "labels_url": "https://api.github.com/repos/jaegertracing/jaeger/issues/716/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMDExMDMwMjM=",
  "number": 716,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/jaegertracing/jaeger",
  "state": "closed",
  "title": "regression - Panic on jaeger-query 1.2.0 startup using expvar metrics and cassandra - worked in 1.1.0",
  "updated_at": "2018-03-06T17:12:00Z",
  "url": "https://api.github.com/repos/jaegertracing/jaeger/issues/716",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/9359595?v=4",
    "events_url": "https://api.github.com/users/The-Cloud-Source/events{/privacy}",
    "followers_url": "https://api.github.com/users/The-Cloud-Source/followers",
    "following_url": "https://api.github.com/users/The-Cloud-Source/following{/other_user}",
    "gists_url": "https://api.github.com/users/The-Cloud-Source/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/The-Cloud-Source",
    "id": 9359595,
    "login": "The-Cloud-Source",
    "node_id": "MDQ6VXNlcjkzNTk1OTU=",
    "organizations_url": "https://api.github.com/users/The-Cloud-Source/orgs",
    "received_events_url": "https://api.github.com/users/The-Cloud-Source/received_events",
    "repos_url": "https://api.github.com/users/The-Cloud-Source/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/The-Cloud-Source/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/The-Cloud-Source/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/The-Cloud-Source"
  }
}