{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "**What did you do?**\nNothing really\n\n**What did you expect to see?**\nNo errors\n\n**What did you see instead? Under which circumstances?**\nGo panic error:\n\n**Environment**\n- System information:\n\nLinux 3.10.0-327.10.1.el7.x86_64 x86_64\n- Prometheus version: \n\nWith some patches for etcd\n\nprometheus, version 1.2.1 (branch: HEAD, revision: c53b96b07da98e5d02be9364d137493a476ad89a)\n  build user:       root@****\n  build date:       20161011-14:42:12\n  go version:       go1.6.2\n- Prometheus configuration file:\n\n```\nglobal: \n  scrape_interval: \"10s\"\n  scrape_timeout: \"9s\"\n  evaluation_interval: \"15s\"\nrule_files: \n  - /etc/prometheus/generated-rules.rule\n  - /etc/prometheus/rules/container_df.rule\n  - /etc/prometheus/rules/container_mem_usage_bytes.rule\n  - /etc/prometheus/rules/container_cpu_usage_5m_seconds.rule\nscrape_configs: \n  - job_name: prometheus\n    static_configs: \n      - targets: \n          - \"localhost:9090\"\n  - job_name: goapi\n    scrape_interval: \"20s\"\n    etcd_sd_configs: \n      - endpoints: \n          - \"http://etcd1:2379\"\n          - \"http://etcd2:2379\"\n          - \"http://etcd3:2379\"\n          - \"http://etcd4:2379\"\n          - \"http://etcd5:2379\"\n        key_prefix: /live\n  - job_name: mysql-high\n    scrape_interval: \"1s\"\n    scrape_timeout: \"1s\"\n    relabel_configs: \n      - target_label: job\n        replacement: mysql\n      - source_labels: \n          - \"__address__\"\n        action: replace\n        target_label: alias\n        regex: \"(.+):(\\x5cd+)\"\n        replacement: \"$1\"\n    file_sd_configs: \n      - files: \n          - /etc/prometheus/services/mysql-high.yaml\n  - job_name: mysql-medium\n    scrape_interval: \"5s\"\n    scrape_timeout: \"1s\"\n    relabel_configs: \n      - target_label: job\n        replacement: mysql\n      - source_labels: \n          - \"__address__\"\n        action: replace\n        target_label: alias\n        regex: \"(.+):(\\x5cd+)\"\n        replacement: \"$1\"\n    file_sd_configs: \n      - files: \n          - /etc/prometheus/services/mysql-medium.yaml\n  - job_name: mysql-low\n    scrape_interval: \"60s\"\n    scrape_timeout: \"5s\"\n    relabel_configs: \n      - target_label: job\n        replacement: mysql\n      - source_labels: \n          - \"__address__\"\n        action: replace\n        target_label: alias\n        regex: \"(.+):(\\x5cd+)\"\n        replacement: \"$1\"\n    file_sd_configs: \n      - files: \n          - /etc/prometheus/services/mysql-low.yaml\n  - job_name: etcd\n    scrape_interval: \"20s\"\n    file_sd_configs: \n      - files: \n          - /etc/prometheus/services/etcd.yaml\n  - job_name: cadvisor\n    scrape_interval: \"20s\"\n    file_sd_configs: \n      - files: \n          - /etc/prometheus/services/cadvisor.yaml\n  - job_name: telegraf\n    scrape_interval: \"20s\"\n    file_sd_configs: \n      - files: \n          - /etc/prometheus/services/telegraf.yaml\n  - job_name: elasticsearch\n    file_sd_configs: \n      - files: \n          - /etc/prometheus/services/elasticsearch.yaml\n```\n- Logs:\n\n```\n2016-10-25T02:36:13.916504+00:00 prometheus prometheus: time=\"2016-10-25T02:36:13Z\" level=error msg=\"http: panic serving 127.0.0.1:54558: runtime error: makeslice: cap out of range\ngoroutine 88087210 [running]:\nnet/http.(*conn).serve.func1(0xcce3357980)\n/usr/lib/go-1.6/src/net/http/server.go:1389 +0xc1\npanic(0x117be60, 0xce65f462f0)\n/usr/lib/go-1.6/src/runtime/panic.go:443 +0x4e9\ngithub.com/prometheus/prometheus/storage/local.(*memorySeries).preloadChunksForRange(0xc8d448a150, 0x80a0333b2855c6ac, 0x157f70f7d50, 0x157f52fc0d0, 0xc820245b80, 0x0, 0x0, 0x0, 0x0)\n/builds/ebuilds/prometheus/src/github.com/ prometheus/prometheus/storage/local/series.go:500 +0x614\ngithub.com/prometheus/prometheus/storage/local.(*MemorySeriesStorage).preloadChunksForRange(0xc820245b80, 0x80a0333b2855c6ac, 0xc8d448a150, 0x157f70f7d50, 0x157f52fc0d0, 0x0, 0x0)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/storage/local /storage.go:972 +0x141\ngithub.com/prometheus/prometheus/storage/local.(*MemorySeriesStorage).QueryRange(0xc820245b80, 0x7fcdb2d027e8, 0xce0f2b9b00, 0x157f70f7d50, 0x157f52fc0d0, 0xc8664f0f00, 0x5, 0x8, 0x0, 0x0, ...)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/storage/local/storage.go:489 +0x2 0d\ngithub.com/prometheus/prometheus/promql.(*Engine).populateIterators.func1(0x7fcdf2eead00, 0xcfc50ae050, 0xce4cc16798)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/promql/engine.go:495 +0x1bb\ngithub.com/prometheus/prometheus/promql.inspector.Visit(0xce0f2b9b60, 0x7fcdf2eead00, 0xcfc50ae050, 0x0, 0x0)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/promql/ast.go:306 +0x40\ngithub.com/prometheus/prometheus/promql.Walk(0x7fcdf2ebcf68, 0xce0f2b9b60, 0x7fcdf2eead00, 0xcfc50ae050)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/promql/ast.go:255 +0x71\ngithub.com/promethe us/prometheus/promql.Walk(0x7fcdf2ebcf68, 0xce0f2b9b60, 0x7fcdb2d02850, 0xcc38705e00)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/promql/ast.go:275 +0x34a\ngithub.com/prometheus/prometheus/promql.Walk(0x7fcdf2ebcf68, 0xce0f2b9b60, 0x7fcdf2eeaca8, 0xcc38705d40)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/promql/ast.go:285 +0xc1b\ngithub.com/prometheus/prometheus/promql.Walk(0x7fcdf2ebcf68, 0xce0f2b9b60, 0x7fcd f2eead58, 0xcfc50ae0a0)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/promql/ast.go:278 +0x64f\ngithub.com/prometheus/prometheus/promql.Walk(0x7fcdf2ebcf68, 0xce0f2b9b60, 0x7fcdf2eeaba0, 0xc8664f1100)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/promql/ast.go:281 +0x88d\ngit hub.com/prometheus/prometheus/promql.Inspect(0x7fcdf2eeaba0, 0xc8664f1100, 0xce0f2b9b60)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/promql/ast.go:316 +0x60\ngithub.com/prometheus/prometheus/promql.(*Engine).populateIterators(0xc8202aaf20, 0x7fcdb2d027e8, 0xce0f2b9b00, 0xce0f2b9aa0, 0x0, 0x0)\n /builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/promql/engine.go:501 +0x11e\ngithub.com/prometheus/prometheus/promql.(*Engine).execEvalStmt(0xc8202aaf20, 0x7fcdb2d027e8, 0xce0f2b9b00, 0xc8664f1140, 0xce0f2b9aa0, 0x0, 0x0, 0x0, 0x0)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/p romql/engine.go:355 +0x124\ngithub.com/prometheus/prometheus/promql.(*Engine).exec(0xc8202aaf20, 0x7fcdb2d027e8, 0xce0f2b9b00, 0xc8664f1140, 0x0, 0x0, 0x0, 0x0)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/promql/engine.go:344 +0x4b5\ngithub.com/prometheus/prometheus/promql.(*query).Exec(0xc8664 f1140, 0x7fcdf2eded58, 0xc8664f0d80, 0x157f71067b0)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/promql/engine.go:196 +0x45\ngithub.com/prometheus/prometheus/web/api/v1.(*API).queryRange(0xc8203468d0, 0xc9dca320e0, 0x0, 0x0, 0xffffffffffffffff)\n/builds/ebuilds/prometheus/src/github.com/promet heus/prometheus/web/api/v1/api.go:207 +0x86f\ngithub.com/prometheus/prometheus/web/api/v1.(*API).(github.com/prometheus/prometheus/web/api/v1.queryRange)-fm(0xc9dca320e0, 0x0, 0x0, 0x4)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/web/api/v1/api.go:126 +0x38\ngithub.com/prometheus/prometheus/web/api/v1.(*API).Register.func1.1(0x7fcdd47a9830, 0xcc38705ce0, 0xc9dca320e0)\n/builds/ebuilds/prometheus/src/github.com/prometheus/promethe us/web/api/v1/api.go:110 +0x4b\nnet/http.HandlerFunc.ServeHTTP(0xc8204df2e0, 0x7fcdd47a9830, 0xcc38705ce0, 0xc9dca320e0)\n/usr/lib/go-1.6/src/net/http/server.go:1618 +0x3a\ngithub.com/prometheus/prometheus/util/httputil.CompressionHandler.ServeHTTP(0x7fcdf2edd858, 0xc8204df2e0, 0x7fcdd47a9758, 0xccaac0c670, 0xc9dca 320e0)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/util/httputil/compression.go:90 +0x97\ngithub.com/prometheus/prometheus/util/httputil.(*CompressionHandler).ServeHTTP(0xc8204df2f0, 0x7fcdd47a9758, 0xccaac0c670, 0xc9dca320e0)\n<autogenerated>:5 +0xb6\nnet/http.(Handler).ServeHTTP-fm(0x7fcdd4 7a9758, 0xccaac0c670, 0xc9dca320e0)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/web/web.go:173 +0x50\ngithub.com/prometheus/prometheus/vendor/github.com/prometheus/client_golang/prometheus.InstrumentHandlerFuncWithOpts.func1(0x7fcdd47a9680, 0xccb71af040, 0xc9dca320e0)\n/builds/ebuilds/prometh eus/src/github.com/prometheus/prometheus/vendor/github.com/prometheus/client_golang/prometheus/http.go:178 +0x336\ngithub.com/prometheus/prometheus/vendor/github.com/prometheus/common/route.(*Router).handle.func1(0x7fcdd47a9680, 0xccb71af040, 0xc9dca320e0, 0x0, 0x0, 0x0)\n/builds/ebuilds/prometheus/src/github.com/p rometheus/prometheus/vendor/github.com/prometheus/common/route/route.go:83 +0x55f\ngithub.com/prometheus/prometheus/vendor/github.com/julienschmidt/httprouter.(*Router).ServeHTTP(0xc820295f80, 0x7fcdd47a9680, 0xccb71af040, 0xc9dca320e0)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/vendor/github. com/julienschmidt/httprouter/router.go:299 +0x193\ngithub.com/prometheus/prometheus/vendor/github.com/prometheus/common/route.(*Router).ServeHTTP(0xc8202ab020, 0x7fcdd47a9680, 0xccb71af040, 0xc9dca320e0)\n/builds/ebuilds/prometheus/src/github.com/prometheus/prometheus/vendor/github.com/prometheus/common/route/route.go:125 +0x42\nnet/http.serverHandler.ServeHTTP(0xc9ca9ac000, 0x7fcdd47a9680, 0xccb71af040, 0xc9dca320e0)\n/usr/lib/go-1.6/src/net/http/se rver.go:2081 +0x19e\nnet/http.(*conn).serve(0xcce3357980)\n/usr/lib/go-1.6/src/net/http/server.go:1472 +0xf2e\ncreated by net/http.(*Server).Serve\n/usr/lib/go-1.6/src/net/http/server.go:2137 +0x44e\n\" source=\"<autogenerated>:38\"\n```\n",
  "closed_at": "2016-10-26T20:50:39Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/5609886?v=4",
    "events_url": "https://api.github.com/users/beorn7/events{/privacy}",
    "followers_url": "https://api.github.com/users/beorn7/followers",
    "following_url": "https://api.github.com/users/beorn7/following{/other_user}",
    "gists_url": "https://api.github.com/users/beorn7/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/beorn7",
    "id": 5609886,
    "login": "beorn7",
    "node_id": "MDQ6VXNlcjU2MDk4ODY=",
    "organizations_url": "https://api.github.com/users/beorn7/orgs",
    "received_events_url": "https://api.github.com/users/beorn7/received_events",
    "repos_url": "https://api.github.com/users/beorn7/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/beorn7/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/beorn7/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/beorn7"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/prometheus/prometheus/issues/2115/comments",
  "created_at": "2016-10-25T12:10:36Z",
  "events_url": "https://api.github.com/repos/prometheus/prometheus/issues/2115/events",
  "html_url": "https://github.com/prometheus/prometheus/issues/2115",
  "id": 185098397,
  "labels": [
    {
      "color": "ff0000",
      "default": false,
      "description": null,
      "id": 365563588,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwzNjU1NjM1ODg=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/kind/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/prometheus/prometheus/issues/2115/labels{/name}",
  "locked": true,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxODUwOTgzOTc=",
  "number": 2115,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/prometheus/prometheus",
  "state": "closed",
  "title": "Panic",
  "updated_at": "2019-03-24T04:19:53Z",
  "url": "https://api.github.com/repos/prometheus/prometheus/issues/2115",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/281218?v=4",
    "events_url": "https://api.github.com/users/stamm/events{/privacy}",
    "followers_url": "https://api.github.com/users/stamm/followers",
    "following_url": "https://api.github.com/users/stamm/following{/other_user}",
    "gists_url": "https://api.github.com/users/stamm/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/stamm",
    "id": 281218,
    "login": "stamm",
    "node_id": "MDQ6VXNlcjI4MTIxOA==",
    "organizations_url": "https://api.github.com/users/stamm/orgs",
    "received_events_url": "https://api.github.com/users/stamm/received_events",
    "repos_url": "https://api.github.com/users/stamm/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/stamm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stamm/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/stamm"
  }
}