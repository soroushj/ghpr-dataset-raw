{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "**What did you do?**\r\n\r\nRan Prometheus with race detection enabled.\r\n\r\n**What did you expect to see?**\r\n\r\nNo data races.\r\n\r\n**What did you see instead? Under which circumstances?**\r\n\r\nSeveral data races in the scrape package. Most likely when hitting the web UI (targets page, SD page). See logs below.\r\n\r\n**Environment**\r\n\r\n* System information:\r\n\r\n\tLinux 4.15.3+soundcloud2 x86_64\r\n\r\n* Prometheus version:\r\n\r\n\tv2.2.1\r\n\r\n* Logs:\r\n\r\n```\r\n2018-03-20_19:08:10.24243 ==================\r\n2018-03-20_19:08:10.24249 WARNING: DATA RACE\r\n2018-03-20_19:08:10.24250 Write at 0x00c426fcf950 by goroutine 109:\r\n2018-03-20_19:08:10.24250   github.com/prometheus/prometheus/scrape.(*scrapePool).sync()\r\n2018-03-20_19:08:10.24251       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/target.go:120 +0x3ae\r\n2018-03-20_19:08:10.24251   github.com/prometheus/prometheus/scrape.(*scrapePool).Sync()\r\n2018-03-20_19:08:10.24252       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/scrape.go:270 +0x80a\r\n2018-03-20_19:08:10.24252   github.com/prometheus/prometheus/scrape.(*Manager).reload()\r\n2018-03-20_19:08:10.24252       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/manager.go:164 +0x241\r\n2018-03-20_19:08:10.24253   github.com/prometheus/prometheus/scrape.(*Manager).Run()\r\n2018-03-20_19:08:10.24253       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/manager.go:62 +0x5c\r\n2018-03-20_19:08:10.24254   main.main.func12()\r\n2018-03-20_19:08:10.24254       /home/bjoern/gocode/src/github.com/prometheus/prometheus/cmd/prometheus/main.go:425 +0xc7\r\n2018-03-20_19:08:10.24254   github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group.(*Group).Run.func1()\r\n2018-03-20_19:08:10.24255       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group/group.go:38 +0x34\r\n2018-03-20_19:08:10.24256 \r\n2018-03-20_19:08:10.24257 Previous read at 0x00c426fcf950 by goroutine 296:\r\n2018-03-20_19:08:10.24257   [failed to restore the stack]\r\n2018-03-20_19:08:10.24257 \r\n2018-03-20_19:08:10.24258 Goroutine 109 (running) created at:\r\n2018-03-20_19:08:10.24258   github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group.(*Group).Run()\r\n2018-03-20_19:08:10.24258       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group/group.go:37 +0x10b\r\n2018-03-20_19:08:10.24259   main.main()\r\n2018-03-20_19:08:10.24259       /home/bjoern/gocode/src/github.com/prometheus/prometheus/cmd/prometheus/main.go:581 +0x95b2\r\n2018-03-20_19:08:10.24260 \r\n2018-03-20_19:08:10.24260 Goroutine 296 (running) created at:\r\n2018-03-20_19:08:10.24260   net/http.(*Server).Serve()\r\n2018-03-20_19:08:10.24261       /usr/local/go/src/net/http/server.go:2795 +0x364\r\n2018-03-20_19:08:10.24263   github.com/prometheus/prometheus/web.(*Handler).Run.func5()\r\n2018-03-20_19:08:10.24263       /home/bjoern/gocode/src/github.com/prometheus/prometheus/web/web.go:455 +0x53\r\n2018-03-20_19:08:10.24264 ==================\r\n```\r\n\r\n```\r\n2018-03-20_18:53:58.62334 ==================\r\n2018-03-20_18:53:58.62336 WARNING: DATA RACE\r\n2018-03-20_18:53:58.62337 Read at 0x00c421f3d0e0 by goroutine 199:\r\n2018-03-20_18:53:58.62337   github.com/prometheus/prometheus/scrape.(*Target).DiscoveredLabels()\r\n2018-03-20_18:53:58.62338       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/target.go:113 +0x3c\r\n2018-03-20_18:53:58.62338   runtime.call32()\r\n2018-03-20_18:53:58.62338       /usr/local/go/src/runtime/asm_amd64.s:573 +0x3a\r\n2018-03-20_18:53:58.62340   reflect.Value.Call()\r\n2018-03-20_18:53:58.62340       /usr/local/go/src/reflect/value.go:308 +0xc0\r\n2018-03-20_18:53:58.62341   text/template.(*state).evalCall()\r\n2018-03-20_18:53:58.62341       /usr/local/go/src/text/template/exec.go:667 +0x667\r\n2018-03-20_18:53:58.62341   text/template.(*state).evalField()\r\n2018-03-20_18:53:58.62342       /usr/local/go/src/text/template/exec.go:557 +0xe4a\r\n2018-03-20_18:53:58.62342   text/template.(*state).evalFieldChain()\r\n2018-03-20_18:53:58.62342       /usr/local/go/src/text/template/exec.go:522 +0x174\r\n2018-03-20_18:53:58.62345   text/template.(*state).evalFieldNode()\r\n2018-03-20_18:53:58.62345       /usr/local/go/src/text/template/exec.go:489 +0x161\r\n2018-03-20_18:53:58.62345   text/template.(*state).evalCommand()\r\n2018-03-20_18:53:58.62346       /usr/local/go/src/text/template/exec.go:427 +0x903\r\n2018-03-20_18:53:58.62346   text/template.(*state).evalPipeline()\r\n2018-03-20_18:53:58.62346       /usr/local/go/src/text/template/exec.go:405 +0x1a8\r\n2018-03-20_18:53:58.62347   text/template.(*state).walkRange()\r\n2018-03-20_18:53:58.62347       /usr/local/go/src/text/template/exec.go:314 +0x126\r\n2018-03-20_18:53:58.62347   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62348       /usr/local/go/src/text/template/exec.go:242 +0x61b\r\n2018-03-20_18:53:58.62348   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62349       /usr/local/go/src/text/template/exec.go:239 +0x263\r\n2018-03-20_18:53:58.62349   text/template.(*state).walkRange.func1()\r\n2018-03-20_18:53:58.62349       /usr/local/go/src/text/template/exec.go:326 +0x139\r\n2018-03-20_18:53:58.62350   text/template.(*state).walkRange()\r\n2018-03-20_18:53:58.62351       /usr/local/go/src/text/template/exec.go:335 +0x424\r\n2018-03-20_18:53:58.62351   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62351       /usr/local/go/src/text/template/exec.go:242 +0x61b\r\n2018-03-20_18:53:58.62352   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62352       /usr/local/go/src/text/template/exec.go:239 +0x263\r\n2018-03-20_18:53:58.62352   text/template.(*state).walkRange.func1()\r\n2018-03-20_18:53:58.62353       /usr/local/go/src/text/template/exec.go:326 +0x139\r\n2018-03-20_18:53:58.62353   text/template.(*state).walkRange()\r\n2018-03-20_18:53:58.62354       /usr/local/go/src/text/template/exec.go:343 +0x6ed\r\n2018-03-20_18:53:58.62355   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62355       /usr/local/go/src/text/template/exec.go:242 +0x61b\r\n2018-03-20_18:53:58.62356   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62356       /usr/local/go/src/text/template/exec.go:239 +0x263\r\n2018-03-20_18:53:58.62357   text/template.(*state).walkTemplate()\r\n2018-03-20_18:53:58.62357       /usr/local/go/src/text/template/exec.go:388 +0x398\r\n2018-03-20_18:53:58.62358   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62358       /usr/local/go/src/text/template/exec.go:244 +0x2ef\r\n2018-03-20_18:53:58.62359   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62360       /usr/local/go/src/text/template/exec.go:239 +0x263\r\n2018-03-20_18:53:58.62360   text/template.(*Template).execute()\r\n2018-03-20_18:53:58.62361       /usr/local/go/src/text/template/exec.go:194 +0x3cf\r\n2018-03-20_18:53:58.62361   text/template.(*Template).Execute()\r\n2018-03-20_18:53:58.62363       /usr/local/go/src/text/template/exec.go:177 +0x64\r\n2018-03-20_18:53:58.62364   html/template.(*Template).Execute()\r\n2018-03-20_18:53:58.62364       /usr/local/go/src/html/template/template.go:122 +0xd0\r\n2018-03-20_18:53:58.62365   github.com/prometheus/prometheus/template.Expander.ExpandHTML()\r\n2018-03-20_18:53:58.62366       /home/bjoern/gocode/src/github.com/prometheus/prometheus/template/template.go:312 +0x5f3\r\n2018-03-20_18:53:58.62366   github.com/prometheus/prometheus/web.(*Handler).executeTemplate()\r\n2018-03-20_18:53:58.62367       /home/bjoern/gocode/src/github.com/prometheus/prometheus/web/web.go:779 +0x387\r\n2018-03-20_18:53:58.62367   github.com/prometheus/prometheus/web.(*Handler).targets()\r\n2018-03-20_18:53:58.62368       /home/bjoern/gocode/src/github.com/prometheus/prometheus/web/web.go:624 +0x4c7\r\n2018-03-20_18:53:58.62369   github.com/prometheus/prometheus/web.(*Handler).(github.com/prometheus/prometheus/web.targets)-fm()\r\n2018-03-20_18:53:58.62369       /home/bjoern/gocode/src/github.com/prometheus/prometheus/web/web.go:219 +0x5f\r\n2018-03-20_18:53:58.62370   github.com/prometheus/prometheus/vendor/github.com/prometheus/client_golang/prometheus.InstrumentHandlerFuncWithOpts.func1()\r\n2018-03-20_18:53:58.62371       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/prometheus/client_golang/prometheus/http.go:309 +0x2a2\r\n2018-03-20_18:53:58.62373   github.com/prometheus/prometheus/web.(*Handler).testReady.func1()\r\n2018-03-20_18:53:58.62374       /home/bjoern/gocode/src/github.com/prometheus/prometheus/web/web.go:357 +0x81\r\n2018-03-20_18:53:58.62375   github.com/prometheus/prometheus/vendor/github.com/prometheus/common/route.(*Router).handle.func1()\r\n2018-03-20_18:53:58.62376       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/prometheus/common/route/route.go:50 +0x2db\r\n2018-03-20_18:53:58.62376   github.com/prometheus/prometheus/vendor/github.com/julienschmidt/httprouter.(*Router).ServeHTTP()\r\n2018-03-20_18:53:58.62377       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/julienschmidt/httprouter/router.go:299 +0xbad\r\n2018-03-20_18:53:58.62378   github.com/prometheus/prometheus/vendor/github.com/prometheus/common/route.(*Router).ServeHTTP()\r\n2018-03-20_18:53:58.62379       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/prometheus/common/route/route.go:88 +0x67\r\n2018-03-20_18:53:58.62379   net/http.(*ServeMux).ServeHTTP()\r\n2018-03-20_18:53:58.62380       /usr/local/go/src/net/http/server.go:2337 +0x9f\r\n2018-03-20_18:53:58.62381   github.com/prometheus/prometheus/vendor/github.com/opentracing-contrib/go-stdlib/nethttp.Middleware.func2()\r\n2018-03-20_18:53:58.62382       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/opentracing-contrib/go-stdlib/nethttp/server.go:74 +0x543\r\n2018-03-20_18:53:58.62383   net/http.HandlerFunc.ServeHTTP()\r\n2018-03-20_18:53:58.62384       /usr/local/go/src/net/http/server.go:1947 +0x51\r\n2018-03-20_18:53:58.62384   net/http.serverHandler.ServeHTTP()\r\n2018-03-20_18:53:58.62385       /usr/local/go/src/net/http/server.go:2694 +0xb9\r\n2018-03-20_18:53:58.62386   net/http.(*conn).serve()\r\n2018-03-20_18:53:58.62386       /usr/local/go/src/net/http/server.go:1830 +0x7dc\r\n2018-03-20_18:53:58.62387 \r\n2018-03-20_18:53:58.62387 Previous write at 0x00c421f3d0e0 by goroutine 109:\r\n2018-03-20_18:53:58.62388   github.com/prometheus/prometheus/scrape.(*scrapePool).sync()\r\n2018-03-20_18:53:58.62389       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/target.go:120 +0x3ae\r\n2018-03-20_18:53:58.62389   github.com/prometheus/prometheus/scrape.(*scrapePool).Sync()\r\n2018-03-20_18:53:58.62390       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/scrape.go:270 +0x80a\r\n2018-03-20_18:53:58.62391   github.com/prometheus/prometheus/scrape.(*Manager).reload()\r\n2018-03-20_18:53:58.62391       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/manager.go:164 +0x241\r\n2018-03-20_18:53:58.62392   github.com/prometheus/prometheus/scrape.(*Manager).Run()\r\n2018-03-20_18:53:58.62394       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/manager.go:62 +0x5c\r\n2018-03-20_18:53:58.62394   main.main.func12()\r\n2018-03-20_18:53:58.62395       /home/bjoern/gocode/src/github.com/prometheus/prometheus/cmd/prometheus/main.go:425 +0xc7\r\n2018-03-20_18:53:58.62396   github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group.(*Group).Run.func1()\r\n2018-03-20_18:53:58.62397       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group/group.go:38 +0x34\r\n2018-03-20_18:53:58.62397 \r\n2018-03-20_18:53:58.62398 Goroutine 199 (running) created at:\r\n2018-03-20_18:53:58.62398   net/http.(*Server).Serve()\r\n2018-03-20_18:53:58.62399       /usr/local/go/src/net/http/server.go:2795 +0x364\r\n2018-03-20_18:53:58.62400   github.com/prometheus/prometheus/web.(*Handler).Run.func5()\r\n2018-03-20_18:53:58.62400       /home/bjoern/gocode/src/github.com/prometheus/prometheus/web/web.go:455 +0x53\r\n2018-03-20_18:53:58.62401 \r\n2018-03-20_18:53:58.62402 Goroutine 109 (running) created at:\r\n2018-03-20_18:53:58.62402   github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group.(*Group).Run()\r\n2018-03-20_18:53:58.62403       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group/group.go:37 +0x10b\r\n2018-03-20_18:53:58.62404   main.main()\r\n2018-03-20_18:53:58.62404       /home/bjoern/gocode/src/github.com/prometheus/prometheus/cmd/prometheus/main.go:581 +0x95b2\r\n2018-03-20_18:53:58.62407 ==================\r\n```\r\n\r\n```\r\n2018-03-20_18:53:58.62408 ==================\r\n2018-03-20_18:53:58.62408 WARNING: DATA RACE\r\n2018-03-20_18:53:58.62409 Read at 0x00c42d25bc00 by goroutine 199:\r\n2018-03-20_18:53:58.62409   runtime.slicecopy()\r\n2018-03-20_18:53:58.62410       /usr/local/go/src/runtime/slice.go:192 +0x0\r\n2018-03-20_18:53:58.62411   github.com/prometheus/prometheus/scrape.(*Target).DiscoveredLabels()\r\n2018-03-20_18:53:58.62411       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/target.go:114 +0xd8\r\n2018-03-20_18:53:58.62412   runtime.call32()\r\n2018-03-20_18:53:58.62412       /usr/local/go/src/runtime/asm_amd64.s:573 +0x3a\r\n2018-03-20_18:53:58.62413   reflect.Value.Call()\r\n2018-03-20_18:53:58.62413       /usr/local/go/src/reflect/value.go:308 +0xc0\r\n2018-03-20_18:53:58.62414   text/template.(*state).evalCall()\r\n2018-03-20_18:53:58.62415       /usr/local/go/src/text/template/exec.go:667 +0x667\r\n2018-03-20_18:53:58.62417   text/template.(*state).evalField()\r\n2018-03-20_18:53:58.62418       /usr/local/go/src/text/template/exec.go:557 +0xe4a\r\n2018-03-20_18:53:58.62418   text/template.(*state).evalFieldChain()\r\n2018-03-20_18:53:58.62419       /usr/local/go/src/text/template/exec.go:522 +0x174\r\n2018-03-20_18:53:58.62419   text/template.(*state).evalFieldNode()\r\n2018-03-20_18:53:58.62420       /usr/local/go/src/text/template/exec.go:489 +0x161\r\n2018-03-20_18:53:58.62421   text/template.(*state).evalCommand()\r\n2018-03-20_18:53:58.62421       /usr/local/go/src/text/template/exec.go:427 +0x903\r\n2018-03-20_18:53:58.62422   text/template.(*state).evalPipeline()\r\n2018-03-20_18:53:58.62424       /usr/local/go/src/text/template/exec.go:405 +0x1a8\r\n2018-03-20_18:53:58.62424   text/template.(*state).walkRange()\r\n2018-03-20_18:53:58.62425       /usr/local/go/src/text/template/exec.go:314 +0x126\r\n2018-03-20_18:53:58.62425   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62426       /usr/local/go/src/text/template/exec.go:242 +0x61b\r\n2018-03-20_18:53:58.62426   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62427       /usr/local/go/src/text/template/exec.go:239 +0x263\r\n2018-03-20_18:53:58.62427   text/template.(*state).walkRange.func1()\r\n2018-03-20_18:53:58.62428       /usr/local/go/src/text/template/exec.go:326 +0x139\r\n2018-03-20_18:53:58.62429   text/template.(*state).walkRange()\r\n2018-03-20_18:53:58.62429       /usr/local/go/src/text/template/exec.go:335 +0x424\r\n2018-03-20_18:53:58.62430   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62430       /usr/local/go/src/text/template/exec.go:242 +0x61b\r\n2018-03-20_18:53:58.62431   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62432       /usr/local/go/src/text/template/exec.go:239 +0x263\r\n2018-03-20_18:53:58.62432   text/template.(*state).walkRange.func1()\r\n2018-03-20_18:53:58.62433       /usr/local/go/src/text/template/exec.go:326 +0x139\r\n2018-03-20_18:53:58.62434   text/template.(*state).walkRange()\r\n2018-03-20_18:53:58.62434       /usr/local/go/src/text/template/exec.go:343 +0x6ed\r\n2018-03-20_18:53:58.62435   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62435       /usr/local/go/src/text/template/exec.go:242 +0x61b\r\n2018-03-20_18:53:58.62436   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62438       /usr/local/go/src/text/template/exec.go:239 +0x263\r\n2018-03-20_18:53:58.62439   text/template.(*state).walkTemplate()\r\n2018-03-20_18:53:58.62439       /usr/local/go/src/text/template/exec.go:388 +0x398\r\n2018-03-20_18:53:58.62440   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62441       /usr/local/go/src/text/template/exec.go:244 +0x2ef\r\n2018-03-20_18:53:58.62441   text/template.(*state).walk()\r\n2018-03-20_18:53:58.62442       /usr/local/go/src/text/template/exec.go:239 +0x263\r\n2018-03-20_18:53:58.62443   text/template.(*Template).execute()\r\n2018-03-20_18:53:58.62443       /usr/local/go/src/text/template/exec.go:194 +0x3cf\r\n2018-03-20_18:53:58.62444   text/template.(*Template).Execute()\r\n2018-03-20_18:53:58.62444       /usr/local/go/src/text/template/exec.go:177 +0x64\r\n2018-03-20_18:53:58.62445   html/template.(*Template).Execute()\r\n2018-03-20_18:53:58.62447       /usr/local/go/src/html/template/template.go:122 +0xd0\r\n2018-03-20_18:53:58.62448   github.com/prometheus/prometheus/template.Expander.ExpandHTML()\r\n2018-03-20_18:53:58.62448       /home/bjoern/gocode/src/github.com/prometheus/prometheus/template/template.go:312 +0x5f3\r\n2018-03-20_18:53:58.62449   github.com/prometheus/prometheus/web.(*Handler).executeTemplate()\r\n2018-03-20_18:53:58.62450       /home/bjoern/gocode/src/github.com/prometheus/prometheus/web/web.go:779 +0x387\r\n2018-03-20_18:53:58.62450   github.com/prometheus/prometheus/web.(*Handler).targets()\r\n2018-03-20_18:53:58.62451       /home/bjoern/gocode/src/github.com/prometheus/prometheus/web/web.go:624 +0x4c7\r\n2018-03-20_18:53:58.62453   github.com/prometheus/prometheus/web.(*Handler).(github.com/prometheus/prometheus/web.targets)-fm()\r\n2018-03-20_18:53:58.62454       /home/bjoern/gocode/src/github.com/prometheus/prometheus/web/web.go:219 +0x5f\r\n2018-03-20_18:53:58.62454   github.com/prometheus/prometheus/vendor/github.com/prometheus/client_golang/prometheus.InstrumentHandlerFuncWithOpts.func1()\r\n2018-03-20_18:53:58.62455       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/prometheus/client_golang/prometheus/http.go:309 +0x2a2\r\n2018-03-20_18:53:58.62456   github.com/prometheus/prometheus/web.(*Handler).testReady.func1()\r\n2018-03-20_18:53:58.62456       /home/bjoern/gocode/src/github.com/prometheus/prometheus/web/web.go:357 +0x81\r\n2018-03-20_18:53:58.62457   github.com/prometheus/prometheus/vendor/github.com/prometheus/common/route.(*Router).handle.func1()\r\n2018-03-20_18:53:58.62458       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/prometheus/common/route/route.go:50 +0x2db\r\n2018-03-20_18:53:58.62458   github.com/prometheus/prometheus/vendor/github.com/julienschmidt/httprouter.(*Router).ServeHTTP()\r\n2018-03-20_18:53:58.62459       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/julienschmidt/httprouter/router.go:299 +0xbad\r\n2018-03-20_18:53:58.62461   github.com/prometheus/prometheus/vendor/github.com/prometheus/common/route.(*Router).ServeHTTP()\r\n2018-03-20_18:53:58.62462       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/prometheus/common/route/route.go:88 +0x67\r\n2018-03-20_18:53:58.62462   net/http.(*ServeMux).ServeHTTP()\r\n2018-03-20_18:53:58.62463       /usr/local/go/src/net/http/server.go:2337 +0x9f\r\n2018-03-20_18:53:58.62464   github.com/prometheus/prometheus/vendor/github.com/opentracing-contrib/go-stdlib/nethttp.Middleware.func2()\r\n2018-03-20_18:53:58.62464       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/opentracing-contrib/go-stdlib/nethttp/server.go:74 +0x543\r\n2018-03-20_18:53:58.62465   net/http.HandlerFunc.ServeHTTP()\r\n2018-03-20_18:53:58.62466       /usr/local/go/src/net/http/server.go:1947 +0x51\r\n2018-03-20_18:53:58.62466   net/http.serverHandler.ServeHTTP()\r\n2018-03-20_18:53:58.62467       /usr/local/go/src/net/http/server.go:2694 +0xb9\r\n2018-03-20_18:53:58.62467   net/http.(*conn).serve()\r\n2018-03-20_18:53:58.62468       /usr/local/go/src/net/http/server.go:1830 +0x7dc\r\n2018-03-20_18:53:58.62469 \r\n2018-03-20_18:53:58.62469 Previous write at 0x00c42d25bc00 by goroutine 109:\r\n2018-03-20_18:53:58.62470   runtime.slicecopy()\r\n2018-03-20_18:53:58.62471       /usr/local/go/src/runtime/slice.go:192 +0x0\r\n2018-03-20_18:53:58.62472   github.com/prometheus/prometheus/scrape.(*scrapePool).sync()\r\n2018-03-20_18:53:58.62473       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/target.go:114 +0x39d\r\n2018-03-20_18:53:58.62474   github.com/prometheus/prometheus/scrape.(*scrapePool).Sync()\r\n2018-03-20_18:53:58.62474       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/scrape.go:270 +0x80a\r\n2018-03-20_18:53:58.62475   github.com/prometheus/prometheus/scrape.(*Manager).reload()\r\n2018-03-20_18:53:58.62475       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/manager.go:164 +0x241\r\n2018-03-20_18:53:58.62476   github.com/prometheus/prometheus/scrape.(*Manager).Run()\r\n2018-03-20_18:53:58.62478       /home/bjoern/gocode/src/github.com/prometheus/prometheus/scrape/manager.go:62 +0x5c\r\n2018-03-20_18:53:58.62478   main.main.func12()\r\n2018-03-20_18:53:58.62479       /home/bjoern/gocode/src/github.com/prometheus/prometheus/cmd/prometheus/main.go:425 +0xc7\r\n2018-03-20_18:53:58.62480   github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group.(*Group).Run.func1()\r\n2018-03-20_18:53:58.62480       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group/group.go:38 +0x34\r\n2018-03-20_18:53:58.62481 \r\n2018-03-20_18:53:58.62482 Goroutine 199 (running) created at:\r\n2018-03-20_18:53:58.62482   net/http.(*Server).Serve()\r\n2018-03-20_18:53:58.62484       /usr/local/go/src/net/http/server.go:2795 +0x364\r\n2018-03-20_18:53:58.62485   github.com/prometheus/prometheus/web.(*Handler).Run.func5()\r\n2018-03-20_18:53:58.62486       /home/bjoern/gocode/src/github.com/prometheus/prometheus/web/web.go:455 +0x53\r\n2018-03-20_18:53:58.62486 \r\n2018-03-20_18:53:58.62487 Goroutine 109 (running) created at:\r\n2018-03-20_18:53:58.62487   github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group.(*Group).Run()\r\n2018-03-20_18:53:58.62488       /home/bjoern/gocode/src/github.com/prometheus/prometheus/vendor/github.com/oklog/oklog/pkg/group/group.go:37 +0x10b\r\n2018-03-20_18:53:58.62489   main.main()\r\n2018-03-20_18:53:58.62489       /home/bjoern/gocode/src/github.com/prometheus/prometheus/cmd/prometheus/main.go:581 +0x95b2\r\n2018-03-20_18:53:58.62490 ==================\r\n```\r\n",
  "closed_at": "2018-04-10T13:54:52Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/5609886?v=4",
    "events_url": "https://api.github.com/users/beorn7/events{/privacy}",
    "followers_url": "https://api.github.com/users/beorn7/followers",
    "following_url": "https://api.github.com/users/beorn7/following{/other_user}",
    "gists_url": "https://api.github.com/users/beorn7/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/beorn7",
    "id": 5609886,
    "login": "beorn7",
    "node_id": "MDQ6VXNlcjU2MDk4ODY=",
    "organizations_url": "https://api.github.com/users/beorn7/orgs",
    "received_events_url": "https://api.github.com/users/beorn7/received_events",
    "repos_url": "https://api.github.com/users/beorn7/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/beorn7/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/beorn7/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/beorn7"
  },
  "comments": 11,
  "comments_url": "https://api.github.com/repos/prometheus/prometheus/issues/3994/comments",
  "created_at": "2018-03-21T12:36:15Z",
  "events_url": "https://api.github.com/repos/prometheus/prometheus/issues/3994/events",
  "html_url": "https://github.com/prometheus/prometheus/issues/3994",
  "id": 307226968,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": "",
      "id": 664475581,
      "name": "component/scraping",
      "node_id": "MDU6TGFiZWw2NjQ0NzU1ODE=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/component/scraping"
    },
    {
      "color": "ff0000",
      "default": false,
      "description": null,
      "id": 365563588,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwzNjU1NjM1ODg=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/kind/bug"
    },
    {
      "color": "eb6420",
      "default": false,
      "description": null,
      "id": 365563606,
      "name": "priority/P1",
      "node_id": "MDU6TGFiZWwzNjU1NjM2MDY=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/priority/P1"
    }
  ],
  "labels_url": "https://api.github.com/repos/prometheus/prometheus/issues/3994/labels{/name}",
  "locked": true,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMDcyMjY5Njg=",
  "number": 3994,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/prometheus/prometheus",
  "state": "closed",
  "title": "Data races in scrape package.",
  "updated_at": "2019-03-22T18:10:00Z",
  "url": "https://api.github.com/repos/prometheus/prometheus/issues/3994",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/5609886?v=4",
    "events_url": "https://api.github.com/users/beorn7/events{/privacy}",
    "followers_url": "https://api.github.com/users/beorn7/followers",
    "following_url": "https://api.github.com/users/beorn7/following{/other_user}",
    "gists_url": "https://api.github.com/users/beorn7/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/beorn7",
    "id": 5609886,
    "login": "beorn7",
    "node_id": "MDQ6VXNlcjU2MDk4ODY=",
    "organizations_url": "https://api.github.com/users/beorn7/orgs",
    "received_events_url": "https://api.github.com/users/beorn7/received_events",
    "repos_url": "https://api.github.com/users/beorn7/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/beorn7/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/beorn7/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/beorn7"
  }
}