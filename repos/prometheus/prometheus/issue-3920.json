{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "I would really like to see an optional filter for AWS EC2 Discovery.\r\n\r\nCurrently, prometheus describes *all* instances, and then filters the results locally. In an AWS account with hundreds or thousands of instances, many of which are not related to prometheus' monitoring configuration, the amount of data requested and returned from the API is unnecessarily huge and time-consuming.\r\n\r\nI would like to able to provide a custom filter string to be used with the DescribeInstances API call, so that the API only returns relevant instances for further processing.\r\n\r\nHere's a really really bad example, but an example nonetheless of something we have done to patch in the functionality. We should not have done it in this hardcoded, and environment-variable-dependent manner, but it works for now:\r\n\r\n```\r\n                        &ec2.Filter{\r\n                                Name:   aws.String(\"tag:Environment\"),\r\n                                Values: []*string{aws.String(os.Getenv(\"ENVIRONMENT\"))},\r\n                        },\r\n```",
  "closed_at": "2018-03-31T06:51:12Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/7115638?v=4",
    "events_url": "https://api.github.com/users/brian-brazil/events{/privacy}",
    "followers_url": "https://api.github.com/users/brian-brazil/followers",
    "following_url": "https://api.github.com/users/brian-brazil/following{/other_user}",
    "gists_url": "https://api.github.com/users/brian-brazil/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/brian-brazil",
    "id": 7115638,
    "login": "brian-brazil",
    "node_id": "MDQ6VXNlcjcxMTU2Mzg=",
    "organizations_url": "https://api.github.com/users/brian-brazil/orgs",
    "received_events_url": "https://api.github.com/users/brian-brazil/received_events",
    "repos_url": "https://api.github.com/users/brian-brazil/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/brian-brazil/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brian-brazil/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/brian-brazil"
  },
  "comments": 1,
  "comments_url": "https://api.github.com/repos/prometheus/prometheus/issues/3920/comments",
  "created_at": "2018-03-07T11:59:04Z",
  "events_url": "https://api.github.com/repos/prometheus/prometheus/issues/3920/events",
  "html_url": "https://github.com/prometheus/prometheus/issues/3920",
  "id": 303070775,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 365567641,
      "name": "component/service discovery",
      "node_id": "MDU6TGFiZWwzNjU1Njc2NDE=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/component/service%20discovery"
    },
    {
      "color": "c7def8",
      "default": false,
      "description": null,
      "id": 365563592,
      "name": "kind/enhancement",
      "node_id": "MDU6TGFiZWwzNjU1NjM1OTI=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/kind/enhancement"
    },
    {
      "color": "fbca04",
      "default": false,
      "description": null,
      "id": 647013637,
      "name": "priority/P3",
      "node_id": "MDU6TGFiZWw2NDcwMTM2Mzc=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/priority/P3"
    }
  ],
  "labels_url": "https://api.github.com/repos/prometheus/prometheus/issues/3920/labels{/name}",
  "locked": true,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMDMwNzA3NzU=",
  "number": 3920,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/prometheus/prometheus",
  "state": "closed",
  "title": "Optional Filter for EC2 Discovery",
  "updated_at": "2019-03-22T19:09:53Z",
  "url": "https://api.github.com/repos/prometheus/prometheus/issues/3920",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/151241?v=4",
    "events_url": "https://api.github.com/users/Zordrak/events{/privacy}",
    "followers_url": "https://api.github.com/users/Zordrak/followers",
    "following_url": "https://api.github.com/users/Zordrak/following{/other_user}",
    "gists_url": "https://api.github.com/users/Zordrak/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/Zordrak",
    "id": 151241,
    "login": "Zordrak",
    "node_id": "MDQ6VXNlcjE1MTI0MQ==",
    "organizations_url": "https://api.github.com/users/Zordrak/orgs",
    "received_events_url": "https://api.github.com/users/Zordrak/received_events",
    "repos_url": "https://api.github.com/users/Zordrak/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/Zordrak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Zordrak/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/Zordrak"
  }
}