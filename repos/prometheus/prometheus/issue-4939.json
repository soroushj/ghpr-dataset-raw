{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "## Bug Report\r\n\r\nWhen I execute range_query I'm getting 1millisecond mismatch in the response.\r\n\r\n```\r\ncurl \"http://0.0.0.0:9090/api/v1/query_range?query=scrape_duration_seconds&start=1543578564.705&end=1543664964.705&step=300\"\r\n{\"status\":\"success\",\"data\":{\"resultType\":\"matrix\",\"result\":[{\"metric\":{\"__name__\":\"scrape_duration_seconds\",\"instance\":\"localhost:9090\",\"job\":\"prometheus\"},\"values\":[[1543603764.704,\"0.008642759\"],[1543604064.704,\"0.02045981\"],[1543604364.704,\"0.015498824\"]\r\n```\r\n\r\nStart is 1543578564.705. Values in the result are xxxx.704. This makes impossible to generate gaps in the sparse data.\r\n\r\n```\r\ncurl \"http://0.0.0.0:9090/api/v1/query_range?query=scrape_duration_seconds&start=1543578564.705&end=1543664964.705&step=300\"\r\n{\"status\":\"success\",\"data\":{\"resultType\":\"matrix\",\"result\":[{\"metric\":{\"__name__\":\"scrape_duration_seconds\",\"instance\":\"localhost:9090\",\"job\":\"prometheus\"},\"values\":[[1543603764.705,\"0.008642759\"],[1543604064.705,\"0.02045981\"],[1543604364.705,\"0.015498824\"]\r\n```\r\n\r\nI guess double is incorrectly rounded somewhere inside. \r\n\r\n* System information:\r\n\r\n\tDarwin 18.2.0 x86_64\r\n\r\n* Prometheus version:\r\n\r\n\tprometheus, version 2.5.0 (branch: HEAD, revision: \t\t\t67dc912ac8b24f94a1fc478f352d25179c94ab9b)\r\n  build user:       root@578ab108d0b9\r\n  build date:       20181106-11:45:24\r\n  go version:       go1.11.1\r\n\r\n",
  "closed_at": "2018-12-03T12:25:55Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/538008?v=4",
    "events_url": "https://api.github.com/users/juliusv/events{/privacy}",
    "followers_url": "https://api.github.com/users/juliusv/followers",
    "following_url": "https://api.github.com/users/juliusv/following{/other_user}",
    "gists_url": "https://api.github.com/users/juliusv/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/juliusv",
    "id": 538008,
    "login": "juliusv",
    "node_id": "MDQ6VXNlcjUzODAwOA==",
    "organizations_url": "https://api.github.com/users/juliusv/orgs",
    "received_events_url": "https://api.github.com/users/juliusv/received_events",
    "repos_url": "https://api.github.com/users/juliusv/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/juliusv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/juliusv/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/juliusv"
  },
  "comments": 4,
  "comments_url": "https://api.github.com/repos/prometheus/prometheus/issues/4939/comments",
  "created_at": "2018-12-01T14:51:55Z",
  "events_url": "https://api.github.com/repos/prometheus/prometheus/issues/4939/events",
  "html_url": "https://github.com/prometheus/prometheus/issues/4939",
  "id": 386464975,
  "labels": [],
  "labels_url": "https://api.github.com/repos/prometheus/prometheus/issues/4939/labels{/name}",
  "locked": true,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzODY0NjQ5NzU=",
  "number": 4939,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/prometheus/prometheus",
  "state": "closed",
  "title": "invalid timeseries aggregation for range_query",
  "updated_at": "2019-06-01T17:01:31Z",
  "url": "https://api.github.com/repos/prometheus/prometheus/issues/4939",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/1614424?v=4",
    "events_url": "https://api.github.com/users/dernasherbrezon/events{/privacy}",
    "followers_url": "https://api.github.com/users/dernasherbrezon/followers",
    "following_url": "https://api.github.com/users/dernasherbrezon/following{/other_user}",
    "gists_url": "https://api.github.com/users/dernasherbrezon/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/dernasherbrezon",
    "id": 1614424,
    "login": "dernasherbrezon",
    "node_id": "MDQ6VXNlcjE2MTQ0MjQ=",
    "organizations_url": "https://api.github.com/users/dernasherbrezon/orgs",
    "received_events_url": "https://api.github.com/users/dernasherbrezon/received_events",
    "repos_url": "https://api.github.com/users/dernasherbrezon/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/dernasherbrezon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dernasherbrezon/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/dernasherbrezon"
  }
}