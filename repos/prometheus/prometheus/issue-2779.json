{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "[NOTICE]: <> (If your question is around usage and not a bug in Prometheus please use: https://groups.google.com/forum/#!forum/prometheus-users)\r\n\r\n**What did you do?**\r\nI have been playing around with the remote storage adaptor to see how the export of data into influxDB works. I have created 2 retention policies \"low_density\" and \"high_density\" in influxDB, with the \"high_density\" policy set as default.\r\n```\r\nname         duration  shardGroupDuration replicaN default\r\n----         --------  ------------------ -------- -------\r\nautogen      0s        168h0m0s           1        false\r\nlow_density  8736h0m0s 168h0m0s           1        false\r\nhigh_density 1h0m0s    1h0m0s             1        true\r\n```\r\nI start the remote storage adaptor with the parameter \r\n``` -influxdb.retention-policy=low_density```\r\n\r\n**What did you expect to see?**\r\n\r\nI expect that the adaptor will write/read to/from the ```low_density``` retention policy \r\n\r\n**What did you see instead? Under which circumstances?**\r\n\r\nThe adaptor writes data to the ```low_density``` retention policy as expected but reads data from the default ```high_density``` retention policy\r\n\r\nBelow is influxDB log:\r\n```\r\n[httpd] 172.17.0.1 - - [28/May/2017:02:43:31 +0000] \"POST /write?consistency=&db=prometheus&precision=ms&rp=low_density HTTP/1.1\" 204 0 \"-\" \"InfluxDBClient\" 6fbe3de0-434f-11e7-809f-000000000000 2360\r\n[I] 2017-05-28T02:43:34Z SELECT value FROM prometheus.high_density.scrape_duration_seconds WHERE time >= 1496039758357ms AND time <= 1496040058357ms GROUP BY * service=query\r\n[httpd] 172.17.0.1 - - [28/May/2017:02:43:34 +0000] \"POST /query?db=prometheus&epoch=ms&params=%7B%7D&q=SELECT+value+FROM+%22scrape_duration_seconds%22+WHERE+time+%3E%3D+1496039758357ms+AND+time+%3C%3D+1496040058357ms+GROUP+BY+%2A HTTP/1.1\" 200 62 \"-\" \"InfluxDBClient\" 715e8cbd-434f-11e7-80a0-000000000000 5006\r\n```\r\n\r\n**Environment**\r\nOS X 10.11.4\r\nPrometheus and influxDB are run as docker containers, remote storage adapter as a go application on os, go version 1.8.1\r\n* System information:\r\n\r\nDarwin 15.4.0 x86_64\r\n\r\n* Prometheus version: \r\n``` \r\nprometheus, version 1.6.1 (branch: master, revision: 4666df502c0e239ed4aa1d80abbbfb54f61b23c3)\r\n  build user:       root@7e45fa0366a7\r\n  build date:       20170419-14:32:22\r\n  go version:       go1.8.1\r\n```\r\n\r\n* Alertmanager version:\r\n\r\n\tinsert output of `alertmanager -version` here (if relevant to the issue)\r\n\r\n* Prometheus configuration file:\r\n```\r\nglobal:\r\n  scrape_interval:     1s # By default, scrape targets every 15 seconds.\r\n  evaluation_interval: 1s # By default, scrape targets every 15 seconds.\r\nscrape_configs:\r\n  - job_name: \"test_service\"\r\n    scrape_interval: \"1s\"\r\n    scheme: \"http\"\r\n    metrics_path: \"/mgmt/prometheus\"\r\n    static_configs:\r\n      - targets: ['172.16.179.252:8081']\r\n\r\n# Remote write configuration (for Graphite, OpenTSDB, or InfluxDB).\r\nremote_write:\r\n  - url: \"http://172.16.179.252:9201/write\"\r\n\r\n# Remote read configuration (for InfluxDB only at the moment).\r\nremote_read:\r\n  - url: \"http://172.16.179.252:9201/read\"\r\n```\r\n\r\n\r\n",
  "closed_at": "2017-05-29T14:24:24Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/538008?v=4",
    "events_url": "https://api.github.com/users/juliusv/events{/privacy}",
    "followers_url": "https://api.github.com/users/juliusv/followers",
    "following_url": "https://api.github.com/users/juliusv/following{/other_user}",
    "gists_url": "https://api.github.com/users/juliusv/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/juliusv",
    "id": 538008,
    "login": "juliusv",
    "node_id": "MDQ6VXNlcjUzODAwOA==",
    "organizations_url": "https://api.github.com/users/juliusv/orgs",
    "received_events_url": "https://api.github.com/users/juliusv/received_events",
    "repos_url": "https://api.github.com/users/juliusv/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/juliusv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/juliusv/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/juliusv"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/prometheus/prometheus/issues/2779/comments",
  "created_at": "2017-05-29T07:21:54Z",
  "events_url": "https://api.github.com/repos/prometheus/prometheus/issues/2779/events",
  "html_url": "https://github.com/prometheus/prometheus/issues/2779",
  "id": 231945454,
  "labels": [],
  "labels_url": "https://api.github.com/repos/prometheus/prometheus/issues/2779/labels{/name}",
  "locked": true,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMzE5NDU0NTQ=",
  "number": 2779,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/prometheus/prometheus",
  "state": "closed",
  "title": "Remote storage adaptor reads influxDB data only from the default retention policy",
  "updated_at": "2019-03-23T16:46:31Z",
  "url": "https://api.github.com/repos/prometheus/prometheus/issues/2779",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/3634876?v=4",
    "events_url": "https://api.github.com/users/sesto/events{/privacy}",
    "followers_url": "https://api.github.com/users/sesto/followers",
    "following_url": "https://api.github.com/users/sesto/following{/other_user}",
    "gists_url": "https://api.github.com/users/sesto/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sesto",
    "id": 3634876,
    "login": "sesto",
    "node_id": "MDQ6VXNlcjM2MzQ4NzY=",
    "organizations_url": "https://api.github.com/users/sesto/orgs",
    "received_events_url": "https://api.github.com/users/sesto/received_events",
    "repos_url": "https://api.github.com/users/sesto/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sesto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sesto/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sesto"
  }
}