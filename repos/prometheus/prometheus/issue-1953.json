{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "I think it would be an excellent idea to create a linting tool that ensures best practices are used when creating metrics.  This could become a new binary, `promlint`, or perhaps an addition to `promtool` as `promtool lint`.\n\nIn order to make it useful for more than one language, I think it would be a good idea to directly inspect the metrics notation typically output by prometheus and its exporters, such as:\n\n```\n# HELP go_goroutines Number of goroutines that currently exist.\n# TYPE go_goroutines gauge\ngo_goroutines 133\n```\n\nThe tool could look for issues such as:\n- incorrect metrics suffix for metric type\n  - `_total` with a metric that is not a counter\n- use of \"reserved\" labels\n  - `quantile` label with a counter metric\n- use of non-standard units\n  - `_milliseconds` suffix instead of `_seconds`\n\nAs an example, the tool's output could look something like:\n\n```\n$ promlint http://192.168.1.1:9090/metrics\n# HELP foo_total Current number of foo.\n# TYPE foo_total gauge\nfoo_total 10\npromlint: metric with '_total' suffix should be of type counter\n\n# HELP foo_bar Some help text.\n# TYPE foo_total gauge\nfoo_bar{quantile=\"1\"} 1\npromlint: metric of type counter should not use reserved label 'quantile'\n\n# HELP foo_bar Some help text.\n# TYPE foo_seconds_total counter\nfoo_milliseconds_total 10\npromlint: prefer unit 'seconds' over 'milliseconds'\n```\n\nI think it would also make sense to allow the tool to ingest metrics in a variety of ways for maximum flexibility.  Some trivial examples:\n\n```\n$ curl http://192.168.1.1:9090/metrics | promlint\n$ promlint http://192.168.1.1:9090/metrics\n$ promlint metrics.txt\n```\n\nI'm happy to negotiate semantics and such, but I think the general idea is sound.  This is a tool I would certainly use when working with Prometheus on my own projects.  In addition, since it isn't tied to any specific programming language, it would become immediately useful to a wide audience with varying programming backgrounds.\n\nIf I'm on the right track, I'd be happy to work on a prototype, and eventually submit a pull request to merge it into the project.\n\nThanks for your time!  Looking forward to hearing your thoughts!\n",
  "closed_at": "2017-04-13T21:53:41Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/538008?v=4",
    "events_url": "https://api.github.com/users/juliusv/events{/privacy}",
    "followers_url": "https://api.github.com/users/juliusv/followers",
    "following_url": "https://api.github.com/users/juliusv/following{/other_user}",
    "gists_url": "https://api.github.com/users/juliusv/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/juliusv",
    "id": 538008,
    "login": "juliusv",
    "node_id": "MDQ6VXNlcjUzODAwOA==",
    "organizations_url": "https://api.github.com/users/juliusv/orgs",
    "received_events_url": "https://api.github.com/users/juliusv/received_events",
    "repos_url": "https://api.github.com/users/juliusv/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/juliusv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/juliusv/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/juliusv"
  },
  "comments": 9,
  "comments_url": "https://api.github.com/repos/prometheus/prometheus/issues/1953/comments",
  "created_at": "2016-09-07T05:38:03Z",
  "events_url": "https://api.github.com/repos/prometheus/prometheus/issues/1953/events",
  "html_url": "https://github.com/prometheus/prometheus/issues/1953",
  "id": 175417086,
  "labels": [
    {
      "color": "c7def8",
      "default": false,
      "description": null,
      "id": 365563592,
      "name": "kind/enhancement",
      "node_id": "MDU6TGFiZWwzNjU1NjM1OTI=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/kind/enhancement"
    }
  ],
  "labels_url": "https://api.github.com/repos/prometheus/prometheus/issues/1953/labels{/name}",
  "locked": true,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxNzU0MTcwODY=",
  "number": 1953,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/prometheus/prometheus",
  "state": "closed",
  "title": "Create \"promlint\" tool for linting metric types, names, and labels",
  "updated_at": "2019-03-23T18:46:12Z",
  "url": "https://api.github.com/repos/prometheus/prometheus/issues/1953",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/1926905?v=4",
    "events_url": "https://api.github.com/users/mdlayher/events{/privacy}",
    "followers_url": "https://api.github.com/users/mdlayher/followers",
    "following_url": "https://api.github.com/users/mdlayher/following{/other_user}",
    "gists_url": "https://api.github.com/users/mdlayher/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mdlayher",
    "id": 1926905,
    "login": "mdlayher",
    "node_id": "MDQ6VXNlcjE5MjY5MDU=",
    "organizations_url": "https://api.github.com/users/mdlayher/orgs",
    "received_events_url": "https://api.github.com/users/mdlayher/received_events",
    "repos_url": "https://api.github.com/users/mdlayher/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mdlayher/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mdlayher/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mdlayher"
  }
}