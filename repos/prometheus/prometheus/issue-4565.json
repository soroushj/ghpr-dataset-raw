{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "https://github.com/prometheus/prometheus/blob/75bd348135019c6bf5bee4350a339964e62f2d8a/discovery/manager.go#L134\r\n\r\nSending the discovery updates are hard coded to throttle at 5 seconds. \r\nThis makes creaating test for these parts of the code needing to wait 5 seconds so not good for unit testing. We need to make this somehow configurable so that we can adjust when creating unit tests.\r\n\r\nWith this change to the same PR  can also add a test for:\r\n\r\n - blocked or no updates when the receiver's channel is full - https://github.com/prometheus/prometheus/pull/4523#issuecomment-415967435\r\n - send updates only when there was an actual change in the targets - https://github.com/prometheus/prometheus/pull/4545",
  "closed_at": "2018-09-27T13:18:43Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/2587585?v=4",
    "events_url": "https://api.github.com/users/simonpasquier/events{/privacy}",
    "followers_url": "https://api.github.com/users/simonpasquier/followers",
    "following_url": "https://api.github.com/users/simonpasquier/following{/other_user}",
    "gists_url": "https://api.github.com/users/simonpasquier/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/simonpasquier",
    "id": 2587585,
    "login": "simonpasquier",
    "node_id": "MDQ6VXNlcjI1ODc1ODU=",
    "organizations_url": "https://api.github.com/users/simonpasquier/orgs",
    "received_events_url": "https://api.github.com/users/simonpasquier/received_events",
    "repos_url": "https://api.github.com/users/simonpasquier/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/simonpasquier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simonpasquier/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/simonpasquier"
  },
  "comments": 1,
  "comments_url": "https://api.github.com/repos/prometheus/prometheus/issues/4565/comments",
  "created_at": "2018-08-30T21:30:27Z",
  "events_url": "https://api.github.com/repos/prometheus/prometheus/issues/4565/events",
  "html_url": "https://github.com/prometheus/prometheus/issues/4565",
  "id": 355761634,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 365567641,
      "name": "component/service discovery",
      "node_id": "MDU6TGFiZWwzNjU1Njc2NDE=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/component/service%20discovery"
    },
    {
      "color": "006b75",
      "default": true,
      "description": null,
      "id": 216836002,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWwyMTY4MzYwMDI=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/help%20wanted"
    },
    {
      "color": "4ae04a",
      "default": false,
      "description": "",
      "id": 365563587,
      "name": "low hanging fruit",
      "node_id": "MDU6TGFiZWwzNjU1NjM1ODc=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/low%20hanging%20fruit"
    }
  ],
  "labels_url": "https://api.github.com/repos/prometheus/prometheus/issues/4565/labels{/name}",
  "locked": true,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNTU3NjE2MzQ=",
  "number": 4565,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/prometheus/prometheus",
  "state": "closed",
  "title": "Make the Discovery throtling configurable to allow easier testing.",
  "updated_at": "2019-03-26T13:34:28Z",
  "url": "https://api.github.com/repos/prometheus/prometheus/issues/4565",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/8903888?v=4",
    "events_url": "https://api.github.com/users/krasi-georgiev/events{/privacy}",
    "followers_url": "https://api.github.com/users/krasi-georgiev/followers",
    "following_url": "https://api.github.com/users/krasi-georgiev/following{/other_user}",
    "gists_url": "https://api.github.com/users/krasi-georgiev/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/krasi-georgiev",
    "id": 8903888,
    "login": "krasi-georgiev",
    "node_id": "MDQ6VXNlcjg5MDM4ODg=",
    "organizations_url": "https://api.github.com/users/krasi-georgiev/orgs",
    "received_events_url": "https://api.github.com/users/krasi-georgiev/received_events",
    "repos_url": "https://api.github.com/users/krasi-georgiev/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/krasi-georgiev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/krasi-georgiev/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/krasi-georgiev"
  }
}