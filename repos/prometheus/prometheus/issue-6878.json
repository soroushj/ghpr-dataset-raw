{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "Hi (again) Prometheus family :wave: \r\n\r\n## Proposal\r\n\r\nWe noticed with @brancz during our investigations on query latency that `Select` calls done by PromQL are done sequentially: \r\n\r\n![image](https://user-images.githubusercontent.com/6950331/75368505-c9705e00-58b9-11ea-9313-9a8c126aa819.png)\r\n\r\nIt appears that those are subqueries required for the main (quite complex) instant query. Looks like they are done sequentially, where in our opinion they could be done concurrently. \r\nWe would like to propose:\r\n\r\n* Running independent subqueries in different goroutines.\r\n* Controlled by some `subqueryMaxConcurrency` flag.\r\n\r\nWould that make sense or lack of concurrency here is intended?\r\n\r\n**Use case. Why is this important?**\r\n* We are just waiting on one subquery to finish to start another independent subquery. We just waste time, CPU / Resources. We could do those asynchronously.  \r\n\r\ncc @roidelapluie @slrtbtfs @brian-brazil @beorn7 \r\n\r\n\r\n",
  "closed_at": "2020-06-09T16:57:32Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/6950331?v=4",
    "events_url": "https://api.github.com/users/bwplotka/events{/privacy}",
    "followers_url": "https://api.github.com/users/bwplotka/followers",
    "following_url": "https://api.github.com/users/bwplotka/following{/other_user}",
    "gists_url": "https://api.github.com/users/bwplotka/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bwplotka",
    "id": 6950331,
    "login": "bwplotka",
    "node_id": "MDQ6VXNlcjY5NTAzMzE=",
    "organizations_url": "https://api.github.com/users/bwplotka/orgs",
    "received_events_url": "https://api.github.com/users/bwplotka/received_events",
    "repos_url": "https://api.github.com/users/bwplotka/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bwplotka/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bwplotka/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bwplotka"
  },
  "comments": 16,
  "comments_url": "https://api.github.com/repos/prometheus/prometheus/issues/6878/comments",
  "created_at": "2020-02-26T17:06:51Z",
  "events_url": "https://api.github.com/repos/prometheus/prometheus/issues/6878/events",
  "html_url": "https://github.com/prometheus/prometheus/issues/6878",
  "id": 571531269,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 365567473,
      "name": "component/promql",
      "node_id": "MDU6TGFiZWwzNjU1Njc0NzM=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/component/promql"
    },
    {
      "color": "006b75",
      "default": true,
      "description": null,
      "id": 216836002,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWwyMTY4MzYwMDI=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/help%20wanted"
    },
    {
      "color": "c7def8",
      "default": false,
      "description": null,
      "id": 365563592,
      "name": "kind/enhancement",
      "node_id": "MDU6TGFiZWwzNjU1NjM1OTI=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/kind/enhancement"
    }
  ],
  "labels_url": "https://api.github.com/repos/prometheus/prometheus/issues/6878/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1NzE1MzEyNjk=",
  "number": 6878,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/prometheus/prometheus",
  "state": "closed",
  "title": "promql: Add support for .Select calls concurrency. ",
  "updated_at": "2020-06-09T16:57:32Z",
  "url": "https://api.github.com/repos/prometheus/prometheus/issues/6878",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/6950331?v=4",
    "events_url": "https://api.github.com/users/bwplotka/events{/privacy}",
    "followers_url": "https://api.github.com/users/bwplotka/followers",
    "following_url": "https://api.github.com/users/bwplotka/following{/other_user}",
    "gists_url": "https://api.github.com/users/bwplotka/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bwplotka",
    "id": 6950331,
    "login": "bwplotka",
    "node_id": "MDQ6VXNlcjY5NTAzMzE=",
    "organizations_url": "https://api.github.com/users/bwplotka/orgs",
    "received_events_url": "https://api.github.com/users/bwplotka/received_events",
    "repos_url": "https://api.github.com/users/bwplotka/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bwplotka/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bwplotka/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bwplotka"
  }
}