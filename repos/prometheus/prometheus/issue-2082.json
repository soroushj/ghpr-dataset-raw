{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "**What did you do?**\n\nI added lines similar to the following (one recording rule, multiple alerts) to my rules file and restarted my Prometheus server:\n\nworkhours=day_of_week() < bool 6 \\* hour() >= bool 13 \\* hour() < bool 22\n\nALERT rateAlert_server_datafeed\n  IF rate(server_datafeed[10m]) == 0 and on () workhours == 1\n  LABELS { topic = \"datafeed\", }\n  ANNOTATIONS {\n    summary = \"Topic datafeed on {{ $labels.job }} has not received a message for at least 10 minutes\",\n    subject = \"No messages for topic datafeed on {{ $labels.job }}\",\n  }\n\n**What did you expect to see?**\n\nOn the Prometheus Status|Rules page I expected to see something like this:\n\nworkhours{} = day_of_week() < BOOL 6 \\* hour() >= BOOL 13 \\* hour() < BOOL 22\nALERT rateAlert_server_datafeed\n  IF rate(server_datafeed[10m]) == 0 and on () workhours == 1\n  LABELS {topic=\"datafeed\"}\n  ANNOTATIONS {subject=\"No messages for topic datafeed on {{ $labels.job }}\", summary=\"Topic datafeed on {{ $labels.job }} has not received a message for at least 10 minutes\"}\n\n**What did you see instead? Under which circumstances?**\n\nOn the Prometheus Status|Rules page I saw something like this with the IF statement missing the \"on ()\" keyword:\n\nworkhours{} = day_of_week() < BOOL 6 \\* hour() >= BOOL 13 \\* hour() < BOOL 22\nALERT rateAlert_server_datafeed\n  IF rate(server_datafeed[10m]) == 0 and workhours == 1\n  LABELS {topic=\"datafeed\"}\n  ANNOTATIONS {subject=\"No messages for topic datafeed on {{ $labels.job }}\", summary=\"Topic datafeed on {{ $labels.job }} has not received a message for at least 10 minutes\"}\n\n**Environment**\n- System information:\n\nLinux 2.6.32-358.el6.x86_64 x86_64\n- Prometheus version: \n\nprometheus, version 1.2.1 (branch: master, revision: dd66f2e94b2b662804b9aa1b6a50587b990ba8b7)\n  build user:       root@fd9b0daff6bd\n  build date:       20161010-15:58:23\n  go version:       go1.7.1\n- Alertmanager version:\n- Prometheus configuration file:\n- Alertmanager configuration file:\n- Logs:\n",
  "closed_at": "2016-10-19T17:38:27Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/7115638?v=4",
    "events_url": "https://api.github.com/users/brian-brazil/events{/privacy}",
    "followers_url": "https://api.github.com/users/brian-brazil/followers",
    "following_url": "https://api.github.com/users/brian-brazil/following{/other_user}",
    "gists_url": "https://api.github.com/users/brian-brazil/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/brian-brazil",
    "id": 7115638,
    "login": "brian-brazil",
    "node_id": "MDQ6VXNlcjcxMTU2Mzg=",
    "organizations_url": "https://api.github.com/users/brian-brazil/orgs",
    "received_events_url": "https://api.github.com/users/brian-brazil/received_events",
    "repos_url": "https://api.github.com/users/brian-brazil/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/brian-brazil/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brian-brazil/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/brian-brazil"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/prometheus/prometheus/issues/2082/comments",
  "created_at": "2016-10-13T18:36:09Z",
  "events_url": "https://api.github.com/repos/prometheus/prometheus/issues/2082/events",
  "html_url": "https://github.com/prometheus/prometheus/issues/2082",
  "id": 182866381,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 365567473,
      "name": "component/promql",
      "node_id": "MDU6TGFiZWwzNjU1Njc0NzM=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/component/promql"
    },
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 365567222,
      "name": "component/ui",
      "node_id": "MDU6TGFiZWwzNjU1NjcyMjI=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/component/ui"
    },
    {
      "color": "ff0000",
      "default": false,
      "description": null,
      "id": 365563588,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwzNjU1NjM1ODg=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/kind/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/prometheus/prometheus/issues/2082/labels{/name}",
  "locked": true,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxODI4NjYzODE=",
  "number": 2082,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/prometheus/prometheus",
  "state": "closed",
  "title": "\"on ()\" keyword ignored in alert IF statement when loaded from rules file",
  "updated_at": "2019-03-24T04:20:39Z",
  "url": "https://api.github.com/repos/prometheus/prometheus/issues/2082",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/22822494?v=4",
    "events_url": "https://api.github.com/users/brymatm/events{/privacy}",
    "followers_url": "https://api.github.com/users/brymatm/followers",
    "following_url": "https://api.github.com/users/brymatm/following{/other_user}",
    "gists_url": "https://api.github.com/users/brymatm/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/brymatm",
    "id": 22822494,
    "login": "brymatm",
    "node_id": "MDQ6VXNlcjIyODIyNDk0",
    "organizations_url": "https://api.github.com/users/brymatm/orgs",
    "received_events_url": "https://api.github.com/users/brymatm/received_events",
    "repos_url": "https://api.github.com/users/brymatm/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/brymatm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brymatm/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/brymatm"
  }
}