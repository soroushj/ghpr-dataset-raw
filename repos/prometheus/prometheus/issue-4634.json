{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "The alertrules can have templated values which can be filled out based on metric labels for summaries.\r\nThis template rendering can fail due to typos in the template. In that case no alert is sent to the alertmanager which can be a major problem.\r\n\r\nE.g. forgetting the `.Labels` causes:\r\n\r\n```\r\nSep 19 13:11:47 po-prometheus-live-bs01 prometheus[23155]: level=warn ts=2018-09-19T11:11:47.902437202Z caller=alerting.go:220 component=\"rule manager\" alert=k8s_puppet_inconsistent_environment msg=\"Expanding alert template failed\" err=\"error executing template __alert_k8s_puppet_inconsistent_environment: template: __alert_k8s_puppet_inconsistent_environment:1:68: executing \\\"__alert_k8s_puppet_inconsistent_environment\\\" at <.group>: can't evaluate field group in type struct { Labels map[string]string; Value float64 }\" data=\"unsupported value type\"\r\n```\r\n\r\nThere should be a metric that is increased on rule template rendering failures similar to prometheus_rule_evaluation_failures_total and prometheus_notifications_errors_total so one can alert on that failure instead.\r\n\r\nWe are currently using prometheus 2.3.2.",
  "closed_at": "2018-11-06T14:39:07Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/7115638?v=4",
    "events_url": "https://api.github.com/users/brian-brazil/events{/privacy}",
    "followers_url": "https://api.github.com/users/brian-brazil/followers",
    "following_url": "https://api.github.com/users/brian-brazil/following{/other_user}",
    "gists_url": "https://api.github.com/users/brian-brazil/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/brian-brazil",
    "id": 7115638,
    "login": "brian-brazil",
    "node_id": "MDQ6VXNlcjcxMTU2Mzg=",
    "organizations_url": "https://api.github.com/users/brian-brazil/orgs",
    "received_events_url": "https://api.github.com/users/brian-brazil/received_events",
    "repos_url": "https://api.github.com/users/brian-brazil/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/brian-brazil/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brian-brazil/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/brian-brazil"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/prometheus/prometheus/issues/4634/comments",
  "created_at": "2018-09-19T11:13:33Z",
  "events_url": "https://api.github.com/repos/prometheus/prometheus/issues/4634/events",
  "html_url": "https://github.com/prometheus/prometheus/issues/4634",
  "id": 361697610,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 365567449,
      "name": "component/rules",
      "node_id": "MDU6TGFiZWwzNjU1Njc0NDk=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/component/rules"
    },
    {
      "color": "c7def8",
      "default": false,
      "description": null,
      "id": 365563592,
      "name": "kind/enhancement",
      "node_id": "MDU6TGFiZWwzNjU1NjM1OTI=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/kind/enhancement"
    },
    {
      "color": "4ae04a",
      "default": false,
      "description": "",
      "id": 365563587,
      "name": "low hanging fruit",
      "node_id": "MDU6TGFiZWwzNjU1NjM1ODc=",
      "url": "https://api.github.com/repos/prometheus/prometheus/labels/low%20hanging%20fruit"
    }
  ],
  "labels_url": "https://api.github.com/repos/prometheus/prometheus/issues/4634/labels{/name}",
  "locked": true,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNjE2OTc2MTA=",
  "number": 4634,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/prometheus/prometheus",
  "state": "closed",
  "title": "add metric for alertrule template rendering failure",
  "updated_at": "2019-05-05T15:02:37Z",
  "url": "https://api.github.com/repos/prometheus/prometheus/issues/4634",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/542663?v=4",
    "events_url": "https://api.github.com/users/juliantaylor/events{/privacy}",
    "followers_url": "https://api.github.com/users/juliantaylor/followers",
    "following_url": "https://api.github.com/users/juliantaylor/following{/other_user}",
    "gists_url": "https://api.github.com/users/juliantaylor/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/juliantaylor",
    "id": 542663,
    "login": "juliantaylor",
    "node_id": "MDQ6VXNlcjU0MjY2Mw==",
    "organizations_url": "https://api.github.com/users/juliantaylor/orgs",
    "received_events_url": "https://api.github.com/users/juliantaylor/received_events",
    "repos_url": "https://api.github.com/users/juliantaylor/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/juliantaylor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/juliantaylor/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/juliantaylor"
  }
}