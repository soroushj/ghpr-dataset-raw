{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "Some users tell us that they meet OOM sometimes, it is better for us to know how much memory TiKV occupies. \r\n\r\nFirst, we can get summary memory usage, especially for jemalloc, like  https://github.com/servo/servo/blob/master/components/profile/mem.rs\r\n\r\nBut this is not enough, most of the time, we want to profile rust memory like Go tool does, so we can know whether some modules occupy the memory and don't return to system. jemalloc has a heap profile https://github.com/jemalloc/jemalloc/wiki/Use-Case%3A-Heap-Profiling but we can't use it expect we rebuild rust to open the jemalloc profile feature, this is not convenient and I don't recommend this way too. \r\n\r\nMaybe we can rebuild the jemalloc separately and use the custom allocator https://doc.rust-lang.org/book/custom-allocators.html. But I don't know whether it can work or not.  ",
  "closed_at": "2017-04-13T08:59:22Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/1701473?v=4",
    "events_url": "https://api.github.com/users/BusyJay/events{/privacy}",
    "followers_url": "https://api.github.com/users/BusyJay/followers",
    "following_url": "https://api.github.com/users/BusyJay/following{/other_user}",
    "gists_url": "https://api.github.com/users/BusyJay/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/BusyJay",
    "id": 1701473,
    "login": "BusyJay",
    "node_id": "MDQ6VXNlcjE3MDE0NzM=",
    "organizations_url": "https://api.github.com/users/BusyJay/orgs",
    "received_events_url": "https://api.github.com/users/BusyJay/received_events",
    "repos_url": "https://api.github.com/users/BusyJay/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/BusyJay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/BusyJay/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/BusyJay"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/tikv/tikv/issues/1704/comments",
  "created_at": "2017-03-28T01:45:28Z",
  "events_url": "https://api.github.com/repos/tikv/tikv/issues/1704/events",
  "html_url": "https://github.com/tikv/tikv/issues/1704",
  "id": 217424030,
  "labels": [],
  "labels_url": "https://api.github.com/repos/tikv/tikv/issues/1704/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMTc0MjQwMzA=",
  "number": 1704,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/tikv/tikv",
  "state": "closed",
  "title": "profile memory",
  "updated_at": "2018-08-07T00:46:36Z",
  "url": "https://api.github.com/repos/tikv/tikv/issues/1704",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/1080370?v=4",
    "events_url": "https://api.github.com/users/siddontang/events{/privacy}",
    "followers_url": "https://api.github.com/users/siddontang/followers",
    "following_url": "https://api.github.com/users/siddontang/following{/other_user}",
    "gists_url": "https://api.github.com/users/siddontang/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/siddontang",
    "id": 1080370,
    "login": "siddontang",
    "node_id": "MDQ6VXNlcjEwODAzNzA=",
    "organizations_url": "https://api.github.com/users/siddontang/orgs",
    "received_events_url": "https://api.github.com/users/siddontang/received_events",
    "repos_url": "https://api.github.com/users/siddontang/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/siddontang/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/siddontang/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/siddontang"
  }
}