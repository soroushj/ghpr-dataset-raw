{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "## Feature Request\r\n\r\n### Is your feature request related to a problem?\r\nCurrently, the batch executors of coprocessor don't support in a server-side streaming request. If such a request was received, we would fall back to using the old execution framework. The old execution share exactly the same logic with the batch one which complicates our codebase and inhibits our coprocessor maximize its performance.\r\nhttps://github.com/tikv/tikv/blob/66d2566c166e74bedca8b3172f6a2a95bf01efd4/src/coprocessor/dag/mod.rs#L65\r\n\r\n### Describe the feature you'd like:\r\nThe remove of the old execution framework consists of 3 steps:\r\n1. Remove the fallback check in the `DagHandlerBuilder`.\r\n2. Overwrite the default implementation in `RequestHandler::handle_streaming_request` for `BatchDAGHandler`.\r\n3. Pass the integration tests.\r\n\r\n### Teachability, Documentation, Adoption, Migration Strategy:\r\nHere is a WIP pull request to refer: https://github.com/tikv/tikv/pull/5945\r\n",
  "closed_at": "2020-08-04T03:02:04Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/66930949?v=4",
    "events_url": "https://api.github.com/users/ti-srebot/events{/privacy}",
    "followers_url": "https://api.github.com/users/ti-srebot/followers",
    "following_url": "https://api.github.com/users/ti-srebot/following{/other_user}",
    "gists_url": "https://api.github.com/users/ti-srebot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ti-srebot",
    "id": 66930949,
    "login": "ti-srebot",
    "node_id": "MDQ6VXNlcjY2OTMwOTQ5",
    "organizations_url": "https://api.github.com/users/ti-srebot/orgs",
    "received_events_url": "https://api.github.com/users/ti-srebot/received_events",
    "repos_url": "https://api.github.com/users/ti-srebot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ti-srebot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ti-srebot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ti-srebot"
  },
  "comments": 1,
  "comments_url": "https://api.github.com/repos/tikv/tikv/issues/8288/comments",
  "created_at": "2020-07-20T08:17:55Z",
  "events_url": "https://api.github.com/repos/tikv/tikv/issues/8288/events",
  "html_url": "https://github.com/tikv/tikv/issues/8288",
  "id": 661521150,
  "labels": [
    {
      "color": "d12e67",
      "default": false,
      "description": "SIG: Coprocessor",
      "id": 526233180,
      "name": "sig/coprocessor",
      "node_id": "MDU6TGFiZWw1MjYyMzMxODA=",
      "url": "https://api.github.com/repos/tikv/tikv/labels/sig/coprocessor"
    },
    {
      "color": "fbca04",
      "default": false,
      "description": "Status: Still a proposal",
      "id": 340020891,
      "name": "status/proposal",
      "node_id": "MDU6TGFiZWwzNDAwMjA4OTE=",
      "url": "https://api.github.com/repos/tikv/tikv/labels/status/proposal"
    }
  ],
  "labels_url": "https://api.github.com/repos/tikv/tikv/issues/8288/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU2NjE1MjExNTA=",
  "number": 8288,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/tikv/tikv",
  "state": "closed",
  "title": "Let Coprocessor completely work in the batch mode",
  "updated_at": "2020-08-04T03:02:04Z",
  "url": "https://api.github.com/repos/tikv/tikv/issues/8288",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/16307070?v=4",
    "events_url": "https://api.github.com/users/iosmanthus/events{/privacy}",
    "followers_url": "https://api.github.com/users/iosmanthus/followers",
    "following_url": "https://api.github.com/users/iosmanthus/following{/other_user}",
    "gists_url": "https://api.github.com/users/iosmanthus/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/iosmanthus",
    "id": 16307070,
    "login": "iosmanthus",
    "node_id": "MDQ6VXNlcjE2MzA3MDcw",
    "organizations_url": "https://api.github.com/users/iosmanthus/orgs",
    "received_events_url": "https://api.github.com/users/iosmanthus/received_events",
    "repos_url": "https://api.github.com/users/iosmanthus/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/iosmanthus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iosmanthus/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/iosmanthus"
  }
}