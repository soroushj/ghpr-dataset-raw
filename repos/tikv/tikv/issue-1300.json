{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "Now we get configuration from command flags and toml file. \r\n\r\nE,g, We use `get_string_value` to get the string configuration, the function definition is:\r\n\r\n```\r\nfn get_string_value<F>(short: &str,\r\n                       long: &str,\r\n                       matches: &Matches,\r\n                       config: &toml::Value,\r\n                       default: Option<String>,\r\n                       f: F)\r\n``` \r\n\r\nAs we see, we must pass `short`/`Matches`  for command flags and `long`/`config` for config file.\r\nthe `f` is for config file, and if we don't find anything, we will use the `default`.\r\n\r\nThis function is too complex. \r\n\r\n1. We have many configurations defined in config file, only have little in command flags. So we can handle flags and config file separately.\r\n2. For config file, we don't need the `f`. If we want to get string, we can convert got value to string directly, no need `|v| v.as_str().map(|s| s.to_owned()` anymore. \r\n3. The configuration in command flags will overwrite the configuration in toml file if we set both, so the default value seems always for config file. If we pass a command flag, we will use this flag value, if not, we will try to use the config file value, else we will try to use the default value. \r\n\r\nSo the functions look:\r\n\r\n```\r\nfn get_flag_int(matches: &Matches, name: &str) -> Option<int64>;\r\nfn get_toml_int(config: &toml::Value, name: &str, default: Option<int64>) -> Option<int64>;\r\n```\r\n\r\nBtw, we must also fix #1299 too. I think for command flag parsing, if we meet error, we can even output help message too.",
  "closed_at": "2016-11-20T06:50:55Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/2150711?v=4",
    "events_url": "https://api.github.com/users/overvenus/events{/privacy}",
    "followers_url": "https://api.github.com/users/overvenus/followers",
    "following_url": "https://api.github.com/users/overvenus/following{/other_user}",
    "gists_url": "https://api.github.com/users/overvenus/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/overvenus",
    "id": 2150711,
    "login": "overvenus",
    "node_id": "MDQ6VXNlcjIxNTA3MTE=",
    "organizations_url": "https://api.github.com/users/overvenus/orgs",
    "received_events_url": "https://api.github.com/users/overvenus/received_events",
    "repos_url": "https://api.github.com/users/overvenus/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/overvenus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/overvenus/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/overvenus"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/tikv/tikv/issues/1300/comments",
  "created_at": "2016-11-10T14:54:38Z",
  "events_url": "https://api.github.com/repos/tikv/tikv/issues/1300/events",
  "html_url": "https://github.com/tikv/tikv/issues/1300",
  "id": 188528778,
  "labels": [],
  "labels_url": "https://api.github.com/repos/tikv/tikv/issues/1300/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2017-08-17T04:27:37Z",
    "closed_issues": 16,
    "created_at": "2016-10-31T09:16:05Z",
    "creator": {
      "avatar_url": "https://avatars2.githubusercontent.com/u/1080370?v=4",
      "events_url": "https://api.github.com/users/siddontang/events{/privacy}",
      "followers_url": "https://api.github.com/users/siddontang/followers",
      "following_url": "https://api.github.com/users/siddontang/following{/other_user}",
      "gists_url": "https://api.github.com/users/siddontang/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/siddontang",
      "id": 1080370,
      "login": "siddontang",
      "node_id": "MDQ6VXNlcjEwODAzNzA=",
      "organizations_url": "https://api.github.com/users/siddontang/orgs",
      "received_events_url": "https://api.github.com/users/siddontang/received_events",
      "repos_url": "https://api.github.com/users/siddontang/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/siddontang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siddontang/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/siddontang"
    },
    "description": "",
    "due_on": "2016-11-30T08:00:00Z",
    "html_url": "https://github.com/tikv/tikv/milestone/5",
    "id": 2103653,
    "labels_url": "https://api.github.com/repos/tikv/tikv/milestones/5/labels",
    "node_id": "MDk6TWlsZXN0b25lMjEwMzY1Mw==",
    "number": 5,
    "open_issues": 0,
    "state": "closed",
    "title": "RC1",
    "updated_at": "2017-08-17T04:27:37Z",
    "url": "https://api.github.com/repos/tikv/tikv/milestones/5"
  },
  "node_id": "MDU6SXNzdWUxODg1Mjg3Nzg=",
  "number": 1300,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/tikv/tikv",
  "state": "closed",
  "title": "bin: cleanup flag and config file parsing ",
  "updated_at": "2018-08-07T00:46:18Z",
  "url": "https://api.github.com/repos/tikv/tikv/issues/1300",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/1080370?v=4",
    "events_url": "https://api.github.com/users/siddontang/events{/privacy}",
    "followers_url": "https://api.github.com/users/siddontang/followers",
    "following_url": "https://api.github.com/users/siddontang/following{/other_user}",
    "gists_url": "https://api.github.com/users/siddontang/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/siddontang",
    "id": 1080370,
    "login": "siddontang",
    "node_id": "MDQ6VXNlcjEwODAzNzA=",
    "organizations_url": "https://api.github.com/users/siddontang/orgs",
    "received_events_url": "https://api.github.com/users/siddontang/received_events",
    "repos_url": "https://api.github.com/users/siddontang/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/siddontang/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/siddontang/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/siddontang"
  }
}