{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "## Description\r\n\r\nWhen using TiDB Lightning or BR to ingest data into a TiKV cluster, these tools will place every TiKV node into an \"[import mode](https://github.com/tikv/tikv/blob/master/components/sst_importer/src/import_mode.rs)\" to speed up writing (while sacrificing storage space). \r\n\r\nNormally, when these tools have completed operation, they will instruct TiKV to move back to \"normal mode\". However, when Lightning or BR crashed, the TiKV nodes will be stuck in \"import mode\" forever until we manually switch back (which not many people will remember to do so).\r\n\r\nTo implement this enhancement, you should\r\n\r\n* Set up a timer. When time's up, change the TiKV back into normal mode. Reset the timer when the `sst_importer` client actively request staying in import mode.\r\n    * Lightning already sends a \"switch to import mode\" continuously every 5 minutes. You don't need to care about fixing Lightning/BR in this issue.\r\n* Add a configuration for the timer's duration.\r\n* Include a test case showing that a TiKV does indeed move back to \"normal mode\" after a certain time period.\r\n\r\n## Score\r\n\r\n* 605\r\n\r\n## Mentor(s)\r\n\r\n* @kennytm\r\n\r\nContact the mentors: **#tidb-challenge-program** channel in [TiDB Community](https://join.slack.com/t/tidbcommunity/shared_invite/enQtNzc0MzI4ODExMDc4LWYwYmIzMjZkYzJiNDUxMmZlN2FiMGJkZjAyMzQ5NGU0NGY0NzI3NTYwMjAyNGQ1N2I2ZjAxNzc1OGUwYWM0NzE)  Slack Workspace\r\n\r\n",
  "closed_at": "2020-05-31T04:36:20Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/29268173?v=4",
    "events_url": "https://api.github.com/users/sre-bot/events{/privacy}",
    "followers_url": "https://api.github.com/users/sre-bot/followers",
    "following_url": "https://api.github.com/users/sre-bot/following{/other_user}",
    "gists_url": "https://api.github.com/users/sre-bot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sre-bot",
    "id": 29268173,
    "login": "sre-bot",
    "node_id": "MDQ6VXNlcjI5MjY4MTcz",
    "organizations_url": "https://api.github.com/users/sre-bot/orgs",
    "received_events_url": "https://api.github.com/users/sre-bot/received_events",
    "repos_url": "https://api.github.com/users/sre-bot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sre-bot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sre-bot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sre-bot"
  },
  "comments": 18,
  "comments_url": "https://api.github.com/repos/tikv/tikv/issues/7223/comments",
  "created_at": "2020-03-24T07:27:53Z",
  "events_url": "https://api.github.com/repos/tikv/tikv/issues/7223/events",
  "html_url": "https://github.com/tikv/tikv/issues/7223",
  "id": 586751296,
  "labels": [
    {
      "color": "49ba23",
      "default": false,
      "description": "",
      "id": 1876115670,
      "name": "challenge-program",
      "node_id": "MDU6TGFiZWwxODc2MTE1Njcw",
      "url": "https://api.github.com/repos/tikv/tikv/labels/challenge-program"
    },
    {
      "color": "0e8a16",
      "default": false,
      "description": "Difficulty: Medium. You need some kind of understanding of several components to work on this",
      "id": 954296574,
      "name": "difficulty/medium",
      "node_id": "MDU6TGFiZWw5NTQyOTY1NzQ=",
      "url": "https://api.github.com/repos/tikv/tikv/labels/difficulty/medium"
    },
    {
      "color": "fbca04",
      "default": false,
      "description": "Status: Help wanted. Contributions are very welcome!",
      "id": 305526948,
      "name": "status/help-wanted",
      "node_id": "MDU6TGFiZWwzMDU1MjY5NDg=",
      "url": "https://api.github.com/repos/tikv/tikv/labels/status/help-wanted"
    },
    {
      "color": "1d76db",
      "default": false,
      "description": "Type: Issue - Enhancement",
      "id": 305526947,
      "name": "type/enhancement",
      "node_id": "MDU6TGFiZWwzMDU1MjY5NDc=",
      "url": "https://api.github.com/repos/tikv/tikv/labels/type/enhancement"
    }
  ],
  "labels_url": "https://api.github.com/repos/tikv/tikv/issues/7223/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1ODY3NTEyOTY=",
  "number": 7223,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/tikv/tikv",
  "state": "closed",
  "title": "UCP: Automatically dismiss \"Import mode\"",
  "updated_at": "2020-05-31T04:36:24Z",
  "url": "https://api.github.com/repos/tikv/tikv/issues/7223",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/103023?v=4",
    "events_url": "https://api.github.com/users/kennytm/events{/privacy}",
    "followers_url": "https://api.github.com/users/kennytm/followers",
    "following_url": "https://api.github.com/users/kennytm/following{/other_user}",
    "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/kennytm",
    "id": 103023,
    "login": "kennytm",
    "node_id": "MDQ6VXNlcjEwMzAyMw==",
    "organizations_url": "https://api.github.com/users/kennytm/orgs",
    "received_events_url": "https://api.github.com/users/kennytm/received_events",
    "repos_url": "https://api.github.com/users/kennytm/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/kennytm"
  }
}