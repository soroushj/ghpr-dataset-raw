{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/35896542?v=4",
    "events_url": "https://api.github.com/users/rleungx/events{/privacy}",
    "followers_url": "https://api.github.com/users/rleungx/followers",
    "following_url": "https://api.github.com/users/rleungx/following{/other_user}",
    "gists_url": "https://api.github.com/users/rleungx/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/rleungx",
    "id": 35896542,
    "login": "rleungx",
    "node_id": "MDQ6VXNlcjM1ODk2NTQy",
    "organizations_url": "https://api.github.com/users/rleungx/orgs",
    "received_events_url": "https://api.github.com/users/rleungx/received_events",
    "repos_url": "https://api.github.com/users/rleungx/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/rleungx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rleungx/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/rleungx"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/35896542?v=4",
      "events_url": "https://api.github.com/users/rleungx/events{/privacy}",
      "followers_url": "https://api.github.com/users/rleungx/followers",
      "following_url": "https://api.github.com/users/rleungx/following{/other_user}",
      "gists_url": "https://api.github.com/users/rleungx/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rleungx",
      "id": 35896542,
      "login": "rleungx",
      "node_id": "MDQ6VXNlcjM1ODk2NTQy",
      "organizations_url": "https://api.github.com/users/rleungx/orgs",
      "received_events_url": "https://api.github.com/users/rleungx/received_events",
      "repos_url": "https://api.github.com/users/rleungx/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rleungx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rleungx/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rleungx"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "## Feature Request\r\n\r\nPrometheus can only support pull metrics through HTTP, but now TiKV only supports gRPC and the C gRPC can't support dispatching different protocols.\r\n\r\nTo get the metrics from TiKV, we let TiKV push the metrics to pushgateway, but the pushgateway is nearly deprecated and we have met many problems with it. Another way is to build a proxy which provides the HTTP interface for Prometheus and help it fetch the metrics from TiKV through gRPC, but we still need to manage an independent service, it is not convenience and hard to maintain in K8s.\r\n\r\nSo maybe a better way is to add an HTTP port and let TiKV support HTTP directly. Managing two ports may increase the complexity of the manual operation, but we can alleviate this by using ansible and K8s. And managing two ports is easier than maintaining a service in ansible and K8s. So I think it is worth to do.\r\n\r\nWe can still keep the old way of pushing to pushgateway, and introduce a status-addr for HTTP(of course, we may also need advertise-status-addr) to let Prometheus pull metrics from TiKV directly.\r\n\r\nFor backward compatibility, if we don't set the status-addr explicitly, we can let TiKV listen a random port with listening port 0 or just disable HTTP.  ",
  "closed_at": "2018-12-21T03:20:53Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/1916485?v=4",
    "events_url": "https://api.github.com/users/breeswish/events{/privacy}",
    "followers_url": "https://api.github.com/users/breeswish/followers",
    "following_url": "https://api.github.com/users/breeswish/following{/other_user}",
    "gists_url": "https://api.github.com/users/breeswish/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/breeswish",
    "id": 1916485,
    "login": "breeswish",
    "node_id": "MDQ6VXNlcjE5MTY0ODU=",
    "organizations_url": "https://api.github.com/users/breeswish/orgs",
    "received_events_url": "https://api.github.com/users/breeswish/received_events",
    "repos_url": "https://api.github.com/users/breeswish/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/breeswish/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/breeswish/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/breeswish"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/tikv/tikv/issues/3838/comments",
  "created_at": "2018-11-27T04:40:07Z",
  "events_url": "https://api.github.com/repos/tikv/tikv/issues/3838/events",
  "html_url": "https://github.com/tikv/tikv/issues/3838",
  "id": 384619739,
  "labels": [
    {
      "color": "0e8a16",
      "default": false,
      "description": "Difficulty: Easy. Ideal for beginners, with mentoring available! (Ping @hoverbear for help)",
      "id": 922320421,
      "name": "difficulty/easy",
      "node_id": "MDU6TGFiZWw5MjIzMjA0MjE=",
      "url": "https://api.github.com/repos/tikv/tikv/labels/difficulty/easy"
    }
  ],
  "labels_url": "https://api.github.com/repos/tikv/tikv/issues/3838/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzODQ2MTk3Mzk=",
  "number": 3838,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/tikv/tikv",
  "state": "closed",
  "title": "add an HTTP port",
  "updated_at": "2018-12-21T03:20:53Z",
  "url": "https://api.github.com/repos/tikv/tikv/issues/3838",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/1080370?v=4",
    "events_url": "https://api.github.com/users/siddontang/events{/privacy}",
    "followers_url": "https://api.github.com/users/siddontang/followers",
    "following_url": "https://api.github.com/users/siddontang/following{/other_user}",
    "gists_url": "https://api.github.com/users/siddontang/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/siddontang",
    "id": 1080370,
    "login": "siddontang",
    "node_id": "MDQ6VXNlcjEwODAzNzA=",
    "organizations_url": "https://api.github.com/users/siddontang/orgs",
    "received_events_url": "https://api.github.com/users/siddontang/received_events",
    "repos_url": "https://api.github.com/users/siddontang/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/siddontang/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/siddontang/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/siddontang"
  }
}