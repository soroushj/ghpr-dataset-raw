{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "## Bug Report\r\n\r\n`read_decimal` may panic when the underlying data is corrupted.\r\n\r\nFound by fuzz:\r\n\r\n```\r\nthread '<unnamed>' panicked at 'attempt to multiply with overflow', /home/pingcap/wenxuan/tikv/components/tidb_query/src/codec/mysql/decimal.rs:2237:36\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\r\n==33509== ERROR: libFuzzer: deadly signal\r\n    #0 0x55bd21b00c31 in __sanitizer_print_stack_trace /rustc/c6e9c76c59e3c10acd63ca9ec157a8894ea1a068/src/llvm-project/compiler-rt/lib/asan/asan_stack.cc:86:3\r\n    #1 0x55bd23bc59df in fuzzer::Fuzzer::CrashCallback() /home/pingcap/.cargo/git/checkouts/libfuzzer-sys-e07fde05820d7bc6/4594b1f/libfuzzer/FuzzerLoop.cpp:233\r\n    #2 0x55bd23bc589f in fuzzer::Fuzzer::StaticCrashSignalCallback() /home/pingcap/.cargo/git/checkouts/libfuzzer-sys-e07fde05820d7bc6/4594b1f/libfuzzer/FuzzerLoop.cpp:206\r\n    #3 0x55bd23bdbf33 in fuzzer::CrashHandler(int, siginfo_t*, void*) /home/pingcap/.cargo/git/checkouts/libfuzzer-sys-e07fde05820d7bc6/4594b1f/libfuzzer/FuzzerUtilPosix.cpp:36\r\n    #4 0x7f39f70035ef  (/lib64/libpthread.so.0+0xf5ef)\r\n    #5 0x7f39f6a46336 in __GI_raise (/lib64/libc.so.6+0x36336)\r\n    #6 0x7f39f6a47a27 in __GI_abort (/lib64/libc.so.6+0x37a27)\r\n    #7 0x55bd23bf8266 in panic_abort::__rust_start_panic::abort::h4989bc6c2b822d50 /rustc/c6e9c76c59e3c10acd63ca9ec157a8894ea1a068/src/libpanic_abort/lib.rs:48:8\r\n\r\nNOTE: libFuzzer has rudimentary signal handlers.\r\n      Combine libFuzzer with AddressSanitizer or similar for better crash reports.\r\nSUMMARY: libFuzzer: deadly signal\r\nMS: 3 InsertRepeatedBytes-InsertByte-PersAutoDict- DE: \"\\x02\\x00\\x00\\x00\\x00\\x00\\x00\\x00\"-; base unit: d3d7897a7520d611762561523191c44c0d7a0c84\r\n0x8,0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x7a,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x62,0x0,0x80,0x0,0x0,0x0,0x0,\r\n\\x08\\x02\\x00\\x00\\x00\\x00\\x00\\x00\\x00bbbbbbbbbbbbbbbbbbbbbbbzbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\\x00\\x80\\x00\\x00\\x00\\x00\r\nartifact_prefix='./'; Test unit written to ./crash-c28819b069b4f8eaa24f6c474b159c547a429e7c\r\nBase64: CAIAAAAAAAAAYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJ6YmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYgCAAAAAAA==\r\nRunning fuzzer failed: Libfuzzer exited with code Some(77)\r\n```",
  "closed_at": "2019-11-26T08:15:47Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/29268173?v=4",
    "events_url": "https://api.github.com/users/sre-bot/events{/privacy}",
    "followers_url": "https://api.github.com/users/sre-bot/followers",
    "following_url": "https://api.github.com/users/sre-bot/following{/other_user}",
    "gists_url": "https://api.github.com/users/sre-bot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sre-bot",
    "id": 29268173,
    "login": "sre-bot",
    "node_id": "MDQ6VXNlcjI5MjY4MTcz",
    "organizations_url": "https://api.github.com/users/sre-bot/orgs",
    "received_events_url": "https://api.github.com/users/sre-bot/received_events",
    "repos_url": "https://api.github.com/users/sre-bot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sre-bot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sre-bot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sre-bot"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/tikv/tikv/issues/6044/comments",
  "created_at": "2019-11-26T05:43:24Z",
  "events_url": "https://api.github.com/repos/tikv/tikv/issues/6044/events",
  "html_url": "https://github.com/tikv/tikv/issues/6044",
  "id": 528501963,
  "labels": [
    {
      "color": "1d76db",
      "default": false,
      "description": "Type: Issue - Confirmed a bug",
      "id": 305526945,
      "name": "type/bug",
      "node_id": "MDU6TGFiZWwzMDU1MjY5NDU=",
      "url": "https://api.github.com/repos/tikv/tikv/labels/type/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/tikv/tikv/issues/6044/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1Mjg1MDE5NjM=",
  "number": 6044,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/tikv/tikv",
  "state": "closed",
  "title": "read_decimal may panic when data is corrupted",
  "updated_at": "2019-11-26T08:15:47Z",
  "url": "https://api.github.com/repos/tikv/tikv/issues/6044",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/1916485?v=4",
    "events_url": "https://api.github.com/users/breeswish/events{/privacy}",
    "followers_url": "https://api.github.com/users/breeswish/followers",
    "following_url": "https://api.github.com/users/breeswish/following{/other_user}",
    "gists_url": "https://api.github.com/users/breeswish/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/breeswish",
    "id": 1916485,
    "login": "breeswish",
    "node_id": "MDQ6VXNlcjE5MTY0ODU=",
    "organizations_url": "https://api.github.com/users/breeswish/orgs",
    "received_events_url": "https://api.github.com/users/breeswish/received_events",
    "repos_url": "https://api.github.com/users/breeswish/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/breeswish/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/breeswish/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/breeswish"
  }
}