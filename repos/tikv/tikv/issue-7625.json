{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "## Bug Report\r\n\r\n<!-- Thanks for your bug report! Don't worry if you can't fill out all the sections. -->\r\n\r\n### What version of TiKV are you using?\r\n<!-- You can run `tikv-server --version` -->\r\n```\r\nTiKV \r\nRelease Version:   4.1.0-alpha\r\nGit Commit Hash:   4b00298465da5162c7f62365939f918a63b3f900\r\nGit Commit Branch: HEAD\r\nUTC Build Time:    2020-04-20 04:01:52\r\nRust Version:      rustc 1.42.0-nightly (0de96d37f 2019-12-19)\r\nEnable Features:   jemalloc portable sse protobuf-codec\r\nProfile:           dist_release\r\n```\r\n### What operating system and CPU are you using?\r\n<!-- If you're using Linux, you can run `cat /proc/cpuinfo` -->\r\nrun in docker container \r\n### Steps to reproduce\r\n<!-- If possible, provide a recipe for reproducing the error. A complete runnable program is good. -->\r\nuse br to restore backup \r\nthe br command \r\n```\r\nbr restore full --send-credentials-to-tikv=true --storage=gcs://test-gcp-jony/ --gcs.predefined-acl=private --pd=cluster-pd.cluster:2379\r\n```\r\n### What did you expect?\r\nrestore successful\r\n### What did happened?\r\nreport error \r\n```\r\n[2020/04/22 12:28:29.666 +00:00] [ERROR] [sst_importer.rs:121] [\"download failed\"] [err=\"Engine Engine(\\\"Corruption: Bad table magic number: expected 9863518390377041911, found 3474576814686811188 in /var/lib/tikv/import/.temp/cf4ef1b9-3fc5-4c1d-86bd-c3083c90bd2d_62_1_31.sst\\\")\"] [meta=\"uuid: CF4EF1B93FC54C1D86BDC3083C90BD2D range { start: 7480000000000000FF3E5F720000000000FA end: 7480000000000000FF3E5F72FF } cf_name: \\\"write\\\" region_id: 62 region_epoch { conf_ver: 1 version: 31 }\"]\r\n```\r\nthe file in gcs is 22.74M but the download file is 473 bytes\r\n```\r\n-rw-r--r--    1 root     root           473 Apr 22 12:28 /var/lib/tikv/import/.temp/cf4ef1b9-3fc5-4c1d-86bd-c3083c90bd2d_62_1_31.sst\r\n```",
  "closed_at": "2020-05-06T07:20:08Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/29268173?v=4",
    "events_url": "https://api.github.com/users/sre-bot/events{/privacy}",
    "followers_url": "https://api.github.com/users/sre-bot/followers",
    "following_url": "https://api.github.com/users/sre-bot/following{/other_user}",
    "gists_url": "https://api.github.com/users/sre-bot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sre-bot",
    "id": 29268173,
    "login": "sre-bot",
    "node_id": "MDQ6VXNlcjI5MjY4MTcz",
    "organizations_url": "https://api.github.com/users/sre-bot/orgs",
    "received_events_url": "https://api.github.com/users/sre-bot/received_events",
    "repos_url": "https://api.github.com/users/sre-bot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sre-bot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sre-bot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sre-bot"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/tikv/tikv/issues/7625/comments",
  "created_at": "2020-04-22T12:42:50Z",
  "events_url": "https://api.github.com/repos/tikv/tikv/issues/7625/events",
  "html_url": "https://github.com/tikv/tikv/issues/7625",
  "id": 604727079,
  "labels": [],
  "labels_url": "https://api.github.com/repos/tikv/tikv/issues/7625/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU2MDQ3MjcwNzk=",
  "number": 7625,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/tikv/tikv",
  "state": "closed",
  "title": "BR -> GCS report download error",
  "updated_at": "2020-05-06T07:20:08Z",
  "url": "https://api.github.com/repos/tikv/tikv/issues/7625",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/30903849?v=4",
    "events_url": "https://api.github.com/users/shuijing198799/events{/privacy}",
    "followers_url": "https://api.github.com/users/shuijing198799/followers",
    "following_url": "https://api.github.com/users/shuijing198799/following{/other_user}",
    "gists_url": "https://api.github.com/users/shuijing198799/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/shuijing198799",
    "id": 30903849,
    "login": "shuijing198799",
    "node_id": "MDQ6VXNlcjMwOTAzODQ5",
    "organizations_url": "https://api.github.com/users/shuijing198799/orgs",
    "received_events_url": "https://api.github.com/users/shuijing198799/received_events",
    "repos_url": "https://api.github.com/users/shuijing198799/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/shuijing198799/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shuijing198799/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/shuijing198799"
  }
}