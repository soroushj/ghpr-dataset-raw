{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "## Bug Report\r\nRun `make` failed . \r\n \r\n### What version of TiKV are you using?\r\nbranch: master\r\ncommit: afa7a80db\r\n\r\n### What operating system and CPU are you using?\r\nOS:\r\n```\r\nmacOS Catalina\r\nversion 10.15.6 (19G2021)\r\n```\r\n\r\n### Steps to reproduce\r\n```shell\r\n> git clone https://github.com/tikv/tikv.git\r\n> cd tikv\r\n> RUST_BACKTRACE=1 make build\r\n```\r\n### What did you expect?\r\nbuild succeed.\r\n\r\n### What did happened?\r\n```\r\n--- stderr\r\nCMake Warning (dev) at CMakeLists.txt:36 (project):\r\n  Policy CMP0025 is not set: Compiler id for Apple Clang is now AppleClang.\r\n  Run \"cmake --help-policy CMP0025\" for policy details.  Use the cmake_policy\r\n  command to set the policy and suppress this warning.\r\n\r\n  Converting C compiler id \"AppleClang\" to \"Clang\" for compatibility.\r\nThis warning is for project developers.  Use -Wno-dev to suppress it.\r\n\r\n   Called from: [1]     /Users/patrick/.cargo/git/checkouts/rust-rocksdb-a9a28e74c6ead8ef/9d62f85/librocksdb_sys/rocksdb/CMakeLists.txt\r\nCMake Warning (dev) at CMakeLists.txt:36 (project):\r\n  Policy CMP0025 is not set: Compiler id for Apple Clang is now AppleClang.\r\n  Run \"cmake --help-policy CMP0025\" for policy details.  Use the cmake_policy\r\n  command to set the policy and suppress this warning.\r\n\r\n  Converting CXX compiler id \"AppleClang\" to \"Clang\" for compatibility.\r\nThis warning is for project developers.  Use -Wno-dev to suppress it.\r\n\r\n   Called from: [1]     /Users/patrick/.cargo/git/checkouts/rust-rocksdb-a9a28e74c6ead8ef/9d62f85/librocksdb_sys/rocksdb/CMakeLists.txt\r\n/Users/patrick/.cargo/git/checkouts/rust-rocksdb-a9a28e74c6ead8ef/9d62f85/librocksdb_sys/rocksdb/options/options_parser.cc:412:21: error: loop variable 'pair' of type 'const std::__1::pair<const std::__1::basic_string<char>, std::__1::basic_string<char> >' creates a copy from type 'const std::__1::pair<const std::__1::basic_string<char>, std::__1::basic_string<char> >' [-Werror,-Wrange-loop-analysis]\r\n    for (const auto pair : opt_map) {\r\n                    ^\r\n/Users/patrick/.cargo/git/checkouts/rust-rocksdb-a9a28e74c6ead8ef/9d62f85/librocksdb_sys/rocksdb/options/options_parser.cc:412:10: note: use reference type 'const std::__1::pair<const std::__1::basic_string<char>, std::__1::basic_string<char> > &' to prevent copying\r\n    for (const auto pair : opt_map) {\r\n         ^~~~~~~~~~~~~~~~~\r\n                    &\r\n1 error generated.\r\nmake[4]: *** [CMakeFiles/rocksdb.dir/options/options_parser.cc.o] Error 1\r\nmake[4]: *** Waiting for unfinished jobs....\r\n/Users/patrick/.cargo/git/checkouts/rust-rocksdb-a9a28e74c6ead8ef/9d62f85/librocksdb_sys/rocksdb/db/db_impl/db_impl_compaction_flush.cc:1058:21: error: loop variable 'newf' of type 'const std::__1::pair<int, rocksdb::FileMetaData>' creates a copy from type 'const std::__1::pair<int, rocksdb::FileMetaData>' [-Werror,-Wrange-loop-analysis]\r\n    for (const auto newf : c->edit()->GetNewFiles()) {\r\n                    ^\r\n/Users/patrick/.cargo/git/checkouts/rust-rocksdb-a9a28e74c6ead8ef/9d62f85/librocksdb_sys/rocksdb/db/db_impl/db_impl_compaction_flush.cc:1058:10: note: use reference type 'const std::__1::pair<int, rocksdb::FileMetaData> &' to prevent copying\r\n    for (const auto newf : c->edit()->GetNewFiles()) {\r\n         ^~~~~~~~~~~~~~~~~\r\n                    &\r\n/Users/patrick/.cargo/git/checkouts/rust-rocksdb-a9a28e74c6ead8ef/9d62f85/librocksdb_sys/rocksdb/db/db_impl/db_impl_compaction_flush.cc:1150:21: error: loop variable 'newf' of type 'const std::__1::pair<int, rocksdb::FileMetaData>' creates a copy from type 'const std::__1::pair<int, rocksdb::FileMetaData>' [-Werror,-Wrange-loop-analysis]\r\n    for (const auto newf : c->edit()->GetNewFiles()) {\r\n                    ^\r\n/Users/patrick/.cargo/git/checkouts/rust-rocksdb-a9a28e74c6ead8ef/9d62f85/librocksdb_sys/rocksdb/db/db_impl/db_impl_compaction_flush.cc:1150:10: note: use reference type 'const std::__1::pair<int, rocksdb::FileMetaData> &' to prevent copying\r\n    for (const auto newf : c->edit()->GetNewFiles()) {\r\n         ^~~~~~~~~~~~~~~~~\r\n                    &\r\n2 errors generated.\r\nmake[4]: *** [CMakeFiles/rocksdb.dir/db/db_impl/db_impl_compaction_flush.cc.o] Error 1\r\nmake[3]: *** [CMakeFiles/rocksdb.dir/all] Error 2\r\nmake[2]: *** [CMakeFiles/rocksdb.dir/rule] Error 2\r\nmake[1]: *** [rocksdb] Error 2\r\nthread 'main' panicked at '\r\ncommand did not execute successfully, got: exit code: 2\r\n```",
  "closed_at": "2020-10-06T20:59:41Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/66930949?v=4",
    "events_url": "https://api.github.com/users/ti-srebot/events{/privacy}",
    "followers_url": "https://api.github.com/users/ti-srebot/followers",
    "following_url": "https://api.github.com/users/ti-srebot/following{/other_user}",
    "gists_url": "https://api.github.com/users/ti-srebot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ti-srebot",
    "id": 66930949,
    "login": "ti-srebot",
    "node_id": "MDQ6VXNlcjY2OTMwOTQ5",
    "organizations_url": "https://api.github.com/users/ti-srebot/orgs",
    "received_events_url": "https://api.github.com/users/ti-srebot/received_events",
    "repos_url": "https://api.github.com/users/ti-srebot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ti-srebot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ti-srebot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ti-srebot"
  },
  "comments": 6,
  "comments_url": "https://api.github.com/repos/tikv/tikv/issues/8780/comments",
  "created_at": "2020-10-02T06:21:38Z",
  "events_url": "https://api.github.com/repos/tikv/tikv/issues/8780/events",
  "html_url": "https://github.com/tikv/tikv/issues/8780",
  "id": 713380069,
  "labels": [
    {
      "color": "d12e67",
      "default": false,
      "description": "SIG: Engine",
      "id": 1662435932,
      "name": "sig/engine",
      "node_id": "MDU6TGFiZWwxNjYyNDM1OTMy",
      "url": "https://api.github.com/repos/tikv/tikv/labels/sig/engine"
    },
    {
      "color": "fbca04",
      "default": false,
      "description": "Status: Under discussion or need discussion",
      "id": 426638980,
      "name": "status/discussion",
      "node_id": "MDU6TGFiZWw0MjY2Mzg5ODA=",
      "url": "https://api.github.com/repos/tikv/tikv/labels/status/discussion"
    }
  ],
  "labels_url": "https://api.github.com/repos/tikv/tikv/issues/8780/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU3MTMzODAwNjk=",
  "number": 8780,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/tikv/tikv",
  "state": "closed",
  "title": "Build failed",
  "updated_at": "2020-10-16T15:08:51Z",
  "url": "https://api.github.com/repos/tikv/tikv/issues/8780",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/5486149?v=4",
    "events_url": "https://api.github.com/users/Patrick0308/events{/privacy}",
    "followers_url": "https://api.github.com/users/Patrick0308/followers",
    "following_url": "https://api.github.com/users/Patrick0308/following{/other_user}",
    "gists_url": "https://api.github.com/users/Patrick0308/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/Patrick0308",
    "id": 5486149,
    "login": "Patrick0308",
    "node_id": "MDQ6VXNlcjU0ODYxNDk=",
    "organizations_url": "https://api.github.com/users/Patrick0308/orgs",
    "received_events_url": "https://api.github.com/users/Patrick0308/received_events",
    "repos_url": "https://api.github.com/users/Patrick0308/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/Patrick0308/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Patrick0308/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/Patrick0308"
  }
}