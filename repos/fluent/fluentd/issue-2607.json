{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "**Describe the issue**\r\n\r\nI've deployed fluentd daemonset and now fluentd logs returns following errors\r\n\r\n**Your Error Log**\r\n\r\n```\r\nkubectl logs fluentd-xzgzv -f\r\n\r\n2019-09-07 13:23:35 +0000 [info]: parsing config file is succeeded path=\"/fluentd/etc/fluent.conf\"\r\n2019-09-07 13:23:36 +0000 [warn]: [out_es] 'flush_interval' is ignored because default 'flush_mode' is not 'interval': 'lazy'\r\n2019-09-07 13:23:36 +0000 [warn]: [out_es] Detected ES 7.x or above: `_doc` will be used as the document `_type`.\r\n2019-09-07 13:23:37 +0000 [info]: using configuration file: <ROOT>\r\n  <source>\r\n    @id bridge-containers.log\r\n    @type tail\r\n    path \"/var/log/name0-changed/*/*.log,/var/log/name0-changed/name1-changed/*/*.log\"\r\n    pos_file \"/var/log/name0-changed/name2-changed.log.pos\"\r\n    tag \"name-changed0\"\r\n    read_from_head true\r\n    <parse>\r\n      @type \"json\"\r\n    </parse>\r\n  </source>\r\n  <source>\r\n    @type tail\r\n    @id in_tail_container_logs\r\n    path \"/var/log/containers/*.log\"\r\n    pos_file \"/var/log/fluentd-containers.log.pos\"\r\n    tag \"kubernetes\"\r\n    read_from_head true\r\n    <parse>\r\n      @type \"json\"\r\n      time_format \"%Y-%m-%dT%H:%M:%S.%NZ\"\r\n      time_type string\r\n    </parse>\r\n  </source>\r\n  <filter kubernetes.**>\r\n    @type kubernetes_metadata\r\n    @id filter_kube_metadata\r\n  </filter>\r\n  <source>\r\n    @type tail\r\n    @id in_tail_kube_apiserver_audit\r\n    multiline_flush_interval 5s\r\n    path \"/var/log/kubernetes/kube-apiserver-audit.log\"\r\n    pos_file \"/var/log/kube-apiserver-audit.log.pos\"\r\n    tag \"kube-apiserver-audit\"\r\n    <parse>\r\n      @type \"multiline\"\r\n      format_firstline \"/^\\\\S+\\\\s+AUDIT:/\"\r\n      format1 /^(?<time>\\S+) AUDIT:(?: (?:id=\"(?<id>(?:[^\"\\\\]|\\\\.)*)\"|ip=\"(?<ip>(?:[^\"\\\\]|\\\\.)*)\"|method=\"(?<method>(?:[^\"\\\\]|\\\\.)*)\"|user=\"(?<user>(?:[^\"\\\\]|\\\\.)*)\"|groups=\"(?<groups>(?:[^\"\\\\]|\\\\.)*)\"|as=\"(?<as>(?:[^\"\\\\]|\\\\.)*)\"|asgroups=\"(?<asgroups>(?:[^\"\\\\]|\\\\.)*)\"|namespace=\"(?<namespace>(?:[^\"\\\\]|\\\\.)*)\"|uri=\"(?<uri>(?:[^\"\\\\]|\\\\.)*)\"|response=\"(?<response>(?:[^\"\\\\]|\\\\.)*)\"|\\w+=\"(?:[^\"\\\\]|\\\\.)*\"))*/\r\n      time_format \"%Y-%m-%dT%T.%L%Z\"\r\n    </parse>\r\n  </source>\r\n  <source>\r\n    @type systemd\r\n    @id in_systemd_docker\r\n    matches [{\"_SYSTEMD_UNIT\":\"docker.service\"}]\r\n    read_from_head true\r\n    tag \"docker\"\r\n    <storage>\r\n      @type \"local\"\r\n      persistent true\r\n      path \"/var/log/fluentd-journald-docker-cursor.json\"\r\n    </storage>\r\n    <entry>\r\n      fields_strip_underscores true\r\n    </entry>\r\n  </source>\r\n  <source>\r\n    @type systemd\r\n    @id in_systemd_kubelet\r\n    matches [{\"_SYSTEMD_UNIT\":\"kubelet.service\"}]\r\n    read_from_head true\r\n    tag \"kubelet\"\r\n    <storage>\r\n      @type \"local\"\r\n      persistent true\r\n      path \"/var/log/fluentd-journald-kubelet-cursor.json\"\r\n    </storage>\r\n    <entry>\r\n      fields_strip_underscores true\r\n    </entry>\r\n  </source>\r\n  <source>\r\n    @id kernel\r\n    @type systemd\r\n    matches [{\"_TRANSPORT\":\"kernel\"}]\r\n    read_from_head true\r\n    tag \"kernel\"\r\n    <storage>\r\n      @type \"local\"\r\n      persistent true\r\n      path \"/var/log/fluentd-kernel-cursor.json\"\r\n    </storage>\r\n    <entry>\r\n      fields_strip_underscores true\r\n      fields_lowercase true\r\n    </entry>\r\n  </source>\r\n  <source>\r\n    @id prometheus\r\n    @type prometheus\r\n    bind \"0.0.0.0\"\r\n    port 24231\r\n    metrics_path \"/metrics\"\r\n  </source>\r\n  <source>\r\n    @id monitor_agent\r\n    @type monitor_agent\r\n  </source>\r\n  <source>\r\n    @id prometheus_monitor\r\n    @type prometheus_monitor\r\n    <labels>\r\n      host ${hostname}\r\n    </labels>\r\n  </source>\r\n  <source>\r\n    @id prometheus_output_monitor\r\n    @type prometheus_output_monitor\r\n    <labels>\r\n      host ${hostname}\r\n    </labels>\r\n  </source>\r\n  <source>\r\n    @id prometheus_tail_monitor\r\n    @type prometheus_tail_monitor\r\n    <labels>\r\n      host ${hostname}\r\n    </labels>\r\n  </source>\r\n  <system>\r\n    root_dir \"/tmp/fluentd-buffers/\"\r\n  </system>\r\n  <match fluentd.**>\r\n    @type null\r\n  </match>\r\n  <source>\r\n    @id forward\r\n    @type forward\r\n  </source>\r\n  <match **>\r\n    @id out_es\r\n    @type elasticsearch\r\n    @log_level \"info\"\r\n    verify_es_version_at_startup false\r\n    default_elasticsearch_version 7\r\n    reload_connections false\r\n    reconnect_on_error true\r\n    reload_on_failure true\r\n    request_timeout 120s\r\n    resurrect_after 5s\r\n    include_tag_key true\r\n    type_name \"fluentd\"\r\n    host \"elasticsearch-client\"\r\n    port 9200\r\n    scheme http\r\n    ssl_verify true\r\n    ssl_version TLSv1\r\n    logstash_format false\r\n    index_name \"fluentd.${tag}\"\r\n    unrecoverable_error_types [\"out_of_memory_error\"]\r\n    <buffer tag, time>\r\n      @type \"file\"\r\n      timekey @timestamp\r\n      path \"/var/log/fluentd-buffers/kubernetes.system.buffer\"\r\n      flush_thread_count 8\r\n      flush_interval 5s\r\n      retry_forever true\r\n      retry_max_interval 30\r\n      chunk_limit_size 2M\r\n      queue_limit_length 32\r\n    </buffer>\r\n  </match>\r\n</ROOT>\r\n2019-09-07 13:23:37 +0000 [info]: starting fluentd-1.7.0 pid=7 ruby=\"2.6.3\"\r\n2019-09-07 13:23:37 +0000 [info]: spawn command to main:  cmdline=[\"/usr/local/bin/ruby\", \"-Eascii-8bit:ascii-8bit\", \"/fluentd/vendor/bundle/ruby/2.6.0/bin/fluentd\", \"-c\", \"/fluentd/etc/fluent.conf\", \"-p\", \"/fluentd/plugins\", \"--gemfile\", \"/fluentd/Gemfile\", \"--under-supervisor\"]\r\n2019-09-07 13:23:39 +0000 [info]: gem 'fluent-plugin-concat' version '2.3.0'\r\n2019-09-07 13:23:39 +0000 [info]: gem 'fluent-plugin-elasticsearch' version '3.5.5'\r\n2019-09-07 13:23:39 +0000 [info]: gem 'fluent-plugin-grok-parser' version '2.5.1'\r\n2019-09-07 13:23:39 +0000 [info]: gem 'fluent-plugin-json-in-json-2' version '1.0.2'\r\n2019-09-07 13:23:39 +0000 [info]: gem 'fluent-plugin-kubernetes_metadata_filter' version '2.3.0'\r\n2019-09-07 13:23:39 +0000 [info]: gem 'fluent-plugin-multi-format-parser' version '1.0.0'\r\n2019-09-07 13:23:39 +0000 [info]: gem 'fluent-plugin-prometheus' version '1.5.0'\r\n2019-09-07 13:23:39 +0000 [info]: gem 'fluent-plugin-record-modifier' version '2.0.1'\r\n2019-09-07 13:23:39 +0000 [info]: gem 'fluent-plugin-rewrite-tag-filter' version '2.2.0'\r\n2019-09-07 13:23:39 +0000 [info]: gem 'fluent-plugin-systemd' version '1.0.2'\r\n2019-09-07 13:23:39 +0000 [info]: gem 'fluentd' version '1.7.0'\r\n2019-09-07 13:23:39 +0000 [info]: adding filter pattern=\"kubernetes.**\" type=\"kubernetes_metadata\"\r\n2019-09-07 13:23:40 +0000 [info]: adding match pattern=\"fluentd.**\" type=\"null\"\r\n2019-09-07 13:23:40 +0000 [info]: adding match pattern=\"**\" type=\"elasticsearch\"\r\n2019-09-07 13:23:41 +0000 [warn]: #0 [out_es] 'flush_interval' is ignored because default 'flush_mode' is not 'interval': 'lazy'\r\n2019-09-07 13:23:41 +0000 [warn]: #0 [out_es] Detected ES 7.x or above: `_doc` will be used as the document `_type`.\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"tail\"\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"tail\"\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"tail\"\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"systemd\"\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"systemd\"\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"systemd\"\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"prometheus\"\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"monitor_agent\"\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"prometheus_monitor\"\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"prometheus_output_monitor\"\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"prometheus_tail_monitor\"\r\n2019-09-07 13:23:41 +0000 [info]: adding source type=\"forward\"\r\n2019-09-07 13:23:41 +0000 [info]: #0 starting fluentd worker pid=12 ppid=7 worker=0\r\n2019-09-07 13:23:41 +0000 [info]: #0 [forward] listening port port=24224 bind=\"0.0.0.0\"\r\n2019-09-07 13:23:41 +0000 [error]: #0 [out_es] unexpected error while checking flushed chunks. ignored. error_class=ZeroDivisionError error=\"divided by 0\"\r\n  2019-09-07 13:23:41 +0000 [error]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:1379:in `%'\r\n  2019-09-07 13:23:41 +0000 [error]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:1379:in `enqueue_thread_run'\r\n  2019-09-07 13:23:41 +0000 [error]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin_helper/thread.rb:78:in `block in thread_create'\r\n2019-09-07 13:23:41 +0000 [info]: #0 [in_tail_container_logs] following tail of /var/log/containers/elasticsearch-client-854bc5db48-5dfxn_logging_sysctl-04ac2b076f4254cd239aa7c7e7c241b734e01a32d16ad858ac11e0eb152e45bb.log\r\n2019-09-07 13:23:41 +0000 [info]: #0 [in_tail_container_logs] following tail of /var/log/containers/fluentd-xzgzv_logging_fluentd-elasticsearch-5eb328828a5f7047742b2d411e26e6c0d817ced571afe4f2181c1786482cb030.log\r\n2019-09-07 13:23:41 +0000 [warn]: #0 emit transaction failed: error_class=ZeroDivisionError error=\"divided by 0\" location=\"/fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\" tag=\"kubernetes\"\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `calculate_timekey'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:829:in `metadata'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:962:in `block in handle_stream_with_standard_format'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/event.rb:197:in `block in each'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/event.rb:196:in `each'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/event.rb:196:in `each'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:961:in `handle_stream_with_standard_format'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:871:in `execute_chunking'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:797:in `emit_buffered'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/event_router.rb:160:in `emit_events'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/event_router.rb:97:in `emit_stream'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:410:in `receive_lines'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:528:in `wrap_receive_lines'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:762:in `block in handle_notify'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:806:in `with_io'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:742:in `handle_notify'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:738:in `block in on_notify'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:738:in `synchronize'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:738:in `on_notify'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:558:in `on_notify'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:532:in `attach'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:281:in `setup_watcher'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:312:in `block in start_watchers'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:298:in `each'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:298:in `start_watchers'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:275:in `refresh_watchers'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/in_tail.rb:203:in `start'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/root_agent.rb:203:in `block in start'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/root_agent.rb:192:in `block (2 levels) in lifecycle'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/root_agent.rb:191:in `each'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/root_agent.rb:191:in `block in lifecycle'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/root_agent.rb:178:in `each'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/root_agent.rb:178:in `lifecycle'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/root_agent.rb:202:in `start'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/engine.rb:274:in `start'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/engine.rb:219:in `run'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/supervisor.rb:808:in `run_engine'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/supervisor.rb:551:in `block in run_worker'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/supervisor.rb:733:in `main_process'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/supervisor.rb:546:in `run_worker'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/command/fluentd.rb:320:in `<top (required)>'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /usr/local/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /usr/local/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/bin/fluentd:8:in `<top (required)>'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/bin/fluentd:23:in `load'\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 /fluentd/vendor/bundle/ruby/2.6.0/bin/fluentd:23:in `<main>'\r\n2019-09-07 13:23:41 +0000 [info]: #0 [in_tail_container_logs] following tail of /var/log/containers/kube-proxy-lgttx_kube-system_kube-proxy-db6caa21d6facf61ee2d7a0782ba9b36a1e7e65ef8811c476c94817944be0441.log\r\n2019-09-07 13:23:41 +0000 [info]: #0 [in_tail_container_logs] following tail of /var/log/containers/weave-net-5mqvj_kube-system_weave-ea77b3fcfaccb6412a85ed2193af4c44fc4b9f51935fbb9c572972d0ef17c1f5.log\r\n2019-09-07 13:23:41 +0000 [warn]: #0 emit transaction failed: error_class=ZeroDivisionError error=\"divided by 0\" location=\"/fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\" tag=\"kubernetes\"\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 suppressed same stacktrace\r\n2019-09-07 13:23:41 +0000 [info]: #0 [in_tail_container_logs] following tail of /var/log/containers/weave-net-5mqvj_kube-system_weave-npc-f52c8616fa657478e6c9bdbabdd6501bc26a8a8a037a7f674b580d22db9e9b62.log\r\n2019-09-07 13:23:41 +0000 [warn]: #0 emit transaction failed: error_class=ZeroDivisionError error=\"divided by 0\" location=\"/fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\" tag=\"kubernetes\"\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 suppressed same stacktrace\r\n2019-09-07 13:23:41 +0000 [info]: #0 [in_tail_container_logs] following tail of /var/log/containers/weave-scope-agent-dbtxc_weave_scope-agent-307b86ec2c9cae0a716b12bb44916d7ad96481bdaaf600b50c95b2fd996ea456.log\r\n2019-09-07 13:23:41 +0000 [info]: #0 [in_tail_container_logs] following tail of /var/log/containers/harbor-portal-7fd6cfc989-snn8f_harbor_portal-fadbfc0cef525c8c1ddbfce13e2989d8211728b9d7020144435861965d0669b1.log\r\n2019-09-07 13:23:41 +0000 [warn]: #0 emit transaction failed: error_class=ZeroDivisionError error=\"divided by 0\" location=\"/fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\" tag=\"kubernetes\"\r\n  2019-09-07 13:23:41 +0000 [warn]: #0 suppressed same stacktrace\r\n...\r\n\r\n```\r\nFollowing with a lot of 'ZeroDivisionError's\r\n\r\n```\r\n...\r\n2019-09-07 13:30:47 +0000 [warn]: #0 emit transaction failed: error_class=ZeroDivisionError error=\"divided by 0\" location=\"/fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\" tag=\"kubernetes\"\r\n  2019-09-07 13:30:47 +0000 [warn]: #0 suppressed same stacktrace\r\n2019-09-07 13:30:47 +0000 [warn]: #0 emit transaction failed: error_class=ZeroDivisionError error=\"divided by 0\" location=\"/fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\" tag=\"fluent.warn\"\r\n  2019-09-07 13:30:47 +0000 [warn]: #0 suppressed same stacktrace\r\n2019-09-07 13:30:47 +0000 [error]: #0 failed to emit fluentd's log event tag=\"fluent.warn\" event={\"error\"=>\"#<ZeroDivisionError: divided by 0>\", \"location\"=>\"/fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\", \"tag\"=>\"kubernetes\", \"message\"=>\"emit transaction failed: error_class=ZeroDivisionError error=\\\"divided by 0\\\" location=\\\"/fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\\\" tag=\\\"kubernetes\\\"\"} error_class=ZeroDivisionError error=\"divided by 0\"\r\n2019-09-07 13:30:47 +0000 [warn]: #0 emit transaction failed: error_class=ZeroDivisionError error=\"divided by 0\" location=\"/fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\" tag=\"fluent.warn\"\r\n  2019-09-07 13:30:47 +0000 [warn]: #0 suppressed same stacktrace\r\n2019-09-07 13:30:47 +0000 [error]: #0 failed to emit fluentd's log event tag=\"fluent.warn\" event={\"error\"=>\"#<ZeroDivisionError: divided by 0>\", \"location\"=>\"/fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\", \"tag\"=>\"kubernetes\", \"message\"=>\"emit transaction failed: error_class=ZeroDivisionError error=\\\"divided by 0\\\" location=\\\"/fluentd/vendor/bundle/ruby/2.6.0/gems/fluentd-1.7.0/lib/fluent/plugin/output.rb:851:in `%'\\\" tag=\\\"kubernetes\\\"\"} error_class=ZeroDivisionError error=\"divided by 0\"\r\n2019-09-07 13:30:48 +0000 [error]: #0 [out_es] unexpected error while checking flushed chunks. ignored. error_class=ZeroDivisionError error=\"divided by 0\"\r\n  2019-09-07 13:30:48 +0000 [error]: #0 suppressed same stacktrace\r\n...\r\n\r\n```\r\nData is not written, elasticsearch is empty.\r\n\r\n**Your Environment**\r\n\r\nCentOS 7.6\r\nKubernetes: 1.14.1\r\nFluentd image: fluent/fluentd-kubernetes-daemonset:v1.7.0-debian-elasticsearch7-1.1\r\nElasticsearch image: docker.elastic.co/elasticsearch/elasticsearch:7.3.0\r\n\r\n**Your Configuration**\r\n\r\nFluentd config map can be found in the beginning of the log\r\n\r\nDaemonset yaml:\r\n\r\n```\r\napiVersion: apps/v1\r\nkind: DaemonSet\r\nmetadata:\r\n  name: fluentd\r\n  namespace: logging\r\n  labels:\r\n    app: fluentd\r\nspec:\r\n  updateStrategy:\r\n    type: RollingUpdate\r\n  selector:\r\n    matchLabels:\r\n      app: fluentd\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: fluentd\r\n      annotations:\r\n        prometheus.io/port: \"24231\"\r\n        prometheus.io/scrape: \"true\"\r\n    spec:\r\n      serviceAccountName: fluentd\r\n      containers:\r\n      - name: fluentd-elasticsearch\r\n        image: fluent/fluentd-kubernetes-daemonset:v1.7.0-debian-elasticsearch7-1.1\r\n        imagePullPolicy: Always\r\n        env:\r\n        - name: FLUENT_ELASTICSEARCH_HOST\r\n          value: \"elasticsearch-client\"\r\n        - name: FLUENT_ELASTICSEARCH_PORT\r\n          value: \"9200\"\r\n        - name: K8S_NODE_NAME\r\n          valueFrom:\r\n            fieldRef:\r\n              fieldPath: spec.nodeName\r\n        resources:\r\n          limits:\r\n            cpu: 512m\r\n            memory: 1Gi\r\n          requests:\r\n            cpu: 256m\r\n            memory: 500Mi\r\n        volumeMounts:\r\n        - name: varlog\r\n          mountPath: /var/log\r\n        - name: varlibdockercontainers\r\n          mountPath: /var/lib/docker/containers\r\n          readOnly: true\r\n        - name: config-volume\r\n          mountPath: /fluentd/etc\r\n      terminationGracePeriodSeconds: 30\r\n      volumes:\r\n      - name: varlog\r\n        hostPath:\r\n          path: /var/log\r\n      - name: varlibdockercontainers\r\n        hostPath:\r\n          path: /var/lib/docker/containers\r\n      - name: config-volume\r\n        configMap:\r\n          name: fluentd\r\n      tolerations:\r\n      - effect: NoSchedule\r\n        key: node-role.kubernetes.io/master\r\n        operator: Exists\r\n\r\n```\r\n**Additional comments**\r\n\r\nCouldn't find anything about this exception in the internet and posting it as an issue here\r\n\r\nI hope someone will help me with this\r\n\r\nThanks in advance!",
  "closed_at": "2019-09-11T08:34:19Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5616899?v=4",
    "events_url": "https://api.github.com/users/ganmacs/events{/privacy}",
    "followers_url": "https://api.github.com/users/ganmacs/followers",
    "following_url": "https://api.github.com/users/ganmacs/following{/other_user}",
    "gists_url": "https://api.github.com/users/ganmacs/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ganmacs",
    "id": 5616899,
    "login": "ganmacs",
    "node_id": "MDQ6VXNlcjU2MTY4OTk=",
    "organizations_url": "https://api.github.com/users/ganmacs/orgs",
    "received_events_url": "https://api.github.com/users/ganmacs/received_events",
    "repos_url": "https://api.github.com/users/ganmacs/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ganmacs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ganmacs/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ganmacs"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/fluent/fluentd/issues/2607/comments",
  "created_at": "2019-09-07T14:22:20Z",
  "events_url": "https://api.github.com/repos/fluent/fluentd/issues/2607/events",
  "html_url": "https://github.com/fluent/fluentd/issues/2607",
  "id": 490641025,
  "labels": [
    {
      "color": "e11d21",
      "default": true,
      "description": null,
      "id": 94152935,
      "name": "bug",
      "node_id": "MDU6TGFiZWw5NDE1MjkzNQ==",
      "url": "https://api.github.com/repos/fluent/fluentd/labels/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/fluent/fluentd/issues/2607/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0OTA2NDEwMjU=",
  "number": 2607,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/fluent/fluentd",
  "state": "closed",
  "title": "error_class=ZeroDivisionError error=\"divided by 0\"",
  "updated_at": "2019-09-11T08:34:19Z",
  "url": "https://api.github.com/repos/fluent/fluentd/issues/2607",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/26525441?v=4",
    "events_url": "https://api.github.com/users/luthienberen/events{/privacy}",
    "followers_url": "https://api.github.com/users/luthienberen/followers",
    "following_url": "https://api.github.com/users/luthienberen/following{/other_user}",
    "gists_url": "https://api.github.com/users/luthienberen/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/luthienberen",
    "id": 26525441,
    "login": "luthienberen",
    "node_id": "MDQ6VXNlcjI2NTI1NDQx",
    "organizations_url": "https://api.github.com/users/luthienberen/orgs",
    "received_events_url": "https://api.github.com/users/luthienberen/received_events",
    "repos_url": "https://api.github.com/users/luthienberen/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/luthienberen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luthienberen/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/luthienberen"
  }
}