{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "- fluentd 1.1.0\r\n- Fedora 27\r\n- Configuration\r\n```\r\n<system>\r\n  log_level debug\r\n</system>\r\n<source>\r\n  @type forward\r\n  port 24224\r\n</source>\r\n<source>\r\n  @type forward\r\n  port 24225\r\n  <security>\r\n    self_hostname fluenttest\r\n    shared_key abcd1234\r\n  </security>\r\n</source>\r\n<source>\r\n  @type forward\r\n  port 24226\r\n  <security>\r\n    self_hostname fluenttest\r\n    shared_key 1234abcd\r\n    user_auth true\r\n    <user>\r\n      username foo\r\n      password bar\r\n    </user>\r\n  </security>\r\n</source>\r\n<match **>\r\n  @type file\r\n  @id output1\r\n  path /fluentd/log/data.*.log\r\n  symlink_path /fluentd/log/data.log\r\n  append true\r\n  time_slice_format %Y%m%d\r\n  time_slice_wait 10m\r\n  time_format %Y%m%dT%H%M%S%z\r\n  buffer_path /fluentd/log/data.*.log\r\n  <format>\r\n    @type json\r\n  </format>\r\n</match>\r\n```\r\n\r\nI'm developing a new version of fluent/fluent-logger-python#124. As part of the testing suite I'm using docker with the real-life version of fluentd (1.1.0 currently) to verify proper functionality. \r\n\r\nWhat I'm finding is that it looks like FluentD, upon receiving an incorrect shared key or user creds, is sending a PONG, but is also immediately closing the connection. This causes the receiving client to receive an EOF instead of a PONG.\r\n\r\nWhat should be happening is the FluentD server sending a PONG, sending a socket RDWR shutdown, but should defer closing the actual socket for N seconds (15? 30?) to ensure that the client actually has a chance to receive the PONG with failed authentication reason.",
  "closed_at": "2018-01-30T11:54:55Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/16928?v=4",
    "events_url": "https://api.github.com/users/repeatedly/events{/privacy}",
    "followers_url": "https://api.github.com/users/repeatedly/followers",
    "following_url": "https://api.github.com/users/repeatedly/following{/other_user}",
    "gists_url": "https://api.github.com/users/repeatedly/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/repeatedly",
    "id": 16928,
    "login": "repeatedly",
    "node_id": "MDQ6VXNlcjE2OTI4",
    "organizations_url": "https://api.github.com/users/repeatedly/orgs",
    "received_events_url": "https://api.github.com/users/repeatedly/received_events",
    "repos_url": "https://api.github.com/users/repeatedly/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/repeatedly/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/repeatedly/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/repeatedly"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/fluent/fluentd/issues/1834/comments",
  "created_at": "2018-01-27T21:23:12Z",
  "events_url": "https://api.github.com/repos/fluent/fluentd/issues/1834/events",
  "html_url": "https://github.com/fluent/fluentd/issues/1834",
  "id": 292153753,
  "labels": [],
  "labels_url": "https://api.github.com/repos/fluent/fluentd/issues/1834/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyOTIxNTM3NTM=",
  "number": 1834,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/fluent/fluentd",
  "state": "closed",
  "title": "PONG on failed authentication is never received",
  "updated_at": "2018-01-30T11:54:55Z",
  "url": "https://api.github.com/repos/fluent/fluentd/issues/1834",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4",
    "events_url": "https://api.github.com/users/arcivanov/events{/privacy}",
    "followers_url": "https://api.github.com/users/arcivanov/followers",
    "following_url": "https://api.github.com/users/arcivanov/following{/other_user}",
    "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/arcivanov",
    "id": 5355666,
    "login": "arcivanov",
    "node_id": "MDQ6VXNlcjUzNTU2NjY=",
    "organizations_url": "https://api.github.com/users/arcivanov/orgs",
    "received_events_url": "https://api.github.com/users/arcivanov/received_events",
    "repos_url": "https://api.github.com/users/arcivanov/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/arcivanov"
  }
}