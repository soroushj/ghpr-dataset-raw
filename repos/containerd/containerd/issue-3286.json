{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\n**Description**\r\n\r\nIf a process is run inside a docker container via `docker exec` and that process leaves a zombie process then further `docker exec` commands to that container will hang. I believe the issue is in `containerd` based on reading about other issues in this repository. Please correct me if I am wrong.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Extract the attached `docker_exec_hang_issue.tar.gz`\r\n2. `cd docker_exec_hang_issue`\r\n3. `./setup_container.sh`\r\n4. Terminal 1: `./ping_via_exec.sh`\r\n5. Terminal 2: `./test.sh`\r\n6. Terminal 1's exec commands will get stuck few seconds after `test.sh` is executed.\r\n\r\n**Describe the results you received:**\r\nAny further `docker exec` command gets stuck. That is the `ping_via_exec.sh` script gets stuck\r\n\r\n**Describe the results you expected:**\r\nOther `docker exec` commands should continue to work.\r\n\r\n**Output of `containerd --version`:**\r\n\r\n```\r\ncontainerd github.com/containerd/containerd 1.2.5 bb71b10fd8f58240ca47fbb579b9d1028eea7c84\r\n```\r\n\r\nTried this test with stable and latest beta docker-ce versions.\r\n\r\n```\r\n[root@chomps1 ~]# docker version\r\nClient:\r\n Version:           18.09.6\r\n API version:       1.39\r\n Go version:        go1.10.8\r\n Git commit:        481bc77156\r\n Built:             Sat May  4 02:34:58 2019\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          18.09.6\r\n  API version:      1.39 (minimum version 1.12)\r\n  Go version:       go1.10.8\r\n  Git commit:       481bc77\r\n  Built:            Sat May  4 02:02:43 2019\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n[root@chomps1 ~]# \r\n```\r\n\r\n```\r\n[root@chomps1 19.03.0]# docker version\r\nClient:\r\n Version:           19.03.0-beta3\r\n API version:       1.40\r\n Go version:        go1.12.4\r\n Git commit:        c55e026\r\n Built:             Thu Apr 25 02:58:56 2019\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer:\r\n Engine:\r\n  Version:          19.03.0-beta3\r\n  API version:      1.40 (minimum version 1.12)\r\n  Go version:       go1.12.4\r\n  Git commit:       c55e026\r\n  Built:            Thu Apr 25 02:57:35 2019\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n containerd:\r\n  Version:          1.2.5\r\n  GitCommit:        bb71b10fd8f58240ca47fbb579b9d1028eea7c84\r\n runc:\r\n  Version:          1.0.0-rc6+dev\r\n  GitCommit:        2b18fe1d885ee5083ef9f0838fee39b62d653e30\r\n docker-init:\r\n  Version:          0.18.0\r\n  GitCommit:        fec3683\r\n[root@chomps1 19.03.0]# \r\n\r\n```\r\n\r\n[docker_exec_hang_issue.tar.gz](https://github.com/containerd/containerd/files/3178698/docker_exec_hang_issue.tar.gz)\r\n",
  "closed_at": "2019-06-21T18:28:46Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/749551?v=4",
    "events_url": "https://api.github.com/users/crosbymichael/events{/privacy}",
    "followers_url": "https://api.github.com/users/crosbymichael/followers",
    "following_url": "https://api.github.com/users/crosbymichael/following{/other_user}",
    "gists_url": "https://api.github.com/users/crosbymichael/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/crosbymichael",
    "id": 749551,
    "login": "crosbymichael",
    "node_id": "MDQ6VXNlcjc0OTU1MQ==",
    "organizations_url": "https://api.github.com/users/crosbymichael/orgs",
    "received_events_url": "https://api.github.com/users/crosbymichael/received_events",
    "repos_url": "https://api.github.com/users/crosbymichael/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/crosbymichael/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/crosbymichael/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/crosbymichael"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/containerd/containerd/issues/3286/comments",
  "created_at": "2019-05-14T15:59:24Z",
  "events_url": "https://api.github.com/repos/containerd/containerd/issues/3286/events",
  "html_url": "https://github.com/containerd/containerd/issues/3286",
  "id": 443998186,
  "labels": [],
  "labels_url": "https://api.github.com/repos/containerd/containerd/issues/3286/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0NDM5OTgxODY=",
  "number": 3286,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/containerd/containerd",
  "state": "closed",
  "title": "docker exec hang if earlier docker exec left a zombie process",
  "updated_at": "2019-06-21T18:28:46Z",
  "url": "https://api.github.com/repos/containerd/containerd/issues/3286",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/10710696?v=4",
    "events_url": "https://api.github.com/users/kkgahlot/events{/privacy}",
    "followers_url": "https://api.github.com/users/kkgahlot/followers",
    "following_url": "https://api.github.com/users/kkgahlot/following{/other_user}",
    "gists_url": "https://api.github.com/users/kkgahlot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/kkgahlot",
    "id": 10710696,
    "login": "kkgahlot",
    "node_id": "MDQ6VXNlcjEwNzEwNjk2",
    "organizations_url": "https://api.github.com/users/kkgahlot/orgs",
    "received_events_url": "https://api.github.com/users/kkgahlot/received_events",
    "repos_url": "https://api.github.com/users/kkgahlot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/kkgahlot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kkgahlot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/kkgahlot"
  }
}