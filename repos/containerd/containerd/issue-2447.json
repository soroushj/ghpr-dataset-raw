{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "I'm seeing errors when running the containerd test on a alpine 3.8 system which uses btrfs-progs v4.17:\r\n```\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547605695Z: ok  \tgithub.com/containerd/containerd/archive\t2.522s\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547613468Z: ok  \tgithub.com/containerd/containerd/metadata\t7.950s\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547621464Z: ok  \tgithub.com/containerd/containerd/mount/lookup_test\t1.528s\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547629023Z: --- FAIL: TestBtrfs (0.01s)\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547640633Z:     --- FAIL: TestBtrfs/Basic (0.43s)\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547650546Z:     \ttestsuite.go:92: Failed to initialize snapshotter: exit status 1\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547659960Z:     \t\tfailed to make btrfs filesystem (out: \"btrfs-progs v4.17 \\nERROR: '/dev/loop1' is too small to make a usable filesystem\\nERROR: minimum size for each btrfs device is 114294784\\nSee http://btrfs.wiki.kernel.org for more information.\\n\\n\")\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547668845Z:     \t\tgithub.com/containerd/containerd/snapshots/btrfs.boltSnapshotter.func1\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547676403Z:     \t\t\t/go/src/github.com/containerd/containerd/snapshots/btrfs/btrfs_test.go:62\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547684129Z:     \t\tgithub.com/containerd/containerd/snapshots/testsuite.makeTest.func1\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547695384Z:     \t\t\t/go/src/github.com/containerd/containerd/snapshots/testsuite/testsuite.go:90\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547705863Z:     \t\ttesting.tRunner\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547713741Z:     \t\t\t/usr/lib/go/src/testing/testing.go:777\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547723779Z:     \t\truntime.goexit\r\n[+ 54m 30s] [STDERR  ] 2018-07-07T19:28:03.547731590Z:     \t\t\t/usr/lib/go/src/runtime/asm_amd64.s:2361\r\n```\r\n\r\nI see the same error for all `btrfs` tests. Basically the [`containerd test code`](https://github.com/containerd/containerd/blob/master/snapshots/btrfs/btrfs_test.go#L48) is creating a 100MB loop back device but the btrfs-progs v4.17 tools seem to expect at least a 114294784B (109MB) device.\r\n\r\nI suspect [this commit](https://git.kernel.org/pub/scm/linux/kernel/git/kdave/btrfs-progs.git/commit/?id=997f9977c24397eb6980bb91e7f9cbc6fe21815a) introduced with v4.15 is causing this.\r\n\r\nAN obvious quick fix is to increase the size of the loop back [here](https://github.com/containerd/containerd/blob/master/snapshots/btrfs/btrfs_test.go#L48). Happy to provide a patch.",
  "closed_at": "2018-07-09T14:18:52Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/16065150?v=4",
    "events_url": "https://api.github.com/users/mlaventure/events{/privacy}",
    "followers_url": "https://api.github.com/users/mlaventure/followers",
    "following_url": "https://api.github.com/users/mlaventure/following{/other_user}",
    "gists_url": "https://api.github.com/users/mlaventure/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mlaventure",
    "id": 16065150,
    "login": "mlaventure",
    "node_id": "MDQ6VXNlcjE2MDY1MTUw",
    "organizations_url": "https://api.github.com/users/mlaventure/orgs",
    "received_events_url": "https://api.github.com/users/mlaventure/received_events",
    "repos_url": "https://api.github.com/users/mlaventure/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mlaventure/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mlaventure/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mlaventure"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/containerd/containerd/issues/2447/comments",
  "created_at": "2018-07-07T20:44:15Z",
  "events_url": "https://api.github.com/repos/containerd/containerd/issues/2447/events",
  "html_url": "https://github.com/containerd/containerd/issues/2447",
  "id": 339173648,
  "labels": [],
  "labels_url": "https://api.github.com/repos/containerd/containerd/issues/2447/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMzkxNzM2NDg=",
  "number": 2447,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/containerd/containerd",
  "state": "closed",
  "title": "btrfs test fail btrfs-prog 4.17",
  "updated_at": "2018-07-09T14:18:52Z",
  "url": "https://api.github.com/repos/containerd/containerd/issues/2447",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/3338098?v=4",
    "events_url": "https://api.github.com/users/rn/events{/privacy}",
    "followers_url": "https://api.github.com/users/rn/followers",
    "following_url": "https://api.github.com/users/rn/following{/other_user}",
    "gists_url": "https://api.github.com/users/rn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/rn",
    "id": 3338098,
    "login": "rn",
    "node_id": "MDQ6VXNlcjMzMzgwOTg=",
    "organizations_url": "https://api.github.com/users/rn/orgs",
    "received_events_url": "https://api.github.com/users/rn/received_events",
    "repos_url": "https://api.github.com/users/rn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/rn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/rn"
  }
}