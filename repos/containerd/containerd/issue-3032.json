{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nCurrent codes https://github.com/containerd/containerd/blob/58dc0677b43011d0a6b44f232e0c7e3e0e876412/runtime/v1/shim/client/client.go#L173 are using abstract unix socket to connect shim and shim would generate its socket path as format of \"/containerd-shim/$namespace/$container_id/shim.sock\", $container_id regularly is length of 64 bytes, therefore the namespace is limited to 14 bytes, which is awfully short.\r\n\r\nThe limitation is due to one of socket apis handling only 106 bytes at most (buf 128). Should we consider to use regular unix socket and try to connect it with relative paths, even though abstract unix socket has a few [advantages](https://unix.stackexchange.com/questions/206386/what-does-the-symbol-denote-in-the-beginning-of-a-unix-domain-socket-path-in-l)\r\n\r\n**Steps to reproduce the issue:**\r\n1. bin/ctr -n veryllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll run -t docker.io/library/busybox:latest test3 /bin/sh\r\n\r\n**Describe the results you received:**\r\n\r\nctr: \"/containerd-shim/veryllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll/test3/shim.sock\": unix socket path too long (> 106): unknown\r\n\r\n\r\n",
  "closed_at": "2019-03-15T14:10:48Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/749551?v=4",
    "events_url": "https://api.github.com/users/crosbymichael/events{/privacy}",
    "followers_url": "https://api.github.com/users/crosbymichael/followers",
    "following_url": "https://api.github.com/users/crosbymichael/following{/other_user}",
    "gists_url": "https://api.github.com/users/crosbymichael/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/crosbymichael",
    "id": 749551,
    "login": "crosbymichael",
    "node_id": "MDQ6VXNlcjc0OTU1MQ==",
    "organizations_url": "https://api.github.com/users/crosbymichael/orgs",
    "received_events_url": "https://api.github.com/users/crosbymichael/received_events",
    "repos_url": "https://api.github.com/users/crosbymichael/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/crosbymichael/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/crosbymichael/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/crosbymichael"
  },
  "comments": 10,
  "comments_url": "https://api.github.com/repos/containerd/containerd/issues/3032/comments",
  "created_at": "2019-02-20T04:22:49Z",
  "events_url": "https://api.github.com/repos/containerd/containerd/issues/3032/events",
  "html_url": "https://github.com/containerd/containerd/issues/3032",
  "id": 412238840,
  "labels": [
    {
      "color": "E8CAAF",
      "default": false,
      "description": null,
      "id": 347599655,
      "name": "kind/enhancement",
      "node_id": "MDU6TGFiZWwzNDc1OTk2NTU=",
      "url": "https://api.github.com/repos/containerd/containerd/labels/kind/enhancement"
    }
  ],
  "labels_url": "https://api.github.com/repos/containerd/containerd/issues/3032/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MTIyMzg4NDA=",
  "number": 3032,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/containerd/containerd",
  "state": "closed",
  "title": "Using abstract unix socket makes namespace length short",
  "updated_at": "2019-03-15T14:10:48Z",
  "url": "https://api.github.com/repos/containerd/containerd/issues/3032",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/1010944?v=4",
    "events_url": "https://api.github.com/users/linxiulei/events{/privacy}",
    "followers_url": "https://api.github.com/users/linxiulei/followers",
    "following_url": "https://api.github.com/users/linxiulei/following{/other_user}",
    "gists_url": "https://api.github.com/users/linxiulei/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/linxiulei",
    "id": 1010944,
    "login": "linxiulei",
    "node_id": "MDQ6VXNlcjEwMTA5NDQ=",
    "organizations_url": "https://api.github.com/users/linxiulei/orgs",
    "received_events_url": "https://api.github.com/users/linxiulei/received_events",
    "repos_url": "https://api.github.com/users/linxiulei/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/linxiulei/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/linxiulei/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/linxiulei"
  }
}