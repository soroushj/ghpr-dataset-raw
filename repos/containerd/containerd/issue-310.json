{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "I created a redis container (from current master), checkpointed it (and exited), then restored from that checkpoint, and tried to kill the new container. The kill reports no errors, but subsequently listing containers reports this error:\n\n```\n[ctr] rpc error: code = 13 desc = get all pids for container: exit status 1: \"open /run/runc/red-restore-test/state.json: no such file or directory\\n\"\n```\n\nFirst noticed by @crosbymichael in https://github.com/docker/docker/pull/22049\n\nHere's the full steps to repro (assuming you have a redis container at /redis):\n\n```\n$ ctr containers start redis-1 /redis\n\n$ ctr checkpoints create --exit=true redis-1 checkpoint-1\n\n$ ctr containers start --checkpoint-dir=/redis/checkpoints --checkpoint=checkpoint-1 redis-2 /redis\n\n$ ctr containers kill redis-2\n\n$ ctr containers\n```\n\nRunning `ps` you can see that the redis process has been killed, but a `containerd-shim` process is left running still.\n\nIf you manually kill the running `containerd-shim` process, containerd correctly cleans up the state and listing containers works again.\n",
  "closed_at": "2016-09-07T16:26:37Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/749551?v=4",
    "events_url": "https://api.github.com/users/crosbymichael/events{/privacy}",
    "followers_url": "https://api.github.com/users/crosbymichael/followers",
    "following_url": "https://api.github.com/users/crosbymichael/following{/other_user}",
    "gists_url": "https://api.github.com/users/crosbymichael/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/crosbymichael",
    "id": 749551,
    "login": "crosbymichael",
    "node_id": "MDQ6VXNlcjc0OTU1MQ==",
    "organizations_url": "https://api.github.com/users/crosbymichael/orgs",
    "received_events_url": "https://api.github.com/users/crosbymichael/received_events",
    "repos_url": "https://api.github.com/users/crosbymichael/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/crosbymichael/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/crosbymichael/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/crosbymichael"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/containerd/containerd/issues/310/comments",
  "created_at": "2016-08-30T14:32:47Z",
  "events_url": "https://api.github.com/repos/containerd/containerd/issues/310/events",
  "html_url": "https://github.com/containerd/containerd/issues/310",
  "id": 174035597,
  "labels": [],
  "labels_url": "https://api.github.com/repos/containerd/containerd/issues/310/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxNzQwMzU1OTc=",
  "number": 310,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/containerd/containerd",
  "state": "closed",
  "title": "Killing restored redis container leaves bad state",
  "updated_at": "2016-09-07T16:26:37Z",
  "url": "https://api.github.com/repos/containerd/containerd/issues/310",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/22065?v=4",
    "events_url": "https://api.github.com/users/boucher/events{/privacy}",
    "followers_url": "https://api.github.com/users/boucher/followers",
    "following_url": "https://api.github.com/users/boucher/following{/other_user}",
    "gists_url": "https://api.github.com/users/boucher/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/boucher",
    "id": 22065,
    "login": "boucher",
    "node_id": "MDQ6VXNlcjIyMDY1",
    "organizations_url": "https://api.github.com/users/boucher/orgs",
    "received_events_url": "https://api.github.com/users/boucher/received_events",
    "repos_url": "https://api.github.com/users/boucher/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/boucher/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/boucher/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/boucher"
  }
}