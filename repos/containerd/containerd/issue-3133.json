{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "The ability to set cgroup path does not work in containerd 1.2.5\r\n\r\n`/etc/containerd/config.toml`\r\n```\r\nroot@stage-dal10-cr0519b5b831f247ca9edcce1fc91ea21e-w3:~# cat /etc/containerd/config.toml \r\nroot = \"/var/data/cripersistentstorage\"\r\nstate = \"/run/containerd\"\r\noom_score = 0\r\n\r\n[grpc]\r\n  address = \"/run/containerd/containerd.sock\"\r\n  uid = 0\r\n  gid = 0\r\n  max_recv_message_size = 16777216\r\n  max_send_message_size = 16777216\r\n\r\n[debug]\r\n  address = \"\"\r\n  uid = 0\r\n  gid = 0\r\n  level = \"\"\r\n\r\n[metrics]\r\n  address = \"10.93.252.121:10210\"\r\n  grpc_histogram = false\r\n\r\n[cgroup]\r\n  path = \"/podruntime/runtime\"\r\n\r\n[plugins]\r\n  [plugins.cgroups]\r\n    no_prometheus = false\r\n  [plugins.cri]\r\n    stream_server_address = \"127.0.0.1\"\r\n    stream_server_port = \"0\"\r\n    enable_selinux = false\r\n    sandbox_image = \"registry.ng.bluemix.net/armada-master/pause:3.1\"\r\n    stats_collect_period = 10\r\n    systemd_cgroup = false\r\n    enable_tls_streaming = false\r\n    [plugins.cri.containerd]\r\n      snapshotter = \"overlayfs\"\r\n      [plugins.cri.containerd.default_runtime]\r\n        runtime_type = \"io.containerd.runtime.v1.linux\"\r\n        runtime_engine = \"\"\r\n        runtime_root = \"\"\r\n      [plugins.cri.containerd.untrusted_workload_runtime]\r\n        runtime_type = \"\"\r\n        runtime_engine = \"\"\r\n        runtime_root = \"\"\r\n    [plugins.cri.cni]\r\n      bin_dir = \"/opt/cni/bin\"\r\n      conf_dir = \"/etc/cni/net.d\"\r\n      conf_template = \"\"\r\n    [plugins.cri.registry]\r\n      [plugins.cri.registry.mirrors]\r\n        [plugins.cri.registry.mirrors.\"docker.io\"]\r\n          endpoint = [\"https://registry-1.docker.io\"]\r\n      [plugins.cri.registry.auths]\r\n        [plugins.cri.registry.auths.\"https://registry.ng.bluemix.net/armada-master\"]\r\n          username = \"token\"\r\n          password = \"XXXXX\"\r\n  [plugins.diff-service]\r\n    default = [\"walking\"]\r\n  [plugins.linux]\r\n    shim = \"containerd-shim\"\r\n    runtime = \"runc\"\r\n    runtime_root = \"\"\r\n    no_shim = false\r\n    shim_debug = false\r\n  [plugins.scheduler]\r\n    pause_threshold = 0.02\r\n    deletion_threshold = 0\r\n    mutation_threshold = 100\r\n    schedule_delay = \"0s\"\r\n    startup_delay = \"100ms\"\r\nroot@stage-dal10-cr0519b5b831f247ca9edcce1fc91ea21e-w3:~# \r\n```\r\n\r\nI would expect the containerd shims to be created in the `/podruntime/runtime` group per usual. However, they do not and instead live under `containerd.service`\r\n\r\n```\r\nroot@stage-dal10-cr0519b5b831f247ca9edcce1fc91ea21e-w3:~# systemd-cgls | grep containerd\r\n\u2502 \u251c\u2500containerd.service\r\n\u2502 \u2502 \u251c\u2500 7337 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u2500 7855 /usr/local/bin/containerd\r\n\u2502 \u2502 \u251c\u2500 8337 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u2500 8413 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u2500 8498 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u2500 8611 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u2500 8646 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u2500 8746 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u2500 8822 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u2500 9616 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u2500 9860 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250010681 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250010829 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250010857 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250010920 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250011134 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250011320 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250011406 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250011487 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250011564 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250011685 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250014466 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250022919 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250022931 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n\u2502 \u2502 \u251c\u250023119 containerd-shim -namespace k8s.io -workdir /var/data/cripersisten...\r\n````",
  "closed_at": "2019-03-29T02:38:03Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/749551?v=4",
    "events_url": "https://api.github.com/users/crosbymichael/events{/privacy}",
    "followers_url": "https://api.github.com/users/crosbymichael/followers",
    "following_url": "https://api.github.com/users/crosbymichael/following{/other_user}",
    "gists_url": "https://api.github.com/users/crosbymichael/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/crosbymichael",
    "id": 749551,
    "login": "crosbymichael",
    "node_id": "MDQ6VXNlcjc0OTU1MQ==",
    "organizations_url": "https://api.github.com/users/crosbymichael/orgs",
    "received_events_url": "https://api.github.com/users/crosbymichael/received_events",
    "repos_url": "https://api.github.com/users/crosbymichael/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/crosbymichael/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/crosbymichael/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/crosbymichael"
  },
  "comments": 7,
  "comments_url": "https://api.github.com/repos/containerd/containerd/issues/3133/comments",
  "created_at": "2019-03-26T23:43:55Z",
  "events_url": "https://api.github.com/repos/containerd/containerd/issues/3133/events",
  "html_url": "https://github.com/containerd/containerd/issues/3133",
  "id": 425697125,
  "labels": [],
  "labels_url": "https://api.github.com/repos/containerd/containerd/issues/3133/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MjU2OTcxMjU=",
  "number": 3133,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/containerd/containerd",
  "state": "closed",
  "title": "Custom cgroup path does not work in containerd 1.2.5",
  "updated_at": "2019-03-29T02:38:03Z",
  "url": "https://api.github.com/repos/containerd/containerd/issues/3133",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/7716924?v=4",
    "events_url": "https://api.github.com/users/relyt0925/events{/privacy}",
    "followers_url": "https://api.github.com/users/relyt0925/followers",
    "following_url": "https://api.github.com/users/relyt0925/following{/other_user}",
    "gists_url": "https://api.github.com/users/relyt0925/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/relyt0925",
    "id": 7716924,
    "login": "relyt0925",
    "node_id": "MDQ6VXNlcjc3MTY5MjQ=",
    "organizations_url": "https://api.github.com/users/relyt0925/orgs",
    "received_events_url": "https://api.github.com/users/relyt0925/received_events",
    "repos_url": "https://api.github.com/users/relyt0925/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/relyt0925/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/relyt0925/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/relyt0925"
  }
}