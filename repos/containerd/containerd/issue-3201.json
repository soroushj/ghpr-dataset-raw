{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "**Description**\r\n\r\nI've just checked the limit on the max number of opened files for the `containerd` process on recent version of Container Optimized OS and saw that the process has the limit set to 65536.\r\nI believe it should be set to 1048576 like docker does right now: https://github.com/moby/moby/commit/428d7337e808ec5f4dba1b0aceda002f295cc320\r\n\r\n**Steps to reproduce the issue:**\r\n\r\n```sh\r\n$ cat /usr/lib/systemd/system/containerd.service | grep LimitNOFILE\r\nLimitNOFILE=infinity\r\n$ systemctl show containerd | grep LimitNOFILE\r\nLimitNOFILE=18446744073709551615\r\n$ cat /proc/$(pgrep containerd | head -1)/limits | grep files\r\nMax open files            65536                65536                files\r\n```\r\n\r\n**Describe the results you expected:**\r\n\r\n```sh\r\n$ cat /proc/$(pgrep containerd | head -1)/limits | grep files\r\nMax open files            1048576              1048576              files\r\n```\r\n\r\n**Output of `containerd --version`:**\r\n\r\n```\r\ncontainerd github.com/containerd/containerd 1.2.5 bb71b10fd8f58240ca47fbb579b9d1028eea7c84\r\n```",
  "closed_at": "2019-04-11T18:47:58Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/169601?v=4",
    "events_url": "https://api.github.com/users/dmcgowan/events{/privacy}",
    "followers_url": "https://api.github.com/users/dmcgowan/followers",
    "following_url": "https://api.github.com/users/dmcgowan/following{/other_user}",
    "gists_url": "https://api.github.com/users/dmcgowan/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/dmcgowan",
    "id": 169601,
    "login": "dmcgowan",
    "node_id": "MDQ6VXNlcjE2OTYwMQ==",
    "organizations_url": "https://api.github.com/users/dmcgowan/orgs",
    "received_events_url": "https://api.github.com/users/dmcgowan/received_events",
    "repos_url": "https://api.github.com/users/dmcgowan/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/dmcgowan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dmcgowan/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/dmcgowan"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/containerd/containerd/issues/3201/comments",
  "created_at": "2019-04-10T14:34:24Z",
  "events_url": "https://api.github.com/repos/containerd/containerd/issues/3201/events",
  "html_url": "https://github.com/containerd/containerd/issues/3201",
  "id": 431539379,
  "labels": [],
  "labels_url": "https://api.github.com/repos/containerd/containerd/issues/3201/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MzE1MzkzNzk=",
  "number": 3201,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/containerd/containerd",
  "state": "closed",
  "title": "systemd's service unit should set LimitNOFILE to 1048576 like docker does",
  "updated_at": "2019-04-11T18:47:58Z",
  "url": "https://api.github.com/repos/containerd/containerd/issues/3201",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/5245?v=4",
    "events_url": "https://api.github.com/users/zaa/events{/privacy}",
    "followers_url": "https://api.github.com/users/zaa/followers",
    "following_url": "https://api.github.com/users/zaa/following{/other_user}",
    "gists_url": "https://api.github.com/users/zaa/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/zaa",
    "id": 5245,
    "login": "zaa",
    "node_id": "MDQ6VXNlcjUyNDU=",
    "organizations_url": "https://api.github.com/users/zaa/orgs",
    "received_events_url": "https://api.github.com/users/zaa/received_events",
    "repos_url": "https://api.github.com/users/zaa/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/zaa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zaa/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/zaa"
  }
}