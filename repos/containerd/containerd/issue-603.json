{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "As discussed at the [containerd summit](https://github.com/docker/containerd/blob/master/reports/2017-02-24.md), many people agree that adding log driver capabilities to containerd seems useful.  Having thought about this some, there are two major drawbacks that have been brought up.  1) shim is already part of a plug-in, so adding plug-ins to a plug-in is a bit odd.  2) log drivers could be extremely expensive and burdensome to add to the shim.  Following the [suggestion](https://github.com/docker/containerd/issues/563#issuecomment-282821252) of @thockin maybe we should look at a simpler approach of having a format flag.\r\n\r\nWhen you think about it, the majority of log drivers are just shipping content elsewhere.  From that perspective containerd could just write to a file and driver read the file.  The fundamental downside here is that you lose the context of when the data was written.  So the key thing missing here is just the timestamp.  What I propose is that the shim take one arguement for \"--structured-output.\"\r\n\r\nIf true:  shim reads from process stdout/err, formats data into timestamped segments, writes to passed in file or fifo.\r\nIf false: shim reads from process stdout/err writes to passed in file or fifo.\r\n\r\nThe key thing here is to decide on a standard format.  I don't know if I'd want to do a `fmt` style configuration but instead pick some efficient binary format.  Even json is not so efficient as you have to reencode the data as a string.  I'm not a serialization format expert, but maybe a simple protobuf structure could do?  Something that would be as close to \"TIMESTAMP\", \"DATA LENGTH\", \"DATA\".",
  "closed_at": "2019-03-13T19:23:07Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1397980?v=4",
    "events_url": "https://api.github.com/users/estesp/events{/privacy}",
    "followers_url": "https://api.github.com/users/estesp/followers",
    "following_url": "https://api.github.com/users/estesp/following{/other_user}",
    "gists_url": "https://api.github.com/users/estesp/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/estesp",
    "id": 1397980,
    "login": "estesp",
    "node_id": "MDQ6VXNlcjEzOTc5ODA=",
    "organizations_url": "https://api.github.com/users/estesp/orgs",
    "received_events_url": "https://api.github.com/users/estesp/received_events",
    "repos_url": "https://api.github.com/users/estesp/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/estesp/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/estesp/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/estesp"
  },
  "comments": 16,
  "comments_url": "https://api.github.com/repos/containerd/containerd/issues/603/comments",
  "created_at": "2017-03-03T17:06:12Z",
  "events_url": "https://api.github.com/repos/containerd/containerd/issues/603/events",
  "html_url": "https://github.com/containerd/containerd/issues/603",
  "id": 211746295,
  "labels": [],
  "labels_url": "https://api.github.com/repos/containerd/containerd/issues/603/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMTE3NDYyOTU=",
  "number": 603,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/containerd/containerd",
  "state": "closed",
  "title": "Log formatting in shim",
  "updated_at": "2019-03-13T19:23:07Z",
  "url": "https://api.github.com/repos/containerd/containerd/issues/603",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/1754002?v=4",
    "events_url": "https://api.github.com/users/ibuildthecloud/events{/privacy}",
    "followers_url": "https://api.github.com/users/ibuildthecloud/followers",
    "following_url": "https://api.github.com/users/ibuildthecloud/following{/other_user}",
    "gists_url": "https://api.github.com/users/ibuildthecloud/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ibuildthecloud",
    "id": 1754002,
    "login": "ibuildthecloud",
    "node_id": "MDQ6VXNlcjE3NTQwMDI=",
    "organizations_url": "https://api.github.com/users/ibuildthecloud/orgs",
    "received_events_url": "https://api.github.com/users/ibuildthecloud/received_events",
    "repos_url": "https://api.github.com/users/ibuildthecloud/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ibuildthecloud/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ibuildthecloud/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ibuildthecloud"
  }
}