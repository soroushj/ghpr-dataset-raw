{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\nNormally when a containerd-shim exits it is handled by terminating the process that was running (assuming it was running).\r\nIf containerd is restarted (or most likely if containerd is not the parent process of containerd-shim) the exit is not handled.\r\n\r\nWhen this happens `ctr t ls` does not show the task corresponding to the shim.\r\nIf you attempt to start a new task you get an error like:\r\n```\r\nctr: mkdir /var/run/docker/containerd/daemon/io.containerd.runtime.v1.linux/moby/c548dfcd2ba36c863b5a8dc194fb01c82a4de715fb56582a2ab2c3c18ab1d254: file exists: already exists\r\n```\r\n\r\n**Steps to reproduce the issue:**\r\n1. Create container + start task\r\n2. restart containerd\r\n3. kill (either SIGKILL or SIGTERM) containerd-shim\r\n\r\n**Describe the results you received:**\r\n\r\n- containerd-shim is not reaped\r\n- containerd-shim socket is left behind\r\n- container is unusable, must delete and recreate.\r\n\r\n**Describe the results you expected:**\r\n\r\ncontainerd should be able to reap shim resources\r\n\r\n**Output of `containerd --version`:**\r\n\r\n```\r\ncontainerd github.com/containerd/containerd v1.0.1 9b55aab90508bd389d7654c4baf173a981477d55\r\n```\r\n",
  "closed_at": "2018-02-06T18:57:30Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/120601?v=4",
    "events_url": "https://api.github.com/users/stevvooe/events{/privacy}",
    "followers_url": "https://api.github.com/users/stevvooe/followers",
    "following_url": "https://api.github.com/users/stevvooe/following{/other_user}",
    "gists_url": "https://api.github.com/users/stevvooe/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/stevvooe",
    "id": 120601,
    "login": "stevvooe",
    "node_id": "MDQ6VXNlcjEyMDYwMQ==",
    "organizations_url": "https://api.github.com/users/stevvooe/orgs",
    "received_events_url": "https://api.github.com/users/stevvooe/received_events",
    "repos_url": "https://api.github.com/users/stevvooe/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/stevvooe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stevvooe/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/stevvooe"
  },
  "comments": 5,
  "comments_url": "https://api.github.com/repos/containerd/containerd/issues/2078/comments",
  "created_at": "2018-01-30T22:02:43Z",
  "events_url": "https://api.github.com/repos/containerd/containerd/issues/2078/events",
  "html_url": "https://github.com/containerd/containerd/issues/2078",
  "id": 292954295,
  "labels": [],
  "labels_url": "https://api.github.com/repos/containerd/containerd/issues/2078/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyOTI5NTQyOTU=",
  "number": 2078,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/containerd/containerd",
  "state": "closed",
  "title": "re-parented shim is not able to be reaped",
  "updated_at": "2018-02-06T18:57:30Z",
  "url": "https://api.github.com/repos/containerd/containerd/issues/2078",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/799078?v=4",
    "events_url": "https://api.github.com/users/cpuguy83/events{/privacy}",
    "followers_url": "https://api.github.com/users/cpuguy83/followers",
    "following_url": "https://api.github.com/users/cpuguy83/following{/other_user}",
    "gists_url": "https://api.github.com/users/cpuguy83/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/cpuguy83",
    "id": 799078,
    "login": "cpuguy83",
    "node_id": "MDQ6VXNlcjc5OTA3OA==",
    "organizations_url": "https://api.github.com/users/cpuguy83/orgs",
    "received_events_url": "https://api.github.com/users/cpuguy83/received_events",
    "repos_url": "https://api.github.com/users/cpuguy83/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/cpuguy83/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cpuguy83/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/cpuguy83"
  }
}