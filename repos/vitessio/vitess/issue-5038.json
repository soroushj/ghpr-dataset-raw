{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "COLLABORATOR",
  "body": "`SHOW VITESS_SHARDS` intermittently returns an empty list of shards\r\n\r\nI think the issue can be traced down to these lines of code at `go/vt/vtgate/executor.go:800`:\r\n```\r\n\t\t\t_, _, shards, err := e.resolver.resolver.GetKeyspaceShards(ctx, keyspace, destTabletType)\r\n\t\t\tif err != nil {\r\n\t\t\t\t// There might be a misconfigured keyspace or no shards in the keyspace.\r\n\t\t\t\t// Skip any errors and move on.\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n```\r\n\r\nAs you can see errors are ignored. So if there is for example an intermittent connectivity problem with the topology server then we would return an empty list rather than signaling an error.\r\n\r\nI think the correct solution is to catch and ignore specific errors but in general pass the errors on.",
  "closed_at": "2020-05-12T02:48:06Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/388311?v=4",
    "events_url": "https://api.github.com/users/deepthi/events{/privacy}",
    "followers_url": "https://api.github.com/users/deepthi/followers",
    "following_url": "https://api.github.com/users/deepthi/following{/other_user}",
    "gists_url": "https://api.github.com/users/deepthi/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/deepthi",
    "id": 388311,
    "login": "deepthi",
    "node_id": "MDQ6VXNlcjM4ODMxMQ==",
    "organizations_url": "https://api.github.com/users/deepthi/orgs",
    "received_events_url": "https://api.github.com/users/deepthi/received_events",
    "repos_url": "https://api.github.com/users/deepthi/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/deepthi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/deepthi/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/deepthi"
  },
  "comments": 6,
  "comments_url": "https://api.github.com/repos/vitessio/vitess/issues/5038/comments",
  "created_at": "2019-07-30T10:20:15Z",
  "events_url": "https://api.github.com/repos/vitessio/vitess/issues/5038/events",
  "html_url": "https://github.com/vitessio/vitess/issues/5038",
  "id": 474500294,
  "labels": [
    {
      "color": "d11f28",
      "default": false,
      "description": "",
      "id": 760789208,
      "name": "Type: Bug",
      "node_id": "MDU6TGFiZWw3NjA3ODkyMDg=",
      "url": "https://api.github.com/repos/vitessio/vitess/labels/Type:%20Bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/vitessio/vitess/issues/5038/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0NzQ1MDAyOTQ=",
  "number": 5038,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/vitessio/vitess",
  "state": "closed",
  "title": "SHOW VITESS_SHARDS intermittently returns an empty list of shards",
  "updated_at": "2020-05-12T02:48:06Z",
  "url": "https://api.github.com/repos/vitessio/vitess/issues/5038",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/11489?v=4",
    "events_url": "https://api.github.com/users/tirsen/events{/privacy}",
    "followers_url": "https://api.github.com/users/tirsen/followers",
    "following_url": "https://api.github.com/users/tirsen/following{/other_user}",
    "gists_url": "https://api.github.com/users/tirsen/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/tirsen",
    "id": 11489,
    "login": "tirsen",
    "node_id": "MDQ6VXNlcjExNDg5",
    "organizations_url": "https://api.github.com/users/tirsen/orgs",
    "received_events_url": "https://api.github.com/users/tirsen/received_events",
    "repos_url": "https://api.github.com/users/tirsen/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/tirsen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tirsen/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/tirsen"
  }
}