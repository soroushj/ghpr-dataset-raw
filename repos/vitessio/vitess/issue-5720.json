{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "Minikube version: v0.33.1\r\nHelm version:\r\n```\r\nClient: &version.Version{SemVer:\"v2.16.1\", GitCommit:\"bbdfe5e7803a12bbdf97e94cd847859890cf4050\", GitTreeState:\"clean\"}\r\nServer: &version.Version{SemVer:\"v2.16.1\", GitCommit:\"bbdfe5e7803a12bbdf97e94cd847859890cf4050\", GitTreeState:\"clean\"}\r\n```\r\n\r\nI ran into a few issues while trying to run through the Kubernetes tutorial:\r\n\r\n1. When running `kvtctld.sh` (after making it executable, see #5719), my browser tries to open `http://192.168.39.142:31333/app2/` and I get a `404 page not found` error. \r\n\r\n2. Figuring this was related to #5597, I tried changing the images from `helm-1.0.7-5` -> `latest`, though after that all of my tablets were `CrashLoopBackOff`ing\r\n\r\nHere are the vttablet + mysql logs:\r\n**mysql**\r\n```\r\n+ '[' mysql56 = percona ']'\r\n+ '[' mysql56 = mysql ']'\r\n+ '[' mysql56 = mysql56 ']'\r\n+ MYSQL_FLAVOR=MySQL56\r\n+ export MYSQL_FLAVOR\r\n++ cat\r\n+++ cat /vtdataroot/tabletdata/tablet-uid\r\n+ eval exec /vt/bin/mysqlctld -logtostderr=true -stderrthreshold=0 -tablet_dir '\"tabletdata\"' -tablet_uid '\"794219800\"' -socket_file '\"/vtdataroot/mysqlctl.sock\"' -init_db_sql_file '\"/vt/config/init_db.sql\"'\r\n++ exec /vt/bin/mysqlctld -logtostderr=true -stderrthreshold=0 -tablet_dir tabletdata -tablet_uid 794219800 -socket_file /vtdataroot/mysqlctl.sock -init_db_sql_file /vt/config/init_db.sql\r\nERROR: logging before flag.Parse: E0116 01:00:01.306804       1 syslogger.go:122] can't connect to syslog\r\nI0116 01:00:01.313152       1 mysqlctld.go:75] mycnf file (/vtdataroot/tabletdata/my.cnf) doesn't exist, initializing\r\nI0116 01:00:01.313346       1 dbconfigs.go:303] DBConfigs: {\r\n  \"Conn\": {\r\n    \"host\": \"\",\r\n    \"port\": 0,\r\n    \"uname\": \"vt_dba\",\r\n    \"pass\": \"****\",\r\n    \"dbname\": \"\",\r\n    \"unix_socket\": \"/vtdataroot/tabletdata/mysql.sock\",\r\n    \"charset\": \"utf8\",\r\n    \"flags\": 0,\r\n    \"ssl_ca\": \"\",\r\n    \"ssl_ca_path\": \"\",\r\n    \"ssl_cert\": \"\",\r\n    \"ssl_key\": \"\",\r\n    \"server_name\": \"\",\r\n    \"DeprecatedDBName\": \"\",\r\n    \"DisableClientDeprecateEOF\": false+ '[' mysql56 = percona ']'\r\n+ '[' mysql56 = mysql ']'\r\n+ '[' mysql56 = mysql56 ']'\r\n+ MYSQL_FLAVOR=MySQL56\r\n+ export MYSQL_FLAVOR\r\n++ cat\r\n+++ cat /vtdataroot/tabletdata/tablet-uid\r\n+++ hostname\r\n+ eval exec /vt/bin/vttablet '-topo_implementation=\"etcd2\"' '-topo_global_server_address=\"etcd-global-client.default:2379\"' -topo_global_root=/vitess/global -logtostderr -port 15002 -grpc_port 16002 -service_map '\"grpc-queryservice,grpc-tabletmanager,grpc-updatestream\"' -tablet_dir '\"tabletdata\"' -tablet-path '\"zone1-794219800\"' -tablet_hostname '\"zone1-commerce-0-rdonly-0.vttablet\"' -init_keyspace '\"commerce\"' -init_shard '\"0\"' -init_tablet_type '\"rdonly\"' -health_check_interval '\"5s\"' -mysqlctl_socket '\"/vtdataroot/mysqlctl.sock\"' -enable_replication_reporter -init_db_name_override '\"commerce\"' '-app_pool_size=\"40\"' '-dba_pool_size=\"20\"' '-queryserver-config-max-result-size=\"10000\"' '-queryserver-config-pool-size=\"24\"' '-queryserver-config-query-timeout=\"30\"' '-queryserver-config-stream-pool-size=\"100\"' '-queryserver-config-transaction-cap=\"300\"'\r\n++ exec /vt/bin/vttablet -topo_implementation=etcd2 -topo_global_server_address=etcd-global-client.default:2379 -topo_global_root=/vitess/global -logtostderr -port 15002 -grpc_port 16002 -service_map grpc-queryservice,grpc-tabletmanager,grpc-updatestream -tablet_dir tabletdata -tablet-path zone1-794219800 -tablet_hostname zone1-commerce-0-rdonly-0.vttablet -init_keyspace commerce -init_shard 0 -init_tablet_type rdonly -health_check_interval 5s -mysqlctl_socket /vtdataroot/mysqlctl.sock -enable_replication_reporter -init_db_name_override commerce -app_pool_size=40 -dba_pool_size=20 -queryserver-config-max-result-size=10000 -queryserver-config-pool-size=24 -queryserver-config-query-timeout=30 -queryserver-config-stream-pool-size=100 -queryserver-config-transaction-cap=300\r\nERROR: logging before flag.Parse: E0116 01:00:01.532860       1 syslogger.go:122] can't connect to syslog\r\nI0116 01:00:01.547362       1 streamlog.go:155] Streaming logs from TabletServer at /debug/querylog.\r\nI0116 01:00:01.547384       1 streamlog.go:155] Streaming logs from TxLog at /debug/txlog.\r\nI0116 01:00:01.547423       1 trace.go:151] successfully started tracing with [noop]\r\nI0116 01:00:01.547510       1 mycnf_flag.go:123] No mycnf_server_id, no mycnf-file specified, using default config for server id 794219800: /vtdataroot/tabletdata/my.cnf\r\nF0116 01:00:01.547538       1 vttablet.go:80] mycnf read failed: open /vtdataroot/tabletdata/my.cnf: no such file or directory\r\n  },\r\n  \"Users\": {\r\n    \"dba\": \"vt_dba\"\r\n  }\r\n}\r\nI0116 01:00:01.313582       1 mysqld.go:586] execCmd: /usr/sbin/mysqld /usr/sbin/mysqld [--version]\r\nI0116 01:00:01.317302       1 mysqld.go:600] execCmd: /usr/sbin/mysqld output: /usr/sbin/mysqld  Ver 5.7.26-29 for Linux on x86_64 (Percona Server (GPL), Release 29, Revision 11ad961)\r\nI0116 01:00:01.317342       1 mysqld.go:174] Using flavor: percona, version: {5 7 26}\r\nI0116 01:00:01.317356       1 mysqld.go:639] mysqlctl.Init\r\nI0116 01:00:01.317358       1 mysqld.go:621] mysqlctl.InitConfig\r\nI0116 01:00:01.317362       1 mysqld.go:915] creating directory /vtdataroot/tabletdata\r\nI0116 01:00:01.317378       1 mysqld.go:949] creating directory /vtdataroot/tabletdata/data\r\nI0116 01:00:01.317385       1 mysqld.go:949] creating directory /vtdataroot/tabletdata/innodb\r\nI0116 01:00:01.317390       1 mysqld.go:949] creating directory /vtdataroot/tabletdata/relay-logs\r\nI0116 01:00:01.317396       1 mysqld.go:949] creating directory /vtdataroot/tabletdata/bin-logs\r\nI0116 01:00:01.317401       1 mysqld.go:925] creating directory /vtdataroot/tabletdata/data\r\nI0116 01:00:01.317404       1 mysqld.go:925] creating directory /vtdataroot/tabletdata/innodb/data\r\nI0116 01:00:01.317408       1 mysqld.go:925] creating directory /vtdataroot/tabletdata/innodb/logs\r\nI0116 01:00:01.317412       1 mysqld.go:925] creating directory /vtdataroot/tabletdata/tmp\r\nI0116 01:00:01.317417       1 mysqld.go:925] creating directory /vtdataroot/tabletdata/relay-logs\r\nI0116 01:00:01.317430       1 mysqld.go:925] creating directory /vtdataroot/tabletdata/bin-logs\r\nI0116 01:00:01.317442       1 mysqld.go:781] make_mycnf hook doesn't exist, reading template files\r\npanic: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n\tpanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x20 pc=0xab6238]\r\ngoroutine 1 [running]:\r\nvitess.io/vitess/go/exit.doRecover(0xc52120, 0x16978c0, 0x1697800)\r\n\t/vt/src/vitess.io/vitess/go/exit/exit.go:92 +0x1b8\r\nvitess.io/vitess/go/exit.Recover()\r\n\t/vt/src/vitess.io/vitess/go/exit/exit.go:69 +0x48\r\npanic(0xc52120, 0x16978c0)\r\n\t/usr/local/go/src/runtime/panic.go:522 +0x1b5\r\ngithub.com/GeertJohan/go%2erice.(*Box).IsEmbedded(...)\r\n\t/go/pkg/mod/github.com/!geert!johan/go.rice@v1.0.0/box.go:157\r\ngithub.com/GeertJohan/go%2erice.(*Box).Open(0x0, 0xd8050f, 0x11, 0xc000399a08, 0x4f1262, 0xc00011e680)\r\n\t/go/pkg/mod/github.com/!geert!johan/go.rice@v1.0.0/box.go:185 +0x48\r\ngithub.com/GeertJohan/go%2erice.(*Box).Bytes(0x0, 0xd8050f, 0x11, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/go/pkg/mod/github.com/!geert!johan/go.rice@v1.0.0/box.go:280 +0x5c\r\nvitess.io/vitess/go/vt/mysqlctl.(*Mysqld).getMycnfTemplate(0xc000131e30, 0x35, 0x0)\r\n\t/vt/src/vitess.io/vitess/go/vt/mysqlctl/mysqld.go:800 +0x9c\r\nvitess.io/vitess/go/vt/mysqlctl.(*Mysqld).initConfig(0xc000131e30, 0xc0000f57a0, 0xc0000c2460, 0x1d, 0x0, 0xd7cea0)\r\n\t/vt/src/vitess.io/vitess/go/vt/mysqlctl/mysqld.go:782 +0x40c\r\nvitess.io/vitess/go/vt/mysqlctl.(*Mysqld).InitConfig(0xc000131e30, 0xc0000f57a0, 0x0, 0x0)\r\n\t/vt/src/vitess.io/vitess/go/vt/mysqlctl/mysqld.go:628 +0x17f\r\nvitess.io/vitess/go/vt/mysqlctl.(*Mysqld).Init(0xc000131e30, 0xeafe20, 0xc0000c6960, 0xc0000f57a0, 0x7ffe960b05ef, 0x16, 0x0, 0x0)\r\n\t/vt/src/vitess.io/vitess/go/vt/mysqlctl/mysqld.go:640 +0x89\r\nmain.main()\r\n\t/vt/src/vitess.io/vitess/go/cmd/mysqlctld/mysqlctld.go:85 +0x3d2\r\n```\r\n\r\n**vttablet**\r\n```\r\n+ '[' mysql56 = percona ']'\r\n+ '[' mysql56 = mysql ']'\r\n+ '[' mysql56 = mysql56 ']'\r\n+ MYSQL_FLAVOR=MySQL56\r\n+ export MYSQL_FLAVOR\r\n++ cat\r\n+++ cat /vtdataroot/tabletdata/tablet-uid\r\n+++ hostname\r\n+ eval exec /vt/bin/vttablet '-topo_implementation=\"etcd2\"' '-topo_global_server_address=\"etcd-global-client.default:2379\"' -topo_global_root=/vitess/global -logtostderr -port 15002 -grpc_port 16002 -service_map '\"grpc-queryservice,grpc-tabletmanager,grpc-updatestream\"' -tablet_dir '\"tabletdata\"' -tablet-path '\"zone1-794219800\"' -tablet_hostname '\"zone1-commerce-0-rdonly-0.vttablet\"' -init_keyspace '\"commerce\"' -init_shard '\"0\"' -init_tablet_type '\"rdonly\"' -health_check_interval '\"5s\"' -mysqlctl_socket '\"/vtdataroot/mysqlctl.sock\"' -enable_replication_reporter -init_db_name_override '\"commerce\"' '-app_pool_size=\"40\"' '-dba_pool_size=\"20\"' '-queryserver-config-max-result-size=\"10000\"' '-queryserver-config-pool-size=\"24\"' '-queryserver-config-query-timeout=\"30\"' '-queryserver-config-stream-pool-size=\"100\"' '-queryserver-config-transaction-cap=\"300\"'\r\n++ exec /vt/bin/vttablet -topo_implementation=etcd2 -topo_global_server_address=etcd-global-client.default:2379 -topo_global_root=/vitess/global -logtostderr -port 15002 -grpc_port 16002 -service_map grpc-queryservice,grpc-tabletmanager,grpc-updatestream -tablet_dir tabletdata -tablet-path zone1-794219800 -tablet_hostname zone1-commerce-0-rdonly-0.vttablet -init_keyspace commerce -init_shard 0 -init_tablet_type rdonly -health_check_interval 5s -mysqlctl_socket /vtdataroot/mysqlctl.sock -enable_replication_reporter -init_db_name_override commerce -app_pool_size=40 -dba_pool_size=20 -queryserver-config-max-result-size=10000 -queryserver-config-pool-size=24 -queryserver-config-query-timeout=30 -queryserver-config-stream-pool-size=100 -queryserver-config-transaction-cap=300\r\nERROR: logging before flag.Parse: E0116 01:00:01.532860       1 syslogger.go:122] can't connect to syslog\r\nI0116 01:00:01.547362       1 streamlog.go:155] Streaming logs from TabletServer at /debug/querylog.\r\nI0116 01:00:01.547384       1 streamlog.go:155] Streaming logs from TxLog at /debug/txlog.\r\nI0116 01:00:01.547423       1 trace.go:151] successfully started tracing with [noop]\r\nI0116 01:00:01.547510       1 mycnf_flag.go:123] No mycnf_server_id, no mycnf-file specified, using default config for server id 794219800: /vtdataroot/tabletdata/my.cnf\r\nF0116 01:00:01.547538       1 vttablet.go:80] mycnf read failed: open /vtdataroot/tabletdata/my.cnf: no such file or directory\r\n```",
  "closed_at": "2020-01-21T19:05:12Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/57982?v=4",
    "events_url": "https://api.github.com/users/morgo/events{/privacy}",
    "followers_url": "https://api.github.com/users/morgo/followers",
    "following_url": "https://api.github.com/users/morgo/following{/other_user}",
    "gists_url": "https://api.github.com/users/morgo/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/morgo",
    "id": 57982,
    "login": "morgo",
    "node_id": "MDQ6VXNlcjU3OTgy",
    "organizations_url": "https://api.github.com/users/morgo/orgs",
    "received_events_url": "https://api.github.com/users/morgo/received_events",
    "repos_url": "https://api.github.com/users/morgo/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/morgo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/morgo/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/morgo"
  },
  "comments": 7,
  "comments_url": "https://api.github.com/repos/vitessio/vitess/issues/5720/comments",
  "created_at": "2020-01-16T01:57:13Z",
  "events_url": "https://api.github.com/repos/vitessio/vitess/issues/5720/events",
  "html_url": "https://github.com/vitessio/vitess/issues/5720",
  "id": 550528207,
  "labels": [],
  "labels_url": "https://api.github.com/repos/vitessio/vitess/issues/5720/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1NTA1MjgyMDc=",
  "number": 5720,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/vitessio/vitess",
  "state": "closed",
  "title": " helm/vitess/templates/_vtctld.tpl: Removal of web_dir flags can break UI for older binaries",
  "updated_at": "2020-01-21T19:05:12Z",
  "url": "https://api.github.com/repos/vitessio/vitess/issues/5720",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/5940277?v=4",
    "events_url": "https://api.github.com/users/gedgar/events{/privacy}",
    "followers_url": "https://api.github.com/users/gedgar/followers",
    "following_url": "https://api.github.com/users/gedgar/following{/other_user}",
    "gists_url": "https://api.github.com/users/gedgar/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/gedgar",
    "id": 5940277,
    "login": "gedgar",
    "node_id": "MDQ6VXNlcjU5NDAyNzc=",
    "organizations_url": "https://api.github.com/users/gedgar/orgs",
    "received_events_url": "https://api.github.com/users/gedgar/received_events",
    "repos_url": "https://api.github.com/users/gedgar/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/gedgar/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gedgar/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/gedgar"
  }
}