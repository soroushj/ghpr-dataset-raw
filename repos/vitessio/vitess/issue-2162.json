{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6733629?v=4",
    "events_url": "https://api.github.com/users/enisoc/events{/privacy}",
    "followers_url": "https://api.github.com/users/enisoc/followers",
    "following_url": "https://api.github.com/users/enisoc/following{/other_user}",
    "gists_url": "https://api.github.com/users/enisoc/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/enisoc",
    "id": 6733629,
    "login": "enisoc",
    "node_id": "MDQ6VXNlcjY3MzM2Mjk=",
    "organizations_url": "https://api.github.com/users/enisoc/orgs",
    "received_events_url": "https://api.github.com/users/enisoc/received_events",
    "repos_url": "https://api.github.com/users/enisoc/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/enisoc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/enisoc/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/enisoc"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/6733629?v=4",
      "events_url": "https://api.github.com/users/enisoc/events{/privacy}",
      "followers_url": "https://api.github.com/users/enisoc/followers",
      "following_url": "https://api.github.com/users/enisoc/following{/other_user}",
      "gists_url": "https://api.github.com/users/enisoc/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/enisoc",
      "id": 6733629,
      "login": "enisoc",
      "node_id": "MDQ6VXNlcjY3MzM2Mjk=",
      "organizations_url": "https://api.github.com/users/enisoc/orgs",
      "received_events_url": "https://api.github.com/users/enisoc/received_events",
      "repos_url": "https://api.github.com/users/enisoc/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/enisoc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/enisoc/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/enisoc"
    }
  ],
  "author_association": "MEMBER",
  "body": "We already support these cases:\n- A slave restarted in-place with existing data dir will auto-configure as slave.\n- A slave restarted with empty data dir will auto-restore and auto-configure as slave.\n- A former master restarted with empty data dir will auto-restore and auto-configure as slave.\n\nBut we don't yet support the fourth case:\n- A former master restarted in-place with existing data dir.\n\nTo support this, one possibility is to configure replication upon vttablet startup if an existing DB is detected and the tablet is a slave type:\n\nhttps://github.com/youtube/vitess/blob/c18b009e409134419c5c596cf5691a0f87af16e5/go/vt/tabletmanager/restore.go#L72\n\nAnother possibility is to evaluate whether it could be safe under some conditions to allow the replication reporter health check to configure replication even if no existing slave status is found:\n\nhttps://github.com/youtube/vitess/blob/4edf1b231a308db3b6b708d602c25c5ef38d6e54/go/vt/tabletmanager/replication_reporter.go#L39\n\nWe'll look more at the possibilities and report back here.\n",
  "closed_at": "2016-10-20T19:59:20Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6733629?v=4",
    "events_url": "https://api.github.com/users/enisoc/events{/privacy}",
    "followers_url": "https://api.github.com/users/enisoc/followers",
    "following_url": "https://api.github.com/users/enisoc/following{/other_user}",
    "gists_url": "https://api.github.com/users/enisoc/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/enisoc",
    "id": 6733629,
    "login": "enisoc",
    "node_id": "MDQ6VXNlcjY3MzM2Mjk=",
    "organizations_url": "https://api.github.com/users/enisoc/orgs",
    "received_events_url": "https://api.github.com/users/enisoc/received_events",
    "repos_url": "https://api.github.com/users/enisoc/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/enisoc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/enisoc/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/enisoc"
  },
  "comments": 1,
  "comments_url": "https://api.github.com/repos/vitessio/vitess/issues/2162/comments",
  "created_at": "2016-10-19T05:15:21Z",
  "events_url": "https://api.github.com/repos/vitessio/vitess/issues/2162/events",
  "html_url": "https://github.com/vitessio/vitess/issues/2162",
  "id": 183867457,
  "labels": [],
  "labels_url": "https://api.github.com/repos/vitessio/vitess/issues/2162/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxODM4Njc0NTc=",
  "number": 2162,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/vitessio/vitess",
  "state": "closed",
  "title": "Former master restarted with existing data doesn't auto-configure as slave",
  "updated_at": "2016-10-20T19:59:20Z",
  "url": "https://api.github.com/repos/vitessio/vitess/issues/2162",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6733629?v=4",
    "events_url": "https://api.github.com/users/enisoc/events{/privacy}",
    "followers_url": "https://api.github.com/users/enisoc/followers",
    "following_url": "https://api.github.com/users/enisoc/following{/other_user}",
    "gists_url": "https://api.github.com/users/enisoc/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/enisoc",
    "id": 6733629,
    "login": "enisoc",
    "node_id": "MDQ6VXNlcjY3MzM2Mjk=",
    "organizations_url": "https://api.github.com/users/enisoc/orgs",
    "received_events_url": "https://api.github.com/users/enisoc/received_events",
    "repos_url": "https://api.github.com/users/enisoc/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/enisoc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/enisoc/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/enisoc"
  }
}