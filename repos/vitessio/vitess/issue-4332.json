{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "#### Feature Description\r\n\r\nConnecting with a MySQL 8.0 client to vtgate results in an error.\r\nThis is because vtgate doesn't support the AuthSwitchRequest packets.\r\n\r\n#### Details\r\n\r\nMySQL 8.0.13 client to vtgate:\r\n\u2190: Server Greeting: Authentication Plugin: mysql_native_password\r\n\u2192: Login Request: Client Auth Plugin: caching_sha2_password\r\n\u2190: MySQL Error 2012 (HY000): Client asked for auth caching_sha2_password, but server wants auth mysql_native_password\r\n\r\nMySQL 8.0.13 client to MySQL 5.7.23:\r\n\u2190: Server Greeting: Authentication Plugin: mysql_native_password\r\n\u2192: Login Request: Client Auth Plugin: caching_sha2_password\r\n\u2190: Auth Switch Request: Auth Method Name: mysql_native_password\r\n\u2192: Auth Switch Response\r\n\u2190: OK\r\n\r\nThe [docs](https://dev.mysql.com/doc/dev/mysql-server/latest/page_protocol_connection_phase.html) say this:\r\n> When including authentication reply in the Protocol::HandshakeResponse:, client is not obligated to use the same authentication method that was used by the server in the Protocol::Handshake packet.\r\n\r\nI think it would be better if the client would use the same auth plugin as in the server greeting to minimize roundtrips, but that's outside of the scope of vitess.\r\n\r\n#### Use Case(s)\r\n\r\nWe use MySQL clients to connect to MySQL servers and to Vitess. After upgrading the client to 8.0 it fails to connect to vtgate. \r\n\r\n#### Solution\r\n\r\nSupport Auth Switch Request in vtgate\r\n\r\ncc @slanning @sjmudd ",
  "closed_at": "2018-11-13T00:32:14Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/589370?v=4",
    "events_url": "https://api.github.com/users/sougou/events{/privacy}",
    "followers_url": "https://api.github.com/users/sougou/followers",
    "following_url": "https://api.github.com/users/sougou/following{/other_user}",
    "gists_url": "https://api.github.com/users/sougou/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sougou",
    "id": 589370,
    "login": "sougou",
    "node_id": "MDQ6VXNlcjU4OTM3MA==",
    "organizations_url": "https://api.github.com/users/sougou/orgs",
    "received_events_url": "https://api.github.com/users/sougou/received_events",
    "repos_url": "https://api.github.com/users/sougou/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sougou/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sougou/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sougou"
  },
  "comments": 4,
  "comments_url": "https://api.github.com/repos/vitessio/vitess/issues/4332/comments",
  "created_at": "2018-11-01T14:44:08Z",
  "events_url": "https://api.github.com/repos/vitessio/vitess/issues/4332/events",
  "html_url": "https://github.com/vitessio/vitess/issues/4332",
  "id": 376422488,
  "labels": [],
  "labels_url": "https://api.github.com/repos/vitessio/vitess/issues/4332/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNzY0MjI0ODg=",
  "number": 4332,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/vitessio/vitess",
  "state": "closed",
  "title": "Support for AuthSwitchRequest to better support MySQL 8.0 clients",
  "updated_at": "2018-11-13T00:32:14Z",
  "url": "https://api.github.com/repos/vitessio/vitess/issues/4332",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1272980?v=4",
    "events_url": "https://api.github.com/users/dveeden/events{/privacy}",
    "followers_url": "https://api.github.com/users/dveeden/followers",
    "following_url": "https://api.github.com/users/dveeden/following{/other_user}",
    "gists_url": "https://api.github.com/users/dveeden/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/dveeden",
    "id": 1272980,
    "login": "dveeden",
    "node_id": "MDQ6VXNlcjEyNzI5ODA=",
    "organizations_url": "https://api.github.com/users/dveeden/orgs",
    "received_events_url": "https://api.github.com/users/dveeden/received_events",
    "repos_url": "https://api.github.com/users/dveeden/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/dveeden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dveeden/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/dveeden"
  }
}