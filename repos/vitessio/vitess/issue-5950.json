{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "This announce includes more detail from #5569 \r\n\r\nMost of the schema info vttablet currently loads is unused. We'll be deprecating the following:\r\n* All table stats. These were also exported as variables in `/debug/vars`. They will not be exported any more.\r\n* Index information: We only need the primary key column names. So, only this information will be loaded.\r\n* Column information: The column info tracked if it was an auto-inc, and its default values. These will not be loaded.\r\n\r\nCurrently, the schema loader loops on every table to load additional metadata about it. The above changes allow us to load all the information in one scan. We'll continue to use the `BaseShowTables` query to scan table comments.\r\n\r\nFor looking up the primary key columns, we'll use the following query, which can load the pk info for all tables in a single read.\r\n\r\n```\r\nselect table_name, column_name from information_schema.key_column_usage where table_schema='a' and constraint_name='PRIMARY' order by table_name, ordinal_position\r\n```\r\n\r\nAt this point, the schema info is only used by the following features:\r\n* Sequences\r\n* VStreamer\r\n* Messager\r\n\r\nIf the schema load is slow in spite of the above optimizations, we can look at starting the query service upfront, and make these features wait for the schema to load lazily. ",
  "closed_at": "2020-03-23T19:06:47Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/589370?v=4",
    "events_url": "https://api.github.com/users/sougou/events{/privacy}",
    "followers_url": "https://api.github.com/users/sougou/followers",
    "following_url": "https://api.github.com/users/sougou/following{/other_user}",
    "gists_url": "https://api.github.com/users/sougou/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sougou",
    "id": 589370,
    "login": "sougou",
    "node_id": "MDQ6VXNlcjU4OTM3MA==",
    "organizations_url": "https://api.github.com/users/sougou/orgs",
    "received_events_url": "https://api.github.com/users/sougou/received_events",
    "repos_url": "https://api.github.com/users/sougou/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sougou/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sougou/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sougou"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/vitessio/vitess/issues/5950/comments",
  "created_at": "2020-03-21T20:24:08Z",
  "events_url": "https://api.github.com/repos/vitessio/vitess/issues/5950/events",
  "html_url": "https://github.com/vitessio/vitess/issues/5950",
  "id": 585575557,
  "labels": [
    {
      "color": "f41151",
      "default": false,
      "description": "",
      "id": 1891773758,
      "name": "Breaking change",
      "node_id": "MDU6TGFiZWwxODkxNzczNzU4",
      "url": "https://api.github.com/repos/vitessio/vitess/labels/Breaking%20change"
    }
  ],
  "labels_url": "https://api.github.com/repos/vitessio/vitess/issues/5950/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1ODU1NzU1NTc=",
  "number": 5950,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/vitessio/vitess",
  "state": "closed",
  "title": "Simplify vttablet schema -> Breaking change",
  "updated_at": "2020-06-18T00:28:43Z",
  "url": "https://api.github.com/repos/vitessio/vitess/issues/5950",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/589370?v=4",
    "events_url": "https://api.github.com/users/sougou/events{/privacy}",
    "followers_url": "https://api.github.com/users/sougou/followers",
    "following_url": "https://api.github.com/users/sougou/following{/other_user}",
    "gists_url": "https://api.github.com/users/sougou/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sougou",
    "id": 589370,
    "login": "sougou",
    "node_id": "MDQ6VXNlcjU4OTM3MA==",
    "organizations_url": "https://api.github.com/users/sougou/orgs",
    "received_events_url": "https://api.github.com/users/sougou/received_events",
    "repos_url": "https://api.github.com/users/sougou/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sougou/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sougou/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sougou"
  }
}