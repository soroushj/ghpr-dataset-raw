{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "COLLABORATOR",
  "body": "Failing test case for go/vt/vtgate/planbuilder/testdata/aggr_cases.txt:\r\n\r\n`\"select count(*) from (select col, user_extra.extra from user join user_extra on user.id = user_extra.user_id order by user_extra.extra) a\"`\r\n\r\nOutput:\r\n\r\n```\r\n$  go test vitess.io/vitess/go/vt/vtgate/planbuilder -run \"^(TestPlan)$\"\r\npanic: runtime error: index out of range [recovered]\r\n\tpanic: runtime error: index out of range\r\n\r\ngoroutine 59 [running]:\r\ntesting.tRunner.func1(0xc00031f000)\r\n\t/home/dweitzman/bin/go1.11/src/testing/testing.go:792 +0x387\r\npanic(0x934900, 0xfa5260)\r\n\t/home/dweitzman/bin/go1.11/src/runtime/panic.go:513 +0x1b9\r\nvitess.io/vitess/go/vt/vtgate/planbuilder.(*route).Wireup(0xc000338480, 0xa77160, 0xc00033ca20, 0xc00032dea0, 0x0, 0x0)\r\n\t/home/dweitzman/code/vitess/go/vt/vtgate/planbuilder/route.go:377 +0xcd3\r\nvitess.io/vitess/go/vt/vtgate/planbuilder.(*orderedAggregate).Wireup(0xc00033ca20, 0xa77160, 0xc00033ca20, 0xc00032dea0, 0x0, 0x40e148)\r\n\t/home/dweitzman/code/vitess/go/vt/vtgate/planbuilder/ordered_aggregate.go:469 +0xfc\r\nvitess.io/vitess/go/vt/vtgate/planbuilder.buildSelectPlan(0xc000329520, 0xa73b60, 0xc000126640, 0xe0829d, 0x31, 0x8, 0x8)\r\n\t/home/dweitzman/code/vitess/go/vt/vtgate/planbuilder/select.go:33 +0x128\r\nvitess.io/vitess/go/vt/vtgate/planbuilder.BuildFromStmt(0xc0001fa480, 0x89, 0xa72420, 0xc000329520, 0xa73b60, 0xc000126640, 0x94d2e0, 0x1, 0xc000126640)\r\n\t/home/dweitzman/code/vitess/go/vt/vtgate/planbuilder/builder.go:138 +0x425\r\nvitess.io/vitess/go/vt/vtgate/planbuilder.Build(0xc0001fa480, 0x89, 0xa73b60, 0xc000126640, 0xe0829d, 0x31, 0x2f7)\r\n\t/home/dweitzman/code/vitess/go/vt/vtgate/planbuilder/builder.go:124 +0x97\r\nvitess.io/vitess/go/vt/vtgate/planbuilder.testFile.func1(0xc00031f000)\r\n\t/home/dweitzman/code/vitess/go/vt/vtgate/planbuilder/plan_test.go:225 +0xb5\r\ntesting.tRunner(0xc00031f000, 0xc00033c4b0)\r\n\t/home/dweitzman/bin/go1.11/src/testing/testing.go:827 +0xbf\r\ncreated by testing.(*T).Run\r\n\t/home/dweitzman/bin/go1.11/src/testing/testing.go:878 +0x353\r\nFAIL\tvitess.io/vitess/go/vt/vtgate/planbuilder\t0.013s\r\n```",
  "closed_at": "2019-05-06T19:12:11Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/589370?v=4",
    "events_url": "https://api.github.com/users/sougou/events{/privacy}",
    "followers_url": "https://api.github.com/users/sougou/followers",
    "following_url": "https://api.github.com/users/sougou/following{/other_user}",
    "gists_url": "https://api.github.com/users/sougou/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sougou",
    "id": 589370,
    "login": "sougou",
    "node_id": "MDQ6VXNlcjU4OTM3MA==",
    "organizations_url": "https://api.github.com/users/sougou/orgs",
    "received_events_url": "https://api.github.com/users/sougou/received_events",
    "repos_url": "https://api.github.com/users/sougou/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sougou/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sougou/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sougou"
  },
  "comments": 1,
  "comments_url": "https://api.github.com/repos/vitessio/vitess/issues/4851/comments",
  "created_at": "2019-04-30T22:09:49Z",
  "events_url": "https://api.github.com/repos/vitessio/vitess/issues/4851/events",
  "html_url": "https://github.com/vitessio/vitess/issues/4851",
  "id": 438998734,
  "labels": [],
  "labels_url": "https://api.github.com/repos/vitessio/vitess/issues/4851/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0Mzg5OTg3MzQ=",
  "number": 4851,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/vitessio/vitess",
  "state": "closed",
  "title": "vtgate query planner panic for count of (join + order by)",
  "updated_at": "2019-05-06T19:12:11Z",
  "url": "https://api.github.com/repos/vitessio/vitess/issues/4851",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/100598?v=4",
    "events_url": "https://api.github.com/users/dweitzman/events{/privacy}",
    "followers_url": "https://api.github.com/users/dweitzman/followers",
    "following_url": "https://api.github.com/users/dweitzman/following{/other_user}",
    "gists_url": "https://api.github.com/users/dweitzman/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/dweitzman",
    "id": 100598,
    "login": "dweitzman",
    "node_id": "MDQ6VXNlcjEwMDU5OA==",
    "organizations_url": "https://api.github.com/users/dweitzman/orgs",
    "received_events_url": "https://api.github.com/users/dweitzman/received_events",
    "repos_url": "https://api.github.com/users/dweitzman/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/dweitzman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dweitzman/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/dweitzman"
  }
}