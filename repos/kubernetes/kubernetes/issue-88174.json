{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "**Problem:**\r\nPreferred pod/node affinity and preferred PodTopologySpread may not be respected because of conflicts with other scoring functions, like node utilization or image locality.\r\n\r\nScheduler Scoring functions have weights, by default they are all set to 1 (apart from one): https://github.com/kubernetes/kubernetes/blob/master/pkg/scheduler/algorithmprovider/registry.go#L118-L125. Having equal weights is problematic because of the way we score: each Scoring plugin returns a score [0, MaxScore], which get multiplied by the configured weight of the plugin, and a node score is the sum over all scores. Therefore, even if the user explicitly indicates that they prefer to place pod x on node y, this preference may not be respected and the scheduler may decide to place the pod on node z because it has lower usage and the container that the pod is requesting.\r\n\r\n**Proposed Solution:**\r\nScoring functions that allow users to explicitly express preference should have higher weights than generic scoring functions. This includes: inter-pod affinity, node affinity, taint/toleration and pod topology spread.\r\n\r\nThis issue is proposing to change the default behavior of the scheduler, I am not sure how k8s deprecation policy applies here, although I would argue that this change should help the scheduler make decisions closer to users expectations.\r\n\r\nWe will start with pod topology pod spread since as of creating this issue, the feature is still in beta.\r\n\r\n/sig scheduling\r\n\r\n\r\n\r\n",
  "closed_at": "2020-05-20T06:40:42Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 61,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/88174/comments",
  "created_at": "2020-02-14T20:32:55Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/88174/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/88174",
  "id": 565542954,
  "labels": [
    {
      "color": "c7def8",
      "default": false,
      "description": "Categorizes issue or PR as related to a new feature.",
      "id": 267761362,
      "name": "kind/feature",
      "node_id": "MDU6TGFiZWwyNjc3NjEzNjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/feature"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Scheduling.",
      "id": 125550211,
      "name": "sig/scheduling",
      "node_id": "MDU6TGFiZWwxMjU1NTAyMTE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/scheduling"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/88174/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1NjU1NDI5NTQ=",
  "number": 88174,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Increase the default weight of pod topology spread",
  "updated_at": "2020-05-20T06:40:42Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/88174",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/40361897?v=4",
    "events_url": "https://api.github.com/users/ahg-g/events{/privacy}",
    "followers_url": "https://api.github.com/users/ahg-g/followers",
    "following_url": "https://api.github.com/users/ahg-g/following{/other_user}",
    "gists_url": "https://api.github.com/users/ahg-g/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ahg-g",
    "id": 40361897,
    "login": "ahg-g",
    "node_id": "MDQ6VXNlcjQwMzYxODk3",
    "organizations_url": "https://api.github.com/users/ahg-g/orgs",
    "received_events_url": "https://api.github.com/users/ahg-g/received_events",
    "repos_url": "https://api.github.com/users/ahg-g/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ahg-g/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ahg-g/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ahg-g"
  }
}