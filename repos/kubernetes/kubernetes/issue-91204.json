{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6007417?v=4",
    "events_url": "https://api.github.com/users/chendave/events{/privacy}",
    "followers_url": "https://api.github.com/users/chendave/followers",
    "following_url": "https://api.github.com/users/chendave/following{/other_user}",
    "gists_url": "https://api.github.com/users/chendave/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/chendave",
    "id": 6007417,
    "login": "chendave",
    "node_id": "MDQ6VXNlcjYwMDc0MTc=",
    "organizations_url": "https://api.github.com/users/chendave/orgs",
    "received_events_url": "https://api.github.com/users/chendave/received_events",
    "repos_url": "https://api.github.com/users/chendave/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/chendave/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chendave/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/chendave"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/6007417?v=4",
      "events_url": "https://api.github.com/users/chendave/events{/privacy}",
      "followers_url": "https://api.github.com/users/chendave/followers",
      "following_url": "https://api.github.com/users/chendave/following{/other_user}",
      "gists_url": "https://api.github.com/users/chendave/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/chendave",
      "id": 6007417,
      "login": "chendave",
      "node_id": "MDQ6VXNlcjYwMDc0MTc=",
      "organizations_url": "https://api.github.com/users/chendave/orgs",
      "received_events_url": "https://api.github.com/users/chendave/received_events",
      "repos_url": "https://api.github.com/users/chendave/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/chendave/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chendave/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/chendave"
    }
  ],
  "author_association": "MEMBER",
  "body": "<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nredefine the formula, the score should be capped per images instead of pod.\r\n\r\n**Why is this needed**:\r\nFor the pod that going to be scheduled, `ImageLocality` calculate the score based on the below steps, \r\n-  Scaled score base on the image size and it's spread over the cluster, \r\n***image[i].nodes***:  number of nodes that already have image \r\n\r\n![image](https://user-images.githubusercontent.com/6007417/82198995-ae007680-992f-11ea-8578-035b6d0c4089.png)\r\n\r\n-  Capped score based on the assumption 90% image size on dockerhub falls into the range [23M ~ 1000M]\r\n\r\n***lowerbound***: 23M\r\n***upperbound***:1000M\r\n\r\n![image](https://user-images.githubusercontent.com/6007417/82199705-a42b4300-9930-11ea-9fb9-dcd2f7f68990.png)\r\n\r\n\r\n- Final scores returned for scheduling, \r\n***maxscore***: 100\r\n![image](https://user-images.githubusercontent.com/6007417/82199952-f704fa80-9930-11ea-901d-b06c25f9e96e.png)\r\n\r\n\r\nThe second step is not well guarded, the assumption is based on the image size while the pod may hold multiple images, it is not surprise to see that total image size of the pods is larger than 1000M, while each of might be only around 300M. \r\n\r\nIn this below case, following the above formula, NODE1 and NODE2 willl get the same scores(100), since both of them are capped by the max score (100), the ideal result is score of NODE2 should be larger than NODE1 (all requested images are ready on NODE2) and is preferred, the larger the **sample1** here the more scores should be expected for NODE2.\r\n\r\n![image](https://user-images.githubusercontent.com/6007417/82204735-fe7bd200-9937-11ea-8de4-14607a87efcc.png)\r\n\r\n\r\n",
  "closed_at": "2020-05-31T23:17:54Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 31,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/91204/comments",
  "created_at": "2020-05-18T10:57:17Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/91204/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/91204",
  "id": 620112996,
  "labels": [
    {
      "color": "c7def8",
      "default": false,
      "description": "Categorizes issue or PR as related to a new feature.",
      "id": 267761362,
      "name": "kind/feature",
      "node_id": "MDU6TGFiZWwyNjc3NjEzNjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/feature"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Scheduling.",
      "id": 125550211,
      "name": "sig/scheduling",
      "node_id": "MDU6TGFiZWwxMjU1NTAyMTE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/scheduling"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/91204/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU2MjAxMTI5OTY=",
  "number": 91204,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "scheduler: `ImageLocality` score plugin improvement",
  "updated_at": "2020-05-31T23:17:54Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/91204",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6007417?v=4",
    "events_url": "https://api.github.com/users/chendave/events{/privacy}",
    "followers_url": "https://api.github.com/users/chendave/followers",
    "following_url": "https://api.github.com/users/chendave/following{/other_user}",
    "gists_url": "https://api.github.com/users/chendave/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/chendave",
    "id": 6007417,
    "login": "chendave",
    "node_id": "MDQ6VXNlcjYwMDc0MTc=",
    "organizations_url": "https://api.github.com/users/chendave/orgs",
    "received_events_url": "https://api.github.com/users/chendave/received_events",
    "repos_url": "https://api.github.com/users/chendave/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/chendave/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chendave/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/chendave"
  }
}