{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/184976?v=4",
    "events_url": "https://api.github.com/users/nicksardo/events{/privacy}",
    "followers_url": "https://api.github.com/users/nicksardo/followers",
    "following_url": "https://api.github.com/users/nicksardo/following{/other_user}",
    "gists_url": "https://api.github.com/users/nicksardo/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/nicksardo",
    "id": 184976,
    "login": "nicksardo",
    "node_id": "MDQ6VXNlcjE4NDk3Ng==",
    "organizations_url": "https://api.github.com/users/nicksardo/orgs",
    "received_events_url": "https://api.github.com/users/nicksardo/received_events",
    "repos_url": "https://api.github.com/users/nicksardo/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/nicksardo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nicksardo/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/nicksardo"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/184976?v=4",
      "events_url": "https://api.github.com/users/nicksardo/events{/privacy}",
      "followers_url": "https://api.github.com/users/nicksardo/followers",
      "following_url": "https://api.github.com/users/nicksardo/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicksardo/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/nicksardo",
      "id": 184976,
      "login": "nicksardo",
      "node_id": "MDQ6VXNlcjE4NDk3Ng==",
      "organizations_url": "https://api.github.com/users/nicksardo/orgs",
      "received_events_url": "https://api.github.com/users/nicksardo/received_events",
      "repos_url": "https://api.github.com/users/nicksardo/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/nicksardo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicksardo/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/nicksardo"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "/kind bug\r\n\r\n**What happened**:\r\nServices of type LoadBalancer (GCE) with IP addresses promoted to static (by user or by orphan) cause the service controller to panic. The constant panicking will cause a reboot loop of the pod.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n1. Create a service on GCP\r\n2. Expose it\r\n3. In the GCP Console, promote the IP address of the LB to static and set the name to the loadBalancerName which is the same name as the forwarding rule.\r\n\r\n\r\n\r\n**Environment**:\r\n- Kubernetes version: \r\n**1.7.0 AND 1.7.1**\r\n- Cloud provider or hardware configuration**:\r\nGCE\r\n\r\n\r\n**Symptoms**\r\n1. kube-controller-manager crash loops on the master. \r\n\r\n**Mitigation**\r\n_Option 1:_\r\nBuild your own version of `release-1.7` branch for the master. Only the kube-controller-manager image needs to be updated.\r\n\r\n_Option 2:_\r\nFor all affected services, set the `loadBalancerIP` field to the known external IP address.\r\n\r\nSteps: \r\n1. Gather list of reserved IPs\r\n\r\n\u279c gcloud compute addresses list \r\nNAME                              REGION       ADDRESS          STATUS\r\na8b891421675f11e7bee242010a80000  us-central1  35.35.35.35    IN_USE\r\n\r\n2. Gather list of all Services of type LoadBalancer\r\n\r\n\u279c kubectl get svc --all-namespaces | grep \"LoadBalancer\"\r\ndefault       my-service             LoadBalancer   10.0.99.201    35.35.35.35   80:32587/TCP,443:30446/TCP   58m\r\n\r\n3. For each service of type LoadBalancer with an IP that's reserved (in the list above), continue to next step.\r\n4. Set the service's `loadBalancerIP` field equal to the known IP.\r\n\r\n_Example_\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  creationTimestamp: 2017-07-13T00:09:31Z\r\n  labels:\r\n    app: echo\r\n  name: my-service\r\n  namespace: default\r\n  resourceVersion: \"46816\"\r\n  selfLink: /api/v1/namespaces/default/services/my-service\r\n  uid: 8b891421-675f-11e7-bee2-42010a800002\r\nspec:\r\n  clusterIP: 10.0.99.201\r\n  externalTrafficPolicy: Cluster\r\n  loadBalancerIP: 35.35.35.35                                     <------- Field set to status.loadBalancer.ingress.ip below.\r\n  ports:\r\n  - name: port-1\r\n    nodePort: 32587\r\n    port: 80\r\n    protocol: TCP\r\n    targetPort: 80\r\n  - name: port-2\r\n    nodePort: 30446\r\n    port: 443\r\n    protocol: TCP\r\n    targetPort: 443\r\n  selector:\r\n    app: echo\r\n  sessionAffinity: ClientIP\r\n  type: LoadBalancer\r\nstatus:\r\n  loadBalancer:\r\n    ingress:\r\n    - ip: 35.35.35.35",
  "closed_at": "2017-07-13T06:59:03Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48848/comments",
  "created_at": "2017-07-13T01:24:46Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48848/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/48848",
  "id": 242560050,
  "labels": [
    {
      "color": "d4c5f9",
      "default": false,
      "description": null,
      "id": 134646230,
      "name": "area/platform/gce",
      "node_id": "MDU6TGFiZWwxMzQ2NDYyMzA=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/platform/gce"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Network.",
      "id": 116712108,
      "name": "sig/network",
      "node_id": "MDU6TGFiZWwxMTY3MTIxMDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/network"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48848/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2019-08-26T17:22:37Z",
    "closed_issues": 1514,
    "created_at": "2017-01-19T17:41:27Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/7882754?v=4",
      "events_url": "https://api.github.com/users/pwittrock/events{/privacy}",
      "followers_url": "https://api.github.com/users/pwittrock/followers",
      "following_url": "https://api.github.com/users/pwittrock/following{/other_user}",
      "gists_url": "https://api.github.com/users/pwittrock/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/pwittrock",
      "id": 7882754,
      "login": "pwittrock",
      "node_id": "MDQ6VXNlcjc4ODI3NTQ=",
      "organizations_url": "https://api.github.com/users/pwittrock/orgs",
      "received_events_url": "https://api.github.com/users/pwittrock/received_events",
      "repos_url": "https://api.github.com/users/pwittrock/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/pwittrock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pwittrock/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/pwittrock"
    },
    "description": "",
    "due_on": "2017-06-28T07:00:00Z",
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/32",
    "id": 2264750,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/32/labels",
    "node_id": "MDk6TWlsZXN0b25lMjI2NDc1MA==",
    "number": 32,
    "open_issues": 0,
    "state": "closed",
    "title": "v1.7",
    "updated_at": "2019-08-26T17:22:37Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/32"
  },
  "node_id": "MDU6SXNzdWUyNDI1NjAwNTA=",
  "number": 48848,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "GCE: Services (LoadBalancer) with static ip causes panic in 1.7",
  "updated_at": "2017-07-14T06:27:16Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48848",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/184976?v=4",
    "events_url": "https://api.github.com/users/nicksardo/events{/privacy}",
    "followers_url": "https://api.github.com/users/nicksardo/followers",
    "following_url": "https://api.github.com/users/nicksardo/following{/other_user}",
    "gists_url": "https://api.github.com/users/nicksardo/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/nicksardo",
    "id": 184976,
    "login": "nicksardo",
    "node_id": "MDQ6VXNlcjE4NDk3Ng==",
    "organizations_url": "https://api.github.com/users/nicksardo/orgs",
    "received_events_url": "https://api.github.com/users/nicksardo/received_events",
    "repos_url": "https://api.github.com/users/nicksardo/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/nicksardo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nicksardo/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/nicksardo"
  }
}