{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/24448061?v=4",
    "events_url": "https://api.github.com/users/msau42/events{/privacy}",
    "followers_url": "https://api.github.com/users/msau42/followers",
    "following_url": "https://api.github.com/users/msau42/following{/other_user}",
    "gists_url": "https://api.github.com/users/msau42/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/msau42",
    "id": 24448061,
    "login": "msau42",
    "node_id": "MDQ6VXNlcjI0NDQ4MDYx",
    "organizations_url": "https://api.github.com/users/msau42/orgs",
    "received_events_url": "https://api.github.com/users/msau42/received_events",
    "repos_url": "https://api.github.com/users/msau42/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/msau42/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/msau42/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/msau42"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/24448061?v=4",
      "events_url": "https://api.github.com/users/msau42/events{/privacy}",
      "followers_url": "https://api.github.com/users/msau42/followers",
      "following_url": "https://api.github.com/users/msau42/following{/other_user}",
      "gists_url": "https://api.github.com/users/msau42/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/msau42",
      "id": 24448061,
      "login": "msau42",
      "node_id": "MDQ6VXNlcjI0NDQ4MDYx",
      "organizations_url": "https://api.github.com/users/msau42/orgs",
      "received_events_url": "https://api.github.com/users/msau42/received_events",
      "repos_url": "https://api.github.com/users/msau42/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/msau42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msau42/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/msau42"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "**Fix status:**\r\n- [x] fixed in master in https://github.com/kubernetes/kubernetes/pull/61373\r\n- [x] fixed in release-1.10 branch in #61518, will be in 1.10.0\r\n- [x] fixed in release-1.9 branch in #61519, will be in 1.9.7\r\n- [x] fixed in release-1.8 branch in #61520, will be in 1.8.11\r\n- [x] fixed in release-1.7 branch in #61521, will be in 1.7.16\r\n\r\n\r\nIn SubPath fixes, PR https://github.com/kubernetes/kubernetes/pull/61044 adds bind mount for subpaths. It uses `/var/lib/kubelet/pods/<uid>/volume-subpaths/<volumename>` as the path name. The volumename in this path is the container's mount volume name which is also called OuterVolumeSpecName in [operation_executor.go](https://github.com/kubernetes/kubernetes/blob/master/pkg/volume/util/operationexecutor/operation_executor.go#L476).\r\n\r\nThis becomes an issue for volume reconstruction when kubelet restarts. Volume [reconstruction](https://github.com/kubernetes/kubernetes/blob/master/pkg/kubelet/volumemanager/reconciler/reconciler.go#L556) scans the volume directories and recover the InnerVolumeSpecName (which is used to construct pod volume paths). Volume reconstruction has not enough information to recover the OuterVolumeSpecName and figure out which volume it maps to. In case kubelet needs to clean up mounts (it happens when volume spec cannot be reconstructed), it will fail to clean up the subpaths because of lacking the OuterVolumeSpecName.\r\n\r\nWe think it is better to use InnerVolumeSpecName for volume subPath instead of OuterVolumeSpecName so that volume clean up can work. The issue we might have is that some users might already deploy a cluster with subpath might already [SubPath fix](https://github.com/kubernetes/kubernetes/pull/61044). If the users perform an in-place upgrade, since new version will use InnerVolumeSpecName which might have conflicts with some other older version's OuterVolumeSpecName among different volumes. This change requires clear documentation and communication with the users. ",
  "closed_at": "2018-04-06T12:43:03Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/980082?v=4",
    "events_url": "https://api.github.com/users/liggitt/events{/privacy}",
    "followers_url": "https://api.github.com/users/liggitt/followers",
    "following_url": "https://api.github.com/users/liggitt/following{/other_user}",
    "gists_url": "https://api.github.com/users/liggitt/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/liggitt",
    "id": 980082,
    "login": "liggitt",
    "node_id": "MDQ6VXNlcjk4MDA4Mg==",
    "organizations_url": "https://api.github.com/users/liggitt/orgs",
    "received_events_url": "https://api.github.com/users/liggitt/received_events",
    "repos_url": "https://api.github.com/users/liggitt/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/liggitt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/liggitt/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/liggitt"
  },
  "comments": 14,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/61372/comments",
  "created_at": "2018-03-19T23:00:02Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/61372/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/61372",
  "id": 306669018,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Highest priority. Must be actively worked on as someone's top priority right now.",
      "id": 114528068,
      "name": "priority/critical-urgent",
      "node_id": "MDU6TGFiZWwxMTQ1MjgwNjg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/critical-urgent"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/61372/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMDY2NjkwMTg=",
  "number": 61372,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "pvc volumes used with subPath volume mounts don't support reconstruction",
  "updated_at": "2018-04-06T12:43:03Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/61372",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/19172805?v=4",
    "events_url": "https://api.github.com/users/jingxu97/events{/privacy}",
    "followers_url": "https://api.github.com/users/jingxu97/followers",
    "following_url": "https://api.github.com/users/jingxu97/following{/other_user}",
    "gists_url": "https://api.github.com/users/jingxu97/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jingxu97",
    "id": 19172805,
    "login": "jingxu97",
    "node_id": "MDQ6VXNlcjE5MTcyODA1",
    "organizations_url": "https://api.github.com/users/jingxu97/orgs",
    "received_events_url": "https://api.github.com/users/jingxu97/received_events",
    "repos_url": "https://api.github.com/users/jingxu97/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jingxu97/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jingxu97/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jingxu97"
  }
}