{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "<!-- This form is for bug reports and feature requests ONLY! \r\n\r\nIf you're looking for help check [Stack Overflow](https://stackoverflow.com/questions/tagged/kubernetes) and the [troubleshooting guide](https://kubernetes.io/docs/tasks/debug-application-cluster/troubleshooting/).\r\n-->\r\n\r\nIt is not a secret that [inter-pod affinity/anti-affinity predicate is much slower than other predicates](https://github.com/kubernetes/autoscaler/issues/257).\r\nIn my opinion the main reason for the slowness is the flexibility of the inter-pod affinity/anti-affinity rules. However, in most practical scenarios users do not need all the flexibility. For example, people often do not use arbitrary labels in topology key of the affinity rules. They often use node, zone, or region as the topology. Node in particular is used often. That's why I am proposing a fast path for the case that topology key is Node.\r\nToday, the affinity/anti-affinity predicate does not have any distinction for topology keys and [scans all the pods](https://github.com/kubernetes/kubernetes/blob/master/plugin/pkg/scheduler/algorithm/predicates/predicates.go#L1001) in the cluster regardless. The logic should recognize \"kubernetes.io/hostname\" and scan only pods on the same node for this topology key.\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**: FEATURE REQUEST\r\n\r\n/kind feature\r\n\r\n\r\n\r\n/sig scheduling\r\ncc/ @shyamjvs ",
  "closed_at": "2018-02-05T21:03:48Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/14308438?v=4",
    "events_url": "https://api.github.com/users/bsalamat/events{/privacy}",
    "followers_url": "https://api.github.com/users/bsalamat/followers",
    "following_url": "https://api.github.com/users/bsalamat/following{/other_user}",
    "gists_url": "https://api.github.com/users/bsalamat/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bsalamat",
    "id": 14308438,
    "login": "bsalamat",
    "node_id": "MDQ6VXNlcjE0MzA4NDM4",
    "organizations_url": "https://api.github.com/users/bsalamat/orgs",
    "received_events_url": "https://api.github.com/users/bsalamat/received_events",
    "repos_url": "https://api.github.com/users/bsalamat/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bsalamat/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bsalamat/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bsalamat"
  },
  "comments": 11,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/54189/comments",
  "created_at": "2017-10-19T01:06:03Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/54189/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/54189",
  "id": 266689490,
  "labels": [
    {
      "color": "c7def8",
      "default": false,
      "description": "Categorizes issue or PR as related to a new feature.",
      "id": 267761362,
      "name": "kind/feature",
      "node_id": "MDU6TGFiZWwyNjc3NjEzNjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/feature"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Scheduling.",
      "id": 125550211,
      "name": "sig/scheduling",
      "node_id": "MDU6TGFiZWwxMjU1NTAyMTE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/scheduling"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/54189/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNjY2ODk0OTA=",
  "number": 54189,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Add a fast path to inter-pod affinity/anti-affinity for hostname topology key",
  "updated_at": "2018-10-17T13:35:17Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/54189",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/14308438?v=4",
    "events_url": "https://api.github.com/users/bsalamat/events{/privacy}",
    "followers_url": "https://api.github.com/users/bsalamat/followers",
    "following_url": "https://api.github.com/users/bsalamat/following{/other_user}",
    "gists_url": "https://api.github.com/users/bsalamat/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bsalamat",
    "id": 14308438,
    "login": "bsalamat",
    "node_id": "MDQ6VXNlcjE0MzA4NDM4",
    "organizations_url": "https://api.github.com/users/bsalamat/orgs",
    "received_events_url": "https://api.github.com/users/bsalamat/received_events",
    "repos_url": "https://api.github.com/users/bsalamat/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bsalamat/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bsalamat/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bsalamat"
  }
}