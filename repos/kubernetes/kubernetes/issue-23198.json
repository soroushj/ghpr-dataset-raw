{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "Following the official documentation for creating a Kubernetes cluster using Juju on AWS gives the following error:\nmake: **\\* No rule to make target `clean'.  Stop.\n### Steps to reproduce\n- Use the docker image pointed in the documentation to start a juju client\n\n```\ndocker run -v ~/.juju:/home/ubuntu/.juju -ti jujusolutions/jujubox:latest\n```\n- Install curl\n  Log in as root and install curl: apt-get update && apt-get install -y curl\n- Choose juju provider\n\n```\nexport KUBERNETES_PROVIDER=juju\n```\n- Launch the install\n\n```\ncurl -sS https://get.k8s.io | bash\n```\n### Possible hints\n\nOnce the script has failed for the first time, if we launch kube-up.sh using bash debug we get the following:\n\n```\nubuntu@19ea950394f5:~/kubernetes/cluster/juju$ bash -x ../../cluster/kube-up.sh \n+ set -o errexit\n+ set -o nounset\n+ set -o pipefail\n++ dirname ../../cluster/kube-up.sh\n+ KUBE_ROOT=../../cluster/..\n+ EXIT_ON_WEAK_ERROR=false\n+ '[' -f ../../cluster/../cluster/env.sh ']'\n+ source ../../cluster/../cluster/kube-env.sh\n++ KUBERNETES_PROVIDER=juju\n++ [[ -z '' ]]\n++ declare -r 'color_start=\\033['\n++ declare -r 'color_red=\\033[0;31m'\n++ declare -r 'color_yellow=\\033[0;33m'\n++ declare -r 'color_green=\\033[0;32m'\n++ declare -r 'color_norm=\\033[0m'\n+ source ../../cluster/../cluster/kube-util.sh\n+++ dirname ../../cluster/../cluster/kube-util.sh\n++ KUBE_ROOT=../../cluster/../cluster/..\n++ '[' -n juju ']'\n++ PROVIDER_UTILS=../../cluster/../cluster/../cluster/juju/util.sh\n++ '[' -f ../../cluster/../cluster/../cluster/juju/util.sh ']'\n++ source ../../cluster/../cluster/../cluster/juju/util.sh\n+++ set -o errexit\n+++ set -o nounset\n+++ set -o pipefail\n++++ readlink -m ../../cluster/../cluster/../cluster/juju/util.sh\n+++ UTIL_SCRIPT=/home/ubuntu/kubernetes/cluster/juju/util.sh\n++++ dirname /home/ubuntu/kubernetes/cluster/juju/util.sh\n+++ JUJU_PATH=/home/ubuntu/kubernetes/cluster/juju\n++++ readlink -m /home/ubuntu/kubernetes/cluster/juju/../../\n+++ KUBE_ROOT=/home/ubuntu/kubernetes\n+++ source /home/ubuntu/kubernetes/cluster/juju/config-default.sh\n+++ source /home/ubuntu/kubernetes/cluster/juju/prereqs/ubuntu-juju.sh\n++++ set -o errexit\n++++ set -o nounset\n++++ set -o pipefail\n+++ export JUJU_REPOSITORY=/home/ubuntu/kubernetes/cluster/juju/charms\n+++ JUJU_REPOSITORY=/home/ubuntu/kubernetes/cluster/juju/charms\n+++ KUBE_BUNDLE_PATH=/home/ubuntu/kubernetes/cluster/juju/bundles/local.yaml\n+ '[' -z '' ']'\n+ echo '... Starting cluster using provider: juju'\n... Starting cluster using provider: juju\n+ echo '... calling verify-prereqs'\n... calling verify-prereqs\n+ verify-prereqs\n+ gather_installation_reqs\n+ check_for_ppa juju\n+ local repo=juju\n+ grep -qsw juju /etc/apt/sources.list /etc/apt/sources.list.d/juju-stable-trusty.list /etc/apt/sources.list.d/juju-stable-trusty.list.save\n+ package_status juju-quickstart\n+ local pkgname=juju-quickstart\n+ local pkgstatus\n++ dpkg-query -W '--showformat=${Status}\\n' juju-quickstart\n+ pkgstatus='install ok installed'\n+ [[ install ok installed != \\i\\n\\s\\t\\a\\l\\l\\ \\o\\k\\ \\i\\n\\s\\t\\a\\l\\l\\e\\d ]]\n+ package_status juju-deployer\n+ local pkgname=juju-deployer\n+ local pkgstatus\n++ dpkg-query -W '--showformat=${Status}\\n' juju-deployer\n+ pkgstatus='install ok installed'\n+ [[ install ok installed != \\i\\n\\s\\t\\a\\l\\l\\ \\o\\k\\ \\i\\n\\s\\t\\a\\l\\l\\e\\d ]]\n+ [[ '' == \\t\\r\\u\\e ]]\n+ echo '... calling kube-up'\n... calling kube-up\n+ kube-up\n+ build-local\n+ targets=(cmd/kube-proxy cmd/kube-apiserver cmd/kube-controller-manager cmd/kubelet plugin/cmd/kube-scheduler cmd/kubectl test/e2e/e2e.test)\n+ local targets\n+ make clean\nmake: *** No rule to make target `clean'.  Stop.\n```\n\nIt looks like we call make while we are at the root directory of the kubernetes repository, and there doesn't exist any Makefile there.\n",
  "closed_at": "2016-08-08T18:48:38Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 9,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/23198/comments",
  "created_at": "2016-03-18T17:31:16Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/23198/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/23198",
  "id": 141931124,
  "labels": [
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Cluster Lifecycle.",
      "id": 173494222,
      "name": "sig/cluster-lifecycle",
      "node_id": "MDU6TGFiZWwxNzM0OTQyMjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/cluster-lifecycle"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/23198/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxNDE5MzExMjQ=",
  "number": 23198,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Can't install Kubernetes cluster on AWS using Juju",
  "updated_at": "2016-08-08T18:48:38Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/23198",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/17619163?v=4",
    "events_url": "https://api.github.com/users/trodriguez-photobox/events{/privacy}",
    "followers_url": "https://api.github.com/users/trodriguez-photobox/followers",
    "following_url": "https://api.github.com/users/trodriguez-photobox/following{/other_user}",
    "gists_url": "https://api.github.com/users/trodriguez-photobox/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/trodriguez-photobox",
    "id": 17619163,
    "login": "trodriguez-photobox",
    "node_id": "MDQ6VXNlcjE3NjE5MTYz",
    "organizations_url": "https://api.github.com/users/trodriguez-photobox/orgs",
    "received_events_url": "https://api.github.com/users/trodriguez-photobox/received_events",
    "repos_url": "https://api.github.com/users/trodriguez-photobox/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/trodriguez-photobox/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/trodriguez-photobox/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/trodriguez-photobox"
  }
}