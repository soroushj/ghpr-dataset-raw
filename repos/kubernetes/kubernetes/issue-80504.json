{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/10716925?v=4",
    "events_url": "https://api.github.com/users/vllry/events{/privacy}",
    "followers_url": "https://api.github.com/users/vllry/followers",
    "following_url": "https://api.github.com/users/vllry/following{/other_user}",
    "gists_url": "https://api.github.com/users/vllry/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/vllry",
    "id": 10716925,
    "login": "vllry",
    "node_id": "MDQ6VXNlcjEwNzE2OTI1",
    "organizations_url": "https://api.github.com/users/vllry/orgs",
    "received_events_url": "https://api.github.com/users/vllry/received_events",
    "repos_url": "https://api.github.com/users/vllry/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/vllry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vllry/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/vllry"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/10716925?v=4",
      "events_url": "https://api.github.com/users/vllry/events{/privacy}",
      "followers_url": "https://api.github.com/users/vllry/followers",
      "following_url": "https://api.github.com/users/vllry/following{/other_user}",
      "gists_url": "https://api.github.com/users/vllry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vllry",
      "id": 10716925,
      "login": "vllry",
      "node_id": "MDQ6VXNlcjEwNzE2OTI1",
      "organizations_url": "https://api.github.com/users/vllry/orgs",
      "received_events_url": "https://api.github.com/users/vllry/received_events",
      "repos_url": "https://api.github.com/users/vllry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vllry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vllry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vllry"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "**What happened**:\r\n`make test WHAT=./cmd/kube-proxy/app` is failing on Mac as following:\r\n\r\n```\r\n--- FAIL: Test_getProxyMode (0.03s)\r\n    server_others_test.go:142: Case[12] Expected \"iptables\", got \"ipvs\"\r\n    server_others_test.go:142: Case[13] Expected \"userspace\", got \"ipvs\"\r\n```\r\n\r\n**What you expected to happen**:\r\n According to [documentation](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-testing/testing.md) unit test should succeed.\r\n\r\n> Unit tests must pass on macOS and Windows platforms.\r\n    Tests using linux-specific features must be skipped or compiled out.\r\n    Skipped is better, compiled out is required when it won't compile.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nRun `make test WHAT=./cmd/kube-proxy/app` on Mac.\r\n\r\n**Anything else we need to know?**:\r\nI checked related source code. [Here](https://github.com/kubernetes/kubernetes/blob/c08a88a2d14c26a5376149c6a3301db410cd5ca4/pkg/proxy/ipvs/proxier.go#L540)  GetKernelVersionAndIPVSMods is called with new linux kernel handler which is created in the same function. Newly created kernel handler is not mocked as the input parameter so it tries to reach `/proc/sys/kernel/osrelease` which does not exist in Mac. Since returned error is not checked, empty list is used as the required kernel modules list and fall back not occur.\r\n\r\nI can see two solutions:\r\n1. Just skip tests on mac. (Is not checking error ok?)\r\n1. Set a list of default ipvsModules (`ipvsModules, ModIPVS, ModIPVSRR, ModIPVSWRR, ModIPVSSH`) and append `ModNfConntrackIPV4` or `ModNfConntrack` depending on kernel version if kernel version can be found.\r\n\r\nIf a decision is made to act on, I can work on this issue.",
  "closed_at": "2019-07-31T23:56:14Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 7,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/80504/comments",
  "created_at": "2019-07-24T04:30:05Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/80504/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/80504",
  "id": 472073305,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Network.",
      "id": 116712108,
      "name": "sig/network",
      "node_id": "MDU6TGFiZWwxMTY3MTIxMDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/network"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Testing.",
      "id": 483069764,
      "name": "sig/testing",
      "node_id": "MDU6TGFiZWw0ODMwNjk3NjQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/testing"
    },
    {
      "color": "d455d0",
      "default": false,
      "description": "Indicates an issue that can not or will not be resolved.",
      "id": 862108765,
      "name": "triage/unresolved",
      "node_id": "MDU6TGFiZWw4NjIxMDg3NjU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/triage/unresolved"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/80504/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0NzIwNzMzMDU=",
  "number": 80504,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Failing unit test ./cmd/kube-proxy/app on Mac",
  "updated_at": "2019-07-31T23:56:14Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/80504",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6907852?v=4",
    "events_url": "https://api.github.com/users/ebati/events{/privacy}",
    "followers_url": "https://api.github.com/users/ebati/followers",
    "following_url": "https://api.github.com/users/ebati/following{/other_user}",
    "gists_url": "https://api.github.com/users/ebati/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ebati",
    "id": 6907852,
    "login": "ebati",
    "node_id": "MDQ6VXNlcjY5MDc4NTI=",
    "organizations_url": "https://api.github.com/users/ebati/orgs",
    "received_events_url": "https://api.github.com/users/ebati/received_events",
    "repos_url": "https://api.github.com/users/ebati/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ebati/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ebati/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ebati"
  }
}