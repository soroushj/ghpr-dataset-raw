{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "<!-- Please use this template while reporting a bug and provide as much info as possible. Not doing so may result in your bug not being addressed in a timely manner. Thanks!\r\n\r\nIf the matter is security related, please disclose it privately via https://kubernetes.io/security/\r\n-->\r\n\r\n\r\n**What happened**:\r\nWhen preserve-destination annotation is set to true the routing mesh is getting disabled for actual traffic flow but the  route mesh isn\u2019t getting disabled for LB liveness probes. As a result the VM's which doesn't have active pods are looking healthy from the point of view of LB and getting active customer traffic. The VM's are dropping the traffic since the routing mesh is disabled.  \r\n\r\n**What you expected to happen**:\r\nWhen preserve-destination annotation is set routing mesh should be disabled for LB liveness probes as well as end user traffic. \r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nEnable preserve-destination=true annotation in Azure k8s service and deploy an app that is registered with the service.  \r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): v1.15.1 \r\n- Cloud provider or hardware configuration: Azure (ACS)\r\n- OS (e.g: `cat /etc/os-release`): Windows 1903\r\n- Kernel (e.g. `uname -a`): \r\n- Install tools:\r\n- Network plugin and version (if this is a network-related bug):\r\n- Others:\r\n",
  "closed_at": "2020-05-22T00:43:36Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 7,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/86544/comments",
  "created_at": "2019-12-23T09:58:42Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/86544/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/86544",
  "id": 541677247,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "604460",
      "default": false,
      "description": "Denotes an issue or PR that has aged beyond stale and will be auto-closed.",
      "id": 778118402,
      "name": "lifecycle/rotten",
      "node_id": "MDU6TGFiZWw3NzgxMTg0MDI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/lifecycle/rotten"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Node.",
      "id": 173493665,
      "name": "sig/node",
      "node_id": "MDU6TGFiZWwxNzM0OTM2NjU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/node"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Windows.",
      "id": 422106010,
      "name": "sig/windows",
      "node_id": "MDU6TGFiZWw0MjIxMDYwMTA=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/windows"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/86544/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1NDE2NzcyNDc=",
  "number": 86544,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Disable route-mesh for LB liveness probes when destination-preserve=true annotation is set",
  "updated_at": "2020-05-22T00:43:37Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/86544",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/46975711?v=4",
    "events_url": "https://api.github.com/users/gowthamboddapati/events{/privacy}",
    "followers_url": "https://api.github.com/users/gowthamboddapati/followers",
    "following_url": "https://api.github.com/users/gowthamboddapati/following{/other_user}",
    "gists_url": "https://api.github.com/users/gowthamboddapati/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/gowthamboddapati",
    "id": 46975711,
    "login": "gowthamboddapati",
    "node_id": "MDQ6VXNlcjQ2OTc1NzEx",
    "organizations_url": "https://api.github.com/users/gowthamboddapati/orgs",
    "received_events_url": "https://api.github.com/users/gowthamboddapati/received_events",
    "repos_url": "https://api.github.com/users/gowthamboddapati/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/gowthamboddapati/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gowthamboddapati/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/gowthamboddapati"
  }
}