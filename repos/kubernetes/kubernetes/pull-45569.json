{
  "_links": {
    "comments": {
      "href": "https://api.github.com/repos/kubernetes/kubernetes/issues/45569/comments"
    },
    "commits": {
      "href": "https://api.github.com/repos/kubernetes/kubernetes/pulls/45569/commits"
    },
    "html": {
      "href": "https://github.com/kubernetes/kubernetes/pull/45569"
    },
    "issue": {
      "href": "https://api.github.com/repos/kubernetes/kubernetes/issues/45569"
    },
    "review_comment": {
      "href": "https://api.github.com/repos/kubernetes/kubernetes/pulls/comments{/number}"
    },
    "review_comments": {
      "href": "https://api.github.com/repos/kubernetes/kubernetes/pulls/45569/comments"
    },
    "self": {
      "href": "https://api.github.com/repos/kubernetes/kubernetes/pulls/45569"
    },
    "statuses": {
      "href": "https://api.github.com/repos/kubernetes/kubernetes/statuses/9f89b57b74ae43fc72f7a8b3403799a3d7ff9f55"
    }
  },
  "active_lock_reason": null,
  "additions": 25,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/100893?v=4",
    "events_url": "https://api.github.com/users/justinsb/events{/privacy}",
    "followers_url": "https://api.github.com/users/justinsb/followers",
    "following_url": "https://api.github.com/users/justinsb/following{/other_user}",
    "gists_url": "https://api.github.com/users/justinsb/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/justinsb",
    "id": 100893,
    "login": "justinsb",
    "node_id": "MDQ6VXNlcjEwMDg5Mw==",
    "organizations_url": "https://api.github.com/users/justinsb/orgs",
    "received_events_url": "https://api.github.com/users/justinsb/received_events",
    "repos_url": "https://api.github.com/users/justinsb/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/justinsb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/justinsb/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/justinsb"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/100893?v=4",
      "events_url": "https://api.github.com/users/justinsb/events{/privacy}",
      "followers_url": "https://api.github.com/users/justinsb/followers",
      "following_url": "https://api.github.com/users/justinsb/following{/other_user}",
      "gists_url": "https://api.github.com/users/justinsb/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/justinsb",
      "id": 100893,
      "login": "justinsb",
      "node_id": "MDQ6VXNlcjEwMDg5Mw==",
      "organizations_url": "https://api.github.com/users/justinsb/orgs",
      "received_events_url": "https://api.github.com/users/justinsb/received_events",
      "repos_url": "https://api.github.com/users/justinsb/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/justinsb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/justinsb/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/justinsb"
    },
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/157083?v=4",
      "events_url": "https://api.github.com/users/krousey/events{/privacy}",
      "followers_url": "https://api.github.com/users/krousey/followers",
      "following_url": "https://api.github.com/users/krousey/following{/other_user}",
      "gists_url": "https://api.github.com/users/krousey/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/krousey",
      "id": 157083,
      "login": "krousey",
      "node_id": "MDQ6VXNlcjE1NzA4Mw==",
      "organizations_url": "https://api.github.com/users/krousey/orgs",
      "received_events_url": "https://api.github.com/users/krousey/received_events",
      "repos_url": "https://api.github.com/users/krousey/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/krousey/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krousey/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/krousey"
    },
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/8987721?v=4",
      "events_url": "https://api.github.com/users/luomiao/events{/privacy}",
      "followers_url": "https://api.github.com/users/luomiao/followers",
      "following_url": "https://api.github.com/users/luomiao/following{/other_user}",
      "gists_url": "https://api.github.com/users/luomiao/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/luomiao",
      "id": 8987721,
      "login": "luomiao",
      "node_id": "MDQ6VXNlcjg5ODc3MjE=",
      "organizations_url": "https://api.github.com/users/luomiao/orgs",
      "received_events_url": "https://api.github.com/users/luomiao/received_events",
      "repos_url": "https://api.github.com/users/luomiao/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/luomiao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luomiao/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/luomiao"
    }
  ],
  "author_association": "MEMBER",
  "base": {
    "label": "kubernetes:master",
    "ref": "master",
    "repo": {
      "archive_url": "https://api.github.com/repos/kubernetes/kubernetes/{archive_format}{/ref}",
      "archived": false,
      "assignees_url": "https://api.github.com/repos/kubernetes/kubernetes/assignees{/user}",
      "blobs_url": "https://api.github.com/repos/kubernetes/kubernetes/git/blobs{/sha}",
      "branches_url": "https://api.github.com/repos/kubernetes/kubernetes/branches{/branch}",
      "clone_url": "https://github.com/kubernetes/kubernetes.git",
      "collaborators_url": "https://api.github.com/repos/kubernetes/kubernetes/collaborators{/collaborator}",
      "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/comments{/number}",
      "commits_url": "https://api.github.com/repos/kubernetes/kubernetes/commits{/sha}",
      "compare_url": "https://api.github.com/repos/kubernetes/kubernetes/compare/{base}...{head}",
      "contents_url": "https://api.github.com/repos/kubernetes/kubernetes/contents/{+path}",
      "contributors_url": "https://api.github.com/repos/kubernetes/kubernetes/contributors",
      "created_at": "2014-06-06T22:56:04Z",
      "default_branch": "master",
      "deployments_url": "https://api.github.com/repos/kubernetes/kubernetes/deployments",
      "description": "Production-Grade Container Scheduling and Management",
      "disabled": false,
      "downloads_url": "https://api.github.com/repos/kubernetes/kubernetes/downloads",
      "events_url": "https://api.github.com/repos/kubernetes/kubernetes/events",
      "fork": false,
      "forks": 25710,
      "forks_count": 25710,
      "forks_url": "https://api.github.com/repos/kubernetes/kubernetes/forks",
      "full_name": "kubernetes/kubernetes",
      "git_commits_url": "https://api.github.com/repos/kubernetes/kubernetes/git/commits{/sha}",
      "git_refs_url": "https://api.github.com/repos/kubernetes/kubernetes/git/refs{/sha}",
      "git_tags_url": "https://api.github.com/repos/kubernetes/kubernetes/git/tags{/sha}",
      "git_url": "git://github.com/kubernetes/kubernetes.git",
      "has_downloads": true,
      "has_issues": true,
      "has_pages": false,
      "has_projects": true,
      "has_wiki": false,
      "homepage": "https://kubernetes.io",
      "hooks_url": "https://api.github.com/repos/kubernetes/kubernetes/hooks",
      "html_url": "https://github.com/kubernetes/kubernetes",
      "id": 20580498,
      "issue_comment_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/comments{/number}",
      "issue_events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/events{/number}",
      "issues_url": "https://api.github.com/repos/kubernetes/kubernetes/issues{/number}",
      "keys_url": "https://api.github.com/repos/kubernetes/kubernetes/keys{/key_id}",
      "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/labels{/name}",
      "language": "Go",
      "languages_url": "https://api.github.com/repos/kubernetes/kubernetes/languages",
      "license": {
        "key": "apache-2.0",
        "name": "Apache License 2.0",
        "node_id": "MDc6TGljZW5zZTI=",
        "spdx_id": "Apache-2.0",
        "url": "https://api.github.com/licenses/apache-2.0"
      },
      "merges_url": "https://api.github.com/repos/kubernetes/kubernetes/merges",
      "milestones_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones{/number}",
      "mirror_url": null,
      "name": "kubernetes",
      "node_id": "MDEwOlJlcG9zaXRvcnkyMDU4MDQ5OA==",
      "notifications_url": "https://api.github.com/repos/kubernetes/kubernetes/notifications{?since,all,participating}",
      "open_issues": 2881,
      "open_issues_count": 2881,
      "owner": {
        "avatar_url": "https://avatars2.githubusercontent.com/u/13629408?v=4",
        "events_url": "https://api.github.com/users/kubernetes/events{/privacy}",
        "followers_url": "https://api.github.com/users/kubernetes/followers",
        "following_url": "https://api.github.com/users/kubernetes/following{/other_user}",
        "gists_url": "https://api.github.com/users/kubernetes/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/kubernetes",
        "id": 13629408,
        "login": "kubernetes",
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNjI5NDA4",
        "organizations_url": "https://api.github.com/users/kubernetes/orgs",
        "received_events_url": "https://api.github.com/users/kubernetes/received_events",
        "repos_url": "https://api.github.com/users/kubernetes/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/kubernetes/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/kubernetes/subscriptions",
        "type": "Organization",
        "url": "https://api.github.com/users/kubernetes"
      },
      "private": false,
      "pulls_url": "https://api.github.com/repos/kubernetes/kubernetes/pulls{/number}",
      "pushed_at": "2020-10-28T03:44:11Z",
      "releases_url": "https://api.github.com/repos/kubernetes/kubernetes/releases{/id}",
      "size": 938458,
      "ssh_url": "git@github.com:kubernetes/kubernetes.git",
      "stargazers_count": 71182,
      "stargazers_url": "https://api.github.com/repos/kubernetes/kubernetes/stargazers",
      "statuses_url": "https://api.github.com/repos/kubernetes/kubernetes/statuses/{sha}",
      "subscribers_url": "https://api.github.com/repos/kubernetes/kubernetes/subscribers",
      "subscription_url": "https://api.github.com/repos/kubernetes/kubernetes/subscription",
      "svn_url": "https://github.com/kubernetes/kubernetes",
      "tags_url": "https://api.github.com/repos/kubernetes/kubernetes/tags",
      "teams_url": "https://api.github.com/repos/kubernetes/kubernetes/teams",
      "trees_url": "https://api.github.com/repos/kubernetes/kubernetes/git/trees{/sha}",
      "updated_at": "2020-10-28T05:36:44Z",
      "url": "https://api.github.com/repos/kubernetes/kubernetes",
      "watchers": 71182,
      "watchers_count": 71182
    },
    "sha": "3fbfafdd0a86c2a6fb4f53d94e47ba9592e19601",
    "user": {
      "avatar_url": "https://avatars2.githubusercontent.com/u/13629408?v=4",
      "events_url": "https://api.github.com/users/kubernetes/events{/privacy}",
      "followers_url": "https://api.github.com/users/kubernetes/followers",
      "following_url": "https://api.github.com/users/kubernetes/following{/other_user}",
      "gists_url": "https://api.github.com/users/kubernetes/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/kubernetes",
      "id": 13629408,
      "login": "kubernetes",
      "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNjI5NDA4",
      "organizations_url": "https://api.github.com/users/kubernetes/orgs",
      "received_events_url": "https://api.github.com/users/kubernetes/received_events",
      "repos_url": "https://api.github.com/users/kubernetes/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/kubernetes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kubernetes/subscriptions",
      "type": "Organization",
      "url": "https://api.github.com/users/kubernetes"
    }
  },
  "body": "<!--  Thanks for sending a pull request!  Here are some tips for you:\r\n1. If this is your first time, read our contributor guidelines https://github.com/kubernetes/community/blob/master/contributors/devel/pull-requests.md#pull-request-process and developer guide https://github.com/kubernetes/community/blob/master/contributors/devel/development.md#development-guide\r\n2. If you want *faster* PR reviews, read how: https://github.com/kubernetes/community/blob/master/contributors/devel/faster_reviews.md\r\n3. Follow the instructions for writing a release note: https://github.com/kubernetes/community/blob/master/contributors/devel/pull-requests.md#release-notes\r\n-->\r\n\r\n**What this PR does / why we need it**:\r\n\r\nIn the vSphere HA, when node fail over happens, node VM momentarily goes in to \u201cnot connected\u201d state. During this time, if kubernetes calls VolumesAreAttached function, we are returning incorrect map, with status for volume set to false - detached state.\r\n\r\nVolumes attached to previous nodes, requires to be detached before they can attach to the new node. Kubernetes attempt to check volume attachment. When node VM is not accessible or for any reason we cannot determine disk is attached, we were returning a Map of volumepath and its attachment status set to false. This was misinterpreted as disks are already detached from the node and Kubernetes was marking volumes as detached after orphaned pod is cleaned up. This causes volumes to remain attached to previous node, and pod creation always remains in the \u201ccontainercreating\u201d state. Since both the node are powered on, volumes can not be attached to new node.\r\n\r\n**Logs before fix**\r\n\r\n```\r\n{\"log\":\"E0508 21:31:20.902501       1 vsphere.go:1053] disk uuid not found for [vsanDatastore] kubevols/kubernetes-dynamic-pvc-8b75170e-342d-11e7-bab5-0050568aeb0a.vmdk. err: No disk UUID fou\r\nnd\\n\",\"stream\":\"stderr\",\"time\":\"2017-05-08T21:31:20.902792337Z\"}\r\n{\"log\":\"E0508 21:31:20.902552       1 vsphere.go:1041] Failed to check whether disk is attached. err: No disk UUID found\\n\",\"stream\":\"stderr\",\"time\":\"2017-05-08T21:31:20.902842673Z\"}\r\n{\"log\":\"I0508 21:31:20.902575       1 attacher.go:114] VolumesAreAttached: check volume \\\"[vsanDatastore] kubevols/kubernetes-dynamic-pvc-8b75170e-342d-11e7-bab5-0050568aeb0a.vmdk\\\" (specName\r\n: \\\"pvc-8b75170e-342d-11e7-bab5-0050568aeb0a\\\") is no longer attached\\n\",\"stream\":\"stderr\",\"time\":\"2017-05-08T21:31:20.902849717Z\"}\r\n{\"log\":\"I0508 21:31:20.902596       1 operation_generator.go:166] VerifyVolumesAreAttached determined volume \\\"kubernetes.io/vsphere-volume/[vsanDatastore] kubevols/kubernetes-dynamic-pvc-8b7\r\n5170e-342d-11e7-bab5-0050568aeb0a.vmdk\\\" (spec.Name: \\\"pvc-8b75170e-342d-11e7-bab5-0050568aeb0a\\\") is no longer attached to node \\\"node3\\\", therefore it was marked as detached.\\n\",\"stream\":\"s\r\ntderr\",\"time\":\"2017-05-08T21:31:20.902863097Z\"}\r\n```\r\n\r\n\r\n\r\nIn this change, we are making sure correct volume attachment map is returned, and in case of any error occurred while checking disk\u2019s status, we return nil map.\r\n\r\n\r\n**Logs after fix**\r\n```\r\n{\"log\":\"E0509 20:25:37.982152       1 vsphere.go:1067] Failed to check whether disk is attached. err: No disk UUID found\\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:25:37.982516134Z\"}\r\n{\"log\":\"E0509 20:25:37.982190       1 attacher.go:104] Error checking if volumes ([[vsanDatastore] kubevols/kubernetes-dynamic-pvc-c26fcae8-34f2-11e7-9303-0050568a3ac1.vmdk [vsanDatastore] kubevols/kubernetes-dynamic-pvc-c268f141-34f2-11e7-9303-0050568a3ac1.vmdk [vsanDatastore] kubevols/kubernetes-dynamic-pvc-c25d08d3-34f2-11e7-9303-0050568a3ac1.vmdk]) are attached to current node (\\\"node3\\\"). err=No disk UUID found\\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:25:37.982521101Z\"}\r\n{\"log\":\"E0509 20:25:37.982220       1 operation_generator.go:158] VolumesAreAttached failed for checking on node \\\"node3\\\" with: No disk UUID found\\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:25:37.982526285Z\"}\r\n{\"log\":\"I0509 20:25:39.157279       1 attacher.go:115] VolumesAreAttached: volume \\\"[vsanDatastore] kubevols/kubernetes-dynamic-pvc-c268f141-34f2-11e7-9303-0050568a3ac1.vmdk\\\" (specName: \\\"pvc-c268f141-34f2-11e7-9303-0050568a3ac1\\\") is attached\\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:25:39.157724393Z\"}\r\n{\"log\":\"I0509 20:25:39.157329       1 attacher.go:115] VolumesAreAttached: volume \\\"[vsanDatastore] kubevols/kubernetes-dynamic-pvc-c25d08d3-34f2-11e7-9303-0050568a3ac1.vmdk\\\" (specName: \\\"pvc-c25d08d3-34f2-11e7-9303-0050568a3ac1\\\") is attached\\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:25:39.157787946Z\"}\r\n{\"log\":\"I0509 20:25:39.157367       1 attacher.go:115] VolumesAreAttached: volume \\\"[vsanDatastore] kubevols/kubernetes-dynamic-pvc-c26fcae8-34f2-11e7-9303-0050568a3ac1.vmdk\\\" (specName: \\\"pvc-c26fcae8-34f2-11e7-9303-0050568a3ac1\\\") is attached\\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:25:39.157794586Z\"}\r\n```\r\n\r\n```\r\n{\"log\":\"I0509 20:25:41.267425       1 reconciler.go:173] Started DetachVolume for volume \\\"kubernetes.io/vsphere-volume/[vsanDatastore] kubevols/kubernetes-dynamic-pvc-c26fcae8-34f2-11e7-9303-0050568a3ac1.vmdk\\\" from node \\\"node3\\\"\\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:25:41.267883567Z\"}\r\n{\"log\":\"I0509 20:25:41.271836       1 operation_generator.go:694] Verified volume is safe to detach for volume \\\"pvc-c26fcae8-34f2-11e7-9303-0050568a3ac1\\\" (UniqueName: \\\"kubernetes.io/vsphere-volume/[vsanDatastore] kubevols/kubernetes-dynamic-pvc-c26fcae8-34f2-11e7-9303-0050568a3ac1.vmdk\\\") on node \\\"node3\\\" \\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:25:41.272703255Z\"}\r\n{\"log\":\"I0509 20:25:47.928021       1 operation_generator.go:341] DetachVolume.Detach succeeded for volume \\\"pvc-c26fcae8-34f2-11e7-9303-0050568a3ac1\\\" (UniqueName: \\\"kubernetes.io/vsphere-volume/[vsanDatastore] kubevols/kubernetes-dynamic-pvc-c26fcae8-34f2-11e7-9303-0050568a3ac1.vmdk\\\") on node \\\"node3\\\" \\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:25:47.928348553Z\"}\r\n\r\n{\"log\":\"I0509 20:26:12.535962       1 operation_generator.go:694] Verified volume is safe to detach for volume \\\"pvc-c25d08d3-34f2-11e7-9303-0050568a3ac1\\\" (UniqueName: \\\"kubernetes.io/vsphere-volume/[vsanDatastore] kubevols/kubernetes-dynamic-pvc-c25d08d3-34f2-11e7-9303-0050568a3ac1.vmdk\\\") on node \\\"node3\\\" \\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:26:12.536055214Z\"}\r\n{\"log\":\"I0509 20:26:14.188580       1 operation_generator.go:341] DetachVolume.Detach succeeded for volume \\\"pvc-c25d08d3-34f2-11e7-9303-0050568a3ac1\\\" (UniqueName: \\\"kubernetes.io/vsphere-volume/[vsanDatastore] kubevols/kubernetes-dynamic-pvc-c25d08d3-34f2-11e7-9303-0050568a3ac1.vmdk\\\") on node \\\"node3\\\" \\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:26:14.188792677Z\"}\r\n\r\n{\"log\":\"I0509 20:26:40.355656       1 reconciler.go:173] Started DetachVolume for volume \\\"kubernetes.io/vsphere-volume/[vsanDatastore] kubevols/kubernetes-dynamic-pvc-c268f141-34f2-11e7-9303-0050568a3ac1.vmdk\\\" from node \\\"node3\\\"\\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:26:40.355922165Z\"}\r\n{\"log\":\"I0509 20:26:40.357988       1 operation_generator.go:694] Verified volume is safe to detach for volume \\\"pvc-c268f141-34f2-11e7-9303-0050568a3ac1\\\" (UniqueName: \\\"kubernetes.io/vsphere-volume/[vsanDatastore] kubevols/kubernetes-dynamic-pvc-c268f141-34f2-11e7-9303-0050568a3ac1.vmdk\\\") on node \\\"node3\\\" \\n\",\"stream\":\"stderr\",\"time\":\"2017-05-09T20:26:40.358177953Z\"}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n**Which issue this PR fixes**\r\nfixes #45464, https://github.com/vmware/kubernetes/issues/116\r\n\r\n**Special notes for your reviewer**:\r\nVerified this change on locally built hyperkube image - v1.7.0-alpha.3.147+3c0526cb64bdf5-dirty\r\n\r\n**performed many fail over with large volumes (30GB) attached to the pod.**\r\n\r\n$ kubectl describe pod\r\nName:\t\twordpress-mysql-2789807967-3xcvc\r\nNode:\t\tnode3/172.1.87.0\r\nStatus:\t\tRunning\r\n\r\nPowered Off node3's host. pod failed over to node2. Verified all 3 disks detached from node3 and attached to node2.\r\n\r\n$ kubectl describe pod\r\nName:\t\twordpress-mysql-2789807967-qx0b0\r\nNode:\t\tnode2/172.1.9.0\r\nStatus:\t\tRunning\r\n\r\nPowered Off node2's host. pod failed over to node3. Verified all 3 disks detached from node2 and attached to node3.\r\n\r\n$ kubectl describe pod\r\nName:\t\twordpress-mysql-2789807967-7849s\r\nNode:\t\tnode3/172.1.87.0\r\nStatus:\t\tRunning\r\n\r\nPowered Off node3's host. pod failed over to node1. Verified all 3 disks detached from node3 and attached to node1.\r\n\r\n$ kubectl describe pod\r\nName:\t\twordpress-mysql-2789807967-26lp1\r\nNode:\t\tnode1/172.1.98.0\r\nStatus:\t\tRunning\r\n\r\nPowered off node1's host. pod failed over to node3. Verified all 3 disks detached from node1 and attached to node3.\r\n\r\n$ kubectl describe pods\r\nName:\t\twordpress-mysql-2789807967-4pdtl\r\nNode:\t\tnode3/172.1.87.0\r\nStatus:\t\tRunning\r\n\r\n\r\nPowered off node3's host. pod failed over to node1. Verified all 3 disks detached from node3 and attached to node1.\r\n\r\n$ kubectl describe pod\r\nName:\t\twordpress-mysql-2789807967-t375f\r\nNode:\t\tnode1/172.1.98.0\r\nStatus:\t\tRunning\r\n\r\nPowered off node1's host. pod failed over to node3. Verified all 3 disks detached from node1 and attached to node3.\r\n\r\n$ kubectl describe pods\r\nName:\t\twordpress-mysql-2789807967-pn6ps\r\nNode:\t\tnode3/172.1.87.0\r\nStatus:\t\tRunning\r\n\r\npowered off node3's host. pod failed over to node1. Verified all 3 disks detached from node3 and attached to node1\r\n\r\n$ kubectl describe pods\r\nName:\t\twordpress-mysql-2789807967-0wqc1\r\nNode:\t\tnode1/172.1.98.0\r\nStatus:\t\tRunning\r\n\r\npowered off node1's host. pod failed over to node3. Verified all 3 disks detached from node1 and attached to node3.\r\n\r\n$ kubectl describe pods\r\nName:\t\twordpress-mysql-2789807967-821nc\r\nNode:\t\tnode3/172.1.87.0\r\nStatus:\t\tRunning\r\n\r\n\r\n**Release note**:\r\n<!--  Steps to write your release note:\r\n1. Use the release-note-* labels to set the release note state (if you have access) \r\n2. Enter your extended release note in the below block; leaving it blank means using the PR title as the release note. If no release note is required, just write `NONE`. \r\n-->\r\n```release-note\r\nvSphere cloud provider: Fix volume detach on node failure.\r\n```\r\n\r\nCC:  @BaluDontu @abrarshivani @luomiao @tusharnt @pdhamdhere",
  "changed_files": 2,
  "closed_at": "2017-05-11T04:34:37Z",
  "comments": 8,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/45569/comments",
  "commits": 1,
  "commits_url": "https://api.github.com/repos/kubernetes/kubernetes/pulls/45569/commits",
  "created_at": "2017-05-10T00:26:50Z",
  "deletions": 19,
  "diff_url": "https://github.com/kubernetes/kubernetes/pull/45569.diff",
  "draft": false,
  "head": {
    "label": "vmware-archive:fix_VolumesAreAttached",
    "ref": "fix_VolumesAreAttached",
    "repo": {
      "archive_url": "https://api.github.com/repos/vmware-archive/kubernetes/{archive_format}{/ref}",
      "archived": true,
      "assignees_url": "https://api.github.com/repos/vmware-archive/kubernetes/assignees{/user}",
      "blobs_url": "https://api.github.com/repos/vmware-archive/kubernetes/git/blobs{/sha}",
      "branches_url": "https://api.github.com/repos/vmware-archive/kubernetes/branches{/branch}",
      "clone_url": "https://github.com/vmware-archive/kubernetes.git",
      "collaborators_url": "https://api.github.com/repos/vmware-archive/kubernetes/collaborators{/collaborator}",
      "comments_url": "https://api.github.com/repos/vmware-archive/kubernetes/comments{/number}",
      "commits_url": "https://api.github.com/repos/vmware-archive/kubernetes/commits{/sha}",
      "compare_url": "https://api.github.com/repos/vmware-archive/kubernetes/compare/{base}...{head}",
      "contents_url": "https://api.github.com/repos/vmware-archive/kubernetes/contents/{+path}",
      "contributors_url": "https://api.github.com/repos/vmware-archive/kubernetes/contributors",
      "created_at": "2016-01-12T23:58:29Z",
      "default_branch": "master",
      "deployments_url": "https://api.github.com/repos/vmware-archive/kubernetes/deployments",
      "description": "This repository is archived. Please file in-tree vSphere Cloud Provider issues at  https://github.com/kubernetes/kubernetes/issues . CSI Driver for vSphere is available at https://github.com/kubernetes/cloud-provider-vsphere",
      "disabled": false,
      "downloads_url": "https://api.github.com/repos/vmware-archive/kubernetes/downloads",
      "events_url": "https://api.github.com/repos/vmware-archive/kubernetes/events",
      "fork": true,
      "forks": 29,
      "forks_count": 29,
      "forks_url": "https://api.github.com/repos/vmware-archive/kubernetes/forks",
      "full_name": "vmware-archive/kubernetes",
      "git_commits_url": "https://api.github.com/repos/vmware-archive/kubernetes/git/commits{/sha}",
      "git_refs_url": "https://api.github.com/repos/vmware-archive/kubernetes/git/refs{/sha}",
      "git_tags_url": "https://api.github.com/repos/vmware-archive/kubernetes/git/tags{/sha}",
      "git_url": "git://github.com/vmware-archive/kubernetes.git",
      "has_downloads": true,
      "has_issues": true,
      "has_pages": false,
      "has_projects": true,
      "has_wiki": true,
      "homepage": "",
      "hooks_url": "https://api.github.com/repos/vmware-archive/kubernetes/hooks",
      "html_url": "https://github.com/vmware-archive/kubernetes",
      "id": 49536898,
      "issue_comment_url": "https://api.github.com/repos/vmware-archive/kubernetes/issues/comments{/number}",
      "issue_events_url": "https://api.github.com/repos/vmware-archive/kubernetes/issues/events{/number}",
      "issues_url": "https://api.github.com/repos/vmware-archive/kubernetes/issues{/number}",
      "keys_url": "https://api.github.com/repos/vmware-archive/kubernetes/keys{/key_id}",
      "labels_url": "https://api.github.com/repos/vmware-archive/kubernetes/labels{/name}",
      "language": "Go",
      "languages_url": "https://api.github.com/repos/vmware-archive/kubernetes/languages",
      "license": {
        "key": "apache-2.0",
        "name": "Apache License 2.0",
        "node_id": "MDc6TGljZW5zZTI=",
        "spdx_id": "Apache-2.0",
        "url": "https://api.github.com/licenses/apache-2.0"
      },
      "merges_url": "https://api.github.com/repos/vmware-archive/kubernetes/merges",
      "milestones_url": "https://api.github.com/repos/vmware-archive/kubernetes/milestones{/number}",
      "mirror_url": null,
      "name": "kubernetes",
      "node_id": "MDEwOlJlcG9zaXRvcnk0OTUzNjg5OA==",
      "notifications_url": "https://api.github.com/repos/vmware-archive/kubernetes/notifications{?since,all,participating}",
      "open_issues": 109,
      "open_issues_count": 109,
      "owner": {
        "avatar_url": "https://avatars3.githubusercontent.com/u/24528178?v=4",
        "events_url": "https://api.github.com/users/vmware-archive/events{/privacy}",
        "followers_url": "https://api.github.com/users/vmware-archive/followers",
        "following_url": "https://api.github.com/users/vmware-archive/following{/other_user}",
        "gists_url": "https://api.github.com/users/vmware-archive/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/vmware-archive",
        "id": 24528178,
        "login": "vmware-archive",
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjI0NTI4MTc4",
        "organizations_url": "https://api.github.com/users/vmware-archive/orgs",
        "received_events_url": "https://api.github.com/users/vmware-archive/received_events",
        "repos_url": "https://api.github.com/users/vmware-archive/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/vmware-archive/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/vmware-archive/subscriptions",
        "type": "Organization",
        "url": "https://api.github.com/users/vmware-archive"
      },
      "private": false,
      "pulls_url": "https://api.github.com/repos/vmware-archive/kubernetes/pulls{/number}",
      "pushed_at": "2019-02-14T14:01:13Z",
      "releases_url": "https://api.github.com/repos/vmware-archive/kubernetes/releases{/id}",
      "size": 620114,
      "ssh_url": "git@github.com:vmware-archive/kubernetes.git",
      "stargazers_count": 46,
      "stargazers_url": "https://api.github.com/repos/vmware-archive/kubernetes/stargazers",
      "statuses_url": "https://api.github.com/repos/vmware-archive/kubernetes/statuses/{sha}",
      "subscribers_url": "https://api.github.com/repos/vmware-archive/kubernetes/subscribers",
      "subscription_url": "https://api.github.com/repos/vmware-archive/kubernetes/subscription",
      "svn_url": "https://github.com/vmware-archive/kubernetes",
      "tags_url": "https://api.github.com/repos/vmware-archive/kubernetes/tags",
      "teams_url": "https://api.github.com/repos/vmware-archive/kubernetes/teams",
      "trees_url": "https://api.github.com/repos/vmware-archive/kubernetes/git/trees{/sha}",
      "updated_at": "2020-06-24T16:50:00Z",
      "url": "https://api.github.com/repos/vmware-archive/kubernetes",
      "watchers": 46,
      "watchers_count": 46
    },
    "sha": "9f89b57b74ae43fc72f7a8b3403799a3d7ff9f55",
    "user": {
      "avatar_url": "https://avatars3.githubusercontent.com/u/24528178?v=4",
      "events_url": "https://api.github.com/users/vmware-archive/events{/privacy}",
      "followers_url": "https://api.github.com/users/vmware-archive/followers",
      "following_url": "https://api.github.com/users/vmware-archive/following{/other_user}",
      "gists_url": "https://api.github.com/users/vmware-archive/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vmware-archive",
      "id": 24528178,
      "login": "vmware-archive",
      "node_id": "MDEyOk9yZ2FuaXphdGlvbjI0NTI4MTc4",
      "organizations_url": "https://api.github.com/users/vmware-archive/orgs",
      "received_events_url": "https://api.github.com/users/vmware-archive/received_events",
      "repos_url": "https://api.github.com/users/vmware-archive/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vmware-archive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vmware-archive/subscriptions",
      "type": "Organization",
      "url": "https://api.github.com/users/vmware-archive"
    }
  },
  "html_url": "https://github.com/kubernetes/kubernetes/pull/45569",
  "id": 119781143,
  "issue_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/45569",
  "labels": [
    {
      "color": "0ffa16",
      "default": false,
      "description": "Indicates a PR has been approved by an approver from all required OWNERS files.",
      "id": 414883982,
      "name": "approved",
      "node_id": "MDU6TGFiZWw0MTQ4ODM5ODI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/approved"
    },
    {
      "color": "bfe5bf",
      "default": false,
      "description": "Indicates the PR's author has signed the CNCF CLA.",
      "id": 477397086,
      "name": "cncf-cla: yes",
      "node_id": "MDU6TGFiZWw0NzczOTcwODY=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/cncf-cla:%20yes"
    },
    {
      "color": "15dd18",
      "default": false,
      "description": "Indicates that a PR is ready to be merged.",
      "id": 148225179,
      "name": "lgtm",
      "node_id": "MDU6TGFiZWwxNDgyMjUxNzk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/lgtm"
    },
    {
      "color": "b60205",
      "default": false,
      "description": "Indicates a PR that requires an org member to verify it is safe to test.",
      "id": 573014062,
      "name": "needs-ok-to-test",
      "node_id": "MDU6TGFiZWw1NzMwMTQwNjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/needs-ok-to-test"
    },
    {
      "color": "c2e0c6",
      "default": false,
      "description": "Denotes a PR that will be considered when it comes time to generate release notes.",
      "id": 200149833,
      "name": "release-note",
      "node_id": "MDU6TGFiZWwyMDAxNDk4MzM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/release-note"
    },
    {
      "color": "eebb00",
      "default": false,
      "description": "Denotes a PR that changes 30-99 lines, ignoring generated files.",
      "id": 253450934,
      "name": "size/M",
      "node_id": "MDU6TGFiZWwyNTM0NTA5MzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/size/M"
    }
  ],
  "linked_issue_numbers": [
    45464
  ],
  "locked": false,
  "maintainer_can_modify": false,
  "merge_commit_sha": "b0d024fee1c2f4fafe527ab218db54c6956ef851",
  "mergeable": null,
  "mergeable_state": "unknown",
  "merged": true,
  "merged_at": "2017-05-11T04:34:37Z",
  "merged_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "milestone": null,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTE5NzgxMTQz",
  "number": 45569,
  "patch_url": "https://github.com/kubernetes/kubernetes/pull/45569.patch",
  "rebaseable": null,
  "requested_reviewers": [],
  "requested_teams": [],
  "review_comment_url": "https://api.github.com/repos/kubernetes/kubernetes/pulls/comments{/number}",
  "review_comments": 3,
  "review_comments_url": "https://api.github.com/repos/kubernetes/kubernetes/pulls/45569/comments",
  "state": "closed",
  "statuses_url": "https://api.github.com/repos/kubernetes/kubernetes/statuses/9f89b57b74ae43fc72f7a8b3403799a3d7ff9f55",
  "title": "Fixing VolumesAreAttached and DisksAreAttached functions in vSphere",
  "updated_at": "2017-09-05T23:10:28Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/pulls/45569",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/22985595?v=4",
    "events_url": "https://api.github.com/users/divyenpatel/events{/privacy}",
    "followers_url": "https://api.github.com/users/divyenpatel/followers",
    "following_url": "https://api.github.com/users/divyenpatel/following{/other_user}",
    "gists_url": "https://api.github.com/users/divyenpatel/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/divyenpatel",
    "id": 22985595,
    "login": "divyenpatel",
    "node_id": "MDQ6VXNlcjIyOTg1NTk1",
    "organizations_url": "https://api.github.com/users/divyenpatel/orgs",
    "received_events_url": "https://api.github.com/users/divyenpatel/received_events",
    "repos_url": "https://api.github.com/users/divyenpatel/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/divyenpatel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/divyenpatel/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/divyenpatel"
  }
}