{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/826111?v=4",
    "events_url": "https://api.github.com/users/jayunit100/events{/privacy}",
    "followers_url": "https://api.github.com/users/jayunit100/followers",
    "following_url": "https://api.github.com/users/jayunit100/following{/other_user}",
    "gists_url": "https://api.github.com/users/jayunit100/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jayunit100",
    "id": 826111,
    "login": "jayunit100",
    "node_id": "MDQ6VXNlcjgyNjExMQ==",
    "organizations_url": "https://api.github.com/users/jayunit100/orgs",
    "received_events_url": "https://api.github.com/users/jayunit100/received_events",
    "repos_url": "https://api.github.com/users/jayunit100/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jayunit100/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jayunit100/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jayunit100"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/826111?v=4",
      "events_url": "https://api.github.com/users/jayunit100/events{/privacy}",
      "followers_url": "https://api.github.com/users/jayunit100/followers",
      "following_url": "https://api.github.com/users/jayunit100/following{/other_user}",
      "gists_url": "https://api.github.com/users/jayunit100/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jayunit100",
      "id": 826111,
      "login": "jayunit100",
      "node_id": "MDQ6VXNlcjgyNjExMQ==",
      "organizations_url": "https://api.github.com/users/jayunit100/orgs",
      "received_events_url": "https://api.github.com/users/jayunit100/received_events",
      "repos_url": "https://api.github.com/users/jayunit100/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jayunit100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jayunit100/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jayunit100"
    }
  ],
  "author_association": "MEMBER",
  "body": "## Problem\n\nPart of #35555 where we want to reduce the event dependencies.  First step is to gaurantee 1-1 ratio of scheduling calls -> events.  \n\nIn large clusters with 1000s of scheduling events, you get N*M event information in pods that don't easily match, at best case this just leads to information that is hard to interpret or lost, worst case\n- values (i.e. i think its 80 chars \\* n = 80KB per pod on a 1000 node cluster) could fill up the underlying storage layer easily - \n- on some k/v stores @ 5k nodes or more you start approaching non-storable events i think (i.e. most kv stores probably prefer or need values in the range of 60-500 kb).\n## Solution\n\nRoll up fit failures into a map and simply log a single failure event.\n## Reproducing\n\nThis can be simultated in the SchedulerReasons test by simply applying a patch like this (make 10 nodes rather than just one).\n\n```\n+\n+       nodes := []*api.Node{}\n+       for i:= 0; i < 10; i++ {\n+               node := api.Node{\n+                       ObjectMeta: api.ObjectMeta{Name: fmt.Sprintf(\"machine\",i)},\n+                       Status: api.NodeStatus{\n+                               Capacity: api.ResourceList{\n+                                       api.ResourceCPU:    *(resource.NewQuantity(2, resource.DecimalSI)),\n+                                       api.ResourceMemory: *(resource.NewQuantity(100, resource.DecimalSI)),\n+                                       api.ResourcePods:   *(resource.NewQuantity(10, resource.DecimalSI)),\n+                               },\n+                               Allocatable: api.ResourceList{\n+                                       api.ResourceCPU:    *(resource.NewQuantity(2, resource.DecimalSI)),\n+                                       api.ResourceMemory: *(resource.NewQuantity(100, resource.DecimalSI)),\n+                                       api.ResourcePods:   *(resource.NewQuantity(10, resource.DecimalSI)),\n+                               }},\n+               }\n+               scache.AddNode(&node)\n+               nodes = append(nodes, &node)\n\n```\n\nAnd then you get... \n\n```\nfit failure on node (machine%!(EXTRA int=5)): Insufficient cpu, Insufficient memory\n                fit failure on node (machine%!(EXTRA int=7)): Insufficient cpu, Insufficient memory\n                fit failure on node (machine%!(EXTRA int=9)): Insufficient cpu, Insufficient memory\n                fit failure on node (machine%!(EXTRA int=8)): Insufficient cpu, Insufficient memory\n                fit failure on node (machine%!(EXTRA int=0)): Insufficient cpu, Insufficient memory\n                fit failure on node (machine%!(EXTRA int=2)): Insufficient cpu, Insufficient memory\n                fit failure on node (machine%!(EXTRA int=6)): Insufficient cpu, Insufficient memory\n                fit failure on node (machine%!(EXTRA int=1)): Insufficient cpu, Insufficient memory\n                fit failure on node (machine%!(EXTRA int=3)): Insufficient cpu, Insufficient memory\n                fit failure on node (machine%!(EXTRA int=4)): Insufficient cpu, Insufficient memory\n```\n\nWe want to have O(pods) for the amount of event information content, rather than O(pods x nodes).  \n\n @timothysc \n",
  "closed_at": "2016-11-07T01:48:31Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 1,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/35842/comments",
  "created_at": "2016-10-29T00:27:16Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/35842/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/35842",
  "id": 186048208,
  "labels": [
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Scalability.",
      "id": 125010198,
      "name": "sig/scalability",
      "node_id": "MDU6TGFiZWwxMjUwMTAxOTg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/scalability"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Scheduling.",
      "id": 125550211,
      "name": "sig/scheduling",
      "node_id": "MDU6TGFiZWwxMjU1NTAyMTE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/scheduling"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/35842/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": null,
    "closed_issues": 587,
    "created_at": "2016-01-16T17:58:20Z",
    "creator": {
      "avatar_url": "https://avatars1.githubusercontent.com/u/7725777?v=4",
      "events_url": "https://api.github.com/users/bgrant0607/events{/privacy}",
      "followers_url": "https://api.github.com/users/bgrant0607/followers",
      "following_url": "https://api.github.com/users/bgrant0607/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgrant0607/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/bgrant0607",
      "id": 7725777,
      "login": "bgrant0607",
      "node_id": "MDQ6VXNlcjc3MjU3Nzc=",
      "organizations_url": "https://api.github.com/users/bgrant0607/orgs",
      "received_events_url": "https://api.github.com/users/bgrant0607/received_events",
      "repos_url": "https://api.github.com/users/bgrant0607/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/bgrant0607/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgrant0607/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/bgrant0607"
    },
    "description": "Candidates for the next milestone",
    "due_on": null,
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/17",
    "id": 1510379,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/17/labels",
    "node_id": "MDk6TWlsZXN0b25lMTUxMDM3OQ==",
    "number": 17,
    "open_issues": 34,
    "state": "open",
    "title": "next-candidate",
    "updated_at": "2020-08-28T02:07:27Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/17"
  },
  "node_id": "MDU6SXNzdWUxODYwNDgyMDg=",
  "number": 35842,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Make scheduler events ~ O(pods) rather than O(podsXnodes)",
  "updated_at": "2016-11-07T01:48:31Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/35842",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/826111?v=4",
    "events_url": "https://api.github.com/users/jayunit100/events{/privacy}",
    "followers_url": "https://api.github.com/users/jayunit100/followers",
    "following_url": "https://api.github.com/users/jayunit100/following{/other_user}",
    "gists_url": "https://api.github.com/users/jayunit100/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jayunit100",
    "id": 826111,
    "login": "jayunit100",
    "node_id": "MDQ6VXNlcjgyNjExMQ==",
    "organizations_url": "https://api.github.com/users/jayunit100/orgs",
    "received_events_url": "https://api.github.com/users/jayunit100/received_events",
    "repos_url": "https://api.github.com/users/jayunit100/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jayunit100/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jayunit100/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jayunit100"
  }
}