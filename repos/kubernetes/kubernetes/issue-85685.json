{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/8055242?v=4",
    "events_url": "https://api.github.com/users/ingvagabund/events{/privacy}",
    "followers_url": "https://api.github.com/users/ingvagabund/followers",
    "following_url": "https://api.github.com/users/ingvagabund/following{/other_user}",
    "gists_url": "https://api.github.com/users/ingvagabund/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ingvagabund",
    "id": 8055242,
    "login": "ingvagabund",
    "node_id": "MDQ6VXNlcjgwNTUyNDI=",
    "organizations_url": "https://api.github.com/users/ingvagabund/orgs",
    "received_events_url": "https://api.github.com/users/ingvagabund/received_events",
    "repos_url": "https://api.github.com/users/ingvagabund/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ingvagabund/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ingvagabund/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ingvagabund"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/8055242?v=4",
      "events_url": "https://api.github.com/users/ingvagabund/events{/privacy}",
      "followers_url": "https://api.github.com/users/ingvagabund/followers",
      "following_url": "https://api.github.com/users/ingvagabund/following{/other_user}",
      "gists_url": "https://api.github.com/users/ingvagabund/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ingvagabund",
      "id": 8055242,
      "login": "ingvagabund",
      "node_id": "MDQ6VXNlcjgwNTUyNDI=",
      "organizations_url": "https://api.github.com/users/ingvagabund/orgs",
      "received_events_url": "https://api.github.com/users/ingvagabund/received_events",
      "repos_url": "https://api.github.com/users/ingvagabund/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ingvagabund/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ingvagabund/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ingvagabund"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nWe should allow collecting both default scheduler metrics (Prometheus) and custom metrics easily. At a high level, these collectors should produce a json formatted result which will then be consumed by perf-dash to present in the dashboard. \r\n\r\n**Prometheus metrics**\r\nWe should provide a metrics collector that collects and summarizes default scheduler metrics defined in [metrics.go](https://github.com/kubernetes/kubernetes/blob/8995c1e030643f26cad45fa33004d86726a2911d/pkg/scheduler/metrics/metrics.go#L23). \r\nTo begin with, we can manually pick a list of interesting metrics. Longer term, we could allow configuring the metric list in test definition. @ingvagabund already had a PoC #85455.\r\nAs a reference, [here](https://github.com/kubernetes/perf-tests/blob/44971cd21c3a33916402bc13b4ec049d097e9263/clusterloader2/pkg/measurement/common/scheduler_latency.go#L17) is how clusterloader collects scheduler latency metrics.\r\n\r\n**Custom metrics**\r\nThe most important metric is scheduling throughput. [Here](https://github.com/kubernetes/perf-tests/blob/2853ca27d2c76e453188019023705d44c3fa28f7/clusterloader2/pkg/measurement/common/scheduling_throughput.go#L30) is how clusterloader calculates the throughput. We can start with just calculating the average throughput without the percentiles.\r\nWe may want other custom metrics that are either common to all tests or specific to certain tests. We should allow these custom collectors to be added easily and ideally configurable.\r\n\r\n**Why is this needed**:\r\nGive more insights into scheduler performance.\r\n\r\nPart of #81719 \r\n/sig scheduling\r\n/assign @ingvagabund ",
  "closed_at": "2020-02-27T20:41:59Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6902282?v=4",
    "events_url": "https://api.github.com/users/liu-cong/events{/privacy}",
    "followers_url": "https://api.github.com/users/liu-cong/followers",
    "following_url": "https://api.github.com/users/liu-cong/following{/other_user}",
    "gists_url": "https://api.github.com/users/liu-cong/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/liu-cong",
    "id": 6902282,
    "login": "liu-cong",
    "node_id": "MDQ6VXNlcjY5MDIyODI=",
    "organizations_url": "https://api.github.com/users/liu-cong/orgs",
    "received_events_url": "https://api.github.com/users/liu-cong/received_events",
    "repos_url": "https://api.github.com/users/liu-cong/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/liu-cong/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/liu-cong/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/liu-cong"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/85685/comments",
  "created_at": "2019-11-27T15:29:33Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/85685/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/85685",
  "id": 529418931,
  "labels": [
    {
      "color": "c7def8",
      "default": false,
      "description": "Categorizes issue or PR as related to a new feature.",
      "id": 267761362,
      "name": "kind/feature",
      "node_id": "MDU6TGFiZWwyNjc3NjEzNjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/feature"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Scheduling.",
      "id": 125550211,
      "name": "sig/scheduling",
      "node_id": "MDU6TGFiZWwxMjU1NTAyMTE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/scheduling"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/85685/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1Mjk0MTg5MzE=",
  "number": 85685,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Collect metrics for scheduler benchmark tests",
  "updated_at": "2020-02-27T20:41:59Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/85685",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6902282?v=4",
    "events_url": "https://api.github.com/users/liu-cong/events{/privacy}",
    "followers_url": "https://api.github.com/users/liu-cong/followers",
    "following_url": "https://api.github.com/users/liu-cong/following{/other_user}",
    "gists_url": "https://api.github.com/users/liu-cong/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/liu-cong",
    "id": 6902282,
    "login": "liu-cong",
    "node_id": "MDQ6VXNlcjY5MDIyODI=",
    "organizations_url": "https://api.github.com/users/liu-cong/orgs",
    "received_events_url": "https://api.github.com/users/liu-cong/received_events",
    "repos_url": "https://api.github.com/users/liu-cong/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/liu-cong/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/liu-cong/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/liu-cong"
  }
}