{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/354?v=4",
    "events_url": "https://api.github.com/users/ncdc/events{/privacy}",
    "followers_url": "https://api.github.com/users/ncdc/followers",
    "following_url": "https://api.github.com/users/ncdc/following{/other_user}",
    "gists_url": "https://api.github.com/users/ncdc/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ncdc",
    "id": 354,
    "login": "ncdc",
    "node_id": "MDQ6VXNlcjM1NA==",
    "organizations_url": "https://api.github.com/users/ncdc/orgs",
    "received_events_url": "https://api.github.com/users/ncdc/received_events",
    "repos_url": "https://api.github.com/users/ncdc/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ncdc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ncdc/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ncdc"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/354?v=4",
      "events_url": "https://api.github.com/users/ncdc/events{/privacy}",
      "followers_url": "https://api.github.com/users/ncdc/followers",
      "following_url": "https://api.github.com/users/ncdc/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncdc/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ncdc",
      "id": 354,
      "login": "ncdc",
      "node_id": "MDQ6VXNlcjM1NA==",
      "organizations_url": "https://api.github.com/users/ncdc/orgs",
      "received_events_url": "https://api.github.com/users/ncdc/received_events",
      "repos_url": "https://api.github.com/users/ncdc/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ncdc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncdc/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ncdc"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "**Is this a BUG REPORT or FEATURE REQUEST?**:\r\n\r\n/kind bug\r\n\r\n**What happened**:\r\nWe run instances of `kube-proxy` outside of our Kubernetes cluster to make cluster IPs work everywhere. Conntrack settings are already tuned on these machines, so we use the following args to ensure `kube-proxy` does not alter them:\r\n- `--conntrack-max-per-core=0`\r\n- `--conntrack-tcp-timeout-close-wait=0`\r\n- `--conntrack-tcp-timeout-established=0`\r\n\r\nWhen we upgraded `kube-proxy` from 1.5.5 to 1.7.3 we noticed that these args became invalid (timeouts are now a `Duration`), so we switched over to a proper config file:\r\n\r\n```yaml\r\napiVersion: componentconfig/v1alpha1\r\nclientConnection:\r\n  kubeconfig: /path/to/kubeconfig.yaml\r\nconntrack:\r\n  maxPerCore: 0\r\n  tcpCloseWaitTimeout: 0s\r\n  tcpEstablishedTimeout: 0s\r\nkind: KubeProxyConfiguration\r\nmode: iptables\r\n```\r\n\r\nThe issue is that`kube-proxy` started setting the default conntrack values, even though we set these keys to zero (as the help docs suggested) in the config file. We ultimately had to set these values to `-1` and `-1s` to make things work properly.\r\n\r\nMy gut is telling me that when `kube-proxy` merges together the configs, it's treating zero values as if they were not set at all (thus falling back to the default values). Can we either fix this or update the help docs?\r\n\r\n**What you expected to happen**:\r\nI expected the help docs (`kube-proxy -h`) to be accurate; that zero values would cause `kube-proxy` to not alter conntrack settings.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nSet `kube-proxy` conntrack args to `0` / `0s`, observe that `kube-proxy` still attempts to change conntrack settings.\r\n\r\n**Anything else we need to know?**:\r\n- Appears to have started in 1.7\r\n- I only had a chance to test conntrack-related args, but I believe this affects all of `kube-proxy`'s numeric settings that advertise zero as a \"disabled\" value.\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): 1.7.3\r\n- Cloud provider or hardware configuration**: AWS\r\n- OS (e.g. from /etc/os-release): CentOS\r\n- Kernel (e.g. `uname -a`): `Linux deep-shape 4.9.35-hs343.el6.x86_64 #1 SMP Wed Jul 12 01:59:52 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux`\r\n\r\n",
  "closed_at": "2017-11-09T08:59:23Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 16,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50787/comments",
  "created_at": "2017-08-16T18:50:45Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50787/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/50787",
  "id": 250724354,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Network.",
      "id": 116712108,
      "name": "sig/network",
      "node_id": "MDU6TGFiZWwxMTY3MTIxMDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/network"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50787/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNTA3MjQzNTQ=",
  "number": 50787,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "zero-value settings for kube-proxy being overwritten by default values",
  "updated_at": "2017-11-09T08:59:23Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50787",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/47152?v=4",
    "events_url": "https://api.github.com/users/tpetr/events{/privacy}",
    "followers_url": "https://api.github.com/users/tpetr/followers",
    "following_url": "https://api.github.com/users/tpetr/following{/other_user}",
    "gists_url": "https://api.github.com/users/tpetr/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/tpetr",
    "id": 47152,
    "login": "tpetr",
    "node_id": "MDQ6VXNlcjQ3MTUy",
    "organizations_url": "https://api.github.com/users/tpetr/orgs",
    "received_events_url": "https://api.github.com/users/tpetr/received_events",
    "repos_url": "https://api.github.com/users/tpetr/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/tpetr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tpetr/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/tpetr"
  }
}