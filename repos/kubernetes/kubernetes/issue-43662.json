{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/980082?v=4",
    "events_url": "https://api.github.com/users/liggitt/events{/privacy}",
    "followers_url": "https://api.github.com/users/liggitt/followers",
    "following_url": "https://api.github.com/users/liggitt/following{/other_user}",
    "gists_url": "https://api.github.com/users/liggitt/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/liggitt",
    "id": 980082,
    "login": "liggitt",
    "node_id": "MDQ6VXNlcjk4MDA4Mg==",
    "organizations_url": "https://api.github.com/users/liggitt/orgs",
    "received_events_url": "https://api.github.com/users/liggitt/received_events",
    "repos_url": "https://api.github.com/users/liggitt/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/liggitt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/liggitt/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/liggitt"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/980082?v=4",
      "events_url": "https://api.github.com/users/liggitt/events{/privacy}",
      "followers_url": "https://api.github.com/users/liggitt/followers",
      "following_url": "https://api.github.com/users/liggitt/following{/other_user}",
      "gists_url": "https://api.github.com/users/liggitt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/liggitt",
      "id": 980082,
      "login": "liggitt",
      "node_id": "MDQ6VXNlcjk4MDA4Mg==",
      "organizations_url": "https://api.github.com/users/liggitt/orgs",
      "received_events_url": "https://api.github.com/users/liggitt/received_events",
      "repos_url": "https://api.github.com/users/liggitt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/liggitt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liggitt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/liggitt"
    }
  ],
  "author_association": "MEMBER",
  "body": "I have an app running in a pod that shells out to kubectl. A kubeconfig file with credentials for four different clusters is included in the pod. However, kubectl always detects that it's being run from inside a cluster and uses the pod's cluster's apiserver instead of the credentials I'm explicitly passing it. I've tried various things to disable this detection and make it use the configuration I'm supplying, but it always uses the in-cluster configuration settings, which results in not only submitting to the wrong cluster, but this error being returned for many resources being applied:\r\n\r\n```\r\nthe namespace from the provided object \"foo\" does not match the namespace \"bar\". You must pass '--namespace=foo' to perform this operation.\r\n```\r\n\r\nwhere \"foo\" refers to the resource I'm trying to create with `kubectl apply` (the namespace of the resource is in the input file) and \"bar\" is the namespace of the pod shelling out to kubectl. Running the exact same command locally works, because kubectl is not overriding what I pass it with in-cluster configuration.\r\n\r\nSpecifically, the command being run is:\r\n\r\n```\r\nkubectl --kubeconfig /path/to/.kube/config --context my-context apply -f resources.yml\r\n```\r\n\r\nI can't find any documentation on how to disable in-cluster config. I looked through the code of the Go client to try to figure out how it's choosing to do this. I tried various things to disable it, including:\r\n\r\n* Setting the `KUBERNETES_SERVICE_HOST` environment variable to an empty string, due to this: https://github.com/kubernetes/client-go/blob/49948ae0ca8eb31d632fbf346e25ee0eb6762d5b/tools/clientcmd/client_config.go#L505. But Kubernetes overrides my setting and fills in the environment variable like normal.\r\n* Mounting an empty volume to /var/run/secrets/kubernetes.io/serviceaccount to try to prevent Kubernetes from mounting the service account files, but it mounts them anyway, overriding my explicit mount.\r\n* Setting the `KUBECONFIG` environment variable to the path of the file I want it to use. It has no effect.\r\n\r\nThis is kubectl 1.5.x running in a Kubernetes 1.5 cluster. Notably, using kubectl 1.4.x does _not_ exhibit this behavior in the same Kubernetes 1.5 cluster. kubectl 1.4 works as expected.",
  "closed_at": "2017-04-21T21:45:23Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 8,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/43662/comments",
  "created_at": "2017-03-25T10:31:38Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/43662/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/43662",
  "id": 216965393,
  "labels": [],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/43662/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMTY5NjUzOTM=",
  "number": 43662,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "In-cluster config for kubectl cannot be disabled/overriden",
  "updated_at": "2017-05-05T21:56:51Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/43662",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/122457?v=4",
    "events_url": "https://api.github.com/users/jimmycuadra/events{/privacy}",
    "followers_url": "https://api.github.com/users/jimmycuadra/followers",
    "following_url": "https://api.github.com/users/jimmycuadra/following{/other_user}",
    "gists_url": "https://api.github.com/users/jimmycuadra/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jimmycuadra",
    "id": 122457,
    "login": "jimmycuadra",
    "node_id": "MDQ6VXNlcjEyMjQ1Nw==",
    "organizations_url": "https://api.github.com/users/jimmycuadra/orgs",
    "received_events_url": "https://api.github.com/users/jimmycuadra/received_events",
    "repos_url": "https://api.github.com/users/jimmycuadra/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jimmycuadra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jimmycuadra/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jimmycuadra"
  }
}