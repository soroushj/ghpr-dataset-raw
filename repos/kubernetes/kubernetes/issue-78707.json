{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/730123?v=4",
    "events_url": "https://api.github.com/users/sttts/events{/privacy}",
    "followers_url": "https://api.github.com/users/sttts/followers",
    "following_url": "https://api.github.com/users/sttts/following{/other_user}",
    "gists_url": "https://api.github.com/users/sttts/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sttts",
    "id": 730123,
    "login": "sttts",
    "node_id": "MDQ6VXNlcjczMDEyMw==",
    "organizations_url": "https://api.github.com/users/sttts/orgs",
    "received_events_url": "https://api.github.com/users/sttts/received_events",
    "repos_url": "https://api.github.com/users/sttts/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sttts/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sttts/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sttts"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/730123?v=4",
      "events_url": "https://api.github.com/users/sttts/events{/privacy}",
      "followers_url": "https://api.github.com/users/sttts/followers",
      "following_url": "https://api.github.com/users/sttts/following{/other_user}",
      "gists_url": "https://api.github.com/users/sttts/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/sttts",
      "id": 730123,
      "login": "sttts",
      "node_id": "MDQ6VXNlcjczMDEyMw==",
      "organizations_url": "https://api.github.com/users/sttts/orgs",
      "received_events_url": "https://api.github.com/users/sttts/received_events",
      "repos_url": "https://api.github.com/users/sttts/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/sttts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sttts/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/sttts"
    },
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/980082?v=4",
      "events_url": "https://api.github.com/users/liggitt/events{/privacy}",
      "followers_url": "https://api.github.com/users/liggitt/followers",
      "following_url": "https://api.github.com/users/liggitt/following{/other_user}",
      "gists_url": "https://api.github.com/users/liggitt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/liggitt",
      "id": 980082,
      "login": "liggitt",
      "node_id": "MDQ6VXNlcjk4MDA4Mg==",
      "organizations_url": "https://api.github.com/users/liggitt/orgs",
      "received_events_url": "https://api.github.com/users/liggitt/received_events",
      "repos_url": "https://api.github.com/users/liggitt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/liggitt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liggitt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/liggitt"
    }
  ],
  "author_association": "MEMBER",
  "body": "**What happened**:\r\n\r\nCreated a CRD:\r\n```\r\napiVersion: apiextensions.k8s.io/v1beta1\r\nkind: CustomResourceDefinition\r\nmetadata:\r\n  name: foos.example.com\r\nspec:\r\n  group: example.com\r\n  scope: Namespaced\r\n  version: v1\r\n  names:\r\n    singular: foo\r\n    plural: foos\r\n    kind: Foo\r\n    listKind: FooList\r\n```\r\n\r\nCreated another CRD defining an overlapping type with CustomResourceDefinition:\r\n```yaml\r\napiVersion: apiextensions.k8s.io/v1beta1\r\nkind: CustomResourceDefinition\r\nmetadata:\r\n  name: customresourcedefinitions.apiextensions.k8s.io\r\nspec:\r\n  group: apiextensions.k8s.io\r\n  version: v1beta1\r\n  scope: Cluster\r\n  names:\r\n    plural: customresourcedefinitions\r\n    singular: customresourcedefinition\r\n    kind: CustomResourceDefinition\r\n    listKind: CustomResourceDefinitionList\r\n  validation:\r\n    openAPIV3Schema:\r\n      type: object\r\n      properties:\r\n        readonly:\r\n          type: boolean\r\n```\r\n\r\nVerify both exist:\r\n```\r\n$ kubectl get crds\r\nNAME                                             CREATED AT\r\ncustomresourcedefinitions.apiextensions.k8s.io   2019-06-04T19:37:46Z\r\nfoos.example.com                                 2019-06-04T19:48:35Z\r\n```\r\n\r\nDeleted the one overlapping with the in-tree CRD type:\r\n```\r\nkubectl delete crd/customresourcedefinitions.apiextensions.k8s.io --wait=false\r\n```\r\n\r\nVerify only the overlapping CRD remains:\r\n```\r\n$ kubectl get crd\r\nNAME                                             CREATED AT\r\ncustomresourcedefinitions.apiextensions.k8s.io   2019-06-04T19:37:46Z\r\n```\r\nand is stuck deleting:\r\n```\r\n$ kubectl get crd -o yaml\r\n...\r\n  status:\r\n    conditions:\r\n    ...\r\n    - lastTransitionTime: \"2019-06-04T19:49:40Z\"\r\n      message: CustomResource deletion is in progress\r\n      reason: InstanceDeletionInProgress\r\n      status: \"True\"\r\n      type: Terminating\r\n```\r\n\r\n**What you expected to happen**:\r\n\r\nCreation and deletion of the overlapping type CRD would have no effect on the in-tree data.\r\n\r\n**Anything else we need to know?**:\r\n\r\nThe only types in the kube-apiserver (currently) that store data under a group prefix are:\r\n* APIService (`<prefix>/apiregistration.k8s.io/apiservices/...`)\r\n* CustomResourceDefinition (`<prefix>/apiextensions.k8s.io/customresourcedefinitions/...`)\r\n* Custom resources (`<prefix>/<group>/<pluralResource>/...`)\r\n\r\nWhen a CRD is deleted, all instances of the type it defines are first removed. That means that defining and deleting a CustomResourceDefinition that defines an overlapping APIService or CustomResourceDefinition type will remove existing APIService or CustomResourceDefinition data.\r\n\r\nWe can special-case these two resources in the CRD deletion code, but we need a more robust solution before CRD v1.\r\n\r\n/cc @sttts @deads2k @jpbetz \r\n/sig api-machinery\r\n/priority important-soon\r\n/area custom-resources",
  "closed_at": "2019-08-30T09:59:32Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 8,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/78707/comments",
  "created_at": "2019-06-04T19:57:01Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/78707/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/78707",
  "id": 452179309,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 556590057,
      "name": "area/custom-resources",
      "node_id": "MDU6TGFiZWw1NTY1OTAwNTc=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/custom-resources"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d3e2f0",
      "default": false,
      "description": "Indicates that an issue or PR should not be auto-closed due to staleness.",
      "id": 778118403,
      "name": "lifecycle/frozen",
      "node_id": "MDU6TGFiZWw3NzgxMTg0MDM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/lifecycle/frozen"
    },
    {
      "color": "eb6420",
      "default": false,
      "description": "Must be staffed and worked on either currently, or very soon, ideally in time for the next release.",
      "id": 114528223,
      "name": "priority/important-soon",
      "node_id": "MDU6TGFiZWwxMTQ1MjgyMjM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/important-soon"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG API Machinery.",
      "id": 173493835,
      "name": "sig/api-machinery",
      "node_id": "MDU6TGFiZWwxNzM0OTM4MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/api-machinery"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/78707/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": null,
    "closed_issues": 1361,
    "created_at": "2019-01-31T15:17:37Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/980082?v=4",
      "events_url": "https://api.github.com/users/liggitt/events{/privacy}",
      "followers_url": "https://api.github.com/users/liggitt/followers",
      "following_url": "https://api.github.com/users/liggitt/following{/other_user}",
      "gists_url": "https://api.github.com/users/liggitt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/liggitt",
      "id": 980082,
      "login": "liggitt",
      "node_id": "MDQ6VXNlcjk4MDA4Mg==",
      "organizations_url": "https://api.github.com/users/liggitt/orgs",
      "received_events_url": "https://api.github.com/users/liggitt/received_events",
      "repos_url": "https://api.github.com/users/liggitt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/liggitt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liggitt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/liggitt"
    },
    "description": null,
    "due_on": null,
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/45",
    "id": 4018466,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/45/labels",
    "node_id": "MDk6TWlsZXN0b25lNDAxODQ2Ng==",
    "number": 45,
    "open_issues": 0,
    "state": "open",
    "title": "v1.16",
    "updated_at": "2020-10-25T01:09:02Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/45"
  },
  "node_id": "MDU6SXNzdWU0NTIxNzkzMDk=",
  "number": 78707,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Some CRDs that duplicate built-in group/version/kinds reap built-in etcd data on deletion",
  "updated_at": "2019-08-30T09:59:32Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/78707",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/980082?v=4",
    "events_url": "https://api.github.com/users/liggitt/events{/privacy}",
    "followers_url": "https://api.github.com/users/liggitt/followers",
    "following_url": "https://api.github.com/users/liggitt/following{/other_user}",
    "gists_url": "https://api.github.com/users/liggitt/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/liggitt",
    "id": 980082,
    "login": "liggitt",
    "node_id": "MDQ6VXNlcjk4MDA4Mg==",
    "organizations_url": "https://api.github.com/users/liggitt/orgs",
    "received_events_url": "https://api.github.com/users/liggitt/received_events",
    "repos_url": "https://api.github.com/users/liggitt/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/liggitt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/liggitt/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/liggitt"
  }
}