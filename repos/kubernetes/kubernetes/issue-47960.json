{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/2823529?v=4",
    "events_url": "https://api.github.com/users/caesarxuchao/events{/privacy}",
    "followers_url": "https://api.github.com/users/caesarxuchao/followers",
    "following_url": "https://api.github.com/users/caesarxuchao/following{/other_user}",
    "gists_url": "https://api.github.com/users/caesarxuchao/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/caesarxuchao",
    "id": 2823529,
    "login": "caesarxuchao",
    "node_id": "MDQ6VXNlcjI4MjM1Mjk=",
    "organizations_url": "https://api.github.com/users/caesarxuchao/orgs",
    "received_events_url": "https://api.github.com/users/caesarxuchao/received_events",
    "repos_url": "https://api.github.com/users/caesarxuchao/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/caesarxuchao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/caesarxuchao/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/caesarxuchao"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/2823529?v=4",
      "events_url": "https://api.github.com/users/caesarxuchao/events{/privacy}",
      "followers_url": "https://api.github.com/users/caesarxuchao/followers",
      "following_url": "https://api.github.com/users/caesarxuchao/following{/other_user}",
      "gists_url": "https://api.github.com/users/caesarxuchao/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/caesarxuchao",
      "id": 2823529,
      "login": "caesarxuchao",
      "node_id": "MDQ6VXNlcjI4MjM1Mjk=",
      "organizations_url": "https://api.github.com/users/caesarxuchao/orgs",
      "received_events_url": "https://api.github.com/users/caesarxuchao/received_events",
      "repos_url": "https://api.github.com/users/caesarxuchao/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/caesarxuchao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caesarxuchao/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/caesarxuchao"
    }
  ],
  "author_association": "NONE",
  "body": "/kind bug\r\n**What happened**:\r\nTried to delete a replicaset with a failing container (stuck on a volume mount) and got the following: -\r\n\r\n~~~\r\nkubectl delete rs prometheus-4088412010 -n kube-system \r\nerror: Scaling the resource failed with: ReplicaSet.extensions \"prometheus-4088412010\" is invalid: metadata.finalizers[0]: Invalid value: \"foregroundDeletion\": name is neither a standard finalizer name nor is it fully qualified; Current resource version 11276377\r\n~~~\r\n\r\nLooking at the resource looks odd: -\r\n~~~\r\n# kubectl get rs prometheus-4088412010 -n kube-system -o yaml\r\napiVersion: extensions/v1beta1\r\nkind: ReplicaSet\r\nmetadata:\r\n  annotations:\r\n    deployment.kubernetes.io/desired-replicas: \"1\"\r\n    deployment.kubernetes.io/max-replicas: \"2\"\r\n    deployment.kubernetes.io/revision: \"2\"\r\n  creationTimestamp: 2017-06-23T10:10:25Z\r\n  deletionGracePeriodSeconds: 0\r\n  deletionTimestamp: 2017-06-23T12:00:39Z\r\n  finalizers:\r\n  - foregroundDeletion\r\n  generation: 2\r\n  labels:\r\n    app: prometheus\r\n    pod-template-hash: \"4088412010\"\r\n  name: prometheus-4088412010\r\n  namespace: kube-system\r\n  ownerReferences:\r\n  - apiVersion: extensions/v1beta1\r\n    blockOwnerDeletion: true\r\n    controller: true\r\n    kind: Deployment\r\n    name: prometheus\r\n    uid: a8870531-5297-11e7-a80e-0a80992c354e\r\n  resourceVersion: \"11276377\"\r\n  selfLink: /apis/extensions/v1beta1/namespaces/kube-system/replicasets/prometheus-4088412010\r\n  uid: 2ccd6bf2-57fc-11e7-bc44-0a851b7f13b8\r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels:\r\n      app: prometheus\r\n      pod-template-hash: \"4088412010\"\r\n  template:\r\n    metadata:\r\n      creationTimestamp: null\r\n      labels:\r\n        app: prometheus\r\n        pod-template-hash: \"4088412010\"\r\n      name: prometheus\r\n    spec:\r\n      containers:\r\n      - args:\r\n        - -storage.local.retention=360h0m0s\r\n        - -storage.local.memory-chunks=500000\r\n        - -config.file=/etc/prometheus/prometheus.yml\r\n        image: quay.io/prometheus/prometheus:v1.7.1\r\n        imagePullPolicy: IfNotPresent\r\n        name: prometheus\r\n        ports:\r\n        - containerPort: 9090\r\n          name: web\r\n          protocol: TCP\r\n        resources: {}\r\n        terminationMessagePath: /dev/termination-log\r\n        terminationMessagePolicy: File\r\n        volumeMounts:\r\n        - mountPath: /etc/prometheus\r\n          name: config-volume\r\n        - mountPath: /prometheus\r\n          name: data-volume\r\n      dnsPolicy: ClusterFirst\r\n      restartPolicy: Always\r\n      schedulerName: default-scheduler\r\n      securityContext: {}\r\n      serviceAccount: prometheus\r\n      serviceAccountName: prometheus\r\n      terminationGracePeriodSeconds: 30\r\n      volumes:\r\n      - configMap:\r\n          defaultMode: 420\r\n          name: prometheus\r\n        name: config-volume\r\n      - name: data-volume\r\n        persistentVolumeClaim:\r\n          claimName: k8smetrics-prometheus\r\nstatus:\r\n  fullyLabeledReplicas: 1\r\n  observedGeneration: 1\r\n  replicas: 1\r\n~~~\r\n\r\n~~~\r\n# kubectl describe rs prometheus-4088412010 -n kube-system        \r\nName:\t\tprometheus-4088412010\r\nNamespace:\tkube-system\r\nSelector:\tapp=prometheus,pod-template-hash=4088412010\r\nLabels:\t\tapp=prometheus\r\n\t\tpod-template-hash=4088412010\r\nAnnotations:\tdeployment.kubernetes.io/desired-replicas=1\r\n\t\tdeployment.kubernetes.io/max-replicas=2\r\n\t\tdeployment.kubernetes.io/revision=2\r\nReplicas:\t1 current / 1 desired\r\nPods Status:\t1 Running / 0 Waiting / 0 Succeeded / 0 Failed\r\nPod Template:\r\n  Labels:\t\tapp=prometheus\r\n\t\t\tpod-template-hash=4088412010\r\n  Service Account:\tprometheus\r\n  Containers:\r\n   prometheus:\r\n    Image:\tquay.io/prometheus/prometheus:v1.7.1\r\n    Port:\t9090/TCP\r\n    Args:\r\n      -storage.local.retention=360h0m0s\r\n      -storage.local.memory-chunks=500000\r\n      -config.file=/etc/prometheus/prometheus.yml\r\n    Environment:\t<none>\r\n    Mounts:\r\n      /etc/prometheus from config-volume (rw)\r\n      /prometheus from data-volume (rw)\r\n  Volumes:\r\n   config-volume:\r\n    Type:\tConfigMap (a volume populated by a ConfigMap)\r\n    Name:\tprometheus\r\n    Optional:\tfalse\r\n   data-volume:\r\n    Type:\tPersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)\r\n    ClaimName:\tk8smetrics-prometheus\r\n    ReadOnly:\tfalse\r\nEvents:\t\t<none>\r\n~~~\r\n\r\n**What you expected to happen**:\r\nI was expecting the ReplicaSet to be deleted.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\nCreated with this deployment: -\r\n~~~\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  annotations:\r\n    prometheus.io/scrape: 'true'\r\n  namespace: kube-system\r\n  labels:\r\n    name: prometheus\r\n    addonmanager.kubernetes.io/mode: EnsureExists\r\n  name: prometheus\r\nspec:\r\n  selector:\r\n    app: prometheus\r\n  type: ClusterIP\r\n  ports:\r\n  - name: prometheus\r\n    protocol: TCP\r\n    port: 9090\r\n---\r\napiVersion: extensions/v1beta1\r\nkind: Deployment\r\nmetadata:\r\n  name: prometheus\r\n  namespace: kube-system\r\n  labels:\r\n    addonmanager.kubernetes.io/mode: EnsureExists\r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels:\r\n      app: prometheus\r\n  template:\r\n    metadata:\r\n      name: prometheus\r\n      labels:\r\n        app: prometheus\r\n    spec:\r\n      serviceAccountName: prometheus\r\n      containers:\r\n      - name: prometheus\r\n        image: quay.io/prometheus/prometheus:v1.7.1\r\n        args:\r\n          - '-storage.local.retention=360h0m0s'\r\n          - '-storage.local.memory-chunks=500000'\r\n          - '-config.file=/etc/prometheus/prometheus.yml'\r\n        ports:\r\n        - name: web\r\n          containerPort: 9090\r\n        volumeMounts:\r\n        - name: config-volume\r\n          mountPath: /etc/prometheus\r\n        - name: data-volume\r\n          mountPath: /prometheus\r\n      volumes:\r\n      - name: config-volume\r\n        configMap:\r\n          name: prometheus\r\n      - name: data-volume\r\n        persistentVolumeClaim:\r\n          claimName: k8smetrics-prometheus\r\n~~~\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`):\r\nClient Version: version.Info{Major:\"1\", Minor:\"6\", GitVersion:\"v1.6.4\", GitCommit:\"d6f433224538d4f9ca2f7ae19b252e6fcb66a3ae\", GitTreeState:\"clean\", BuildDate:\"2017-05-19T18:33:17Z\", GoVersion:\"go1.7.5\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"6\", GitVersion:\"v1.6.4\", GitCommit:\"d6f433224538d4f9ca2f7ae19b252e6fcb66a3ae\", GitTreeState:\"clean\", BuildDate:\"2017-05-19T18:33:17Z\", GoVersion:\"go1.7.5\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n\r\n- Cloud provider or hardware configuration**: aws\r\n- OS (e.g. from /etc/os-release):\r\nNAME=\"Container Linux by CoreOS\"\r\nID=coreos\r\nVERSION=1409.5.0\r\nVERSION_ID=1409.5.0\r\nBUILD_ID=2017-06-22-2222\r\nPRETTY_NAME=\"Container Linux by CoreOS 1409.5.0 (Ladybug)\"\r\nANSI_COLOR=\"38;5;75\"\r\nHOME_URL=\"https://coreos.com/\"\r\nBUG_REPORT_URL=\"https://issues.coreos.com\"\r\nCOREOS_BOARD=\"amd64-usr\"\r\n\r\n- Kernel (e.g. `uname -a`): \r\nLinux ip-10-16-5-136.eu-west-1.compute.internal 4.11.6-coreos-r1 #1 SMP Thu Jun 22 22:04:38 UTC 2017 x86_64 Intel(R) Xeon(R) CPU E5-2670 v2 @ 2.50GHz GenuineIntel GNU/Linux\r\n- Install tools: roll-your-own\r\n- Others:\r\n",
  "closed_at": "2017-06-27T21:46:38Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/2823529?v=4",
    "events_url": "https://api.github.com/users/caesarxuchao/events{/privacy}",
    "followers_url": "https://api.github.com/users/caesarxuchao/followers",
    "following_url": "https://api.github.com/users/caesarxuchao/following{/other_user}",
    "gists_url": "https://api.github.com/users/caesarxuchao/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/caesarxuchao",
    "id": 2823529,
    "login": "caesarxuchao",
    "node_id": "MDQ6VXNlcjI4MjM1Mjk=",
    "organizations_url": "https://api.github.com/users/caesarxuchao/orgs",
    "received_events_url": "https://api.github.com/users/caesarxuchao/received_events",
    "repos_url": "https://api.github.com/users/caesarxuchao/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/caesarxuchao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/caesarxuchao/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/caesarxuchao"
  },
  "comments": 16,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/47960/comments",
  "created_at": "2017-06-23T12:12:47Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/47960/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/47960",
  "id": 238124896,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG API Machinery.",
      "id": 173493835,
      "name": "sig/api-machinery",
      "node_id": "MDU6TGFiZWwxNzM0OTM4MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/api-machinery"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/47960/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2019-08-26T17:23:42Z",
    "closed_issues": 1693,
    "created_at": "2016-11-12T00:35:38Z",
    "creator": {
      "avatar_url": "https://avatars1.githubusercontent.com/u/10052848?v=4",
      "events_url": "https://api.github.com/users/saad-ali/events{/privacy}",
      "followers_url": "https://api.github.com/users/saad-ali/followers",
      "following_url": "https://api.github.com/users/saad-ali/following{/other_user}",
      "gists_url": "https://api.github.com/users/saad-ali/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/saad-ali",
      "id": 10052848,
      "login": "saad-ali",
      "node_id": "MDQ6VXNlcjEwMDUyODQ4",
      "organizations_url": "https://api.github.com/users/saad-ali/orgs",
      "received_events_url": "https://api.github.com/users/saad-ali/received_events",
      "repos_url": "https://api.github.com/users/saad-ali/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/saad-ali/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saad-ali/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/saad-ali"
    },
    "description": "",
    "due_on": "2017-03-22T07:00:00Z",
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/31",
    "id": 2130587,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/31/labels",
    "node_id": "MDk6TWlsZXN0b25lMjEzMDU4Nw==",
    "number": 31,
    "open_issues": 0,
    "state": "closed",
    "title": "v1.6",
    "updated_at": "2019-08-26T17:23:42Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/31"
  },
  "node_id": "MDU6SXNzdWUyMzgxMjQ4OTY=",
  "number": 47960,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Kubectl/API Refusal to delete ReplicaSet",
  "updated_at": "2017-11-27T19:09:03Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/47960",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/23635315?v=4",
    "events_url": "https://api.github.com/users/mccormd/events{/privacy}",
    "followers_url": "https://api.github.com/users/mccormd/followers",
    "following_url": "https://api.github.com/users/mccormd/following{/other_user}",
    "gists_url": "https://api.github.com/users/mccormd/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mccormd",
    "id": 23635315,
    "login": "mccormd",
    "node_id": "MDQ6VXNlcjIzNjM1MzE1",
    "organizations_url": "https://api.github.com/users/mccormd/orgs",
    "received_events_url": "https://api.github.com/users/mccormd/received_events",
    "repos_url": "https://api.github.com/users/mccormd/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mccormd/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mccormd/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mccormd"
  }
}