{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "<!-- This form is for bug reports and feature requests ONLY!\r\n\r\nIf you're looking for help check [Stack Overflow](https://stackoverflow.com/questions/tagged/kubernetes) and the [troubleshooting guide](https://kubernetes.io/docs/tasks/debug-application-cluster/troubleshooting/).\r\n\r\nIf this may be security issue, please disclose it privately via https://kubernetes.io/security/.\r\n-->\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**:\r\n\r\n/kind bug\r\n\r\n**What happened**:\r\n\r\nI upgraded kube-apiserver on a Raspberry Pi 3 cluster and after it begins adding the http listeners, the cpu usage goes up on all processors to use every available cycle and all attempts to connect to the api via https (6443) or http (8080) time out.\r\n\r\nSince I host etcd on the controller nodes, it also becomes unresponsive.\r\n\r\nIf I set GOMAXPROCS=1, it does limit that and prevents etcd from timing out, but all attempts to connect to kube-apiserver still time out. Eventually, the initial IP allocation check times out, causing a fatal error.\r\n\r\n**What you expected to happen**:\r\n\r\nIt should idle at about 4%.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\nOn a raspberry pi 3 running Debian jessie (arm64), I run:\r\n\r\n```\r\nkube-apiserver \\\r\n  --etcd-servers=https://kubecon1:2379,https://kubecon2:2379,https://kubecon3:2379 \\\r\n  --bind-address=0.0.0.0 \\\r\n  --etcd-cafile=/etc/kubernetes/pki/ca.pem \\\r\n  --etcd-certfile=/etc/kubernetes/pki/kubecon1.etcd-client.pem \\\r\n  --etcd-keyfile=/etc/kubernetes/pki/kubecon1.etcd-client-key.pem \\\r\n  --allow-privileged=true \\\r\n  --service-cluster-ip-range=10.96.0.0/12 \\\r\n  --admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,NodeRestriction,PersistentVolumeLabel,DefaultStorageClass,ResourceQuota,DefaultTolerationSeconds \\\r\n  --advertise-address=192.168.2.22 \\\r\n  --tls-cert-file=/etc/kubernetes/pki/kubecon1.kube-apiserver.pem \\\r\n  --tls-private-key-file=/etc/kubernetes/pki/kubecon1.kube-apiserver-key.pem \\\r\n  --service-account-key-file=/etc/kubernetes/pki/serviceaccount-key.pem \\\r\n  --client-ca-file=/etc/kubernetes/pki/ca.pem \\\r\n  --apiserver-count=3 \\\r\n  --audit-log-maxage=30 \\\r\n  --audit-log-maxbackup=3 \\\r\n  --audit-log-maxsize=100 \\\r\n  --authorization-mode=Node,RBAC \\\r\n  --enable-swagger-ui=true \\\r\n  --event-ttl=1h \\\r\n  --insecure-bind-address=127.0.0.1 \\\r\n  --runtime-config=rbac.authorization.k8s.io/v1alpha1 \\\r\n  --v=2\r\n```\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): 1.10.3 arm64\r\n- Cloud provider or hardware configuration: Raspberry Pi 3\r\n- OS (e.g. from /etc/os-release): \r\n```\r\nPRETTY_NAME=\"Debian GNU/Linux 8 (jessie)\"\r\nNAME=\"Debian GNU/Linux\"\r\nVERSION_ID=\"8\"\r\nVERSION=\"8 (jessie)\"\r\nID=debian\r\nHOME_URL=\"http://www.debian.org/\"\r\nSUPPORT_URL=\"http://www.debian.org/support\"\r\nBUG_REPORT_URL=\"https://bugs.debian.org/\"\r\n```\r\n- Kernel (e.g. `uname -a`): `Linux kubecon1 4.9.13-bee42-v8 #1 SMP PREEMPT Fri Mar 3 16:42:37 UTC 2017 aarch64 GNU/Linux`\r\n- Install tools: n/a\r\n- Others:\r\n",
  "closed_at": "2018-07-20T23:02:14Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 15,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/64649/comments",
  "created_at": "2018-06-02T03:04:59Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/64649/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/64649",
  "id": 328707683,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG API Machinery.",
      "id": 173493835,
      "name": "sig/api-machinery",
      "node_id": "MDU6TGFiZWwxNzM0OTM4MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/api-machinery"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/64649/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMjg3MDc2ODM=",
  "number": 64649,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "kube-apiserver 1.10.[0-5] & 1.11.0 uses up all available cpu on arm64",
  "updated_at": "2018-07-20T23:02:14Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/64649",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/952828?v=4",
    "events_url": "https://api.github.com/users/joejulian/events{/privacy}",
    "followers_url": "https://api.github.com/users/joejulian/followers",
    "following_url": "https://api.github.com/users/joejulian/following{/other_user}",
    "gists_url": "https://api.github.com/users/joejulian/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/joejulian",
    "id": 952828,
    "login": "joejulian",
    "node_id": "MDQ6VXNlcjk1MjgyOA==",
    "organizations_url": "https://api.github.com/users/joejulian/orgs",
    "received_events_url": "https://api.github.com/users/joejulian/received_events",
    "repos_url": "https://api.github.com/users/joejulian/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/joejulian/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/joejulian/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/joejulian"
  }
}