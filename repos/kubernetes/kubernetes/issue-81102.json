{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/23304?v=4",
    "events_url": "https://api.github.com/users/dims/events{/privacy}",
    "followers_url": "https://api.github.com/users/dims/followers",
    "following_url": "https://api.github.com/users/dims/following{/other_user}",
    "gists_url": "https://api.github.com/users/dims/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/dims",
    "id": 23304,
    "login": "dims",
    "node_id": "MDQ6VXNlcjIzMzA0",
    "organizations_url": "https://api.github.com/users/dims/orgs",
    "received_events_url": "https://api.github.com/users/dims/received_events",
    "repos_url": "https://api.github.com/users/dims/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/dims/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dims/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/dims"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/23304?v=4",
      "events_url": "https://api.github.com/users/dims/events{/privacy}",
      "followers_url": "https://api.github.com/users/dims/followers",
      "following_url": "https://api.github.com/users/dims/following{/other_user}",
      "gists_url": "https://api.github.com/users/dims/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/dims",
      "id": 23304,
      "login": "dims",
      "node_id": "MDQ6VXNlcjIzMzA0",
      "organizations_url": "https://api.github.com/users/dims/orgs",
      "received_events_url": "https://api.github.com/users/dims/received_events",
      "repos_url": "https://api.github.com/users/dims/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/dims/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dims/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/dims"
    },
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/331852?v=4",
      "events_url": "https://api.github.com/users/neolit123/events{/privacy}",
      "followers_url": "https://api.github.com/users/neolit123/followers",
      "following_url": "https://api.github.com/users/neolit123/following{/other_user}",
      "gists_url": "https://api.github.com/users/neolit123/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/neolit123",
      "id": 331852,
      "login": "neolit123",
      "node_id": "MDQ6VXNlcjMzMTg1Mg==",
      "organizations_url": "https://api.github.com/users/neolit123/orgs",
      "received_events_url": "https://api.github.com/users/neolit123/received_events",
      "repos_url": "https://api.github.com/users/neolit123/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/neolit123/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/neolit123/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/neolit123"
    }
  ],
  "author_association": "MEMBER",
  "body": "**What happened**:\r\n\r\nif a _test.go file contains a certain import, and even if this import is forbidden by `.import-restrictions`, ./hack/verify-import-boss.sh will pass.\r\n\r\nif the same import is moved to a regular .go (non-\"_test\".go) file import-boss fails and says the import is not allowed, as expected.\r\n\r\n**What you expected to happen**:\r\n\r\nimport-boss to not allow a _test.go file to have a forbidden import.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\n```bash\r\n#!/bin/bash\r\n\r\n# clean/use the kubeadm dir to test.\r\n# (i couldn't get import boss to work with any new directory).\r\nrm -rf ./cmd/kubeadm/*\r\n\r\n# create ./cmd/kubeadm/.import-restrictions\r\ncat > ./cmd/kubeadm/.import-restrictions << 'EOL'\r\n{\r\n\t\"Rules\": [\r\n\t\t{\r\n\t\t\t\"SelectorRegexp\": \"k8s[.]io\",\r\n\t\t\t\"AllowedPrefixes\": [\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n}\r\nEOL\r\n\r\n# create ./cmd/kubeadm/main.go\r\ncat > ./cmd/kubeadm/main.go << 'EOL'\r\npackage main\r\n\r\nimport (\r\n\t\"fmt\"\r\n\r\n\t\"k8s.io/kubernetes/pkg/kubeapiserver/authorizer/modes\"\r\n)\r\n\r\nfunc main() {\r\n\tfmt.Println(modes.ModeWebhook)\r\n}\r\nEOL\r\n\r\n./hack/verify-import-boss.sh\r\n\r\n# results in an error as expected <--------------\r\n\r\n#errors in package \"k8s.io/kubernetes/cmd/kubeadm\":\r\n#the following imports did not match any allowed prefix:\r\n#  k8s.io/apimachinery/pkg/util/sets\r\n#  k8s.io/kubernetes/pkg/kubeapiserver/authorizer/modes\r\n\r\n# rename to a _test.go file and try again\r\nmv ./cmd/kubeadm/main.go ./cmd/kubeadm/main_test.go\r\n./hack/verify-import-boss.sh\r\n\r\n# no errors! <--------------\r\n\r\n# when done testing\r\nrm ./cmd/kubeadm/main*.go ./cmd/kubeadm/.import-restrictions\r\ngit reset --hard HEAD\r\n```\r\n\r\nto clarify, this is an isolated test case.\r\nthe `k8s.io/kubernetes/pkg/kubeapiserver/authorizer/modes` import is currently being ignored in a real _test.go file that actually uses the package.\r\n\r\n**Anything else we need to know?**:\r\nno\r\n\r\n**Environment**:\r\n- latest k8s master\r\n\r\n/kind bug\r\n/priority important-soon\r\n/area code-organization\r\n/assign @dims @neolit123 \r\n",
  "closed_at": "2019-08-24T03:56:39Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 4,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/81102/comments",
  "created_at": "2019-08-07T22:47:15Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/81102/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/81102",
  "id": 478171863,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": "Issues or PRs related to kubernetes code organization",
      "id": 1315281643,
      "name": "area/code-organization",
      "node_id": "MDU6TGFiZWwxMzE1MjgxNjQz",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/code-organization"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "eb6420",
      "default": false,
      "description": "Must be staffed and worked on either currently, or very soon, ideally in time for the next release.",
      "id": 114528223,
      "name": "priority/important-soon",
      "node_id": "MDU6TGFiZWwxMTQ1MjgyMjM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/important-soon"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Testing.",
      "id": 483069764,
      "name": "sig/testing",
      "node_id": "MDU6TGFiZWw0ODMwNjk3NjQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/testing"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/81102/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0NzgxNzE4NjM=",
  "number": 81102,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "import-boss ignores import in a _test.go file",
  "updated_at": "2019-08-24T10:57:49Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/81102",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/331852?v=4",
    "events_url": "https://api.github.com/users/neolit123/events{/privacy}",
    "followers_url": "https://api.github.com/users/neolit123/followers",
    "following_url": "https://api.github.com/users/neolit123/following{/other_user}",
    "gists_url": "https://api.github.com/users/neolit123/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/neolit123",
    "id": 331852,
    "login": "neolit123",
    "node_id": "MDQ6VXNlcjMzMTg1Mg==",
    "organizations_url": "https://api.github.com/users/neolit123/orgs",
    "received_events_url": "https://api.github.com/users/neolit123/received_events",
    "repos_url": "https://api.github.com/users/neolit123/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/neolit123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/neolit123/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/neolit123"
  }
}