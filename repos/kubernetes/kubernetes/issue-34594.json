{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/169553?v=4",
    "events_url": "https://api.github.com/users/timothysc/events{/privacy}",
    "followers_url": "https://api.github.com/users/timothysc/followers",
    "following_url": "https://api.github.com/users/timothysc/following{/other_user}",
    "gists_url": "https://api.github.com/users/timothysc/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/timothysc",
    "id": 169553,
    "login": "timothysc",
    "node_id": "MDQ6VXNlcjE2OTU1Mw==",
    "organizations_url": "https://api.github.com/users/timothysc/orgs",
    "received_events_url": "https://api.github.com/users/timothysc/received_events",
    "repos_url": "https://api.github.com/users/timothysc/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/timothysc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/timothysc/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/timothysc"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/169553?v=4",
      "events_url": "https://api.github.com/users/timothysc/events{/privacy}",
      "followers_url": "https://api.github.com/users/timothysc/followers",
      "following_url": "https://api.github.com/users/timothysc/following{/other_user}",
      "gists_url": "https://api.github.com/users/timothysc/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/timothysc",
      "id": 169553,
      "login": "timothysc",
      "node_id": "MDQ6VXNlcjE2OTU1Mw==",
      "organizations_url": "https://api.github.com/users/timothysc/orgs",
      "received_events_url": "https://api.github.com/users/timothysc/received_events",
      "repos_url": "https://api.github.com/users/timothysc/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/timothysc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timothysc/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/timothysc"
    }
  ],
  "author_association": "NONE",
  "body": "**What keywords did you search in Kubernetes issues before filing this one?** (If you have found any duplicates, you should instead reply there.): \"lock is held by\"  \"has not yet expired\"\n\n---\n\n**Is this a BUG REPORT or FEATURE REQUEST?** (choose one): BUG REPORT\n\n<!--\nIf this is a BUG REPORT, please:\n  - Fill in as much of the template below as you can.  If you leave out\n    information, we can't help you as well.\n\nIf this is a FEATURE REQUEST, please:\n  - Describe *in detail* the feature/behavior/change you'd like to see.\n\nIn both cases, be ready for followup questions, and please respond in a timely\nmanner.  If we can't reproduce a bug or think a feature already exists, we\nmight close your issue.  If we're wrong, PLEASE feel free to reopen it and\nexplain why.\n-->\n\n**Kubernetes version** (use `kubectl version`):\ntested on 1.3.5\n\n```\nClient Version: version.Info{Major:\"1\", Minor:\"3\", GitVersion:\"v1.3.0\", GitCommit:\"283137936a498aed572ee22af6774b6fb6e9fd94\", GitTreeState:\"clean\", BuildDate:\"2016-07-01T19:26:38Z\", GoVersion:\"go1.6.2\", Compiler:\"gc\", Platform:\"linux/amd64\"}\nServer Version: version.Info{Major:\"1\", Minor:\"3\", GitVersion:\"v1.3.5+coreos.1\", GitCommit:\"4fc64a21f8a593d97b75296acd1e979391518b28\", GitTreeState:\"clean\", BuildDate:\"2016-08-22T17:15:28Z\", GoVersion:\"go1.6.2\", Compiler:\"gc\", Platform:\"linux/amd64\"}\n```\n\nand 1.3.8 (upgraded today)\n\n```\nClient Version: version.Info{Major:\"1\", Minor:\"3\", GitVersion:\"v1.3.0\", GitCommit:\"283137936a498aed572ee22af6774b6fb6e9fd94\", GitTreeState:\"clean\", BuildDate:\"2016-07-01T19:26:38Z\", GoVersion:\"go1.6.2\", Compiler:\"gc\", Platform:\"linux/amd64\"}\nServer Version: version.Info{Major:\"1\", Minor:\"3\", GitVersion:\"v1.3.8+coreos.1\", GitCommit:\"6b29caf6507ce9989984720212fd3e3341069e06\", GitTreeState:\"clean\", BuildDate:\"2016-09-30T16:54:50Z\", GoVersion:\"go1.6.2\", Compiler:\"gc\", Platform:\"linux/amd64\"}\n```\n\n**Environment**:\n-  Hardware: vmware guest\n-  OS: CoreOs 1122.2.0\n-  kernel: 4.7.0-coreos\n- masters: 3\n\n/etc/kubernetes/manifests/kube-scheduler.yaml looks like this:\n\n```\napiVersion: v1\nkind: Pod\nmetadata:\n  name: kube-scheduler\n  namespace: kube-system\n  labels:\n    app: kube-scheduler\nspec:\n  hostNetwork: true\n  containers:\n  - name: kube-scheduler\n    image: quay.io/coreos/hyperkube:v1.3.5_coreos.1\n    command:\n    - /hyperkube\n    - scheduler\n    - --master=http://127.0.0.1:8080\n    - --leader-elect=true\n    - --v=2\n    livenessProbe:\n      httpGet:\n        host: 127.0.0.1\n        path: /healthz\n        port: 10251\n      initialDelaySeconds: 15\n      timeoutSeconds: 1\n```\n\n/etc/kubernetes/manifests/kube-controller-manager.yaml looks like this:\n\n```\napiVersion: v1\nkind: Pod\nmetadata:\n  name: kube-controller-manager\n  namespace: kube-system\n  labels:\n    app: kube-controller-manager\nspec:\n  hostNetwork: true\n  containers:\n  - name: kube-controller-manager\n    image: quay.io/coreos/hyperkube:v1.3.5_coreos.1\n    command:\n    - /hyperkube\n    - controller-manager\n    - --master=http://127.0.0.1:8080\n    - --leader-elect=true \n    - --service-account-private-key-file=/etc/kubernetes/ssl/apiserver-key.pem\n    - --root-ca-file=/etc/kubernetes/ssl/ca.pem\n    - --v=2\n    livenessProbe:\n      httpGet:\n        host: 127.0.0.1\n        path: /healthz\n        port: 10252\n      initialDelaySeconds: 15\n      timeoutSeconds: 1\n    volumeMounts:\n    - mountPath: /etc/kubernetes/ssl\n      name: ssl-certs-kubernetes\n      readOnly: true\n    - mountPath: /etc/ssl/certs\n      name: ssl-certs-host\n      readOnly: true\n  volumes:\n  - hostPath:\n      path: /etc/kubernetes/ssl\n    name: ssl-certs-kubernetes\n  - hostPath:\n      path: /usr/share/ca-certificates\n    name: ssl-certs-host\n\n```\n\n**What happened**:\n\nThe logs from kube-scheduler and kube-controller-manager are spamming with:\n\n```\nI1012 07:13:30.700862       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:13:33.263266       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:13:36.944429       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:13:40.486944       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:13:44.772153       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:13:47.186971       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:13:49.914362       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:13:52.353564       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:13:56.181010       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:13:59.263994       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:03.553559       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:06.325838       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:10.595729       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:13.347343       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:17.330717       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:21.505816       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:23.950507       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:26.892771       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:30.914393       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:34.408769       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:38.544271       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:40.645166       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:43.919125       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:47.663210       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:51.768576       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:14:55.748494       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:00.116892       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:03.489400       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:06.465890       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:09.703411       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:13.463524       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:15.607621       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:17.896426       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:22.087427       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:26.217274       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:30.269665       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:33.637867       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:36.712575       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:40.783867       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:44.372188       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:47.605168       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:50.434502       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:53.216699       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:57.015595       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:15:59.152636       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\nI1012 07:16:01.301530       1 leaderelection.go:296] lock is held by utv-kube03 and has not yet expired\n```\n\nThe node holding the lock only logs this:\n\n```\nI1012 07:27:20.982437       1 leaderelection.go:215] sucessfully acquired lease kube-system/kube-scheduler\n```\n\n**What you expected to happen**:\nIf this is expected behaviour i would like to be able to supress those messages with --v=2\n\n**How to reproduce it** (as minimally and precisely as possible):\nI think it would be sufficient to run scheduler or controller-manager with `--leader-elect?true`. \n\netcdctl get registry/services/endpoints/kube-system/kube-controller-manager looks like this:\n\n```\n{\n    \"kind\": \"Endpoints\",\n    \"apiVersion\": \"v1\",\n    \"metadata\": {\n        \"name\": \"kube-controller-manager\",\n        \"namespace\": \"kube-system\",\n        \"selfLink\": \"/api/v1/namespaces/kube-system/endpoints/kube-controller-manager\",\n        \"uid\": \"b9ee7a6f-8f82-11e6-b186-0050568802e1\",\n        \"creationTimestamp\": \"2016-10-11T07:17:10Z\",\n        \"annotations\": {\n            \"control-plane.alpha.kubernetes.io/leader\": \"{\\\"holderIdentity\\\":\\\"utv-kube03\\\",\\\"leaseDurationSeconds\\\":15,\\\"acquireTime\\\":\\\"2016-10-11T07:17:10Z\\\",\\\"renewTime\\\":\\\"2016-10-12T07:18:54Z\\\",\\\"leaderTransitions\\\":0}\"\n        }\n    },\n    \"subsets\": []\n}\n```\n\nThe cluster seems healthy and are scheduling pods correctly. \n",
  "closed_at": "2016-12-09T02:08:53Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 8,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/34594/comments",
  "created_at": "2016-10-12T07:31:07Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/34594/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/34594",
  "id": 182454763,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 136908839,
      "name": "area/HA",
      "node_id": "MDU6TGFiZWwxMzY5MDg4Mzk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/HA"
    },
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 136601472,
      "name": "area/controller-manager",
      "node_id": "MDU6TGFiZWwxMzY2MDE0NzI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/controller-manager"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Scheduling.",
      "id": 125550211,
      "name": "sig/scheduling",
      "node_id": "MDU6TGFiZWwxMjU1NTAyMTE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/scheduling"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/34594/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2019-08-26T17:23:42Z",
    "closed_issues": 1693,
    "created_at": "2016-11-12T00:35:38Z",
    "creator": {
      "avatar_url": "https://avatars1.githubusercontent.com/u/10052848?v=4",
      "events_url": "https://api.github.com/users/saad-ali/events{/privacy}",
      "followers_url": "https://api.github.com/users/saad-ali/followers",
      "following_url": "https://api.github.com/users/saad-ali/following{/other_user}",
      "gists_url": "https://api.github.com/users/saad-ali/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/saad-ali",
      "id": 10052848,
      "login": "saad-ali",
      "node_id": "MDQ6VXNlcjEwMDUyODQ4",
      "organizations_url": "https://api.github.com/users/saad-ali/orgs",
      "received_events_url": "https://api.github.com/users/saad-ali/received_events",
      "repos_url": "https://api.github.com/users/saad-ali/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/saad-ali/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saad-ali/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/saad-ali"
    },
    "description": "",
    "due_on": "2017-03-22T07:00:00Z",
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/31",
    "id": 2130587,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/31/labels",
    "node_id": "MDk6TWlsZXN0b25lMjEzMDU4Nw==",
    "number": 31,
    "open_issues": 0,
    "state": "closed",
    "title": "v1.6",
    "updated_at": "2019-08-26T17:23:42Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/31"
  },
  "node_id": "MDU6SXNzdWUxODI0NTQ3NjM=",
  "number": 34594,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "scheduler and controller-manager spamming logs with: \"lock is held by <server> and has not yet expired\"",
  "updated_at": "2017-03-09T16:53:59Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/34594",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/1146389?v=4",
    "events_url": "https://api.github.com/users/jonaz/events{/privacy}",
    "followers_url": "https://api.github.com/users/jonaz/followers",
    "following_url": "https://api.github.com/users/jonaz/following{/other_user}",
    "gists_url": "https://api.github.com/users/jonaz/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jonaz",
    "id": 1146389,
    "login": "jonaz",
    "node_id": "MDQ6VXNlcjExNDYzODk=",
    "organizations_url": "https://api.github.com/users/jonaz/orgs",
    "received_events_url": "https://api.github.com/users/jonaz/received_events",
    "repos_url": "https://api.github.com/users/jonaz/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jonaz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jonaz/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jonaz"
  }
}