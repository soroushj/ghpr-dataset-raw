{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/947971?v=4",
    "events_url": "https://api.github.com/users/cheftako/events{/privacy}",
    "followers_url": "https://api.github.com/users/cheftako/followers",
    "following_url": "https://api.github.com/users/cheftako/following{/other_user}",
    "gists_url": "https://api.github.com/users/cheftako/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/cheftako",
    "id": 947971,
    "login": "cheftako",
    "node_id": "MDQ6VXNlcjk0Nzk3MQ==",
    "organizations_url": "https://api.github.com/users/cheftako/orgs",
    "received_events_url": "https://api.github.com/users/cheftako/received_events",
    "repos_url": "https://api.github.com/users/cheftako/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/cheftako/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cheftako/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/cheftako"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/947971?v=4",
      "events_url": "https://api.github.com/users/cheftako/events{/privacy}",
      "followers_url": "https://api.github.com/users/cheftako/followers",
      "following_url": "https://api.github.com/users/cheftako/following{/other_user}",
      "gists_url": "https://api.github.com/users/cheftako/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/cheftako",
      "id": 947971,
      "login": "cheftako",
      "node_id": "MDQ6VXNlcjk0Nzk3MQ==",
      "organizations_url": "https://api.github.com/users/cheftako/orgs",
      "received_events_url": "https://api.github.com/users/cheftako/received_events",
      "repos_url": "https://api.github.com/users/cheftako/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/cheftako/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cheftako/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/cheftako"
    }
  ],
  "author_association": "NONE",
  "body": "/kind bug\r\n\r\n**What happened**:\r\nWhile following [Encryption at Rest guide](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/), the encryption key rotation isn't working. The secrets are still encrypted with the old key.\r\n\r\n**What you expected to happen**:\r\nThe secrets will be encrypted with the new key.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nJust follow the guide.\r\n\r\n**Anything else we need to know?**:\r\nThe cluster was installed with kubeadm v1.7.1 .\r\nThe same issue happens when trying to remove the encryption and decrypt the secrets with the actions at the end of the guide. After disabling the encryption and putting 'identity: {}' as the first encryption provider in the EncryptionConfig file the secrets still encrypted inside etcd with the old encryption key.\r\n\r\n**Environment**:\r\n- Kubernetes version: client 1.7.1, server 1.7.2\r\n- OS: ubuntu 16.04.02 desktop\r\n- Kernel: Linux laptop 4.10.0-27-generic #30~16.04.2-Ubuntu SMP Thu Jun 29 16:07:46 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n- Install tools: kubeadm v1.7.1",
  "closed_at": "2018-01-17T20:46:42Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 7,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/49565/comments",
  "created_at": "2017-07-25T12:40:57Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/49565/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/49565",
  "id": 245387796,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG API Machinery.",
      "id": 173493835,
      "name": "sig/api-machinery",
      "node_id": "MDU6TGFiZWwxNzM0OTM4MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/api-machinery"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/49565/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNDUzODc3OTY=",
  "number": 49565,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Encryption at rest key rotation is not working",
  "updated_at": "2018-01-17T20:46:42Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/49565",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/28837513?v=4",
    "events_url": "https://api.github.com/users/nopa12/events{/privacy}",
    "followers_url": "https://api.github.com/users/nopa12/followers",
    "following_url": "https://api.github.com/users/nopa12/following{/other_user}",
    "gists_url": "https://api.github.com/users/nopa12/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/nopa12",
    "id": 28837513,
    "login": "nopa12",
    "node_id": "MDQ6VXNlcjI4ODM3NTEz",
    "organizations_url": "https://api.github.com/users/nopa12/orgs",
    "received_events_url": "https://api.github.com/users/nopa12/received_events",
    "repos_url": "https://api.github.com/users/nopa12/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/nopa12/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nopa12/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/nopa12"
  }
}