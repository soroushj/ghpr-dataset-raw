{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/4876867?v=4",
    "events_url": "https://api.github.com/users/janetkuo/events{/privacy}",
    "followers_url": "https://api.github.com/users/janetkuo/followers",
    "following_url": "https://api.github.com/users/janetkuo/following{/other_user}",
    "gists_url": "https://api.github.com/users/janetkuo/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/janetkuo",
    "id": 4876867,
    "login": "janetkuo",
    "node_id": "MDQ6VXNlcjQ4NzY4Njc=",
    "organizations_url": "https://api.github.com/users/janetkuo/orgs",
    "received_events_url": "https://api.github.com/users/janetkuo/received_events",
    "repos_url": "https://api.github.com/users/janetkuo/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/janetkuo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/janetkuo/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/janetkuo"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/4876867?v=4",
      "events_url": "https://api.github.com/users/janetkuo/events{/privacy}",
      "followers_url": "https://api.github.com/users/janetkuo/followers",
      "following_url": "https://api.github.com/users/janetkuo/following{/other_user}",
      "gists_url": "https://api.github.com/users/janetkuo/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/janetkuo",
      "id": 4876867,
      "login": "janetkuo",
      "node_id": "MDQ6VXNlcjQ4NzY4Njc=",
      "organizations_url": "https://api.github.com/users/janetkuo/orgs",
      "received_events_url": "https://api.github.com/users/janetkuo/received_events",
      "repos_url": "https://api.github.com/users/janetkuo/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/janetkuo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/janetkuo/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/janetkuo"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "Seen this fairly frequently on 1.7 1 node clusters when running e2e tests.  \r\n\r\nThis code snippet:\r\n\r\n```\r\n\t\tBy(\"Check that daemon pods images are updated.\")\r\n\t\terr = wait.PollImmediate(dsRetryPeriod, dsRetryTimeout, checkDaemonPodsImageAndAvailability(c, ds, redisImage, 1))\r\n\t\tExpect(err).NotTo(HaveOccurred())\r\n```\r\n\r\nisn't safe on a 1 node cluster, because `checkDaemonPodsImageAndAvailability` can exit while there are 0 pods available, leading to the next line\r\n\r\n```\r\n\t\terr = checkDaemonPodsTemplateGeneration(c, ns, label, fmt.Sprint(templateGeneration))\r\n```\r\n\r\nfailing because `listDaemonPods` will error if zero pods are listed.\r\n\r\n```\r\n/go/src/github.com/openshift/origin/_output/local/go/src/github.com/openshift/origin/vendor/k8s.io/kubernetes/test/e2e/daemon_set.go:358\r\nExpected\r\n    <int>: 0\r\nto be >\r\n    <int>: 0\r\n/go/src/github.com/openshift/origin/_output/local/go/src/github.com/openshift/origin/vendor/k8s.io/kubernetes/test/e2e/daemon_set.go:554\r\nStandard Output\r\n\r\n[BeforeEach] [Top Level]\r\n  /go/src/github.com/openshift/origin/_output/local/go/src/github.com/openshift/origin/test/extended/util/test.go:52\r\n[BeforeEach] [k8s.io] Daemon set [Serial]\r\n  /go/src/github.com/openshift/origin/_output/local/go/src/github.com/openshift/origin/vendor/k8s.io/kubernetes/test/e2e/framework/framework.go:130\r\nSTEP: Creating a kubernetes client\r\nAug 13 22:52:18.277: INFO: >>> kubeConfig: /etc/origin/master/admin.kubeconfig\r\nSTEP: Building a namespace api object\r\nAug 13 22:52:18.347: INFO: About to run a Kube e2e test, ensuring namespace is privileged\r\nSTEP: Waiting for a default service account to be provisioned in namespace\r\n[BeforeEach] [k8s.io] Daemon set [Serial]\r\n  /go/src/github.com/openshift/origin/_output/local/go/src/github.com/openshift/origin/vendor/k8s.io/kubernetes/test/e2e/daemon_set.go:111\r\n[It] Should update pod when spec was updated and update strategy is RollingUpdate\r\n  /go/src/github.com/openshift/origin/_output/local/go/src/github.com/openshift/origin/vendor/k8s.io/kubernetes/test/e2e/daemon_set.go:358\r\nAug 13 22:52:18.398: INFO: Creating simple daemon set daemon-set with templateGeneration 999\r\nSTEP: Check that daemon pods launch on every node of the cluster.\r\nAug 13 22:52:18.405: INFO: Number of nodes with available pods: 0\r\nAug 13 22:52:18.405: INFO: Node ip-172-18-10-2.ec2.internal is running more than one daemon pod\r\nAug 13 22:52:19.409: INFO: Number of nodes with available pods: 0\r\nAug 13 22:52:19.410: INFO: Node ip-172-18-10-2.ec2.internal is running more than one daemon pod\r\nAug 13 22:52:20.413: INFO: Number of nodes with available pods: 0\r\nAug 13 22:52:20.413: INFO: Node ip-172-18-10-2.ec2.internal is running more than one daemon pod\r\nAug 13 22:52:21.409: INFO: Number of nodes with available pods: 1\r\nAug 13 22:52:21.409: INFO: Number of running nodes: 1, number of available pods: 1\r\nSTEP: Make sure all daemon pods have correct template generation 999\r\nSTEP: Update daemon pods image.\r\nSTEP: Check that daemon pods images are updated.\r\nAug 13 22:52:21.426: INFO: Wrong image for pod: daemon-set-fhrv3. Expected: gcr.io/k8s-testimages/redis:e2e, got: gcr.io/google_containers/serve_hostname:v1.4.\r\nAug 13 22:52:22.430: INFO: Wrong image for pod: daemon-set-fhrv3. Expected: gcr.io/k8s-testimages/redis:e2e, got: gcr.io/google_containers/serve_hostname:v1.4.\r\nAug 13 22:52:23.429: INFO: Wrong image for pod: daemon-set-fhrv3. Expected: gcr.io/k8s-testimages/redis:e2e, got: gcr.io/google_containers/serve_hostname:v1.4.\r\nAug 13 22:52:23.429: INFO: Pod daemon-set-fhrv3 is not available\r\nSTEP: Make sure all daemon pods have correct template generation 1000\r\n[AfterEach] [k8s.io] Daemon set [Serial]\r\n  /go/src/github.com/openshift/origin/_output/local/go/src/github.com/openshift/origin/vendor/k8s.io/kubernetes/test/e2e/daemon_set.go:95\r\nSTEP: Deleting DaemonSet \"daemon-set\" with reaper\r\nAug 13 22:52:25.461: INFO: Number of nodes with available pods: 0\r\nAug 13 22:52:25.461: INFO: Number of running nodes: 0, number of available pods: 0\r\nAug 13 22:52:25.463: INFO: daemonset: {\"kind\":\"DaemonSetList\",\"apiVersion\":\"extensions/v1beta1\",\"metadata\":{\"selfLink\":\"/apis/extensions/v1beta1/namespaces/e2e-tests-daemonsets-42k8k/daemonsets\",\"resourceVersion\":\"26990\"},\"items\":null}\r\n\r\nAug 13 22:52:25.467: INFO: pods: {\"kind\":\"PodList\",\"apiVersion\":\"v1\",\"metadata\":{\"selfLink\":\"/api/v1/namespaces/e2e-tests-daemonsets-42k8k/pods\",\"resourceVersion\":\"26990\"},\"items\":[{\"metadata\":{\"name\":\"daemon-set-56582\",\"generateName\":\"daemon-set-\",\"namespace\":\"e2e-tests-daemonsets-42k8k\",\"selfLink\":\"/api/v1/namespaces/e2e-tests-daemonsets-42k8k/pods/daemon-set-56582\",\"uid\":\"99a96161-809b-11e7-9b8d-0e135d60f09a\",\"resourceVersion\":\"26986\",\"creationTimestamp\":\"2017-08-14T02:52:24Z\",\"deletionTimestamp\":\"2017-08-14T02:52:54Z\",\"deletionGracePeriodSeconds\":30,\"labels\":{\"controller-revision-hash\":\"2538072950\",\"daemonset-name\":\"daemon-set\",\"pod-template-generation\":\"1000\"},\"annotations\":{\"kubernetes.io/created-by\":\"{\\\"kind\\\":\\\"SerializedReference\\\",\\\"apiVersion\\\":\\\"v1\\\",\\\"reference\\\":{\\\"kind\\\":\\\"DaemonSet\\\",\\\"namespace\\\":\\\"e2e-tests-daemonsets-42k8k\\\",\\\"name\\\":\\\"daemon-set\\\",\\\"uid\\\":\\\"960fc6c1-809b-11e7-9b8d-0e135d60f09a\\\",\\\"apiVersion\\\":\\\"extensions\\\",\\\"resourceVersion\\\":\\\"26974\\\"}}\\n\",\"openshift.io/scc\":\"anyuid\"},\"ownerReferences\":[{\"apiVersion\":\"extensions/v1beta1\",\"kind\":\"DaemonSet\",\"name\":\"daemon-set\",\"uid\":\"960fc6c1-809b-11e7-9b8d-0e135d60f09a\",\"controller\":true,\"blockOwnerDeletion\":true}]},\"spec\":{\"volumes\":[{\"name\":\"default-token-3bszl\",\"secret\":{\"secretName\":\"default-token-3bszl\",\"defaultMode\":420}}],\"containers\":[{\"name\":\"app\",\"image\":\"gcr.io/k8s-testimages/redis:e2e\",\"ports\":[{\"containerPort\":9376,\"protocol\":\"TCP\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"default-token-3bszl\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"IfNotPresent\",\"securityContext\":{\"capabilities\":{\"drop\":[\"MKNOD\",\"SYS_CHROOT\"]},\"privileged\":false,\"seLinuxOptions\":{\"level\":\"s0:c50,c5\"}}}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"default\",\"serviceAccount\":\"default\",\"nodeName\":\"ip-172-18-10-2.ec2.internal\",\"securityContext\":{\"seLinuxOptions\":{\"level\":\"s0:c50,c5\"}},\"imagePullSecrets\":[{\"name\":\"default-dockercfg-vjpmg\"}],\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.alpha.kubernetes.io/notReady\",\"operator\":\"Exists\",\"effect\":\"NoExecute\"},{\"key\":\"node.alpha.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\"}]},\"status\":{\"phase\":\"Pending\",\"conditions\":[{\"type\":\"Initialized\",\"status\":\"True\",\"lastProbeTime\":null,\"lastTransitionTime\":\"2017-08-14T02:52:24Z\"},{\"type\":\"Ready\",\"status\":\"False\",\"lastProbeTime\":null,\"lastTransitionTime\":\"2017-08-14T02:52:24Z\",\"reason\":\"ContainersNotReady\",\"message\":\"containers with unready status: [app]\"}],\"hostIP\":\"172.18.10.2\",\"startTime\":\"2017-08-14T02:52:24Z\",\"containerStatuses\":[{\"name\":\"app\",\"state\":{\"terminated\":{\"exitCode\":0,\"startedAt\":null,\"finishedAt\":null}},\"lastState\":{},\"ready\":false,\"restartCount\":0,\"image\":\"gcr.io/k8s-testimages/redis:e2e\",\"imageID\":\"\"}],\"qosClass\":\"BestEffort\"}}]}\r\n\r\n[AfterEach] [k8s.io] Daemon set [Serial]\r\n```",
  "closed_at": "2017-11-02T04:25:10Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50586/comments",
  "created_at": "2017-08-14T05:37:12Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50586/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/50586",
  "id": 249936911,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 105152717,
      "name": "area/test",
      "node_id": "MDU6TGFiZWwxMDUxNTI3MTc=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/test"
    },
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 410265116,
      "name": "area/workload-api/daemonset",
      "node_id": "MDU6TGFiZWw0MTAyNjUxMTY=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/workload-api/daemonset"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Apps.",
      "id": 404091735,
      "name": "sig/apps",
      "node_id": "MDU6TGFiZWw0MDQwOTE3MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/apps"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50586/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNDk5MzY5MTE=",
  "number": 50586,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Some DaemonSet e2e tests can fail on single node clusters",
  "updated_at": "2017-11-02T04:25:10Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50586",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1163175?v=4",
    "events_url": "https://api.github.com/users/smarterclayton/events{/privacy}",
    "followers_url": "https://api.github.com/users/smarterclayton/followers",
    "following_url": "https://api.github.com/users/smarterclayton/following{/other_user}",
    "gists_url": "https://api.github.com/users/smarterclayton/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/smarterclayton",
    "id": 1163175,
    "login": "smarterclayton",
    "node_id": "MDQ6VXNlcjExNjMxNzU=",
    "organizations_url": "https://api.github.com/users/smarterclayton/orgs",
    "received_events_url": "https://api.github.com/users/smarterclayton/received_events",
    "repos_url": "https://api.github.com/users/smarterclayton/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/smarterclayton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/smarterclayton/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/smarterclayton"
  }
}