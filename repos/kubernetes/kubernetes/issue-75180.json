{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/4178417?v=4",
    "events_url": "https://api.github.com/users/andyzhangx/events{/privacy}",
    "followers_url": "https://api.github.com/users/andyzhangx/followers",
    "following_url": "https://api.github.com/users/andyzhangx/following{/other_user}",
    "gists_url": "https://api.github.com/users/andyzhangx/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/andyzhangx",
    "id": 4178417,
    "login": "andyzhangx",
    "node_id": "MDQ6VXNlcjQxNzg0MTc=",
    "organizations_url": "https://api.github.com/users/andyzhangx/orgs",
    "received_events_url": "https://api.github.com/users/andyzhangx/received_events",
    "repos_url": "https://api.github.com/users/andyzhangx/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/andyzhangx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andyzhangx/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/andyzhangx"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/4178417?v=4",
      "events_url": "https://api.github.com/users/andyzhangx/events{/privacy}",
      "followers_url": "https://api.github.com/users/andyzhangx/followers",
      "following_url": "https://api.github.com/users/andyzhangx/following{/other_user}",
      "gists_url": "https://api.github.com/users/andyzhangx/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andyzhangx",
      "id": 4178417,
      "login": "andyzhangx",
      "node_id": "MDQ6VXNlcjQxNzg0MTc=",
      "organizations_url": "https://api.github.com/users/andyzhangx/orgs",
      "received_events_url": "https://api.github.com/users/andyzhangx/received_events",
      "repos_url": "https://api.github.com/users/andyzhangx/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andyzhangx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andyzhangx/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andyzhangx"
    }
  ],
  "author_association": "NONE",
  "body": "<!-- Please use this template while reporting a bug and provide as much info as possible. Not doing so may result in your bug not being addressed in a timely manner. Thanks!\r\n\r\nIf the matter is security related, please disclose it privately via https://kubernetes.io/security/\r\n-->\r\n\r\n\r\n**What happened**:\r\nI am using Windows containers (Server Core ltsc 2019). These all have volumes mounted to three different Azure file shares under a single storage account. Multiple instances of these containers run on each node. On deploying the containers I get the following errors. Sometimes this does manage to resolve itself. \r\n\r\nMountVolume.SetUp failed for volume \"log-share\" : Remove-SmbGlobalMapping failed: exit status 1, output: \"Remove-SmbGlobalMapping : No MSFT_SmbGlobalMapping objects found with property 'RemotePath' equal to \\r\\n'\\\\\\\\storageaccounturl\\\\logs'. Verify the value of the property and retry.\\r\\nAt line:1 char:1\\r\\n+ Remove-SmbGlobalMapping -RemotePath $Env:smbremotepath -Force\\r\\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\\r\\n + CategoryInfo : ObjectNotFound: (\\\\\\\\storageaccounturl\\\\logs:String) [Remove-SmbGlobalMapping], Ci \\r\\n mJobException\\r\\n + FullyQualifiedErrorId : CmdletizationQuery_NotFound_RemotePath,Remove-SmbGlobalMapping\\r\\n \\r\\n\"\r\n\r\n\r\nMountVolume.SetUp failed for volume \"config-share\" : New-SmbGlobalMapping failed: exit status 1, output: \"New-SmbGlobalMapping : Generic failure \\r\\nAt line:1 char:190\\r\\n+ ... ser, $PWord;New-SmbGlobalMapping -RemotePath $Env:smbremotepath -Cred ...\\r\\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\\r\\n + CategoryInfo : NotSpecified: (MSFT_SmbGlobalMapping:ROOT/Microsoft/...mbGlobalMapping) [New-SmbGlobalMa \\r\\n pping], CimException\\r\\n + FullyQualifiedErrorId : HRESULT 0x80041001,New-SmbGlobalMapping\\r\\n \\r\\n\"\r\n\r\n\r\n**What you expected to happen**:\r\nFor the volumes to be mounted. This all worked ok in k8s 1.12.1 using Windows 1803. I have now upgraded to 1.13.4 and Windows ltsc2019.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nUse aks-engine to create a 1.13.4 cluster with Windows nodes\r\nCreate a storage account\r\nCreate multiple file shares under the account.\r\nAdd access credentials to the storage account as a secret on k8s\r\nCreate a windows container with folders that will be used to mount the Azure storage account file shares.\r\nDeploy to k8s defining volume mounts and volumes in the container section of the deployment\r\ne.g.\r\n        volumeMounts:\r\n        - name: folder1-share\r\n          mountPath: \"c:\\\\app\\folder1\"\r\n        - name: folder2-share\r\n          mountPath: \"c:\\\\app\\\\folder2\"\r\n      volumes:\r\n      - name: folder1-share\r\n        azureFile:\r\n          secretName: azure-file-share-cred\r\n          shareName: share1\r\n          readOnly: false        \r\n      - name: folder2-share\r\n        azureFile:\r\n          secretName: azure-file-share-cred\r\n          shareName: share2\r\n          readOnly: true\r\n\r\n**Anything else we need to know?**:\r\nThis maybe related to the fix for https://github.com/kubernetes/kubernetes/issues/73087\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): 1.13.4\r\n- Cloud provider or hardware configuration: Azure\r\n- OS (e.g: `cat /etc/os-release`): Windows 2019 \r\n- Kernel (e.g. `uname -a`): 10.0.17763.316\r\n- Install tools: aks-engine 0.13.2\r\n- Others:\r\n",
  "closed_at": "2019-03-18T20:40:22Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 5,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/75180/comments",
  "created_at": "2019-03-08T13:01:49Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/75180/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/75180",
  "id": 418777811,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Windows.",
      "id": 422106010,
      "name": "sig/windows",
      "node_id": "MDU6TGFiZWw0MjIxMDYwMTA=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/windows"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/75180/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MTg3Nzc4MTE=",
  "number": 75180,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Failure to mount/remount Azure files",
  "updated_at": "2019-03-18T20:40:22Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/75180",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/38723955?v=4",
    "events_url": "https://api.github.com/users/harshaperera532/events{/privacy}",
    "followers_url": "https://api.github.com/users/harshaperera532/followers",
    "following_url": "https://api.github.com/users/harshaperera532/following{/other_user}",
    "gists_url": "https://api.github.com/users/harshaperera532/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/harshaperera532",
    "id": 38723955,
    "login": "harshaperera532",
    "node_id": "MDQ6VXNlcjM4NzIzOTU1",
    "organizations_url": "https://api.github.com/users/harshaperera532/orgs",
    "received_events_url": "https://api.github.com/users/harshaperera532/received_events",
    "repos_url": "https://api.github.com/users/harshaperera532/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/harshaperera532/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/harshaperera532/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/harshaperera532"
  }
}