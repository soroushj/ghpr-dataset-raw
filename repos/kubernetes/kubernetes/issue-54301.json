{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "As part of the effort to make Kubernetes API types and machinery more consumable, we are attempting to decouple the code generators from the main Kubernetes API codebase.\r\n\r\nWith the introduction of the new code generation scripts in https://github.com/kubernetes/kubernetes/pull/52186, we made it easy for external projects to consume generators and generate code for their own API groups.\r\n\r\nHowever, when running these generators against my types, the default value of `--extra-peer-dirs` includes `k8s.io/kubernetes/pkg/api` and `k8s.io/kubernetes/pkg/api/v1` (here: https://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/code-generator/cmd/conversion-gen/main.go#L55-L56). This causes the conversion generator to panic if this repo path isn't available, which in my project it is not (to save having to vendor the entire k8s source tree).\r\n\r\nI understand the need to include these extra peer dirs is so that we can generate conversions when one of my own types references the core API types, however none of my types do this.\r\n\r\nI see a few courses of actions:\r\n\r\n* Update conversion-gen to not panic if it cannot find a directory listed in --extra-peer-dirs\r\n* Update conversion-gen defaults to not include `k8s.io/kubernetes/pkg/api` and `k8s.io/kubernetes/pkg/api/v1` (which is breaking, and raises the question: \"what constitutes something that makes sense to be default here?\")\r\n* Update the generate-*-groups.sh script to somehow accept args just for one of the generators (so that we can pass --extra-peer-dirs to the generator without breaking calls to *other* types of generator that don't include the `--extra-peer-dirs` flag)\r\n\r\nFor the time being, I am calling the generate scripts twice in my `update-client-gen` script (see: https://github.com/jetstack-experimental/navigator/blob/6a8477646109a002f3fc5e2846f0e8bd2f5ec51f/hack/update-client-gen.sh#L12-L23)\r\n\r\n/sig api-machinery\r\n/cc @sttts @nikhita @hongchaodeng",
  "closed_at": "2017-11-03T16:07:46Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 1,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/54301/comments",
  "created_at": "2017-10-20T15:25:09Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/54301/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/54301",
  "id": 267212536,
  "labels": [
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG API Machinery.",
      "id": 173493835,
      "name": "sig/api-machinery",
      "node_id": "MDU6TGFiZWwxNzM0OTM4MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/api-machinery"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/54301/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNjcyMTI1MzY=",
  "number": 54301,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "conversion-gen --extra-peer-dirs references k8s.io/kubernetes types",
  "updated_at": "2017-11-03T16:07:46Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/54301",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/203583?v=4",
    "events_url": "https://api.github.com/users/munnerz/events{/privacy}",
    "followers_url": "https://api.github.com/users/munnerz/followers",
    "following_url": "https://api.github.com/users/munnerz/following{/other_user}",
    "gists_url": "https://api.github.com/users/munnerz/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/munnerz",
    "id": 203583,
    "login": "munnerz",
    "node_id": "MDQ6VXNlcjIwMzU4Mw==",
    "organizations_url": "https://api.github.com/users/munnerz/orgs",
    "received_events_url": "https://api.github.com/users/munnerz/received_events",
    "repos_url": "https://api.github.com/users/munnerz/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/munnerz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/munnerz/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/munnerz"
  }
}