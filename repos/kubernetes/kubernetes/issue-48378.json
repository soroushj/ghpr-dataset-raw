{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "BUG REPORT: (I think?)\r\n\r\n**What happened**:\r\n\r\nI ran the following steps on Ubuntu 16.04:\r\n\r\n1. `sudo apt-get update`\r\n1. `sudo apt-get upgrade`\r\n1. `sudo su`\r\n1. `kubeadm reset`\r\n1. `kubeadm init --token [redacted] --apiserver-advertise-address=192.168.13.1 --pod-network-cidr=10.244.0.0/16`\r\n1. `exit`\r\n1. `mkdir -p $HOME/.kube`\r\n1. `sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config`\r\n1. `sudo chown $(id -u):$(id -g) $HOME/.kube/config`\r\n1. `kubectl get nodes`\r\n\r\nUpon doing this, I receive:\r\n\r\n```\r\nUnable to connect to the server: x509: certificate signed by unknown authority (possibly because of \"crypto/rsa: verification error\" while trying to verify candidate authority certificate \"kubernetes\")\r\n```\r\n\r\nI've tried uninstalling `kubectl`, `kubeadm` and `kubelet` a couple of times (even with `--purge`) and no matter what I do, it (kubeadm 1.7) doesn't generate a working `admin.conf`. However, I run the following:\r\n\r\n`curl --cacert /etc/kubernetes/pki/ca.crt --cert /etc/kubernetes/pki/apiserver-kubelet-client.crt --key /etc/kubernetes/pki/apiserver-kubelet-client.key https://192.168.13.1:6443`\r\n\r\nand get:\r\n\r\n```\r\n{\r\n  \"paths\": [\r\n    \"/api\",\r\n    \"/api/v1\",\r\n    \"/apis\",\r\n    \"/apis/\",\r\n    \"/apis/apiextensions.k8s.io\",\r\n    \"/apis/apiextensions.k8s.io/v1beta1\",\r\n    \"/apis/apiregistration.k8s.io\",\r\n    \"/apis/apiregistration.k8s.io/v1beta1\",\r\n    \"/apis/apps\",\r\n    \"/apis/apps/v1beta1\",\r\n    \"/apis/authentication.k8s.io\",\r\n    \"/apis/authentication.k8s.io/v1\",\r\n    \"/apis/authentication.k8s.io/v1beta1\",\r\n    \"/apis/authorization.k8s.io\",\r\n    \"/apis/authorization.k8s.io/v1\",\r\n    \"/apis/authorization.k8s.io/v1beta1\",\r\n    \"/apis/autoscaling\",\r\n    \"/apis/autoscaling/v1\",\r\n    \"/apis/batch\",\r\n    \"/apis/batch/v1\",\r\n    \"/apis/certificates.k8s.io\",\r\n    \"/apis/certificates.k8s.io/v1beta1\",\r\n    \"/apis/extensions\",\r\n    \"/apis/extensions/v1beta1\",\r\n    \"/apis/networking.k8s.io\",\r\n    \"/apis/networking.k8s.io/v1\",\r\n    \"/apis/policy\",\r\n    \"/apis/policy/v1beta1\",\r\n    \"/apis/rbac.authorization.k8s.io\",\r\n    \"/apis/rbac.authorization.k8s.io/v1alpha1\",\r\n    \"/apis/rbac.authorization.k8s.io/v1beta1\",\r\n    \"/apis/settings.k8s.io\",\r\n    \"/apis/settings.k8s.io/v1alpha1\",\r\n    \"/apis/storage.k8s.io\",\r\n    \"/apis/storage.k8s.io/v1\",\r\n    \"/apis/storage.k8s.io/v1beta1\",\r\n    \"/healthz\",\r\n    \"/healthz/autoregister-completion\",\r\n    \"/healthz/ping\",\r\n    \"/healthz/poststarthook/apiservice-registration-controller\",\r\n    \"/healthz/poststarthook/apiservice-status-available-controller\",\r\n    \"/healthz/poststarthook/bootstrap-controller\",\r\n    \"/healthz/poststarthook/ca-registration\",\r\n    \"/healthz/poststarthook/extensions/third-party-resources\",\r\n    \"/healthz/poststarthook/generic-apiserver-start-informers\",\r\n    \"/healthz/poststarthook/kube-apiserver-autoregistration\",\r\n    \"/healthz/poststarthook/rbac/bootstrap-roles\",\r\n    \"/healthz/poststarthook/start-apiextensions-controllers\",\r\n    \"/healthz/poststarthook/start-apiextensions-informers\",\r\n    \"/healthz/poststarthook/start-kube-aggregator-informers\",\r\n    \"/healthz/poststarthook/start-kube-apiserver-informers\",\r\n    \"/logs\",\r\n    \"/metrics\",\r\n    \"/swagger-2.0.0.json\",\r\n    \"/swagger-2.0.0.pb-v1\",\r\n    \"/swagger-2.0.0.pb-v1.gz\",\r\n    \"/swagger.json\",\r\n    \"/swaggerapi\",\r\n    \"/ui\",\r\n    \"/ui/\",\r\n    \"/version\"\r\n  ]\r\n}\r\n```\r\n\r\n**What you expected to happen**:\r\n\r\nAfter initializing the master via `kubeadm init`, I expected to be able to use `kubectl` to install a network plugin; since it `x509`'s, I cannot do that.\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): 1.7\r\n- OS (e.g. from /etc/os-release): Ubuntu 16.04.2 LTS\r\n- Kernel (e.g. `uname -a`): Linux radium-control 4.4.0-83-generic #106-Ubuntu SMP Mon Jun 26 17:54:43 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux",
  "closed_at": "2017-08-22T17:48:15Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 27,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48378/comments",
  "created_at": "2017-07-01T04:18:55Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48378/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/48378",
  "id": 239925763,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 451459590,
      "name": "area/kubeadm",
      "node_id": "MDU6TGFiZWw0NTE0NTk1OTA=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/kubeadm"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Cluster Lifecycle.",
      "id": 173494222,
      "name": "sig/cluster-lifecycle",
      "node_id": "MDU6TGFiZWwxNzM0OTQyMjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/cluster-lifecycle"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48378/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMzk5MjU3NjM=",
  "number": 48378,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "x509 cert issues after kubeadm init",
  "updated_at": "2020-08-21T17:52:41Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48378",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/1470571?v=4",
    "events_url": "https://api.github.com/users/carldanley/events{/privacy}",
    "followers_url": "https://api.github.com/users/carldanley/followers",
    "following_url": "https://api.github.com/users/carldanley/following{/other_user}",
    "gists_url": "https://api.github.com/users/carldanley/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/carldanley",
    "id": 1470571,
    "login": "carldanley",
    "node_id": "MDQ6VXNlcjE0NzA1NzE=",
    "organizations_url": "https://api.github.com/users/carldanley/orgs",
    "received_events_url": "https://api.github.com/users/carldanley/received_events",
    "repos_url": "https://api.github.com/users/carldanley/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/carldanley/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/carldanley/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/carldanley"
  }
}