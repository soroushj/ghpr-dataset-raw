{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "The apiserver listens, by default, on 127.0.01:8080 in a completely insecure manor. Even if the scheduler, controller-manager, proxies, kubelets, etc are all configured to use the secure port the apiserver still talks to itself on the insecure port.\n\nhttps://github.com/kubernetes/kubernetes/blob/master/cmd/kube-apiserver/app/server.go#L340\n\nThis is how things like the admission controllers (part of the apiserver) talk to other parts of the apiserver. The problem with having the apiserver talk to itself over the insecure port is that means we cannot block the insecure port from everything else on the host. Any user able to log into the machine running the api-server can connect to the insecure port and do anything they want. Blocking all access to 8080 with iptables means admission controllers and such stop working.\n\nThere may be many solutions, but the basic problem is I want to turn off all insecure access to the apiserver.\n\n@liggitt suggested some form of privileged kubeconfig the apiserver would use to talk to itself\n\nIt might also be possible to create a unix domain socket pair which only the apiserver could use to talk to itself in an 'insecure' manor similar to how it is currently using the insecure socket, but which everyone else on the host couldn't use.\n",
  "closed_at": "2016-09-22T04:31:56Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 18,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/13598/comments",
  "created_at": "2015-09-04T16:04:40Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/13598/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/13598",
  "id": 104919893,
  "labels": [
    {
      "color": "eb6420",
      "default": false,
      "description": "Must be staffed and worked on either currently, or very soon, ideally in time for the next release.",
      "id": 114528223,
      "name": "priority/important-soon",
      "node_id": "MDU6TGFiZWwxMTQ1MjgyMjM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/important-soon"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG API Machinery.",
      "id": 173493835,
      "name": "sig/api-machinery",
      "node_id": "MDU6TGFiZWwxNzM0OTM4MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/api-machinery"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/13598/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": null,
    "closed_issues": 587,
    "created_at": "2016-01-16T17:58:20Z",
    "creator": {
      "avatar_url": "https://avatars1.githubusercontent.com/u/7725777?v=4",
      "events_url": "https://api.github.com/users/bgrant0607/events{/privacy}",
      "followers_url": "https://api.github.com/users/bgrant0607/followers",
      "following_url": "https://api.github.com/users/bgrant0607/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgrant0607/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/bgrant0607",
      "id": 7725777,
      "login": "bgrant0607",
      "node_id": "MDQ6VXNlcjc3MjU3Nzc=",
      "organizations_url": "https://api.github.com/users/bgrant0607/orgs",
      "received_events_url": "https://api.github.com/users/bgrant0607/received_events",
      "repos_url": "https://api.github.com/users/bgrant0607/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/bgrant0607/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgrant0607/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/bgrant0607"
    },
    "description": "Candidates for the next milestone",
    "due_on": null,
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/17",
    "id": 1510379,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/17/labels",
    "node_id": "MDk6TWlsZXN0b25lMTUxMDM3OQ==",
    "number": 17,
    "open_issues": 34,
    "state": "open",
    "title": "next-candidate",
    "updated_at": "2020-08-28T02:07:27Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/17"
  },
  "node_id": "MDU6SXNzdWUxMDQ5MTk4OTM=",
  "number": 13598,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Impossible to completely eliminate insecure access to apiserver",
  "updated_at": "2016-09-22T08:41:54Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/13598",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/8093535?v=4",
    "events_url": "https://api.github.com/users/eparis/events{/privacy}",
    "followers_url": "https://api.github.com/users/eparis/followers",
    "following_url": "https://api.github.com/users/eparis/following{/other_user}",
    "gists_url": "https://api.github.com/users/eparis/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/eparis",
    "id": 8093535,
    "login": "eparis",
    "node_id": "MDQ6VXNlcjgwOTM1MzU=",
    "organizations_url": "https://api.github.com/users/eparis/orgs",
    "received_events_url": "https://api.github.com/users/eparis/received_events",
    "repos_url": "https://api.github.com/users/eparis/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/eparis/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eparis/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/eparis"
  }
}