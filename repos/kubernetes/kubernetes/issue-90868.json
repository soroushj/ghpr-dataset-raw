{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/22076?v=4",
    "events_url": "https://api.github.com/users/pohly/events{/privacy}",
    "followers_url": "https://api.github.com/users/pohly/followers",
    "following_url": "https://api.github.com/users/pohly/following{/other_user}",
    "gists_url": "https://api.github.com/users/pohly/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pohly",
    "id": 22076,
    "login": "pohly",
    "node_id": "MDQ6VXNlcjIyMDc2",
    "organizations_url": "https://api.github.com/users/pohly/orgs",
    "received_events_url": "https://api.github.com/users/pohly/received_events",
    "repos_url": "https://api.github.com/users/pohly/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pohly/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pohly/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pohly"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/22076?v=4",
      "events_url": "https://api.github.com/users/pohly/events{/privacy}",
      "followers_url": "https://api.github.com/users/pohly/followers",
      "following_url": "https://api.github.com/users/pohly/following{/other_user}",
      "gists_url": "https://api.github.com/users/pohly/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/pohly",
      "id": 22076,
      "login": "pohly",
      "node_id": "MDQ6VXNlcjIyMDc2",
      "organizations_url": "https://api.github.com/users/pohly/orgs",
      "received_events_url": "https://api.github.com/users/pohly/received_events",
      "repos_url": "https://api.github.com/users/pohly/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/pohly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pohly/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/pohly"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "<!-- Please use this template while reporting a bug and provide as much info as possible. Not doing so may result in your bug not being addressed in a timely manner. Thanks!\r\n\r\nIf the matter is security related, please disclose it privately via https://kubernetes.io/security/\r\n-->\r\n\r\n**What happened**: \r\nOn running kubetest with external storage driver option with driver name \"pd.csi.storage.gke.io\", encountered error of flag redefinition.\r\nThe issue happens because:\r\nAs part of this patch https://github.com/kubernetes/kubernetes/commit/7d2ad805a975b5a68e84a650aba92895441170b7, a flag is defined for number of inline volumes.\r\nThe driver name is used to construct the flag name.\r\n\r\nThus, when running tests on an externally provided driver (in this instance the Persistent Disk CSI driver) with driver name \"pd.csi.storage.gke.io\", a redefinition error happens since the ephemeral test suite code path is executed once for https://github.com/kubernetes/kubernetes/blob/master/test/e2e/storage/drivers/csi.go \r\nand once for \r\nExternal PD CSI driver.\r\n[example run command: \r\nkubetest --test --check-version-skew=false --test_args=\"--ginkgo.focus=External.*Storage.*snapshot --storage.testdriver=/path/to/gcp-compute-persistent-disk-csi-driver/test/k8s-integration/config/test-config.yaml\"\r\n\r\nTest config looks something like this:\r\n{\r\nStorageClass:\r\n  FromFile: ...\r\nSnapshotClass:\r\n  FromFile: ...\r\nDriverInfo:\r\n  Name: pd.csi.storage.gke.io\r\n...\r\n}\r\n]\r\n\r\n**What you expected to happen**:\r\nTest should run and succeed.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nUse an test-config.yaml, with driver name as \"pd.csi.storage.gke.io\", and run kubetest with focus as \"External.Storage\"\r\n\r\nkubetest --test --check-version-skew=false --test_args=\"--ginkgo.focus=External.*Storage.*snapshot --storage.testdriver=/path/to/gcp-compute-persistent-disk-csi-driver/test/k8s-integration/config/test-config.yaml\"\r\n\r\n**Anything else we need to know?**:\r\nPossible fixes options:\r\n1. In, external.go (https://github.com/kubernetes/kubernetes/blob/master/test/e2e/storage/external/external.go#L343), when using a FromFile or FromExistingClassName option to pass in SnapshotClass information, pickup the provisioner name from the class definition's \"driver\" field.\r\n\r\n2. Remove the flag which has a dependency on driver names. (need to understand the impact of removing the command line flag)\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): latest master\r\n- Cloud provider or hardware configuration:\r\n- OS (e.g: `cat /etc/os-release`):\r\n- Kernel (e.g. `uname -a`):\r\n- Install tools:\r\n- Network plugin and version (if this is a network-related bug):\r\n- Others:\r\n",
  "closed_at": null,
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 12,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/90868/comments",
  "created_at": "2020-05-07T23:39:04Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/90868/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/90868",
  "id": 614408856,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/90868/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU2MTQ0MDg4NTY=",
  "number": 90868,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "open",
  "title": "ephemeral test suites encounter flag redefine error",
  "updated_at": "2020-09-08T23:03:25Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/90868",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/63082967?v=4",
    "events_url": "https://api.github.com/users/saikat-royc/events{/privacy}",
    "followers_url": "https://api.github.com/users/saikat-royc/followers",
    "following_url": "https://api.github.com/users/saikat-royc/following{/other_user}",
    "gists_url": "https://api.github.com/users/saikat-royc/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/saikat-royc",
    "id": 63082967,
    "login": "saikat-royc",
    "node_id": "MDQ6VXNlcjYzMDgyOTY3",
    "organizations_url": "https://api.github.com/users/saikat-royc/orgs",
    "received_events_url": "https://api.github.com/users/saikat-royc/received_events",
    "repos_url": "https://api.github.com/users/saikat-royc/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/saikat-royc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/saikat-royc/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/saikat-royc"
  }
}