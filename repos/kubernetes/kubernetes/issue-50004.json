{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/19172805?v=4",
    "events_url": "https://api.github.com/users/jingxu97/events{/privacy}",
    "followers_url": "https://api.github.com/users/jingxu97/followers",
    "following_url": "https://api.github.com/users/jingxu97/following{/other_user}",
    "gists_url": "https://api.github.com/users/jingxu97/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jingxu97",
    "id": 19172805,
    "login": "jingxu97",
    "node_id": "MDQ6VXNlcjE5MTcyODA1",
    "organizations_url": "https://api.github.com/users/jingxu97/orgs",
    "received_events_url": "https://api.github.com/users/jingxu97/received_events",
    "repos_url": "https://api.github.com/users/jingxu97/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jingxu97/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jingxu97/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jingxu97"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/19172805?v=4",
      "events_url": "https://api.github.com/users/jingxu97/events{/privacy}",
      "followers_url": "https://api.github.com/users/jingxu97/followers",
      "following_url": "https://api.github.com/users/jingxu97/following{/other_user}",
      "gists_url": "https://api.github.com/users/jingxu97/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jingxu97",
      "id": 19172805,
      "login": "jingxu97",
      "node_id": "MDQ6VXNlcjE5MTcyODA1",
      "organizations_url": "https://api.github.com/users/jingxu97/orgs",
      "received_events_url": "https://api.github.com/users/jingxu97/received_events",
      "repos_url": "https://api.github.com/users/jingxu97/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jingxu97/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jingxu97/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jingxu97"
    }
  ],
  "author_association": "NONE",
  "body": "/kind bug\r\n\r\n**What happened**:\r\nI've been using kubernetes 1.5.2 and docker 1.12.6 without any major problems. However, after upgrading to kubernetes version 1.7.2 volumes remain attached to nodes when they became unavailable (powered off), preventing the volume from being attached to another node.\r\n\r\nAccording to the logs on master nodes, kubernetes is trying to detach the volume, but an error occurs (Error: Volume not attached according to node status for volume ...). Relevant log message follows:\r\n\r\n`Operation for \"\\\"kubernetes.io/cinder/5cfe60d7-0b82-4933-9e69-aeb2cbd2521d\\\"\" failed. No retries permitted until 2017-08-01 17:53:01.154312563 +0100 WEST (durationBeforeRetry 32s). Error: Volume not attached according to node status for volume \"pvc-21b92fac-76d5-11e7-90b6-fa163e4b4ca8\" (UniqueName: \"kubernetes.io/cinder/5cfe60d7-0b82-4933-9e69-aeb2cbd2521d\") pod \"smartiot-kafka-0\" (UID: \"bac7a5a8-76d9-11e7-90b6-fa163e4b4ca8\")\r\nAug 01 17:52:35 smartiot-node1.c.ptin.corppt.com kubelet[1146]: W0801 `\r\n\r\nThe volume remains attached to the unavaiable node, because kubernetes fails to mount the volume in another node, with the error: (Multi-Attach error for volume <volume-id>....). Accesing openstack console I can also confirm the the given volume remains attached to the unavailable node.\r\n\r\n\r\n**What you expected to happen**:\r\nVolumes attached to unavailable nodes being detached, so they can be attached to available nodes.  \r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nCreate a pod that claims a persistent volume using the cinder volume plugin.\r\n\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`):\r\nClient Version: version.Info{Major:\"1\", Minor:\"7\", GitVersion:\"v1.7.2\", GitCommit:\"922a86cfcd65915a9b2f69f3f193b8907d741d9c\", GitTreeState:\"clean\", BuildDate:\"2017-07-21T08:23:22Z\", GoVersion:\"go1.8.3\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"7\", GitVersion:\"v1.7.2\", GitCommit:\"922a86cfcd65915a9b2f69f3f193b8907d741d9c\", GitTreeState:\"clean\", BuildDate:\"2017-07-21T08:08:00Z\", GoVersion:\"go1.8.3\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n\r\n- Cloud provider or hardware configuration**:\r\nOpenstack Mitaka\r\n- OS (e.g. from /etc/os-release):\r\nNAME=\"CentOS Linux\"\r\nVERSION=\"7 (Core)\"\r\nID=\"centos\"\r\n- Kernel (e.g. `uname -a`):\r\nLinux node1 3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12 15:04:24 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n- Install tools:\r\n- Others:\r\n",
  "closed_at": "2018-01-11T12:24:10Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 18,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50004/comments",
  "created_at": "2017-08-02T08:26:55Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50004/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/50004",
  "id": 247310788,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": "Issues or PRs related to openstack provider",
      "id": 239914558,
      "name": "area/provider/openstack",
      "node_id": "MDU6TGFiZWwyMzk5MTQ1NTg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/provider/openstack"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50004/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNDczMTA3ODg=",
  "number": 50004,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "cinder volumes not being detached",
  "updated_at": "2018-01-11T12:24:10Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50004",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/414827?v=4",
    "events_url": "https://api.github.com/users/ralberto/events{/privacy}",
    "followers_url": "https://api.github.com/users/ralberto/followers",
    "following_url": "https://api.github.com/users/ralberto/following{/other_user}",
    "gists_url": "https://api.github.com/users/ralberto/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ralberto",
    "id": 414827,
    "login": "ralberto",
    "node_id": "MDQ6VXNlcjQxNDgyNw==",
    "organizations_url": "https://api.github.com/users/ralberto/orgs",
    "received_events_url": "https://api.github.com/users/ralberto/received_events",
    "repos_url": "https://api.github.com/users/ralberto/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ralberto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ralberto/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ralberto"
  }
}