{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/5331316?v=4",
    "events_url": "https://api.github.com/users/tnqn/events{/privacy}",
    "followers_url": "https://api.github.com/users/tnqn/followers",
    "following_url": "https://api.github.com/users/tnqn/following{/other_user}",
    "gists_url": "https://api.github.com/users/tnqn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/tnqn",
    "id": 5331316,
    "login": "tnqn",
    "node_id": "MDQ6VXNlcjUzMzEzMTY=",
    "organizations_url": "https://api.github.com/users/tnqn/orgs",
    "received_events_url": "https://api.github.com/users/tnqn/received_events",
    "repos_url": "https://api.github.com/users/tnqn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/tnqn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tnqn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/tnqn"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/419322?v=4",
      "events_url": "https://api.github.com/users/robscott/events{/privacy}",
      "followers_url": "https://api.github.com/users/robscott/followers",
      "following_url": "https://api.github.com/users/robscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/robscott/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/robscott",
      "id": 419322,
      "login": "robscott",
      "node_id": "MDQ6VXNlcjQxOTMyMg==",
      "organizations_url": "https://api.github.com/users/robscott/orgs",
      "received_events_url": "https://api.github.com/users/robscott/received_events",
      "repos_url": "https://api.github.com/users/robscott/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/robscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robscott/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/robscott"
    },
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/5331316?v=4",
      "events_url": "https://api.github.com/users/tnqn/events{/privacy}",
      "followers_url": "https://api.github.com/users/tnqn/followers",
      "following_url": "https://api.github.com/users/tnqn/following{/other_user}",
      "gists_url": "https://api.github.com/users/tnqn/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/tnqn",
      "id": 5331316,
      "login": "tnqn",
      "node_id": "MDQ6VXNlcjUzMzEzMTY=",
      "organizations_url": "https://api.github.com/users/tnqn/orgs",
      "received_events_url": "https://api.github.com/users/tnqn/received_events",
      "repos_url": "https://api.github.com/users/tnqn/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/tnqn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tnqn/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/tnqn"
    }
  ],
  "author_association": "MEMBER",
  "body": "<!-- Please use this template while reporting a bug and provide as much info as possible. Not doing so may result in your bug not being addressed in a timely manner. Thanks!\r\n\r\nIf the matter is security related, please disclose it privately via https://kubernetes.io/security/\r\n-->\r\n\r\n\r\n**What happened**:\r\nThis requires 1.16 alpha feature: Endpoint Slices being enabled.\r\n\r\nAfter deleting a `Service`, EndpointSliceController kept enqueuing the service after syncing it successfully, until its retry budget exceeded. And the logs are misleading by indicating something wrong happened while the cleanup has been executed successfully:\r\n```\r\nI0922 16:12:40.539607       1 endpointslice_controller.go:242] Finished syncing service \"default/nginx\" endpoint slices. (11.802\ufffds)\r\nW0922 16:12:40.539934       1 endpointslice_controller.go:229] Error syncing endpoint slices for service \"default/nginx\", retrying. Error: service \"nginx\" not found\r\nI0922 16:12:40.545322       1 endpointslice_controller.go:242] Finished syncing service \"default/nginx\" endpoint slices. (8.547\ufffds)\r\nW0922 16:12:40.545336       1 endpointslice_controller.go:229] Error syncing endpoint slices for service \"default/nginx\", retrying. Error: service \"nginx\" not found\r\nI0922 16:12:40.555573       1 endpointslice_controller.go:242] Finished syncing service \"default/nginx\" endpoint slices. (7.962\ufffds)\r\nW0922 16:12:40.555587       1 endpointslice_controller.go:229] Error syncing endpoint slices for service \"default/nginx\", retrying. Error: service \"nginx\" not found\r\nI0922 16:12:40.575656       1 endpointslice_controller.go:242] Finished syncing service \"default/nginx\" endpoint slices. (10.885\ufffds)\r\nW0922 16:12:40.575726       1 endpointslice_controller.go:229] Error syncing endpoint slices for service \"default/nginx\", retrying. Error: service \"nginx\" not found\r\n``` \r\n\r\n**What you expected to happen**:\r\nThe deletion should be triggered only once and there should be no warning and error logs if the cleanup is successfully.\r\n```\r\nI0922 16:09:24.115477       1 endpointslice_controller.go:242] Finished syncing service \"default/nginx\" endpoint slices. (12.444\ufffds)\r\n```\r\n\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n1. Enable Endpoint Slices feature\r\n2. Create a `Service` then delete it.\r\n```\r\nkubectl expose deploy/nginx --name=nginx --port=80\r\nkubectl delete svc nginx\r\n```\r\n3. Check kube-controller-manager logs, there would be repeated `Error syncing endpoint slices for service` logs.\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`):\r\n```\r\nClient Version: version.Info{Major:\"1\", Minor:\"16\", GitVersion:\"v1.16.0\", GitCommit:\"2bd9643cee5b3b3a5ecbd3af49d09018f0773c77\", GitTreeState:\"clean\", BuildDate:\"2019-09-18T14:36:53Z\", GoVersion:\"go1.12.9\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"16\", GitVersion:\"v1.16.0\", GitCommit:\"2bd9643cee5b3b3a5ecbd3af49d09018f0773c77\", GitTreeState:\"clean\", BuildDate:\"2019-09-18T14:27:17Z\", GoVersion:\"go1.12.9\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n```\r\n- Cloud provider or hardware configuration:\r\n- OS (e.g: `cat /etc/os-release`):\r\n- Kernel (e.g. `uname -a`):\r\n- Install tools:\r\n- Network plugin and version (if this is a network-related bug):\r\n- Others:\r\n",
  "closed_at": "2019-10-08T22:42:29Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/82995/comments",
  "created_at": "2019-09-22T16:52:18Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/82995/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/82995",
  "id": 496804038,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "ededed",
      "default": false,
      "description": "Indicates an issue or PR lacks a `sig/foo` label and requires one.",
      "id": 617149945,
      "name": "needs-sig",
      "node_id": "MDU6TGFiZWw2MTcxNDk5NDU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/needs-sig"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/82995/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": null,
    "closed_issues": 1674,
    "created_at": "2019-01-21T20:12:05Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/980082?v=4",
      "events_url": "https://api.github.com/users/liggitt/events{/privacy}",
      "followers_url": "https://api.github.com/users/liggitt/followers",
      "following_url": "https://api.github.com/users/liggitt/following{/other_user}",
      "gists_url": "https://api.github.com/users/liggitt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/liggitt",
      "id": 980082,
      "login": "liggitt",
      "node_id": "MDQ6VXNlcjk4MDA4Mg==",
      "organizations_url": "https://api.github.com/users/liggitt/orgs",
      "received_events_url": "https://api.github.com/users/liggitt/received_events",
      "repos_url": "https://api.github.com/users/liggitt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/liggitt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liggitt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/liggitt"
    },
    "description": null,
    "due_on": null,
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/43",
    "id": 3990944,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/43/labels",
    "node_id": "MDk6TWlsZXN0b25lMzk5MDk0NA==",
    "number": 43,
    "open_issues": 17,
    "state": "open",
    "title": "v1.17",
    "updated_at": "2020-10-27T18:45:51Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/43"
  },
  "node_id": "MDU6SXNzdWU0OTY4MDQwMzg=",
  "number": 82995,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "EndpointSliceController keeps enqueuing deleted service even its cleanup is successful",
  "updated_at": "2019-10-08T22:42:29Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/82995",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/5331316?v=4",
    "events_url": "https://api.github.com/users/tnqn/events{/privacy}",
    "followers_url": "https://api.github.com/users/tnqn/followers",
    "following_url": "https://api.github.com/users/tnqn/following{/other_user}",
    "gists_url": "https://api.github.com/users/tnqn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/tnqn",
    "id": 5331316,
    "login": "tnqn",
    "node_id": "MDQ6VXNlcjUzMzEzMTY=",
    "organizations_url": "https://api.github.com/users/tnqn/orgs",
    "received_events_url": "https://api.github.com/users/tnqn/received_events",
    "repos_url": "https://api.github.com/users/tnqn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/tnqn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tnqn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/tnqn"
  }
}