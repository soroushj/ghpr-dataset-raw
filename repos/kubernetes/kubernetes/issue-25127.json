{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "When i doing an elasticsearch aggs with the following statement:  \n\n```\nthis.client.search({\n      \"size\": 500,\n      \"body\": {\n        \"query\": {\n          \"filtered\": {\n            \"query\": {\n              \"bool\": {\n                \"should\": [],\n                \"must_not\": [],\n                \"must\": [\n                  {\"match\": {\"namespace_name\": ns}}\n                ]\n              }\n            },\n            \"filter\": {\n              \"range\": {\n                \"@timestamp\": {\"gte\": starttime, \"lte\": endtime}\n              }\n            }\n          }\n        },\n        \"aggs\": {\n          \"pods\": {\n            \"terms\": {\"field\": \"pod_name\"}\n          }\n        },\n        \"sort\": {\"@timestamp\": {\"order\": \"desc\"}}\n      }\n    }, fn);\n```\n\nthen, i got this:  \n\n```\n...\n{\n          \"_index\": \"logstash-2016.05.03\",\n          \"_type\": \"fluentd\",\n          \"_id\": \"AVR5EHq00u4QLgyOtFpJ\",\n          \"_score\": null,\n          \"_source\": {\n            \"log\": \"2016-05-03 23:59:59 +0000 [warn]: pattern not match: \\\"\\\\e[34mINFO\\\\e[0m[49433] GET /containers/json                         \\\"\\n\",\n            \"stream\": \"stdout\",\n            \"docker\": {\n              \"container_id\": \"dd71413298038a6b9f242dd7543caa43d18b3373d7ad6258e9258f57a81fbc68\"\n            },\n            \"kubernetes\": {\n              \"namespace_name\": \"kube-system\",\n              \"pod_name\": \"fluentd-elasticsearch-node-1\",\n              \"container_name\": \"fluentd-elasticsearch\"\n            },\n            \"tag\": \"kubernetes.var.log.containers.fluentd-elasticsearch-node-1_kube-system_fluentd-elasticsearch-dd71413298038a6b9f242dd7543caa43d18b3373d7ad6258e9258f57a81fbc68.log\",\n            \"@timestamp\": \"2016-05-03T23:59:59+00:00\"\n          },\n          \"sort\": [\n            1462319999000\n          ]\n        }\n      ]\n    },\n    \"aggregations\": {\n      \"pods\": {\n        \"doc_count_error_upper_bound\": 0,\n        \"sum_other_doc_count\": 199135,\n        \"buckets\": [\n          {\n            \"key\": \"elasticsearch\",\n            \"doc_count\": 379735\n          },\n          {\n            \"key\": \"fluentd\",\n            \"doc_count\": 379581\n          },\n          {\n            \"key\": \"node\",\n            \"doc_count\": 259478\n          },\n          {\n            \"key\": \"1\",\n            \"doc_count\": 131087\n          },\n          {\n            \"key\": \"2\",\n            \"doc_count\": 128391\n          },\n          {\n            \"key\": \"master\",\n            \"doc_count\": 120103\n          },\n          {\n            \"key\": \"monitoring\",\n            \"doc_count\": 69475\n          },\n          {\n            \"key\": \"grafana\",\n            \"doc_count\": 59741\n          },\n          {\n            \"key\": \"influxdb\",\n            \"doc_count\": 59741\n          },\n          {\n            \"key\": \"oeib2\",\n            \"doc_count\": 59741\n          }\n        ]\n      }\n    }\n  }\n\n```\n\nActually, i want the pod names like this:  \n\n```\n\"buckets\": [\n          {\n            \"key\": \"fluentd-elasticsearch-node-1\",\n            \"doc_count\": 379735\n          },\n          {\n            \"key\": \"fluentd-elasticsearch-node-2\",\n            \"doc_count\": 379581\n          },\n...\n```\n",
  "closed_at": "2016-05-16T08:01:24Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/25127/comments",
  "created_at": "2016-05-04T10:39:48Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/25127/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/25127",
  "id": 152981505,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 148734819,
      "name": "area/logging",
      "node_id": "MDU6TGFiZWwxNDg3MzQ4MTk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/logging"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/25127/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxNTI5ODE1MDU=",
  "number": 25127,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "pod_name field are splitted when doing elasticsearch aggs",
  "updated_at": "2016-05-16T08:01:24Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/25127",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/17756696?v=4",
    "events_url": "https://api.github.com/users/keontang/events{/privacy}",
    "followers_url": "https://api.github.com/users/keontang/followers",
    "following_url": "https://api.github.com/users/keontang/following{/other_user}",
    "gists_url": "https://api.github.com/users/keontang/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/keontang",
    "id": 17756696,
    "login": "keontang",
    "node_id": "MDQ6VXNlcjE3NzU2Njk2",
    "organizations_url": "https://api.github.com/users/keontang/orgs",
    "received_events_url": "https://api.github.com/users/keontang/received_events",
    "repos_url": "https://api.github.com/users/keontang/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/keontang/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/keontang/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/keontang"
  }
}