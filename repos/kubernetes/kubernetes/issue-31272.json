{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/366488?v=4",
    "events_url": "https://api.github.com/users/pmorie/events{/privacy}",
    "followers_url": "https://api.github.com/users/pmorie/followers",
    "following_url": "https://api.github.com/users/pmorie/following{/other_user}",
    "gists_url": "https://api.github.com/users/pmorie/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pmorie",
    "id": 366488,
    "login": "pmorie",
    "node_id": "MDQ6VXNlcjM2NjQ4OA==",
    "organizations_url": "https://api.github.com/users/pmorie/orgs",
    "received_events_url": "https://api.github.com/users/pmorie/received_events",
    "repos_url": "https://api.github.com/users/pmorie/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pmorie/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pmorie/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pmorie"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/366488?v=4",
      "events_url": "https://api.github.com/users/pmorie/events{/privacy}",
      "followers_url": "https://api.github.com/users/pmorie/followers",
      "following_url": "https://api.github.com/users/pmorie/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmorie/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/pmorie",
      "id": 366488,
      "login": "pmorie",
      "node_id": "MDQ6VXNlcjM2NjQ4OA==",
      "organizations_url": "https://api.github.com/users/pmorie/orgs",
      "received_events_url": "https://api.github.com/users/pmorie/received_events",
      "repos_url": "https://api.github.com/users/pmorie/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/pmorie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmorie/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/pmorie"
    }
  ],
  "author_association": "MEMBER",
  "body": "If you have pods that use something like NFS storage, if the system is unable to read the mounted directory, or unmount it, it is possible to completely wedge the kubelet such that it can't successfully run any new pods that use volumes (which is basically all, if they use secret tokens) until either the storage issue is resolved, or you restart the kubelet.\n\nTo reproduce:\n1. Create a pod that uses an NFS volume\n2. Stop the NFS server\n3. Try to delete the pod\n4. Wait a couple of minutes - you'll see the pod stuck Terminating\n5. Try to create a new pod (`kubectl run --rm --attach --restart Never --image busybox bbox date`)\n\nThe busybox pod will be stuck ContainerCreating with events such as these:\n\n```\nEvents:\n  FirstSeen     LastSeen        Count   From                    SubobjectPath   Type            Reason          Message\n  ---------     --------        -----   ----                    -------------   --------        ------          -------\n  8m            8m              1       {default-scheduler }                    Normal          Scheduled       Successfully assigned bbox to 127.0.0.1\n  6m            6s              4       {kubelet 127.0.0.1}                     Warning         FailedMount     Unable to mount volumes for pod \"bbox_default(12a20cdb-694f-11e6-baa4-001c42e13e5d)\": timeout expired waiting for volumes to attach/mount for pod \"bbox\"/\"default\". list of unattached/unmounted volumes=[default-token-joiwi]\n  6m            6s              4       {kubelet 127.0.0.1}                     Warning         FailedSync      Error syncing pod, skipping: timeout expired waiting for volumes to attach/mount for pod \"bbox\"/\"default\". list of unattached/unmounted volumes=[default-token-joiwi]\n```\n\nIn this [stack trace](https://gist.github.com/ncdc/d6411b82cd6169991dc3b98c203f59e1#file-stack-deleting-pod-txt-L53-L67) I gathered after I deleted the pod, it shows that the volume reconciler is still trying to get the volumes for the pod I just deleted. You'll also see a goroutine trying to stop the Docker container, but it is stuck.\n\nIn this [stack trace](https://gist.github.com/ncdc/d6411b82cd6169991dc3b98c203f59e1#file-stack-run-pod-txt-L32-L41) I gathered after I tried to create the bbox pod, it shows that the new pod (bbox) is waiting for its volumes to attach/mount (in this case, secrets).\n\nWe've seen this in 1.2.x and I just reproduced it in master (commit f297ea966e0916c18dc008af566975bd26dfb29c).\n\ncc @kubernetes/sig-storage @kubernetes/sig-node @kubernetes/rh-cluster-infra @pmorie @derekwaynecarr @timothysc @saad-ali \n",
  "closed_at": null,
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 97,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/31272/comments",
  "created_at": "2016-08-23T17:28:53Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/31272/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/31272",
  "id": 172758875,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 116719829,
      "name": "area/kubelet",
      "node_id": "MDU6TGFiZWwxMTY3MTk4Mjk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/kubelet"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d3e2f0",
      "default": false,
      "description": "Indicates that an issue or PR should not be auto-closed due to staleness.",
      "id": 778118403,
      "name": "lifecycle/frozen",
      "node_id": "MDU6TGFiZWw3NzgxMTg0MDM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/lifecycle/frozen"
    },
    {
      "color": "eb6420",
      "default": false,
      "description": "Must be staffed and worked on either currently, or very soon, ideally in time for the next release.",
      "id": 114528223,
      "name": "priority/important-soon",
      "node_id": "MDU6TGFiZWwxMTQ1MjgyMjM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/important-soon"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/31272/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxNzI3NTg4NzU=",
  "number": 31272,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "open",
  "title": "Hung volumes can wedge the kubelet",
  "updated_at": "2018-06-25T16:28:25Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/31272",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/354?v=4",
    "events_url": "https://api.github.com/users/ncdc/events{/privacy}",
    "followers_url": "https://api.github.com/users/ncdc/followers",
    "following_url": "https://api.github.com/users/ncdc/following{/other_user}",
    "gists_url": "https://api.github.com/users/ncdc/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ncdc",
    "id": 354,
    "login": "ncdc",
    "node_id": "MDQ6VXNlcjM1NA==",
    "organizations_url": "https://api.github.com/users/ncdc/orgs",
    "received_events_url": "https://api.github.com/users/ncdc/received_events",
    "repos_url": "https://api.github.com/users/ncdc/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ncdc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ncdc/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ncdc"
  }
}