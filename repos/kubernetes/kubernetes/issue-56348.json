{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/2823529?v=4",
    "events_url": "https://api.github.com/users/caesarxuchao/events{/privacy}",
    "followers_url": "https://api.github.com/users/caesarxuchao/followers",
    "following_url": "https://api.github.com/users/caesarxuchao/following{/other_user}",
    "gists_url": "https://api.github.com/users/caesarxuchao/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/caesarxuchao",
    "id": 2823529,
    "login": "caesarxuchao",
    "node_id": "MDQ6VXNlcjI4MjM1Mjk=",
    "organizations_url": "https://api.github.com/users/caesarxuchao/orgs",
    "received_events_url": "https://api.github.com/users/caesarxuchao/received_events",
    "repos_url": "https://api.github.com/users/caesarxuchao/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/caesarxuchao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/caesarxuchao/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/caesarxuchao"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/298299?v=4",
      "events_url": "https://api.github.com/users/ironcladlou/events{/privacy}",
      "followers_url": "https://api.github.com/users/ironcladlou/followers",
      "following_url": "https://api.github.com/users/ironcladlou/following{/other_user}",
      "gists_url": "https://api.github.com/users/ironcladlou/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ironcladlou",
      "id": 298299,
      "login": "ironcladlou",
      "node_id": "MDQ6VXNlcjI5ODI5OQ==",
      "organizations_url": "https://api.github.com/users/ironcladlou/orgs",
      "received_events_url": "https://api.github.com/users/ironcladlou/received_events",
      "repos_url": "https://api.github.com/users/ironcladlou/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ironcladlou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ironcladlou/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ironcladlou"
    },
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/2823529?v=4",
      "events_url": "https://api.github.com/users/caesarxuchao/events{/privacy}",
      "followers_url": "https://api.github.com/users/caesarxuchao/followers",
      "following_url": "https://api.github.com/users/caesarxuchao/following{/other_user}",
      "gists_url": "https://api.github.com/users/caesarxuchao/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/caesarxuchao",
      "id": 2823529,
      "login": "caesarxuchao",
      "node_id": "MDQ6VXNlcjI4MjM1Mjk=",
      "organizations_url": "https://api.github.com/users/caesarxuchao/orgs",
      "received_events_url": "https://api.github.com/users/caesarxuchao/received_events",
      "repos_url": "https://api.github.com/users/caesarxuchao/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/caesarxuchao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caesarxuchao/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/caesarxuchao"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "<!-- This form is for bug reports and feature requests ONLY! \r\n\r\nIf you're looking for help check [Stack Overflow](https://stackoverflow.com/questions/tagged/kubernetes) and the [troubleshooting guide](https://kubernetes.io/docs/tasks/debug-application-cluster/troubleshooting/).\r\n-->\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**:\r\n\r\n> Uncomment only one, leave it on its own line: \r\n>\r\n/kind bug\r\n> /kind feature\r\n\r\n\r\n**What happened**:\r\n\r\nI have a CRD which is backed by a controller which creates and deletes other CRDs. The dependent CRDs have a controller owner reference set. If I delete the controller object with --cascade=true, everything works as expected and the resources are cleaned up. If I use --cascade=false, I see that an \"orpan\" finalizer is added. No owner references on one of the dependents is removed and the main object gets never deleted.\r\n\r\n**What you expected to happen**:\r\n\r\nI would have expected that the garbage collector removes the owner reference and then removes the \"orphan\" finalizer afterwards from the object, before finally deleting it.\r\n\r\nIs that expected and the controller has to  remove the references and the \"orphan\" finalizer itself, or should the garbage collector do that? Do I have to set blockOrphanDeletion to false?\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\nI delete it like this:\r\n```\r\ncluster/kubectl.sh delete mycrdcontroller mycrdinstance --cascade=false\r\n```\r\n\r\nThe metadata of the controller object then looks like this:\r\n\r\n```\r\napiVersion: kubevirt.io/v1alpha1\r\nkind: VirtualMachineReplicaSet\r\nmetadata:\r\n  creationTimestamp: 2017-11-24T12:44:54Z\r\n  deletionGracePeriodSeconds: 0\r\n  deletionTimestamp: 2017-11-24T12:45:02Z\r\n  finalizers:\r\n  - orphan\r\n  name: testreplicaset2\r\n  namespace: default\r\n  resourceVersion: \"24789\"\r\n  selfLink: /apis/kubevirt.io/v1alpha1/namespaces/default/virtualmachinereplicasets/testreplicaset2\r\n  uid: 4555ee8e-d115-11e7-9842-525400c2f26a\r\n\r\n```\r\n\r\nOwner references are still there on the dependants:\r\n\r\n```\r\napiVersion: kubevirt.io/v1alpha1\r\n  kind: VirtualMachine\r\n  metadata:\r\n    creationTimestamp: 2017-11-24T12:57:04Z\r\n    generateName: test1\r\n    labels:\r\n      kubevirt.io/nodeName: node0\r\n      myvm: myvm2\r\n    name: test1vxl5h\r\n    namespace: default\r\n    ownerReferences:\r\n    - apiVersion: v1alpha1\r\n      blockOwnerDeletion: true\r\n      controller: true\r\n      kind: VirtualMachineReplicaSet\r\n      name: testreplicaset2\r\n      uid: 4555ee8e-d115-11e7-9842-525400c2f26a\r\n```\r\n\r\nand nothing happens.\r\n\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`):\r\n\r\n```\r\nClient Version: version.Info{Major:\"1\", Minor:\"8\", GitVersion:\"v1.8.4\", GitCommit:\"9befc2b8928a9426501d3bf62f72849d5cbcd5a3\", GitTreeState:\"clean\", BuildDate:\"2017-11-20T05:28:34Z\", GoVersion:\"go1.8.3\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"8\", GitVersion:\"v1.8.4\", GitCommit:\"9befc2b8928a9426501d3bf62f72849d5cbcd5a3\", GitTreeState:\"clean\", BuildDate:\"2017-11-20T05:17:43Z\", GoVersion:\"go1.8.3\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n```\r\n\r\n- Cloud provider or hardware configuration:\r\n- OS (e.g. from /etc/os-release):\r\n- Kernel (e.g. `uname -a`):\r\n- Install tools:\r\n- Others:\r\n",
  "closed_at": "2018-06-07T02:56:22Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 25,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/56348/comments",
  "created_at": "2017-11-24T16:07:23Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/56348/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/56348",
  "id": 276656324,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 556590057,
      "name": "area/custom-resources",
      "node_id": "MDU6TGFiZWw1NTY1OTAwNTc=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/custom-resources"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Highest priority. Must be actively worked on as someone's top priority right now.",
      "id": 114528068,
      "name": "priority/critical-urgent",
      "node_id": "MDU6TGFiZWwxMTQ1MjgwNjg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/critical-urgent"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG API Machinery.",
      "id": 173493835,
      "name": "sig/api-machinery",
      "node_id": "MDU6TGFiZWwxNzM0OTM4MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/api-machinery"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/56348/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2019-08-26T17:23:28Z",
    "closed_issues": 1061,
    "created_at": "2017-05-26T17:18:43Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/169553?v=4",
      "events_url": "https://api.github.com/users/timothysc/events{/privacy}",
      "followers_url": "https://api.github.com/users/timothysc/followers",
      "following_url": "https://api.github.com/users/timothysc/following{/other_user}",
      "gists_url": "https://api.github.com/users/timothysc/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/timothysc",
      "id": 169553,
      "login": "timothysc",
      "node_id": "MDQ6VXNlcjE2OTU1Mw==",
      "organizations_url": "https://api.github.com/users/timothysc/orgs",
      "received_events_url": "https://api.github.com/users/timothysc/received_events",
      "repos_url": "https://api.github.com/users/timothysc/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/timothysc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timothysc/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/timothysc"
    },
    "description": "",
    "due_on": "2017-09-27T07:00:00Z",
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/36",
    "id": 2545392,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/36/labels",
    "node_id": "MDk6TWlsZXN0b25lMjU0NTM5Mg==",
    "number": 36,
    "open_issues": 0,
    "state": "closed",
    "title": "v1.8",
    "updated_at": "2019-08-26T17:23:28Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/36"
  },
  "node_id": "MDU6SXNzdWUyNzY2NTYzMjQ=",
  "number": 56348,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "CR is stuck with \"orphan\" finalizer",
  "updated_at": "2018-06-07T02:56:22Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/56348",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/4534621?v=4",
    "events_url": "https://api.github.com/users/rmohr/events{/privacy}",
    "followers_url": "https://api.github.com/users/rmohr/followers",
    "following_url": "https://api.github.com/users/rmohr/following{/other_user}",
    "gists_url": "https://api.github.com/users/rmohr/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/rmohr",
    "id": 4534621,
    "login": "rmohr",
    "node_id": "MDQ6VXNlcjQ1MzQ2MjE=",
    "organizations_url": "https://api.github.com/users/rmohr/orgs",
    "received_events_url": "https://api.github.com/users/rmohr/received_events",
    "repos_url": "https://api.github.com/users/rmohr/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/rmohr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rmohr/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/rmohr"
  }
}