{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "\r\n**Is this a BUG REPORT or FEATURE REQUEST?** (choose one):    \r\nmaybe a bug or a point we can improve\r\n\r\n\r\n---\r\n\r\n**Kubernetes version** (use `kubectl version`):    \r\nk8s1.3.5. I think it still exist in 1.6\r\n\r\n\r\n---\r\n\r\n**What happened**:    \r\nwhen **restart** kube-scheduler component, kube-scheduler schedules pod to node which has not enough resources. So this pod is set Falied **by kubelet**.\r\n\r\n\r\n---\r\n\r\n**What you expected to happen**:    \r\nwe don't want to schedule pod to node which has not enough resources, and i think we had better deal with this question in kube-scheduler instead of in kubelet(**Predicate Again**).\r\n\r\n---\r\n\r\n\r\n**How to reproduce it** (as minimally and precisely as possible):  \r\n\r\nFirstly, restart kube-scheduler.    \r\n\r\nA Pod that needs scheduling. Newly created or Created before scheduler shutdown.  \r\n\r\nAnd scheduledPod cache **has not been completely synced**. So some nodes may be thought has enough resources. (if scheduledPod cache is synced completely, these nodes may have not enough resources for new pod)    \r\n\r\nNow schduler is scheduling this pod. Scheduler may schedule pod to nodes which have not enough resources. However scheduler thinks target node has enough resources.\r\n\r\nWhen corresponding kubelet watchs this schedule event, it re-runs Predicate Func and finds that this node doesn't have enough resources.\r\n\r\n\r\n---\r\n\r\n\r\n**Anything else we need to know**:\r\n\r\nI think we shoud **add HasSynced func** for ScheduledPod cache in kube-scheduler. Until ScheduledPod cache syncs completely, start the work of scheduling pod.",
  "closed_at": "2017-05-10T03:23:37Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 7,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/45220/comments",
  "created_at": "2017-05-02T08:48:34Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/45220/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/45220",
  "id": 225630100,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Scheduling.",
      "id": 125550211,
      "name": "sig/scheduling",
      "node_id": "MDU6TGFiZWwxMjU1NTAyMTE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/scheduling"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/45220/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMjU2MzAxMDA=",
  "number": 45220,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Scheduler schedules pod to node which has not enough resources",
  "updated_at": "2017-05-10T03:23:37Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/45220",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/8132300?v=4",
    "events_url": "https://api.github.com/users/shenlanse/events{/privacy}",
    "followers_url": "https://api.github.com/users/shenlanse/followers",
    "following_url": "https://api.github.com/users/shenlanse/following{/other_user}",
    "gists_url": "https://api.github.com/users/shenlanse/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/shenlanse",
    "id": 8132300,
    "login": "shenlanse",
    "node_id": "MDQ6VXNlcjgxMzIzMDA=",
    "organizations_url": "https://api.github.com/users/shenlanse/orgs",
    "received_events_url": "https://api.github.com/users/shenlanse/received_events",
    "repos_url": "https://api.github.com/users/shenlanse/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/shenlanse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shenlanse/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/shenlanse"
  }
}