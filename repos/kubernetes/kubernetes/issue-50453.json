{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/4790487?v=4",
    "events_url": "https://api.github.com/users/cmluciano/events{/privacy}",
    "followers_url": "https://api.github.com/users/cmluciano/followers",
    "following_url": "https://api.github.com/users/cmluciano/following{/other_user}",
    "gists_url": "https://api.github.com/users/cmluciano/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/cmluciano",
    "id": 4790487,
    "login": "cmluciano",
    "node_id": "MDQ6VXNlcjQ3OTA0ODc=",
    "organizations_url": "https://api.github.com/users/cmluciano/orgs",
    "received_events_url": "https://api.github.com/users/cmluciano/received_events",
    "repos_url": "https://api.github.com/users/cmluciano/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/cmluciano/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cmluciano/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/cmluciano"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/4790487?v=4",
      "events_url": "https://api.github.com/users/cmluciano/events{/privacy}",
      "followers_url": "https://api.github.com/users/cmluciano/followers",
      "following_url": "https://api.github.com/users/cmluciano/following{/other_user}",
      "gists_url": "https://api.github.com/users/cmluciano/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/cmluciano",
      "id": 4790487,
      "login": "cmluciano",
      "node_id": "MDQ6VXNlcjQ3OTA0ODc=",
      "organizations_url": "https://api.github.com/users/cmluciano/orgs",
      "received_events_url": "https://api.github.com/users/cmluciano/received_events",
      "repos_url": "https://api.github.com/users/cmluciano/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/cmluciano/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cmluciano/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/cmluciano"
    }
  ],
  "author_association": "NONE",
  "body": "/kind feature\r\n\r\n**What happened**:\r\nIn 1.7 NetworkPolicy only supports ingress (although some cni providers like Calico claim to be able to also support egress).\r\n\r\nNo doubt that egress is already on the roadmap, but I'd like to state a requirement for a couple of selectors that we'll need in order for the egress functionality to be useful in enterprise environments.\r\n\r\n1) CIDRSelector \r\n\r\nWe need to be able to define egress rules from cluster pods to external services.  As these are external they lack both a namespace and any labels.  For something analogousness to traditional firewalling, it would be useful to define NetworkPolicy rules that allows egress to a number of network CIDRS or hosts. e.g.\r\n\r\n```\r\n---\r\napiVersion: networking.k8s.io/v1\r\nkind: NetworkPolicy\r\nmetadata:\r\n  name: egress-rule-for-logging\r\n  namespace: backend\r\nspec:\r\n  podSelector:\r\n    matchLabels:\r\n      run: pod\r\n  egress:\r\n  - to:\r\n    - CIDRSelector:\r\n      - 192.168.0.0/16\r\n      - 10.0.*\r\n      - 192.169.0.12\r\n    ports:\r\n    - port: 80\r\n```\r\n\r\n2) DNSSelector\r\n\r\nAs more services are more dynamically IP'd (e.g. consul or an ELB etc.) it becomes hard to pinpoint an external service by CIDR without being too general.  In the same kind of vein as the ExternalCNAME on services it would be very useful to be able to create a egress rule that uses a DNS query to populate a list of IP Addresses in the rule (and to keep them updated by performing the dns check on a regular interval).  They could look something like this,,,\r\n\r\n```\r\n---\r\napiVersion: networking.k8s.io/v1\r\nkind: NetworkPolicy\r\nmetadata:\r\n  name: egress-rule-for-domaincontrollers\r\n  namespace: backend\r\nspec:\r\n  podSelector:\r\n    matchLabels:\r\n      run: pod\r\n  egress:\r\n  - to:\r\n    - DNSSelector:\r\n      -  adfs.mycompanyforrest.ad.mycompany.com\r\n    ports:\r\n    - port: 636\r\n```\r\nIn this example the dns query adfs.mycompanyforrest.ad.mycompany.com can be enumerated into a number of host ip addresses and egress allowed to this list only.  This would allow the IT team to add/remove servers at will without having to maintain a brittle egress rule.\r\n\r\n**What you expected to happen**:\r\nI'd like to see NetworkPolicy grow to include egress with new selectors that help ease the job of infrastructure developers defining rules for their infrastructure.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nNA\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): 1.8?\r\n- Cloud provider or hardware configuration**: AWS\r\n- OS (e.g. from /etc/os-release): CoreOS\r\n- Kernel (e.g. `uname -a`): Linux\r\n- Install tools:\r\n- Others:\r\n\r\n/sig network",
  "closed_at": "2017-09-06T01:40:25Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 8,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50453/comments",
  "created_at": "2017-08-10T13:39:30Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50453/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/50453",
  "id": 249349607,
  "labels": [
    {
      "color": "c7def8",
      "default": false,
      "description": "Categorizes issue or PR as related to a new feature.",
      "id": 267761362,
      "name": "kind/feature",
      "node_id": "MDU6TGFiZWwyNjc3NjEzNjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/feature"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Network.",
      "id": 116712108,
      "name": "sig/network",
      "node_id": "MDU6TGFiZWwxMTY3MTIxMDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/network"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50453/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNDkzNDk2MDc=",
  "number": 50453,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "NetworkPolicy Egress with CIDRSelector and DNSSelector",
  "updated_at": "2018-02-25T18:50:58Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/50453",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/23635315?v=4",
    "events_url": "https://api.github.com/users/mccormd/events{/privacy}",
    "followers_url": "https://api.github.com/users/mccormd/followers",
    "following_url": "https://api.github.com/users/mccormd/following{/other_user}",
    "gists_url": "https://api.github.com/users/mccormd/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mccormd",
    "id": 23635315,
    "login": "mccormd",
    "node_id": "MDQ6VXNlcjIzNjM1MzE1",
    "organizations_url": "https://api.github.com/users/mccormd/orgs",
    "received_events_url": "https://api.github.com/users/mccormd/received_events",
    "repos_url": "https://api.github.com/users/mccormd/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mccormd/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mccormd/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mccormd"
  }
}