{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "<!-- This form is for bug reports and feature requests ONLY! \r\n\r\nIf you're looking for help check [Stack Overflow](https://stackoverflow.com/questions/tagged/kubernetes) and the [troubleshooting guide](https://kubernetes.io/docs/tasks/debug-application-cluster/troubleshooting/).\r\n-->\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**:\r\n\r\n> Uncomment only one, leave it on its own line: \r\n>\r\n/kind bug\r\n> /kind feature\r\n\r\n\r\n**What happened**:\r\nI created a ReplicationController with a pod using a Cinder PVC as volume. When I used 'nova stop' to shut down the node where the pod is put (and where the Cinder Volume is attached to), the pod got rescheduled to another node but it can't become active because the Cinder Volume stays attached to the old node and k8s can't attach it to the new node because its state is 'in-use'.\r\n\r\n**What you expected to happen**:\r\nK8s should be able to detach the Cinder Volume from the old node so that it can be attached to the new node.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n1 Create k8s cluster with OpenStack provider\r\n2 Create a PVC\r\n3 Create ReplicationController with a pod using the PVC as volume\r\n4 Wait until the Pod becomes active\r\n5 Find which node the Pod is located and use 'nova stop' to shutdown that node\r\n6 Check the Pod status and it remains in ContainerCreating.\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`):\r\nv1.8.1\r\n- Cloud provider or hardware configuration:\r\nOpenStack cloud provider\r\n- OS (e.g. from /etc/os-release):\r\nUbuntu 16.04\r\n- Kernel (e.g. `uname -a`):\r\nLinux k8s-master-0-53eacf69-fc5c-4660-a010-26e1852474f5 4.4.0-62-generic #83-Ubuntu SMP Wed Jan 18 14:10:15 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n- Install tools:\r\n- Others:\r\n",
  "closed_at": "2018-01-11T12:24:10Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 12,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/57497/comments",
  "created_at": "2017-12-21T05:05:05Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/57497/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/57497",
  "id": 283774427,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": "Issues or PRs related to openstack provider",
      "id": 239914558,
      "name": "area/provider/openstack",
      "node_id": "MDU6TGFiZWwyMzk5MTQ1NTg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/provider/openstack"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/57497/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyODM3NzQ0Mjc=",
  "number": 57497,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Cinder persistent volume can not be attached to the new node after shut down the current node",
  "updated_at": "2018-01-11T12:24:10Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/57497",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/5276635?v=4",
    "events_url": "https://api.github.com/users/xiangfeiz/events{/privacy}",
    "followers_url": "https://api.github.com/users/xiangfeiz/followers",
    "following_url": "https://api.github.com/users/xiangfeiz/following{/other_user}",
    "gists_url": "https://api.github.com/users/xiangfeiz/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/xiangfeiz",
    "id": 5276635,
    "login": "xiangfeiz",
    "node_id": "MDQ6VXNlcjUyNzY2MzU=",
    "organizations_url": "https://api.github.com/users/xiangfeiz/orgs",
    "received_events_url": "https://api.github.com/users/xiangfeiz/received_events",
    "repos_url": "https://api.github.com/users/xiangfeiz/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/xiangfeiz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/xiangfeiz/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/xiangfeiz"
  }
}