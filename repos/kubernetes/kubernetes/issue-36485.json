{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "BUG REPORT\r\n**Kubernetes version**\r\nv1.4.3+coreos.0\r\n\r\n**Environment**:\r\n- **Cloud provider or hardware configuration**:\r\nBare metal CoreOS installation. 3 management nodes + 2 worker nodes.\r\n- **OS** (e.g. from /etc/os-release):\r\n`CoreOS stable (1185.3.0)`\r\n- **Kernel** \r\n`4.7.3-coreos-r2`\r\n\r\n**What happened**:\r\nI added an `init-container` to the `kube-scheduler.yaml` file in `/etc/kubernetes/manifests` directory. It was executed once after the yaml file modification. When I rebooted the node running this POD, the POD was restarted but the `init-container` did not execute:\r\n\r\nThe kube-scheduler.yaml file:\r\n```\r\napiVersion: v1\r\nkind: Pod\r\nmetadata:\r\n  name: kube-scheduler\r\n  namespace: kube-system\r\n  annotations:\r\n    pod.beta.kubernetes.io/init-containers: '[\r\n      {\r\n        \"image\": \"quay.io/coreos/hyperkube:v1.4.3_coreos.0\",\r\n        \"name\": \"wait-for-master\",\r\n        \"command\": [ \"/bin/bash\", \"-c\", \"while ! timeout 1 bash -c \\\"/kubectl --server=http://127.0.0.1:8080/ cluster-info\\\"; do sleep 1; done\" ]\r\n      }\r\n    ]'\r\nspec:\r\n  hostNetwork: true\r\n  containers:\r\n  - name: kube-scheduler\r\n    image: quay.io/coreos/hyperkube:v1.4.3_coreos.0\r\n    command:\r\n    - /hyperkube\r\n    - scheduler\r\n    - --master=http://127.0.0.1:8080\r\n    - --leader-elect=true\r\n    livenessProbe:\r\n      httpGet:\r\n        host: 127.0.0.1\r\n        path: /healthz\r\n        port: 10251\r\n      initialDelaySeconds: 15\r\n      timeoutSeconds: 1\r\n```\r\n\r\nThe POD description after the node reboot:\r\n```\r\nName:           kube-scheduler-10.54.147.6\r\nNamespace:      kube-system\r\nNode:           10.54.147.6/10.54.147.6\r\nStart Time:     Wed, 09 Nov 2016 07:51:35 +0100\r\nLabels:         <none>\r\nStatus:         Running\r\nIP:             10.54.147.6\r\nControllers:    <none>\r\nInit Containers:\r\n  wait-for-master:\r\n    Container ID:       docker://ff5ef0e759eb332c50fcc117a5758c41080835addbd76e33eb60cdde10d9587b\r\n    Image:              quay.io/coreos/hyperkube:v1.4.3_coreos.0\r\n    Image ID:           docker://sha256:5d3bc50f81574bc41952e13862b04b98f310ab60601ff990e7267a4ba5227e8b\r\n    Port:\r\n    Command:\r\n      /bin/bash\r\n      -c\r\n      while ! timeout 1 bash -c \"/kubectl --server=http://127.0.0.1:8080/ cluster-info\"; do sleep 1; done\r\n    State:                      Terminated\r\n      Reason:                   Completed\r\n      Exit Code:                0\r\n      Started:                  Tue, 08 Nov 2016 14:17:27 +0100\r\n      Finished:                 Tue, 08 Nov 2016 14:17:35 +0100\r\n    Ready:                      True\r\n    Restart Count:              0\r\n    Volume Mounts:              <none>\r\n    Environment Variables:      <none>\r\nContainers:\r\n  kube-scheduler:\r\n    Container ID:       docker://03e40bb84d477e6a284c4bfdf677d15135fe78785b17ae62d09cd04063f81aec\r\n    Image:              quay.io/coreos/hyperkube:v1.4.3_coreos.0\r\n    Image ID:           docker://sha256:5d3bc50f81574bc41952e13862b04b98f310ab60601ff990e7267a4ba5227e8b\r\n    Port:\r\n    Command:\r\n      /hyperkube\r\n      scheduler\r\n      --master=http://127.0.0.1:8080\r\n      --leader-elect=true\r\n    State:                      Running\r\n      Started:                  Wed, 09 Nov 2016 07:51:36 +0100\r\n    Last State:                 Terminated\r\n      Reason:                   Error\r\n      Exit Code:                2\r\n      Started:                  Tue, 08 Nov 2016 20:50:42 +0100\r\n      Finished:                 Wed, 09 Nov 2016 07:48:44 +0100\r\n    Ready:                      True\r\n    Restart Count:              4\r\n    Liveness:                   http-get http://127.0.0.1:10251/healthz delay=15s timeout=1s period=10s #success=1 #failure=3\r\n    Volume Mounts:              <none>\r\n    Environment Variables:      <none>\r\nConditions:\r\n  Type          Status\r\n  Initialized   True \r\n  Ready         True \r\n  PodScheduled  True \r\nNo volumes.\r\nQoS Class:      BestEffort\r\nTolerations:    <none>\r\n```\r\n\r\n**How to reproduce it**\r\nCreate a pod with the `cloud-init` section and pin it to one node. Reboot the node several times and check if the `cloud-init` container was executed.",
  "closed_at": "2017-08-17T02:50:22Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 21,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36485/comments",
  "created_at": "2016-11-09T08:15:59Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36485/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/36485",
  "id": 188188512,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 116719829,
      "name": "area/kubelet",
      "node_id": "MDU6TGFiZWwxMTY3MTk4Mjk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/kubelet"
    },
    {
      "color": "eb6420",
      "default": false,
      "description": "Must be staffed and worked on either currently, or very soon, ideally in time for the next release.",
      "id": 114528223,
      "name": "priority/important-soon",
      "node_id": "MDU6TGFiZWwxMTQ1MjgyMjM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/important-soon"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Node.",
      "id": 173493665,
      "name": "sig/node",
      "node_id": "MDU6TGFiZWwxNzM0OTM2NjU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/node"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36485/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2019-08-26T17:23:28Z",
    "closed_issues": 1061,
    "created_at": "2017-05-26T17:18:43Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/169553?v=4",
      "events_url": "https://api.github.com/users/timothysc/events{/privacy}",
      "followers_url": "https://api.github.com/users/timothysc/followers",
      "following_url": "https://api.github.com/users/timothysc/following{/other_user}",
      "gists_url": "https://api.github.com/users/timothysc/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/timothysc",
      "id": 169553,
      "login": "timothysc",
      "node_id": "MDQ6VXNlcjE2OTU1Mw==",
      "organizations_url": "https://api.github.com/users/timothysc/orgs",
      "received_events_url": "https://api.github.com/users/timothysc/received_events",
      "repos_url": "https://api.github.com/users/timothysc/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/timothysc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timothysc/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/timothysc"
    },
    "description": "",
    "due_on": "2017-09-27T07:00:00Z",
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/36",
    "id": 2545392,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/36/labels",
    "node_id": "MDk6TWlsZXN0b25lMjU0NTM5Mg==",
    "number": 36,
    "open_issues": 0,
    "state": "closed",
    "title": "v1.8",
    "updated_at": "2019-08-26T17:23:28Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/36"
  },
  "node_id": "MDU6SXNzdWUxODgxODg1MTI=",
  "number": 36485,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Containers from init-containers section do not execute during node reboots",
  "updated_at": "2017-08-17T02:50:22Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36485",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/3242249?v=4",
    "events_url": "https://api.github.com/users/jakub-d/events{/privacy}",
    "followers_url": "https://api.github.com/users/jakub-d/followers",
    "following_url": "https://api.github.com/users/jakub-d/following{/other_user}",
    "gists_url": "https://api.github.com/users/jakub-d/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jakub-d",
    "id": 3242249,
    "login": "jakub-d",
    "node_id": "MDQ6VXNlcjMyNDIyNDk=",
    "organizations_url": "https://api.github.com/users/jakub-d/orgs",
    "received_events_url": "https://api.github.com/users/jakub-d/received_events",
    "repos_url": "https://api.github.com/users/jakub-d/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jakub-d/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jakub-d/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jakub-d"
  }
}