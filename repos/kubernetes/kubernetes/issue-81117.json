{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "This issue was reported in the [Kubernetes Security Audit Report](https://github.com/kubernetes/community/blob/master/wg-security-audit/findings/Kubernetes%20Final%20Report.pdf)\r\n\r\n**Description**\r\nWhen configuring components of infrastructure, environment variables allow a trivial method of gathering settings. However, not all settings should be derived from these variables. For example, the pkg/controller/certificates/signer/cfssl_signer.go file used the CFSSL_CA_PK_PASSWORD environment variable, where a plain-text password should be found within the variable.\r\n\r\n```\r\nstrPassword := os.Getenv(\"CFSSL_CA_PK_PASSWORD\")\r\n```\r\nFigure 8.1: A string password being recovered from the CFSSL_CA_PK_PASSWORD environment variable.\r\n\r\nIf this variable is configured, an attacker could potentially gain access to its stored value through environment logging, or further exploitation of the endpoint. The assessment team found seemingly sensitive environment variables in at least the following locations:\r\n\r\n```\r\npkg/cloudprovider/providers/openstack/openstack.go:207:\tcfg.Global.Password = os.Getenv(\"OS_PASSWORD\")\r\npkg/credentialprovider/rancher/rancher_registry_credentials.go:125:\taccessKey := os.Getenv(\"CATTLE_ACCESS_KEY\")\r\npkg/credentialprovider/rancher/rancher_registry_credentials.go:126:\tsecretKey := os.Getenv(\"CATTLE_SECRET_KEY\")\r\npkg/controller/certificates/signer/cfssl_signer.go:79:\tstrPassword := os.Getenv(\"CFSSL_CA_PK_PASSWORD\")\r\n```\r\n\r\n**Exploit Scenario**\r\nAlice configures her environment with the CFSSL_CA_PK_PASSWORD environment variable. Eve gains access to Alice\u2019s environment and determines that the CFSSL_CA_PK_PASSWORD environment variable is set. Because this variable contains the private key password, Eve is able to recover the private key and use it trivially, leading to further exploitation of Alice\u2019s environment.\r\n\r\n**Recommendation**\r\nShort term, ensure highly sensitive information is not collected directly from environment variables for long periods of time.\r\n\r\nLong term, consider using Kubernetes secrets for all areas of the system. This will allow users to have one unified interface and location for all secrets, and avoid accidentally exposing secrets to other users within a host system.\r\n\r\n\r\n**Anything else we need to know?**:\r\n\r\nSee #81146 for current status of all issues created from these findings.\r\n\r\nThe vendor gave this issue an ID of TOB-K8S-005 and it was finding 9 of the report.\r\n\r\nThe vendor considers this issue Medium Severity.\r\n\r\nTo view the original finding, begin on page 35 of the [Kubernetes Security Review Report](https://github.com/kubernetes/community/blob/master/wg-security-audit/findings/Kubernetes%20Final%20Report.pdf)\r\n\r\n**Environment**:\r\n\r\n- Kubernetes version: 1.13.4",
  "closed_at": "2019-11-10T00:53:41Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 10,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/81117/comments",
  "created_at": "2019-08-08T02:03:12Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/81117/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/81117",
  "id": 478213896,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": "Issues or PRs related to openstack provider",
      "id": 239914558,
      "name": "area/provider/openstack",
      "node_id": "MDU6TGFiZWwyMzk5MTQ1NTg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/provider/openstack"
    },
    {
      "color": "d93f0b",
      "default": false,
      "description": null,
      "id": 116712923,
      "name": "area/security",
      "node_id": "MDU6TGFiZWwxMTY3MTI5MjM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/security"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "eb6420",
      "default": false,
      "description": "Must be staffed and worked on either currently, or very soon, ideally in time for the next release.",
      "id": 114528223,
      "name": "priority/important-soon",
      "node_id": "MDU6TGFiZWwxMTQ1MjgyMjM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/important-soon"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Auth.",
      "id": 357119284,
      "name": "sig/auth",
      "node_id": "MDU6TGFiZWwzNTcxMTkyODQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/auth"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Cloud Provider.",
      "id": 958178286,
      "name": "sig/cloud-provider",
      "node_id": "MDU6TGFiZWw5NTgxNzgyODY=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/cloud-provider"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to WG Security Audit.",
      "id": 1086787146,
      "name": "wg/security-audit",
      "node_id": "MDU6TGFiZWwxMDg2Nzg3MTQ2",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/wg/security-audit"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/81117/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": null,
    "closed_issues": 1674,
    "created_at": "2019-01-21T20:12:05Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/980082?v=4",
      "events_url": "https://api.github.com/users/liggitt/events{/privacy}",
      "followers_url": "https://api.github.com/users/liggitt/followers",
      "following_url": "https://api.github.com/users/liggitt/following{/other_user}",
      "gists_url": "https://api.github.com/users/liggitt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/liggitt",
      "id": 980082,
      "login": "liggitt",
      "node_id": "MDQ6VXNlcjk4MDA4Mg==",
      "organizations_url": "https://api.github.com/users/liggitt/orgs",
      "received_events_url": "https://api.github.com/users/liggitt/received_events",
      "repos_url": "https://api.github.com/users/liggitt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/liggitt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liggitt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/liggitt"
    },
    "description": null,
    "due_on": null,
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/43",
    "id": 3990944,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/43/labels",
    "node_id": "MDk6TWlsZXN0b25lMzk5MDk0NA==",
    "number": 43,
    "open_issues": 17,
    "state": "open",
    "title": "v1.17",
    "updated_at": "2020-10-27T18:45:51Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/43"
  },
  "node_id": "MDU6SXNzdWU0NzgyMTM4OTY=",
  "number": 81117,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "TOB-K8S-005: Environment variables expose sensitive data",
  "updated_at": "2019-11-10T00:53:41Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/81117",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/419708?v=4",
    "events_url": "https://api.github.com/users/cji/events{/privacy}",
    "followers_url": "https://api.github.com/users/cji/followers",
    "following_url": "https://api.github.com/users/cji/following{/other_user}",
    "gists_url": "https://api.github.com/users/cji/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/cji",
    "id": 419708,
    "login": "cji",
    "node_id": "MDQ6VXNlcjQxOTcwOA==",
    "organizations_url": "https://api.github.com/users/cji/orgs",
    "received_events_url": "https://api.github.com/users/cji/received_events",
    "repos_url": "https://api.github.com/users/cji/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/cji/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cji/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/cji"
  }
}