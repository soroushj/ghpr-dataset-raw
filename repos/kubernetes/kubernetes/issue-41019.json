{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "**Is this a request for help?** (If yes, you should use our troubleshooting guide and community support channels, see http://kubernetes.io/docs/troubleshooting/.):\r\nNo.\r\n\r\n\r\n**What keywords did you search in Kubernetes issues before filing this one?** (If you have found any duplicates, you should instead reply there.):\r\nToken, secrets, Unable to authenticate the request due to an error: crypto/rsa: verification error\r\n\r\n---\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?** (choose one):\r\nBUG REPORT\r\n\r\n**Kubernetes version** (use `kubectl version`):\r\nClient Version: version.Info{Major:\"1\", Minor:\"5\", GitVersion:\"v1.5.2\", GitCommit:\"08e099554f3c31f6e6f07b448ab3ed78d0520507\", GitTreeState:\"clean\", BuildDate:\"2017-01-17T20:36:07Z\", GoVersion:\"go1.7.4\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"5\", GitVersion:\"v1.5.2\", GitCommit:\"08e099554f3c31f6e6f07b448ab3ed78d0520507\", GitTreeState:\"clean\", BuildDate:\"2017-01-17T20:20:10Z\", GoVersion:\"go1.7.4\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n\r\n**Environment**:\r\n- **Cloud provider or hardware configuration**: Physical servers (16 cores 32 thrads, 64GB of RAM) for worker at our own datacenter in France, Virtual Machines for K8s management (4vCPU, 8GB of RAM) (masters, lbapi, etcd), and some EC2 instances (t2.medium) for United States workers.\r\n- **OS** (e.g. from /etc/os-release): Ubuntu 16.04.1 LTS\r\n- **Kernel** (e.g. `uname -a`): Linux mth-k8smaster-01 4.4.0-62-generic #83-Ubuntu SMP Wed Jan 18 14:10:15 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n- **Install tools**: Canonical Kubernetes through Juju bundle charms\r\n\r\n**What happened**:\r\nAfter a fresh install of a new cluster through Canonical Kubernetes bundle charm, if I reboot one of my 3 masters, it reboot with a new token secret different from the two others.\r\n\r\n\r\n**What you expected to happen**:\r\nThose tokens need to be syced among the masters: they aren't right now. I got a new token that it loaded into the k8s object store during turn up and its not agree'ing with what the other masters have which would be why it showed up after reboot, not before.\r\n\r\n\r\n**How to reproduce it** (as minimally and precisely as possible):\r\n- Bootstrap a CDK with 3 masters / 5 etcd / 5 worker (all other charms scale at default value)\r\n- Do a random reboot of 2 of your masters\r\n- Check /srv/kubernetes/known_tokens.csv on all of them\r\n- They must be different on all your masters now.\r\n\r\n-> If you can't reproduce, please try again to reboot some masters again. Sometime it's random. This time it happens at the first reboot immediately after a fresh-install (no extra-operation).\r\n\r\n\r\n**Anything else we need to know**:\r\nDiscussed on IRC #juju@freenode, bug opened at Juju team request :+1: ",
  "closed_at": "2017-02-25T11:56:55Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/41019/comments",
  "created_at": "2017-02-06T17:22:05Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/41019/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/41019",
  "id": 205652742,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/41019/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMDU2NTI3NDI=",
  "number": 41019,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "CDK - known_tokens are wrong when rebooting one of the master randomly",
  "updated_at": "2017-02-25T11:56:55Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/41019",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/25266804?v=4",
    "events_url": "https://api.github.com/users/jonathanmarsaud/events{/privacy}",
    "followers_url": "https://api.github.com/users/jonathanmarsaud/followers",
    "following_url": "https://api.github.com/users/jonathanmarsaud/following{/other_user}",
    "gists_url": "https://api.github.com/users/jonathanmarsaud/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jonathanmarsaud",
    "id": 25266804,
    "login": "jonathanmarsaud",
    "node_id": "MDQ6VXNlcjI1MjY2ODA0",
    "organizations_url": "https://api.github.com/users/jonathanmarsaud/orgs",
    "received_events_url": "https://api.github.com/users/jonathanmarsaud/received_events",
    "repos_url": "https://api.github.com/users/jonathanmarsaud/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jonathanmarsaud/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jonathanmarsaud/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jonathanmarsaud"
  }
}