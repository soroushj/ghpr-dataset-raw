{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "<!-- This form is for bug reports and feature requests ONLY!\r\n\r\nIf you're looking for help check [Stack Overflow](https://stackoverflow.com/questions/tagged/kubernetes) and the [troubleshooting guide](https://kubernetes.io/docs/tasks/debug-application-cluster/troubleshooting/).\r\n\r\nIf the matter is security related, please disclose it privately via https://kubernetes.io/security/.\r\n-->\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**:\r\n\r\n> Uncomment only one, leave it on its own line:\r\n>\r\n/kind bug\r\n> /kind feature\r\n\r\n\r\n**What happened**: cfssl fails to work correctly when e2e testing from macOS\r\n\r\n**What you expected to happen**: e2e testing with `go run hack/e2e.go -- --up ...` should bring up a cluster\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**: run `go run hack/e2e.go -- --build --up` on mac.\r\n\r\n\r\n**Anything else we need to know?**: https://github.com/golang/go/issues/17335 looks related, possibly this binary is just built with too old of a go version?\r\n\r\n**Environment**: macOS High Sierra 10.13.6\r\n\r\nRelevant log snippet:\r\n<details>\r\n\r\n```console\r\n+ kube::util::ensure-cfssl /var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl\r\n+ command -v cfssl\r\n+ local cfssldir=/var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl\r\n+ [[ -z /var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl ]]\r\n+ mkdir -p /var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl\r\n+ pushd /var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl\r\n+ command pushd /var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl\r\n+ pushd /var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl\r\n+ echo 'Unable to successfully run '\\''cfssl'\\'' from /Users/bentheelder/homebrew/opt/openssl/bin:/Users/bentheelder/Downloads/google-cloud-sdk/bin:/Users/bentheelder/.gvm/bin:/Users/bentheelder/homebrew/bin:/usr/local/git/current/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/go/bin:/Users/bentheelder/Downloads/google-cloud-sdk/bin:/Users/bentheelder/.gvm/bin:/Users/bentheelder/homebrew/bin:/Users/bentheelder/go/bin:/Users/bentheelder/go/bin; downloading instead...'\r\nUnable to successfully run 'cfssl' from /Users/bentheelder/homebrew/opt/openssl/bin:/Users/bentheelder/Downloads/google-cloud-sdk/bin:/Users/bentheelder/.gvm/bin:/Users/bentheelder/homebrew/bin:/usr/local/git/current/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/go/bin:/Users/bentheelder/Downloads/google-cloud-sdk/bin:/Users/bentheelder/.gvm/bin:/Users/bentheelder/homebrew/bin:/Users/bentheelder/go/bin:/Users/bentheelder/go/bin; downloading instead...\r\n++ uname -s\r\n+ kernel=Darwin\r\n+ case \"${kernel}\" in\r\n+ curl --retry 10 -L -o cfssl https://pkg.cfssl.org/R1.2/cfssl_darwin-amd64\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100  9.8M  100  9.8M    0     0  17.5M      0 --:--:-- --:--:-- --:--:-- 17.5M\r\n+ curl --retry 10 -L -o cfssljson https://pkg.cfssl.org/R1.2/cfssljson_darwin-amd64\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100 2176k  100 2176k    0     0  5020k      0 --:--:-- --:--:-- --:--:-- 5027k\r\n+ chmod +x cfssl\r\n+ chmod +x cfssljson\r\n+ CFSSL_BIN=/var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl/cfssl\r\n+ CFSSLJSON_BIN=/var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl/cfssljson\r\n+ [[ ! -x /var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl/cfssl ]]\r\n+ [[ ! -x /var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl/cfssljson ]]\r\n+ popd\r\n+ command popd\r\n+ popd\r\n+ echo '{\"signing\":{\"default\":{\"expiry\":\"43800h\",\"usages\":[\"signing\",\"key encipherment\",\"client auth\"]}}}'\r\n+ echo '{\"CN\":\"kubelet\",\"names\":[{\"O\":\"system:nodes\"}],\"hosts\":[\"\"],\"key\":{\"algo\":\"rsa\",\"size\":2048}}'\r\n+ /var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl/cfssl gencert -ca=pki/ca.crt -ca-key=pki/private/ca.key-config=ca-config.json -\r\n+ /var/folders/hl/0xw19s6d3ln687jsdd243w8r00fsfv/T/tmp.gHWIiVrn/cfssl/cfssljson -bare kubelet\r\nfailed MSpanList_Insert 0x246000 0x5545d0ef825e 0x0 0x0\r\nfatal error: MSpanList_Insert\r\n\r\nruntime stack:\r\nruntime.throw(0x15d320, 0x10)\r\n        /usr/local/go/src/runtime/panic.go:530 +0x90 fp=0x7ffeefbfed50 sp=0x7ffeefbfed38\r\nruntime.(*mSpanList).insert(0x1fdee8, 0x246000)\r\n        /usr/local/go/src/runtime/mheap.go:933 +0x293 fp=0x7ffeefbfed80 sp=0x7ffeefbfed50\r\nruntime.(*mheap).freeSpanLocked(0x1fd6e0, 0x246000, 0x100, 0x0)\r\n        /usr/local/go/src/runtime/mheap.go:809 +0x4be fp=0x7ffeefbfede8 sp=0x7ffeefbfed80\r\nruntime.(*mheap).grow(0x1fd6e0, 0x8, 0x0)\r\n        /usr/local/go/src/runtime/mheap.go:675 +0x2a0 fp=0x7ffeefbfee40 sp=0x7ffeefbfede8\r\nruntime.(*mheap).allocSpanLocked(0x1fd6e0, 0x1, 0x0)\r\n        /usr/local/go/src/runtime/mheap.go:553 +0x4e3 fp=0x7ffeefbfee98 sp=0x7ffeefbfee40\r\nruntime.(*mheap).alloc_m(0x1fd6e0, 0x1, 0x15, 0x0)\r\n        /usr/local/go/src/runtime/mheap.go:437 +0x119 fp=0x7ffeefbfeec8 sp=0x7ffeefbfee98\r\nruntime.(*mheap).alloc.func1()\r\n        /usr/local/go/src/runtime/mheap.go:502 +0x41 fp=0x7ffeefbfeef8 sp=0x7ffeefbfeec8\r\nruntime.systemstack(0x7ffeefbfef18)\r\n        /usr/local/go/src/runtime/asm_amd64.s:307 +0xab fp=0x7ffeefbfef00 sp=0x7ffeefbfeef8\r\nruntime.(*mheap).alloc(0x1fd6e0, 0x1, 0x10000000015, 0x108df)\r\n        /usr/local/go/src/runtime/mheap.go:503 +0x63 fp=0x7ffeefbfef48 sp=0x7ffeefbfef00\r\nruntime.(*mcentral).grow(0x1ff2e0, 0x0)\r\n        /usr/local/go/src/runtime/mcentral.go:209 +0x93 fp=0x7ffeefbfefb0 sp=0x7ffeefbfef48\r\nruntime.(*mcentral).cacheSpan(0x1ff2e0, 0x1fa308)\r\n        /usr/local/go/src/runtime/mcentral.go:89 +0x47d fp=0x7ffeefbfeff0 sp=0x7ffeefbfefb0\r\nruntime.(*mcache).refill(0x242000, 0x15, 0x7ffeefbff058)\r\n        /usr/local/go/src/runtime/mcache.go:119 +0xcc fp=0x7ffeefbff028 sp=0x7ffeefbfeff0\r\nruntime.mallocgc.func2()\r\n        /usr/local/go/src/runtime/malloc.go:642 +0x2b fp=0x7ffeefbff048 sp=0x7ffeefbff028\r\nruntime.systemstack(0x7ffeefbff0e8)\r\n        /usr/local/go/src/runtime/asm_amd64.s:307 +0xab fp=0x7ffeefbff050 sp=0x7ffeefbff048\r\nruntime.mallocgc(0x180, 0x140400, 0x0, 0x800000000)\r\n        /usr/local/go/src/runtime/malloc.go:643 +0x869 fp=0x7ffeefbff128 sp=0x7ffeefbff050\r\nruntime.newobject(0x140400, 0x1fa5b0)\r\n        /usr/local/go/src/runtime/malloc.go:781 +0x42 fp=0x7ffeefbff150 sp=0x7ffeefbff128\r\nruntime.malg(0x8000, 0x1fa820)\r\n        /usr/local/go/src/runtime/proc.go:2634 +0x27 fp=0x7ffeefbff188 sp=0x7ffeefbff150\r\nruntime.mpreinit(0x1fab60)\r\n        /usr/local/go/src/runtime/os1_darwin.go:140 +0x1f fp=0x7ffeefbff1a0 sp=0x7ffeefbff188\r\nruntime.mcommoninit(0x1fab60)\r\n        /usr/local/go/src/runtime/proc.go:494 +0x105 fp=0x7ffeefbff1e8 sp=0x7ffeefbff1a0\r\nruntime.schedinit()\r\n        /usr/local/go/src/runtime/proc.go:434 +0x79 fp=0x7ffeefbff230 sp=0x7ffeefbff1e8\r\nruntime.rt0_go(0x7ffeefbff268, 0x3, 0x7ffeefbff268, 0x0, 0x0, 0x3, 0x7ffeefbff4a0, 0x7ffeefbff4ee, 0x7ffeefbff4f4, 0x0, ...)\r\n        /usr/local/go/src/runtime/asm_amd64.s:138 +0x132 fp=0x7ffeefbff238 sp=0x7ffeefbff230\r\nfailed MSpanList_Insert 0xa0f000 0x5545d283be65 0x0 0x0\r\nfatal error: MSpanList_Insert\r\n\r\nruntime stack:\r\nruntime.throw(0x6bbbe0, 0x10)\r\n        /usr/local/go/src/runtime/panic.go:530 +0x90 fp=0x7ffeefbfed00 sp=0x7ffeefbfece8\r\nruntime.(*mSpanList).insert(0x9436e8, 0xa0f000)\r\n        /usr/local/go/src/runtime/mheap.go:933 +0x293 fp=0x7ffeefbfed30 sp=0x7ffeefbfed00\r\nruntime.(*mheap).freeSpanLocked(0x942ee0, 0xa0f000, 0x100, 0x0)\r\n        /usr/local/go/src/runtime/mheap.go:809 +0x4be fp=0x7ffeefbfed98 sp=0x7ffeefbfed30\r\nruntime.(*mheap).grow(0x942ee0, 0x8, 0x0)\r\n        /usr/local/go/src/runtime/mheap.go:675 +0x2a0 fp=0x7ffeefbfedf0 sp=0x7ffeefbfed98\r\nruntime.(*mheap).allocSpanLocked(0x942ee0, 0x1, 0x0)\r\n        /usr/local/go/src/runtime/mheap.go:553 +0x4e3 fp=0x7ffeefbfee48 sp=0x7ffeefbfedf0\r\nruntime.(*mheap).alloc_m(0x942ee0, 0x1, 0x15, 0x0)\r\n        /usr/local/go/src/runtime/mheap.go:437 +0x119 fp=0x7ffeefbfee78 sp=0x7ffeefbfee48\r\nruntime.(*mheap).alloc.func1()\r\n        /usr/local/go/src/runtime/mheap.go:502 +0x41 fp=0x7ffeefbfeea8 sp=0x7ffeefbfee78\r\nruntime.systemstack(0x7ffeefbfeec8)\r\n        /usr/local/go/src/runtime/asm_amd64.s:307 +0xab fp=0x7ffeefbfeeb0 sp=0x7ffeefbfeea8\r\nruntime.(*mheap).alloc(0x942ee0, 0x1, 0x10000000015, 0xee2f)\r\n        /usr/local/go/src/runtime/mheap.go:503 +0x63 fp=0x7ffeefbfeef8 sp=0x7ffeefbfeeb0\r\nruntime.(*mcentral).grow(0x944ae0, 0x0)\r\n        /usr/local/go/src/runtime/mcentral.go:209 +0x93 fp=0x7ffeefbfef60 sp=0x7ffeefbfeef8\r\nruntime.(*mcentral).cacheSpan(0x944ae0, 0x93d4e8)\r\n        /usr/local/go/src/runtime/mcentral.go:89 +0x47d fp=0x7ffeefbfefa0 sp=0x7ffeefbfef60\r\nruntime.(*mcache).refill(0xa0b000, 0x15, 0x7ffeefbff008)\r\n        /usr/local/go/src/runtime/mcache.go:119 +0xcc fp=0x7ffeefbfefd8 sp=0x7ffeefbfefa0\r\nruntime.mallocgc.func2()\r\n        /usr/local/go/src/runtime/malloc.go:642 +0x2b fp=0x7ffeefbfeff8 sp=0x7ffeefbfefd8\r\nruntime.systemstack(0x7ffeefbff098)\r\n        /usr/local/go/src/runtime/asm_amd64.s:307 +0xab fp=0x7ffeefbff000 sp=0x7ffeefbfeff8\r\nruntime.mallocgc(0x180, 0x6558a0, 0x0, 0x800000000)\r\n        /usr/local/go/src/runtime/malloc.go:643 +0x869 fp=0x7ffeefbff0d8 sp=0x7ffeefbff000\r\nruntime.newobject(0x6558a0, 0x93da10)\r\n        /usr/local/go/src/runtime/malloc.go:781 +0x42 fp=0x7ffeefbff100 sp=0x7ffeefbff0d8\r\nruntime.malg(0x8000, 0x93df00)\r\n        /usr/local/go/src/runtime/proc.go:2634 +0x27 fp=0x7ffeefbff138 sp=0x7ffeefbff100\r\nruntime.mpreinit(0x93e760)\r\n        /usr/local/go/src/runtime/os1_darwin.go:140 +0x1f fp=0x7ffeefbff150 sp=0x7ffeefbff138\r\nruntime.mcommoninit(0x93e760)\r\n        /usr/local/go/src/runtime/proc.go:494 +0x105 fp=0x7ffeefbff198 sp=0x7ffeefbff150\r\nruntime.schedinit()\r\n        /usr/local/go/src/runtime/proc.go:434 +0x79 fp=0x7ffeefbff1e0 sp=0x7ffeefbff198\r\nruntime.rt0_go(0x7ffeefbff218, 0x6, 0x7ffeefbff218, 0x0, 0x0, 0x6, 0x7ffeefbff468, 0x7ffeefbff4b2, 0x7ffeefbff4ba, 0x7ffeefbff4c9, ...)\r\n        /usr/local/go/src/runtime/asm_amd64.s:138 +0x132 fp=0x7ffeefbff1e8 sp=0x7ffeefbff1e0\r\n```\r\n\r\n</details>",
  "closed_at": "2018-08-10T21:13:09Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 5,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66995/comments",
  "created_at": "2018-08-05T21:29:22Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66995/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/66995",
  "id": 347732718,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Cluster Lifecycle.",
      "id": 173494222,
      "name": "sig/cluster-lifecycle",
      "node_id": "MDU6TGFiZWwxNzM0OTQyMjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/cluster-lifecycle"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Testing.",
      "id": 483069764,
      "name": "sig/testing",
      "node_id": "MDU6TGFiZWw0ODMwNjk3NjQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/testing"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66995/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNDc3MzI3MTg=",
  "number": 66995,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "downloaded CFSSL is broken on mac",
  "updated_at": "2018-08-10T21:13:09Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66995",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/917931?v=4",
    "events_url": "https://api.github.com/users/BenTheElder/events{/privacy}",
    "followers_url": "https://api.github.com/users/BenTheElder/followers",
    "following_url": "https://api.github.com/users/BenTheElder/following{/other_user}",
    "gists_url": "https://api.github.com/users/BenTheElder/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/BenTheElder",
    "id": 917931,
    "login": "BenTheElder",
    "node_id": "MDQ6VXNlcjkxNzkzMQ==",
    "organizations_url": "https://api.github.com/users/BenTheElder/orgs",
    "received_events_url": "https://api.github.com/users/BenTheElder/received_events",
    "repos_url": "https://api.github.com/users/BenTheElder/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/BenTheElder/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/BenTheElder/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/BenTheElder"
  }
}