{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/493891?v=4",
    "events_url": "https://api.github.com/users/sjenning/events{/privacy}",
    "followers_url": "https://api.github.com/users/sjenning/followers",
    "following_url": "https://api.github.com/users/sjenning/following{/other_user}",
    "gists_url": "https://api.github.com/users/sjenning/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sjenning",
    "id": 493891,
    "login": "sjenning",
    "node_id": "MDQ6VXNlcjQ5Mzg5MQ==",
    "organizations_url": "https://api.github.com/users/sjenning/orgs",
    "received_events_url": "https://api.github.com/users/sjenning/received_events",
    "repos_url": "https://api.github.com/users/sjenning/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sjenning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sjenning/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sjenning"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/493891?v=4",
      "events_url": "https://api.github.com/users/sjenning/events{/privacy}",
      "followers_url": "https://api.github.com/users/sjenning/followers",
      "following_url": "https://api.github.com/users/sjenning/following{/other_user}",
      "gists_url": "https://api.github.com/users/sjenning/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/sjenning",
      "id": 493891,
      "login": "sjenning",
      "node_id": "MDQ6VXNlcjQ5Mzg5MQ==",
      "organizations_url": "https://api.github.com/users/sjenning/orgs",
      "received_events_url": "https://api.github.com/users/sjenning/received_events",
      "repos_url": "https://api.github.com/users/sjenning/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/sjenning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sjenning/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/sjenning"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "<!-- Thanks for filing an issue! Before hitting the button, please answer these questions.-->\r\n\r\n**Is this a request for help?**\r\n\r\nNo\r\n\r\n**What keywords did you search in Kubernetes issues before filing this one?**\r\n\r\npanic, findAndRemoveDeletedPods\r\n\r\n---\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**\r\n\r\nBUG REPORT\r\n\r\n**Kubernetes version** (use `kubectl version`): 1.5.1\r\n\r\n\r\n**Environment**:\r\n- **Cloud provider or hardware configuration**: GKE\r\n- **OS** (e.g. from /etc/os-release): gci 56 (8938.0.0)\r\n- **Kernel** (e.g. `uname -a`): `Linux gke-xxx 4.4.21+ #1 SMP Thu Oct 27 02:50:36 PDT 2016 x86_64 Intel(R) Xeon(R) CPU @ 2.30GHz GenuineIntel GNU/Linux`\r\n- **Install tools**:\r\n- **Others**:\r\n\r\n\r\n**What happened**:\r\n\r\nI created a pod and it went into the failed state. I couldn't find any info about the failure, so I logged into the GKE node and ran \"journalctl -u kubelet\" and saw:\r\n\r\n```\r\nDec 29 20:20:04 gke-xxx kubelet[1654]: I1229 20:20:04.906839    1654 kubelet.go:1816] SyncLoop (PLEG): \"restore-bigeasy-02-b_grosskur(cfb7edba-ce03-11e6-9c17-42010af00156)\", event: &pleg.PodLifecycleEvent{ID:\"cfb7edba-ce03-11e6-9c17-42010af00156\", Type:\"ContainerDied\", Data:\"8a12a6c754e5cc7c7efe826a5af5d7376ec5557bb0648a5abe830a57c1843027\"}\r\nDec 29 20:20:04 gke-xxx kubelet[1654]: I1229 20:20:04.968938    1654 operation_executor.go:917] MountVolume.SetUp succeeded for volume \"kubernetes.io/secret/cfb7edba-ce03-11e6-9c17-42010af00156-default-token-5llx5\" (spec.Name: \"default-token-5llx5\") pod \"cfb7edba-ce03-11e6-9c17-42010af00156\" (UID: \"cfb7edba-ce03-11e6-9c17-42010af00156\").\r\nDec 29 20:20:05 gke-xxx kubelet[1654]: I1229 20:20:05.087282    1654 conversion.go:134] failed to handle multiple devices for container. Skipping Filesystem stats\r\nDec 29 20:20:05 gke-xxx kubelet[1654]: I1229 20:20:05.087316    1654 conversion.go:134] failed to handle multiple devices for container. Skipping Filesystem stats\r\nDec 29 20:20:05 gke-xxx kubelet[1654]: I1229 20:20:05.093216    1654 server.go:740] GET /stats/summary/: (6.167919ms) 200 [[Go-http-client/1.1] 10.52.6.7:42062]\r\nDec 29 20:20:05 gke-xxx kubelet[1654]: I1229 20:20:05.917924    1654 kubelet.go:1816] SyncLoop (PLEG): \"restore-bigeasy-02-b_grosskur(cfb7edba-ce03-11e6-9c17-42010af00156)\", event: &pleg.PodLifecycleEvent{ID:\"cfb7edba-ce03-11e6-9c17-42010af00156\", Type:\"ContainerStarted\", Data:\"c1221640498373252af613914b3df52f0ebf867c78916a7e2c970296d2f98966\"}\r\nDec 29 20:20:05 gke-xxx kubelet[1654]: I1229 20:20:05.972091    1654 operation_executor.go:917] MountVolume.SetUp succeeded for volume \"kubernetes.io/secret/cfb7edba-ce03-11e6-9c17-42010af00156-default-token-5llx5\" (spec.Name: \"default-token-5llx5\") pod \"cfb7edba-ce03-11e6-9c17-42010af00156\" (UID: \"cfb7edba-ce03-11e6-9c17-42010af00156\").\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: I1229 20:20:06.928592    1654 kubelet.go:1816] SyncLoop (PLEG): \"restore-bigeasy-02-b_grosskur(cfb7edba-ce03-11e6-9c17-42010af00156)\", event: &pleg.PodLifecycleEvent{ID:\"cfb7edba-ce03-11e6-9c17-42010af00156\", Type:\"ContainerDied\", Data:\"c1221640498373252af613914b3df52f0ebf867c78916a7e2c970296d2f98966\"}\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: E1229 20:20:06.949922    1654 runtime.go:64] Observed a panic: \"invalid memory address or nil pointer dereference\" (runtime error: invalid memory address or nil pointer dereference)\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/runtime/runtime.go:70\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/runtime/runtime.go:63\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/runtime/runtime.go:49\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /usr/local/go/src/runtime/asm_amd64.s:479\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /usr/local/go/src/runtime/panic.go:458\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /usr/local/go/src/runtime/panic.go:62\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /usr/local/go/src/runtime/sigpanic_unix.go:24\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/kubelet/volumemanager/populator/desired_state_of_world_populator.go:163\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/kubelet/volumemanager/populator/desired_state_of_world_populator.go:128\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/wait/wait.go:96\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/wait/wait.go:97\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/wait/wait.go:52\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/kubelet/volumemanager/populator/desired_state_of_world_populator.go:102\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: /usr/local/go/src/runtime/asm_amd64.s:2086\r\nDec 29 20:20:06 gke-xxx kubelet[1654]: I1229 20:20:06.975942    1654 operation_executor.go:917] MountVolume.SetUp succeeded for volume \"kubernetes.io/secret/cfb7edba-ce03-11e6-9c17-42010af00156-default-token-5llx5\" (spec.Name: \"default-token-5llx5\") pod \"cfb7edba-ce03-11e6-9c17-42010af00156\" (UID: \"cfb7edba-ce03-11e6-9c17-42010af00156\").\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: E1229 20:20:07.050393    1654 runtime.go:64] Observed a panic: \"invalid memory address or nil pointer dereference\" (runtime error: invalid memory address or nil pointer dereference)\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/runtime/runtime.go:70\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/runtime/runtime.go:63\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/runtime/runtime.go:49\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /usr/local/go/src/runtime/asm_amd64.s:479\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /usr/local/go/src/runtime/panic.go:458\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /usr/local/go/src/runtime/panic.go:62\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /usr/local/go/src/runtime/sigpanic_unix.go:24\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/kubelet/volumemanager/populator/desired_state_of_world_populator.go:163\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/kubelet/volumemanager/populator/desired_state_of_world_populator.go:128\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/wait/wait.go:96\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/wait/wait.go:97\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/util/wait/wait.go:52\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/kubelet/volumemanager/populator/desired_state_of_world_populator.go:102\r\nDec 29 20:20:07 gke-xxx kubelet[1654]: /usr/local/go/src/runtime/asm_amd64.s:2086\r\n```\r\n\r\nWhen I tail the log, the `invalid memory address or nil pointer dereference` error messages continue indefinitely with multiple messages printed every second.\r\n\r\nDigging into [pkg/kubelet/volumemanager/populator/desired_state_of_world_populator.go#L163](https://github.com/kubernetes/kubernetes/blob/v1.5.1/pkg/kubelet/volumemanager/populator/desired_state_of_world_populator.go#L163) I see:\r\n\r\n```\r\nif (volume.EmptyDir == nil || volume.EmptyDir.Medium != api.StorageMediumMemory) &&\r\n```\r\n\r\nSo I'm wondering if perhaps there is a bug where `volume` is `nil` in some cases.\r\n\r\n**What you expected to happen**:\r\n\r\nI did not expect to see the kublet log full of \"invalid memory address or nil pointer dereference\" errors.\r\n\r\n**How to reproduce it** (as minimally and precisely as possible):\r\n\r\nSorry, I don't have a good way to reproduce this error.\r\n\r\n**Anything else do we need to know**:\r\n\r\nI'm running several pods, each with a GCE persistent disk mounted. When the pods finish, I run a different set of pods that mount the same persistent disks. I've seen various issues in past K8S versions where persistent disks don't get detached and reattached properly across K8S nodes, but so far with 1.5.1 it seems to have been working well up until now.",
  "closed_at": "2017-01-06T16:44:18Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 6,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39480/comments",
  "created_at": "2017-01-05T19:48:16Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39480/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/39480",
  "id": 199042713,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39480/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2019-08-26T17:22:47Z",
    "closed_issues": 1412,
    "created_at": "2016-08-16T21:47:28Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/647318?v=4",
      "events_url": "https://api.github.com/users/lavalamp/events{/privacy}",
      "followers_url": "https://api.github.com/users/lavalamp/followers",
      "following_url": "https://api.github.com/users/lavalamp/following{/other_user}",
      "gists_url": "https://api.github.com/users/lavalamp/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lavalamp",
      "id": 647318,
      "login": "lavalamp",
      "node_id": "MDQ6VXNlcjY0NzMxOA==",
      "organizations_url": "https://api.github.com/users/lavalamp/orgs",
      "received_events_url": "https://api.github.com/users/lavalamp/received_events",
      "repos_url": "https://api.github.com/users/lavalamp/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lavalamp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lavalamp/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lavalamp"
    },
    "description": "",
    "due_on": null,
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/23",
    "id": 1945978,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/23/labels",
    "node_id": "MDk6TWlsZXN0b25lMTk0NTk3OA==",
    "number": 23,
    "open_issues": 0,
    "state": "closed",
    "title": "v1.5",
    "updated_at": "2019-08-26T17:22:47Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/23"
  },
  "node_id": "MDU6SXNzdWUxOTkwNDI3MTM=",
  "number": 39480,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "kubelet panic: \"invalid memory address or nil pointer dereference\" in findAndRemoveDeletedPods()",
  "updated_at": "2017-01-06T16:44:19Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39480",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/40483?v=4",
    "events_url": "https://api.github.com/users/grosskur/events{/privacy}",
    "followers_url": "https://api.github.com/users/grosskur/followers",
    "following_url": "https://api.github.com/users/grosskur/following{/other_user}",
    "gists_url": "https://api.github.com/users/grosskur/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/grosskur",
    "id": 40483,
    "login": "grosskur",
    "node_id": "MDQ6VXNlcjQwNDgz",
    "organizations_url": "https://api.github.com/users/grosskur/orgs",
    "received_events_url": "https://api.github.com/users/grosskur/received_events",
    "repos_url": "https://api.github.com/users/grosskur/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/grosskur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/grosskur/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/grosskur"
  }
}