{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/576341?v=4",
    "events_url": "https://api.github.com/users/soltysh/events{/privacy}",
    "followers_url": "https://api.github.com/users/soltysh/followers",
    "following_url": "https://api.github.com/users/soltysh/following{/other_user}",
    "gists_url": "https://api.github.com/users/soltysh/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/soltysh",
    "id": 576341,
    "login": "soltysh",
    "node_id": "MDQ6VXNlcjU3NjM0MQ==",
    "organizations_url": "https://api.github.com/users/soltysh/orgs",
    "received_events_url": "https://api.github.com/users/soltysh/received_events",
    "repos_url": "https://api.github.com/users/soltysh/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/soltysh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/soltysh/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/soltysh"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/576341?v=4",
      "events_url": "https://api.github.com/users/soltysh/events{/privacy}",
      "followers_url": "https://api.github.com/users/soltysh/followers",
      "following_url": "https://api.github.com/users/soltysh/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltysh/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/soltysh",
      "id": 576341,
      "login": "soltysh",
      "node_id": "MDQ6VXNlcjU3NjM0MQ==",
      "organizations_url": "https://api.github.com/users/soltysh/orgs",
      "received_events_url": "https://api.github.com/users/soltysh/received_events",
      "repos_url": "https://api.github.com/users/soltysh/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/soltysh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltysh/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/soltysh"
    }
  ],
  "author_association": "NONE",
  "body": "**What happened**:\r\n\r\nThere seems to be a regression after 1.13 release. A Cronjob with default settings does not clean up completed pods. The job themselves are getting deleted as expected, but the pods are left behind. This seems to be related to https://github.com/kubernetes/kubernetes/pull/70872 @juanvallejo \r\n\r\n**What you expected to happen**:\r\n\r\nExpected the pods for now non-existent child jobs  of a cronjob to be cleaned up. This is the way it used to work prior to 1.13/\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\nrun `kubectl apply` on this manifest:\r\n\r\n```yaml\r\nkind: CronJob\r\napiVersion: batch/v1beta1\r\nmetadata:\r\n  name: cjtest\r\nspec:\r\n  schedule: \"*/1 * * * *\"\r\n  jobTemplate:\r\n    spec:\r\n      template:\r\n        metadata:\r\n          name: cjtest\r\n          labels:\r\n            app: cjtest\r\n        spec:\r\n          restartPolicy: \"Never\"\r\n          containers:\r\n          - name: cjtest\r\n            image: hello-world\r\n```\r\nWait, more than 3 minutes, observe, that while only 3 successful jobs are present, the pods from now deleted jobs are left behind and never get deleted.\r\n\r\n**Anything else we need to know?**:\r\n\r\n@liggitt pointed out the following relevant places in the code base:\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/master/pkg/registry/batch/job/strategy.go#L53\r\nhttps://github.com/kubernetes/kubernetes/blob/master/pkg/controller/cronjob/injection.go#L121\r\n\r\n>deleting a job orphans pods by default and the cronjob controller doesn't do anything different than the default when deleting\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): 1.13.0\r\n- Cloud provider or hardware configuration: ubuntu VM in vSphere\r\n- OS (e.g. from /etc/os-release): 16.04.5 LTS (Xenial Xerus)\r\n- Kernel (e.g. `uname -a`): 4.4.0-135-generic \r\n- Install tools: kubeadm\r\n\r\n<!-- DO NOT EDIT BELOW THIS LINE -->\r\n/kind bug",
  "closed_at": "2018-12-07T00:25:36Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 5,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71772/comments",
  "created_at": "2018-12-06T05:50:10Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71772/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/71772",
  "id": 388066189,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Highest priority. Must be actively worked on as someone's top priority right now.",
      "id": 114528068,
      "name": "priority/critical-urgent",
      "node_id": "MDU6TGFiZWwxMTQ1MjgwNjg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/critical-urgent"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Apps.",
      "id": 404091735,
      "name": "sig/apps",
      "node_id": "MDU6TGFiZWw0MDQwOTE3MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/apps"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71772/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2020-08-23T05:01:14Z",
    "closed_issues": 462,
    "created_at": "2017-11-15T06:32:59Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/5595220?v=4",
      "events_url": "https://api.github.com/users/thockin/events{/privacy}",
      "followers_url": "https://api.github.com/users/thockin/followers",
      "following_url": "https://api.github.com/users/thockin/following{/other_user}",
      "gists_url": "https://api.github.com/users/thockin/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/thockin",
      "id": 5595220,
      "login": "thockin",
      "node_id": "MDQ6VXNlcjU1OTUyMjA=",
      "organizations_url": "https://api.github.com/users/thockin/orgs",
      "received_events_url": "https://api.github.com/users/thockin/received_events",
      "repos_url": "https://api.github.com/users/thockin/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/thockin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thockin/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/thockin"
    },
    "description": "",
    "due_on": null,
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/40",
    "id": 2913713,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/40/labels",
    "node_id": "MDk6TWlsZXN0b25lMjkxMzcxMw==",
    "number": 40,
    "open_issues": 0,
    "state": "closed",
    "title": "v1.13",
    "updated_at": "2020-08-23T05:01:14Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/40"
  },
  "node_id": "MDU6SXNzdWUzODgwNjYxODk=",
  "number": 71772,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Cronjob leaves behind pods after jobs are deleted",
  "updated_at": "2018-12-07T00:25:36Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71772",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/27190911?v=4",
    "events_url": "https://api.github.com/users/andrewsav-datacom/events{/privacy}",
    "followers_url": "https://api.github.com/users/andrewsav-datacom/followers",
    "following_url": "https://api.github.com/users/andrewsav-datacom/following{/other_user}",
    "gists_url": "https://api.github.com/users/andrewsav-datacom/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/andrewsav-datacom",
    "id": 27190911,
    "login": "andrewsav-datacom",
    "node_id": "MDQ6VXNlcjI3MTkwOTEx",
    "organizations_url": "https://api.github.com/users/andrewsav-datacom/orgs",
    "received_events_url": "https://api.github.com/users/andrewsav-datacom/received_events",
    "repos_url": "https://api.github.com/users/andrewsav-datacom/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/andrewsav-datacom/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andrewsav-datacom/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/andrewsav-datacom"
  }
}