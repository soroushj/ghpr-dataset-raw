{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/8225098?v=4",
    "events_url": "https://api.github.com/users/deads2k/events{/privacy}",
    "followers_url": "https://api.github.com/users/deads2k/followers",
    "following_url": "https://api.github.com/users/deads2k/following{/other_user}",
    "gists_url": "https://api.github.com/users/deads2k/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/deads2k",
    "id": 8225098,
    "login": "deads2k",
    "node_id": "MDQ6VXNlcjgyMjUwOTg=",
    "organizations_url": "https://api.github.com/users/deads2k/orgs",
    "received_events_url": "https://api.github.com/users/deads2k/received_events",
    "repos_url": "https://api.github.com/users/deads2k/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/deads2k/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/deads2k/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/deads2k"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/8225098?v=4",
      "events_url": "https://api.github.com/users/deads2k/events{/privacy}",
      "followers_url": "https://api.github.com/users/deads2k/followers",
      "following_url": "https://api.github.com/users/deads2k/following{/other_user}",
      "gists_url": "https://api.github.com/users/deads2k/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/deads2k",
      "id": 8225098,
      "login": "deads2k",
      "node_id": "MDQ6VXNlcjgyMjUwOTg=",
      "organizations_url": "https://api.github.com/users/deads2k/orgs",
      "received_events_url": "https://api.github.com/users/deads2k/received_events",
      "repos_url": "https://api.github.com/users/deads2k/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/deads2k/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deads2k/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/deads2k"
    }
  ],
  "author_association": "MEMBER",
  "body": "Recently found examples on [kubernetes-incubator/cluster-proportional-autoscaler](https://github.com/kubernetes-incubator/cluster-proportional-autoscaler) not longer work on latest k8s cluster because of RBAC. While working on assigning this app an appropriate role I met a bit difficulty at the beginning.\r\n\r\nBelow ClusterRole was not working and led to below error message:\r\n```\r\nkind: ClusterRole\r\napiVersion: rbac.authorization.k8s.io/v1alpha1\r\nmetadata:\r\n  name: cluster-proportional-autoscaler\r\nrules:\r\n  - apiGroups: [\"\"]\r\n    resources: [\"nodes\"]\r\n    verbs: [\"get\", \"list\"]\r\n  - apiGroups: [\"\"]\r\n    resources: [\"replicationcontrollers\"]\r\n    verbs: [\"get\", \"update\"]\r\n  - apiGroups: [\"extensions\"]\r\n    resources: [\"deployments\", \"replicasets\"]\r\n    verbs: [\"get\", \"update\"]\r\n  - apiGroups: [\"\"]\r\n    resources: [\"configmaps\"]\r\n    verbs: [\"get\", \"create\"]\r\n```\r\n```\r\nE0109 21:25:43.067827       1 autoscaler_server.go:129] Update failure: the server does not allow access to the requested resource (get deployments.extensions nginx-autoscale-example)\r\n```\r\n\r\nBecause this app uses things like `k.clientset.Extensions().Scales(...)...` to scale resources `Deployment`, `ReplicaSet` and `ReplicationController`, it turned out a working config should be like below:\r\n```\r\nkind: ClusterRole\r\napiVersion: rbac.authorization.k8s.io/v1alpha1\r\nmetadata:\r\n  name: cluster-proportional-autoscaler\r\nrules:\r\n  - apiGroups: [\"\"]\r\n    resources: [\"nodes\"]\r\n    verbs: [\"get\", \"list\"]\r\n  - apiGroups: [\"\"]\r\n    resources: [\"replicationcontrollers/scale\"]\r\n    verbs: [\"get\", \"update\"]\r\n  - apiGroups: [\"extensions\"]\r\n    resources: [\"deployments/scale\", \"replicasets/scale\"]\r\n    verbs: [\"get\", \"update\"]\r\n  - apiGroups: [\"\"]\r\n    resources: [\"configmaps\"]\r\n    verbs: [\"get\", \"create\"]\r\n```\r\n\r\nBecause the error message did not point the subresource out, it is not obvious for me to figure out this `/scale` suffix (found out by looking at the existing kube-system components in cluster). All I thought about before was may be I should add `extensions/v1beta1.Scale` to the rules, which did not work. Also, it is also not obvious what `subresource`s are available for a certain type of resource. The `Referring to Resources` section on [doc](http://kubernetes.io/docs/admin/authorization/) only mentions `pods/log` for `pods`. May be better document how to figure this out?\r\n\r\n@kubernetes/sig-auth-misc ",
  "closed_at": "2017-01-11T06:24:09Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39640/comments",
  "created_at": "2017-01-09T22:29:15Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39640/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/39640",
  "id": 199680370,
  "labels": [],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39640/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxOTk2ODAzNzA=",
  "number": 39640,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Better error message and documentation for RBAC config",
  "updated_at": "2017-01-11T06:24:09Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39640",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/8681801?v=4",
    "events_url": "https://api.github.com/users/MrHohn/events{/privacy}",
    "followers_url": "https://api.github.com/users/MrHohn/followers",
    "following_url": "https://api.github.com/users/MrHohn/following{/other_user}",
    "gists_url": "https://api.github.com/users/MrHohn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/MrHohn",
    "id": 8681801,
    "login": "MrHohn",
    "node_id": "MDQ6VXNlcjg2ODE4MDE=",
    "organizations_url": "https://api.github.com/users/MrHohn/orgs",
    "received_events_url": "https://api.github.com/users/MrHohn/received_events",
    "repos_url": "https://api.github.com/users/MrHohn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/MrHohn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MrHohn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/MrHohn"
  }
}