{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/3900799?v=4",
    "events_url": "https://api.github.com/users/kargakis/events{/privacy}",
    "followers_url": "https://api.github.com/users/kargakis/followers",
    "following_url": "https://api.github.com/users/kargakis/following{/other_user}",
    "gists_url": "https://api.github.com/users/kargakis/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/kargakis",
    "id": 3900799,
    "login": "kargakis",
    "node_id": "MDQ6VXNlcjM5MDA3OTk=",
    "organizations_url": "https://api.github.com/users/kargakis/orgs",
    "received_events_url": "https://api.github.com/users/kargakis/received_events",
    "repos_url": "https://api.github.com/users/kargakis/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/kargakis/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kargakis/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/kargakis"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/3900799?v=4",
      "events_url": "https://api.github.com/users/kargakis/events{/privacy}",
      "followers_url": "https://api.github.com/users/kargakis/followers",
      "following_url": "https://api.github.com/users/kargakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/kargakis/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/kargakis",
      "id": 3900799,
      "login": "kargakis",
      "node_id": "MDQ6VXNlcjM5MDA3OTk=",
      "organizations_url": "https://api.github.com/users/kargakis/orgs",
      "received_events_url": "https://api.github.com/users/kargakis/received_events",
      "repos_url": "https://api.github.com/users/kargakis/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/kargakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kargakis/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/kargakis"
    }
  ],
  "author_association": "NONE",
  "body": "**Is this a BUG REPORT or FEATURE REQUEST?** (choose one): Bug report\r\n\r\n**Kubernetes version** (use `kubectl version`): both client and server on v1.5.2\r\n\r\n\r\n**Environment**:\r\n- **Cloud provider or hardware configuration**: AWS\r\n- **OS** (e.g. from /etc/os-release): Ubuntu 16.04LTS\r\n- **Kernel** (e.g. `uname -a`):  4.4.0-53-generic #74-Ubuntu SMP Fri Dec 2 15:59:10 UTC 2016 x86_64\r\n- **Install tools**: kops 1.5.0-alpha3\r\n\r\n**What happened**:\r\nAdded the following field to my deployment spec: `minReadySeconds: 5` and `progressDeadlineSeconds: 120`, with a pod spec for a single-container pod with a non existing-image:tag (the image exists in my private dockerhub registry, the tag does not). I then deployed this update using `kubectl apply -f <filename>.yaml`  \r\nThe pods fail (first with ErrImagePull and then with ImagePullBackOff):\r\n```\r\nNAME                          READY     STATUS         RESTARTS   AGE  \r\nshotgun-2497328708-bvq79      0/1       ImagePullBackOff   0          10s \r\nshotgun-2923704814-8q88v      1/1       Running        0          19h\r\n```\r\nThe replicaset just keeps waiting:\r\n```\r\nName:\t\tshotgun-2497328708\r\nNamespace:\ttest\r\nImage(s):\tshotgun:v99\r\nSelector:\tapp=shotgun,pod-template-hash=2497328708\r\nLabels:\t\tapp=shotgun\r\n\t\tpod-template-hash=2497328708\r\n\t\tversion=v99\r\nReplicas:\t1 current / 1 desired\r\nPods Status:\t0 Running / 1 Waiting / 0 Succeeded / 0 Failed\r\nNo volumes.\r\nEvents:\r\n  FirstSeen\tLastSeen\tCount\tFrom\t\t\t\tSubObjectPath\tType\t\tReason\t\t\tMessage\r\n  ---------\t--------\t-----\t----\t\t\t\t-------------\t--------\t------\t\t\t-------\r\n  10m\t\t10m\t\t1\t{replicaset-controller }\t\t\tNormal\t\tSuccessfulCreate\tCreated pod: shotgun-2497328708-bvq79\r\n```\r\nAnd the deployment reports it is progressing, far beyond the deadline set in the spec:\r\n```\r\nName:\t\t\tshotgun\r\nNamespace:\t\ttest\r\nCreationTimestamp:\tTue, 03 Jan 2017 11:40:10 +0100\r\nLabels:\t\t\tapp=shotgun\r\nSelector:\t\tapp=shotgun\r\nReplicas:\t\t1 updated | 1 total | 1 available | 1 unavailable\r\nStrategyType:\t\tRollingUpdate\r\nMinReadySeconds:\t5\r\nRollingUpdateStrategy:\t0 max unavailable, 1 max surge\r\nConditions:\r\n  Type\t\tStatus\tReason\r\n  ----\t\t------\t------\r\n  Available \tTrue\tMinimumReplicasAvailable\r\n  Progressing \tTrue\tNewReplicaSetAvailable\r\nOldReplicaSets:\tshotgun-2923704814 (1/1 replicas created)\r\nNewReplicaSet:\tshotgun-2497328708 (1/1 replicas created)\r\nEvents:\r\n  FirstSeen\tLastSeen\tCount\tFrom\t\t\t\tSubObjectPath\tType\t\tReason\t\t\tMessage\r\n  ---------\t--------\t-----\t----\t\t\t\t-------------\t--------\t------\t\t\t-------\r\n  17h\t\t11m\t\t2\t{deployment-controller }\t\t\tNormal\t\tScalingReplicaSet\tScaled up replica set shotgun-2497328708 to 1\r\n```\r\nThe status from `kubectl get deployment/shotgun --namespace=test -o yaml` reports the following:\r\n```\r\nstatus:\r\n  availableReplicas: 1\r\n  conditions:\r\n  - lastTransitionTime: 2017-01-20T09:29:43Z\r\n    lastUpdateTime: 2017-01-20T09:29:43Z\r\n    message: Replica set \"shotgun-2497328708\" has successfully progressed.\r\n    reason: NewReplicaSetAvailable\r\n    status: \"True\"\r\n    type: Progressing\r\n```\r\nThis all stays the same, even 20min later.\r\n\r\n**What you expected to happen**:\r\nThe pods to report as failed back to the replicaset instead of waiting and the deployment to mark it is not progressing after seeing no progress after 120 seconds.\r\n\r\n**How to reproduce it** (as minimally and precisely as possible):\r\nPushing an update to a deployment with a non-existing image (possible private?) and waiting for the progressDeadlineSeconds to expire.\r\n",
  "closed_at": "2017-01-26T19:08:03Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/40207/comments",
  "created_at": "2017-01-20T09:42:33Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/40207/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/40207",
  "id": 202095545,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 382474515,
      "name": "area/workload-api/deployment",
      "node_id": "MDU6TGFiZWwzODI0NzQ1MTU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/workload-api/deployment"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Apps.",
      "id": 404091735,
      "name": "sig/apps",
      "node_id": "MDU6TGFiZWw0MDQwOTE3MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/apps"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/40207/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMDIwOTU1NDU=",
  "number": 40207,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "progressDeadlineSeconds not respected, failed deployment not detected",
  "updated_at": "2017-01-27T21:15:42Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/40207",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/22590657?v=4",
    "events_url": "https://api.github.com/users/bcorijn/events{/privacy}",
    "followers_url": "https://api.github.com/users/bcorijn/followers",
    "following_url": "https://api.github.com/users/bcorijn/following{/other_user}",
    "gists_url": "https://api.github.com/users/bcorijn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bcorijn",
    "id": 22590657,
    "login": "bcorijn",
    "node_id": "MDQ6VXNlcjIyNTkwNjU3",
    "organizations_url": "https://api.github.com/users/bcorijn/orgs",
    "received_events_url": "https://api.github.com/users/bcorijn/received_events",
    "repos_url": "https://api.github.com/users/bcorijn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bcorijn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bcorijn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bcorijn"
  }
}