{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/676637?v=4",
    "events_url": "https://api.github.com/users/feiskyer/events{/privacy}",
    "followers_url": "https://api.github.com/users/feiskyer/followers",
    "following_url": "https://api.github.com/users/feiskyer/following{/other_user}",
    "gists_url": "https://api.github.com/users/feiskyer/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/feiskyer",
    "id": 676637,
    "login": "feiskyer",
    "node_id": "MDQ6VXNlcjY3NjYzNw==",
    "organizations_url": "https://api.github.com/users/feiskyer/orgs",
    "received_events_url": "https://api.github.com/users/feiskyer/received_events",
    "repos_url": "https://api.github.com/users/feiskyer/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/feiskyer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/feiskyer/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/feiskyer"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/676637?v=4",
      "events_url": "https://api.github.com/users/feiskyer/events{/privacy}",
      "followers_url": "https://api.github.com/users/feiskyer/followers",
      "following_url": "https://api.github.com/users/feiskyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/feiskyer/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/feiskyer",
      "id": 676637,
      "login": "feiskyer",
      "node_id": "MDQ6VXNlcjY3NjYzNw==",
      "organizations_url": "https://api.github.com/users/feiskyer/orgs",
      "received_events_url": "https://api.github.com/users/feiskyer/received_events",
      "repos_url": "https://api.github.com/users/feiskyer/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/feiskyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feiskyer/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/feiskyer"
    }
  ],
  "author_association": "NONE",
  "body": "**Is this a BUG REPORT or FEATURE REQUEST?**:\r\n\r\n/kind bug\r\n\r\n**What happened**:\r\n\r\nIn my test setup I allocate POD CIDRs manually, `cbr0` bridge is configured before `kubelet` starts. \r\nImportant settings:\r\n- on example node: `kubelet --pod-cidr=10.10.2.129/25 --network-plugin=kubenet`\r\n- on master: `kube-controller-manager --allocate-node-cidrs=false` \r\n\r\nThen I see confusing entries in `kubelet` logs (`grep -i cidr`):\r\n```\r\nApr 05 12:23:01 node-2 kubelet[15115]: I0405 12:23:01.123040   15115 kuberuntime_manager.go:917] updating runtime config through cri with podcidr 10.10.2.129/25\r\nApr 05 12:23:01 node-2 kubelet[15115]: I0405 12:23:01.123172   15115 docker_service.go:340] docker cri received runtime config &RuntimeConfig{NetworkConfig:&NetworkConfig{PodCidr:10.10.2.129/25,},}\r\nApr 05 12:23:01 node-2 kubelet[15115]: I0405 12:23:01.123380   15115 kubelet_network.go:196] Setting Pod CIDR:  -> 10.10.2.129/25\r\nApr 05 12:23:01 node-2 kubelet[15115]: I0405 12:23:01.247311   15115 kuberuntime_manager.go:917] updating runtime config through cri with podcidr\r\nApr 05 12:23:01 node-2 kubelet[15115]: I0405 12:23:01.247492   15115 docker_service.go:340] docker cri received runtime config &RuntimeConfig{NetworkConfig:&NetworkConfig{PodCidr:,},}\r\nApr 05 12:23:01 node-2 kubelet[15115]: I0405 12:23:01.247571   15115 kubelet_network.go:196] Setting Pod CIDR: 10.10.2.129/25 ->\r\n```\r\nFortunately everything keeps working, thanks to this condition:\r\nhttps://github.com/kubernetes/kubernetes/blob/915798d229b7be076d8e53d6aa1573adabd470d2/pkg/kubelet/dockershim/docker_service.go#L341 , i.e. it is not propagated to CNI plugin. \r\n\r\nIt appears that this very line tries to set the CIDR to whatever the master returns during node status update: https://github.com/kubernetes/kubernetes/blob/915798d229b7be076d8e53d6aa1573adabd470d2/pkg/kubelet/kubelet_node_status.go#L405\r\n\r\n\r\n**What you expected to happen**:\r\n- `kubelet`/`kubenet` use the pod CIDR given at command line and never mess with it\r\n\r\nActually I'm a bit confused if manual per-node pod CIDR assignment is supported at all, and if I'm doing it correctly. I'm aware it's unusual thing to do in production environment, yet for testing it seems perfectly legitimate.\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): v1.10.0\r\n- Cloud provider or hardware configuration: bare metal\r\n- OS (e.g. from /etc/os-release): Ubuntu 17.10\r\n- Kernel (e.g. `uname -a`): `Linux master 4.13.0-37-generic #42-Ubuntu SMP Wed Mar 7 14:13:23 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux`\r\n- Install tools: `kubeadm 1.10.0`\r\n",
  "closed_at": "2018-05-16T02:55:20Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/62164/comments",
  "created_at": "2018-04-05T13:04:27Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/62164/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/62164",
  "id": 311601515,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Network.",
      "id": 116712108,
      "name": "sig/network",
      "node_id": "MDU6TGFiZWwxMTY3MTIxMDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/network"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/62164/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMTE2MDE1MTU=",
  "number": 62164,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Empty PodCidr in kubelet logs when pod CIDR allocation is not used",
  "updated_at": "2018-05-16T02:55:20Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/62164",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/961496?v=4",
    "events_url": "https://api.github.com/users/codepainters/events{/privacy}",
    "followers_url": "https://api.github.com/users/codepainters/followers",
    "following_url": "https://api.github.com/users/codepainters/following{/other_user}",
    "gists_url": "https://api.github.com/users/codepainters/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/codepainters",
    "id": 961496,
    "login": "codepainters",
    "node_id": "MDQ6VXNlcjk2MTQ5Ng==",
    "organizations_url": "https://api.github.com/users/codepainters/orgs",
    "received_events_url": "https://api.github.com/users/codepainters/received_events",
    "repos_url": "https://api.github.com/users/codepainters/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/codepainters/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/codepainters/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/codepainters"
  }
}