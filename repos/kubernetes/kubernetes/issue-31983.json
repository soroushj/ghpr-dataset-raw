{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "Hi,\n\nWe have a device (router in this case) that sends long living stream of udp packets to our kubernetes cluster. We then create a service and pods that expose a node port to receive the incoming udp packets. However, packets were not reach our containers.\n\nFurther digging and found that because UDP packets already stream into our host (therefore conntrack entry already created) BEFORE our service is created (iptable rules added), the iptable rule didn't take effect. Since our UDP stream is long living, the conntrack entry never get timeout neither.\n\nTo workaround the issue, we have to stop the UDP stream for sometime after the service is created so that the conntrack entry times out. If we use \"conntrack -D\" to clear all entries after service is deployed also workaround the issue. \n\nThough it is the behavior of the linux iptable that new rules doesn't affect already existing connection, we are trying to see if kubernetes proxy have any config that can clear the related conntrack entries when a new service is deployed?\n",
  "closed_at": "2016-12-02T00:02:03Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 16,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/31983/comments",
  "created_at": "2016-09-02T16:16:19Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/31983/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/31983",
  "id": 174796521,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 128716589,
      "name": "area/kube-proxy",
      "node_id": "MDU6TGFiZWwxMjg3MTY1ODk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/kube-proxy"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/31983/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxNzQ3OTY1MjE=",
  "number": 31983,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Incoming UDP packets not reach newly deployed services",
  "updated_at": "2016-12-02T00:02:03Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/31983",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/3028406?v=4",
    "events_url": "https://api.github.com/users/dachulin/events{/privacy}",
    "followers_url": "https://api.github.com/users/dachulin/followers",
    "following_url": "https://api.github.com/users/dachulin/following{/other_user}",
    "gists_url": "https://api.github.com/users/dachulin/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/dachulin",
    "id": 3028406,
    "login": "dachulin",
    "node_id": "MDQ6VXNlcjMwMjg0MDY=",
    "organizations_url": "https://api.github.com/users/dachulin/orgs",
    "received_events_url": "https://api.github.com/users/dachulin/received_events",
    "repos_url": "https://api.github.com/users/dachulin/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/dachulin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dachulin/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/dachulin"
  }
}