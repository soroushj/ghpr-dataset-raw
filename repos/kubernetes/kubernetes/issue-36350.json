{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "**Is this a BUG REPORT or FEATURE REQUEST?** (choose one):\r\nBUG REPORT\r\n\r\n**Kubernetes version** (use `kubectl version`):\r\n\r\n**What happened**:\r\nThere is two issues:\r\n1. As the [design doc](https://github.com/kubernetes/kubernetes/blob/master/docs/design/seccomp.md#api-changes) said, if --seccomp-profile-root unset, it should default to the seccomp subdirectory of the kubelet root directory. But now it can't find the seccomp profile in ```/var/lib/kubelet/seccomp/``` directory. actaully It found the file in kubernetes project dir.\r\n\r\n2. The event always shows can't find ```profile1.json```, we don't know where it get the file, need show absolute path.\r\n\r\nSteps \r\n```\r\n1. Copy profile1.json to /var/lib/kubelet/seccomp/  and create a pod with seccomp 'container.seccomp.security.alpha.kubernetes.io/hello1: localhost/profile1.json'\r\n[root@ip-172-18-6-200 kubernetes]# cp /root/profile1.json /var/lib/kubelet/seccomp/\r\n[root@ip-172-18-6-200 kubernetes]# kc create -f pod.yaml \r\npod \"pod-sec-two-cont\" created\r\n[root@ip-172-18-6-200 kubernetes]# kc get pod\r\nNAME               READY     STATUS              RESTARTS   AGE\r\npod-sec-two-cont   1/2       RunContainerError   0          3s\r\n[root@ip-172-18-6-200 kubernetes]# kc describe pod pod-sec-two-cont\r\nName:\t\tpod-sec-two-cont\r\nNamespace:\tdefault\r\nNode:\t\t127.0.0.1/127.0.0.1\r\nStart Time:\tMon, 07 Nov 2016 05:19:35 -0500\r\nLabels:\t\tname=hello-pod\r\nStatus:\t\tPending\r\nIP:\t\t172.17.0.2\r\nControllers:\t<none>\r\nContainers:\r\n  hello1:\r\n    Container ID:\t\r\n    Image:\t\tdocker.io/deshuai/hello-pod:latest\r\n    Image ID:\t\t\r\n    Port:\t\t8080/TCP\r\n    State:\t\tWaiting\r\n      Reason:\t\tRunContainerError\r\n    Ready:\t\tFalse\r\n    Restart Count:\t0\r\n    Volume Mounts:\r\n      /tmp from tmp (rw)\r\n      /var/run/secrets/kubernetes.io/serviceaccount from default-token-yojkv (ro)\r\n    Environment Variables:\r\n      PORT:\t\t8080\r\n      SECOND_PORT:\t8888\r\n  hello2:\r\n    Container ID:\tdocker://904b5d206e5f9844eaa25ba2336ef9537a5936eb85d40f7da488f7a542db4805\r\n    Image:\t\tdocker.io/deshuai/hello-pod:latest\r\n    Image ID:\t\tdocker://sha256:e6a47a29d0e2749c873134622635a69badbedc98ea23791a2b152663d797c4dc\r\n    Port:\t\t8081/TCP\r\n    State:\t\tRunning\r\n      Started:\t\tMon, 07 Nov 2016 05:19:36 -0500\r\n    Ready:\t\tTrue\r\n    Restart Count:\t0\r\n    Volume Mounts:\r\n      /tmp from tmp (rw)\r\n      /var/run/secrets/kubernetes.io/serviceaccount from default-token-yojkv (ro)\r\n    Environment Variables:\r\n      PORT:\t\t8081\r\n      SECOND_PORT:\t8082\r\nConditions:\r\n  Type\t\tStatus\r\n  Initialized \tTrue \r\n  Ready \tFalse \r\n  PodScheduled \tTrue \r\nVolumes:\r\n  tmp:\r\n    Type:\tEmptyDir (a temporary directory that shares a pod's lifetime)\r\n    Medium:\t\r\n  default-token-yojkv:\r\n    Type:\tSecret (a volume populated by a Secret)\r\n    SecretName:\tdefault-token-yojkv\r\nQoS Class:\tBestEffort\r\nTolerations:\t<none>\r\nEvents:\r\n  FirstSeen\tLastSeen\tCount\tFrom\t\t\tSubObjectPath\t\tType\t\tReason\t\tMessage\r\n  ---------\t--------\t-----\t----\t\t\t-------------\t\t--------\t------\t\t-------\r\n  14s\t\t14s\t\t1\t{default-scheduler }\t\t\t\tNormal\t\tScheduled\tSuccessfully assigned pod-sec-two-cont to 127.0.0.1\r\n  13s\t\t13s\t\t1\t{kubelet 127.0.0.1}\tspec.containers{hello2}\tNormal\t\tCreated\t\tCreated container with docker id 904b5d206e5f; Security:[seccomp=unconfined]\r\n  13s\t\t13s\t\t1\t{kubelet 127.0.0.1}\tspec.containers{hello2}\tNormal\t\tStarted\t\tStarted container with docker id 904b5d206e5f\r\n  13s\t\t11s\t\t4\t{kubelet 127.0.0.1}\tspec.containers{hello1}\tNormal\t\tPulled\t\tContainer image \"docker.io/deshuai/hello-pod:latest\" already present on machine\r\n  13s\t\t11s\t\t3\t{kubelet 127.0.0.1}\t\t\t\tWarning\t\tFailedSync\tError syncing pod, skipping: failed to \"StartContainer\" for \"hello1\" with RunContainerError: \"runContainer: cannot load seccomp profile \\\"profile1.json\\\": open profile1.json: no such file or directory\"\r\n\r\n2. copy profile1.json to kubernetes project dir.\r\n[root@ip-172-18-6-200 kubernetes]# cp /var/lib/kubelet/seccomp/profile1.json ./\r\n[root@ip-172-18-6-200 kubernetes]# kc delete pod pod-sec-two-cont\r\npod \"pod-sec-two-cont\" deleted\r\n[root@ip-172-18-6-200 kubernetes]# kc create -f pod.yaml \r\npod \"pod-sec-two-cont\" created\r\n[root@ip-172-18-6-200 kubernetes]# kc get pod\r\nNAME               READY     STATUS    RESTARTS   AGE\r\npod-sec-two-cont   2/2       Running   0          4s\r\n\r\n```\r\n",
  "closed_at": "2016-11-09T11:13:42Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 5,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36350/comments",
  "created_at": "2016-11-07T10:24:01Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36350/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/36350",
  "id": 187673950,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 116719829,
      "name": "area/kubelet",
      "node_id": "MDU6TGFiZWwxMTY3MTk4Mjk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/kubelet"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Node.",
      "id": 173493665,
      "name": "sig/node",
      "node_id": "MDU6TGFiZWwxNzM0OTM2NjU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/node"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36350/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxODc2NzM5NTA=",
  "number": 36350,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Seccomp default profile dir not correct",
  "updated_at": "2016-11-09T11:13:42Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36350",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/8870577?v=4",
    "events_url": "https://api.github.com/users/mdshuai/events{/privacy}",
    "followers_url": "https://api.github.com/users/mdshuai/followers",
    "following_url": "https://api.github.com/users/mdshuai/following{/other_user}",
    "gists_url": "https://api.github.com/users/mdshuai/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mdshuai",
    "id": 8870577,
    "login": "mdshuai",
    "node_id": "MDQ6VXNlcjg4NzA1Nzc=",
    "organizations_url": "https://api.github.com/users/mdshuai/orgs",
    "received_events_url": "https://api.github.com/users/mdshuai/received_events",
    "repos_url": "https://api.github.com/users/mdshuai/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mdshuai/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mdshuai/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mdshuai"
  }
}