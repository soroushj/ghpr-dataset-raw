{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/6914660?v=4",
    "events_url": "https://api.github.com/users/kevin-wangzefeng/events{/privacy}",
    "followers_url": "https://api.github.com/users/kevin-wangzefeng/followers",
    "following_url": "https://api.github.com/users/kevin-wangzefeng/following{/other_user}",
    "gists_url": "https://api.github.com/users/kevin-wangzefeng/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/kevin-wangzefeng",
    "id": 6914660,
    "login": "kevin-wangzefeng",
    "node_id": "MDQ6VXNlcjY5MTQ2NjA=",
    "organizations_url": "https://api.github.com/users/kevin-wangzefeng/orgs",
    "received_events_url": "https://api.github.com/users/kevin-wangzefeng/received_events",
    "repos_url": "https://api.github.com/users/kevin-wangzefeng/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/kevin-wangzefeng/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kevin-wangzefeng/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/kevin-wangzefeng"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/6914660?v=4",
      "events_url": "https://api.github.com/users/kevin-wangzefeng/events{/privacy}",
      "followers_url": "https://api.github.com/users/kevin-wangzefeng/followers",
      "following_url": "https://api.github.com/users/kevin-wangzefeng/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevin-wangzefeng/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/kevin-wangzefeng",
      "id": 6914660,
      "login": "kevin-wangzefeng",
      "node_id": "MDQ6VXNlcjY5MTQ2NjA=",
      "organizations_url": "https://api.github.com/users/kevin-wangzefeng/orgs",
      "received_events_url": "https://api.github.com/users/kevin-wangzefeng/received_events",
      "repos_url": "https://api.github.com/users/kevin-wangzefeng/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/kevin-wangzefeng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevin-wangzefeng/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/kevin-wangzefeng"
    },
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/13744637?v=4",
      "events_url": "https://api.github.com/users/Dingshujie/events{/privacy}",
      "followers_url": "https://api.github.com/users/Dingshujie/followers",
      "following_url": "https://api.github.com/users/Dingshujie/following{/other_user}",
      "gists_url": "https://api.github.com/users/Dingshujie/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Dingshujie",
      "id": 13744637,
      "login": "Dingshujie",
      "node_id": "MDQ6VXNlcjEzNzQ0NjM3",
      "organizations_url": "https://api.github.com/users/Dingshujie/orgs",
      "received_events_url": "https://api.github.com/users/Dingshujie/received_events",
      "repos_url": "https://api.github.com/users/Dingshujie/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Dingshujie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Dingshujie/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Dingshujie"
    }
  ],
  "author_association": "MEMBER",
  "body": "Currently in the existing implementation, how should a taint be unique (i.e. by `key` or `<key, effect>`) on a node is not clear, \n1. server side validation don't actually check if there are duplicated taints any reject the request.\n2. kubectl command has an implicit semantic that taint is unique by key.\n\n``` bash\n# Update node 'foo' with a taint with key 'dedicated' and value 'special-user' and effect 'NoScheduleNoAdmitNoExecute'.\n# If a taint with that key already exists, its value and effect are replaced as specified.\n$ kubectl taint nodes foo dedicated=special-user:NoScheduleNoAdmitNoExecute\n\n# Remove from node 'foo' the taint with key 'dedicated' if one exists.\n$ kubectl taint nodes foo dedicated-\n```\n\nDiscussed with @davidopp and @bgrant0607 , David's idea is:\n\n> We cannot make taint `key` be unique on a node; we can only make `<taint, effect>` be unique. The reason is that we want to be able to express all of these (I am copying this from my [comment](https://github.com/kubernetes/kubernetes/issues/28082#issue-162318430) here):\n> - don't schedule me there and evict me if I'm already running there\n> - don't schedule me there but leave me bound if I'm already running there\n> - schedule me there and leave me bound if I'm already running there\n> \n> This means we need to decouple \"no schedule\" and \"no execute\" effects (let's ignore the NoAdmit part)\n>   I think there are only two ways to do it:\n> 1. (original plan) we have NoSchedule effect and NoScheduleNoExecute effect\n> 2. (suggested new plan) we have NoSchedule effect and NoExecute effect \n> \n> In either approach, you need to put two separate taints, one with each of the effects, on a node if you want to allow some pods to request only \"no schedule\" (i.e. leave me bound if already running) and some pods to request \"no schedule and no execute.\" (The only difference between the two approaches is which tolerations you need for the different use cases, but in both approaches you need two different taints with the same key and different effects if you want to allow the full flexibility.)\n\nAs discussed, we should make taints unique by `<key, effect>` on a node, basically, the following two steps are needed:\n- [ ] add some validation check that reject duplicated taints that have the same `<key, effect>`\n- [ ] modify the existing semantic of `kubectl taint` command to:\n\n``` bash\n# Update node 'foo' with a taint with key 'dedicated' and value 'special-user' and effect 'NoScheduleNoAdmit'.\n# If a taint with that key and effect already exists, its value is replaced as specified.\n$ kubectl taint nodes foo dedicated=special-user:NoScheduleNoAdmit\n\n# Remove from node 'foo' the taint with key 'dedicated' and effect 'NoScheduleNoAdmit' if one exists.\n$ kubectl taint nodes foo dedicated:NoScheduleNoAdmit-\n```\n- [ ]  If the effect is omitted in the kubectlcommand line, treat that as a wildcard (all effects). That would be especially useful for removing taints.\n\n``` bash\n# Remove from node 'foo' all the taints with key 'dedicated'\n$ kubectl taint nodes foo dedicated-\n```\n",
  "closed_at": "2016-08-19T11:58:13Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/29362/comments",
  "created_at": "2016-07-21T07:57:08Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/29362/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/29362",
  "id": 166759011,
  "labels": [],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/29362/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2019-08-26T17:23:33Z",
    "closed_issues": 1404,
    "created_at": "2016-05-19T18:50:19Z",
    "creator": {
      "avatar_url": "https://avatars1.githubusercontent.com/u/7725777?v=4",
      "events_url": "https://api.github.com/users/bgrant0607/events{/privacy}",
      "followers_url": "https://api.github.com/users/bgrant0607/followers",
      "following_url": "https://api.github.com/users/bgrant0607/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgrant0607/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/bgrant0607",
      "id": 7725777,
      "login": "bgrant0607",
      "node_id": "MDQ6VXNlcjc3MjU3Nzc=",
      "organizations_url": "https://api.github.com/users/bgrant0607/orgs",
      "received_events_url": "https://api.github.com/users/bgrant0607/received_events",
      "repos_url": "https://api.github.com/users/bgrant0607/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/bgrant0607/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgrant0607/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/bgrant0607"
    },
    "description": "https://github.com/kubernetes/features/blob/master/release-1.4/Release-1.4.md",
    "due_on": null,
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/22",
    "id": 1777384,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/22/labels",
    "node_id": "MDk6TWlsZXN0b25lMTc3NzM4NA==",
    "number": 22,
    "open_issues": 0,
    "state": "closed",
    "title": "v1.4",
    "updated_at": "2019-08-26T17:23:33Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/22"
  },
  "node_id": "MDU6SXNzdWUxNjY3NTkwMTE=",
  "number": 29362,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "make taints unique by <key, effect> on a node",
  "updated_at": "2016-08-19T11:58:14Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/29362",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/6914660?v=4",
    "events_url": "https://api.github.com/users/kevin-wangzefeng/events{/privacy}",
    "followers_url": "https://api.github.com/users/kevin-wangzefeng/followers",
    "following_url": "https://api.github.com/users/kevin-wangzefeng/following{/other_user}",
    "gists_url": "https://api.github.com/users/kevin-wangzefeng/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/kevin-wangzefeng",
    "id": 6914660,
    "login": "kevin-wangzefeng",
    "node_id": "MDQ6VXNlcjY5MTQ2NjA=",
    "organizations_url": "https://api.github.com/users/kevin-wangzefeng/orgs",
    "received_events_url": "https://api.github.com/users/kevin-wangzefeng/received_events",
    "repos_url": "https://api.github.com/users/kevin-wangzefeng/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/kevin-wangzefeng/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kevin-wangzefeng/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/kevin-wangzefeng"
  }
}