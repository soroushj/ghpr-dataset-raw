{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "When following docs https://github.com/GoogleCloudPlatform/kubernetes/blob/master/docs/getting-started-guides/coreos/coreos_multinode_cluster.md\nOn Azure.\nUsing CoreOS alpha (584.0.0)\n\nFlannel fails to start on master node, initialized with cloud-init https://github.com/GoogleCloudPlatform/kubernetes/blob/master/docs/getting-started-guides/coreos/cloud-configs/master.yaml\nWhich version of CoreOS, Flannel and Docker has this guide been tested with?\n## Flannel starts well on regular nodes.\n\ncore@pat-coreos-kube12-coreos-0 ~ $ sudo systemctl status flannel\n\u25cf flannel.service - flannel is an etcd backed overlay network for containers\n   Loaded: loaded (/etc/systemd/system/flannel.service; static; vendor preset: disabled)\n   Active: failed (Result: exit-code) since Wed 2015-02-11 06:52:27 UTC; 1min 22s ago\n  Process: 671 ExecStartPre=/usr/bin/etcdctl mk /coreos.com/network/config {\"Network\":\"10.244.0.0/16\", \"Backend\": {\"Type\": \"vxlan\"}} (code=exited, status=4)\n  Process: 668 ExecStartPre=/usr/bin/chmod +x /opt/bin/flanneld (code=exited, status=0/SUCCESS)\n  Process: 665 ExecStartPre=/usr/bin/wget -N -P /opt/bin https://storage.googleapis.com/k8s/flanneld (code=exited, status=0/SUCCESS)\n  Process: 662 ExecStartPre=/usr/bin/mkdir -p /opt/bin (code=exited, status=0/SUCCESS)\n\nFeb 11 06:52:27 pat-coreos-kube12-coreos-0 wget[665]: Resolving storage.googleapis.com... 74.125.239.139, 74.125.239.140, 74.125.239.138, ...\nFeb 11 06:52:27 pat-coreos-kube12-coreos-0 wget[665]: Connecting to storage.googleapis.com|74.125.239.139|:443... connected.\nFeb 11 06:52:27 pat-coreos-kube12-coreos-0 wget[665]: HTTP request sent, awaiting response... 200 OK\nFeb 11 06:52:27 pat-coreos-kube12-coreos-0 wget[665]: Length: 7784547 (7.4M) [binary/octet-stream]\nFeb 11 06:52:27 pat-coreos-kube12-coreos-0 wget[665]: Server file no newer than local file '/opt/bin/flanneld' -- not retrieving.\nFeb 11 06:52:27 pat-coreos-kube12-coreos-0 etcdctl[671]: Error:  501: All the given peers are not reachable (Tried to connect to each peer twice and failed) [0]\nFeb 11 06:52:27 pat-coreos-kube12-coreos-0 systemd[1]: flannel.service: control process exited, code=exited status=4\nFeb 11 06:52:27 pat-coreos-kube12-coreos-0 systemd[1]: Failed to start flannel is an etcd backed overlay network for containers.\nFeb 11 06:52:27 pat-coreos-kube12-coreos-0 systemd[1]: Unit flannel.service entered failed state.\n## Feb 11 06:52:27 pat-coreos-kube12-coreos-0 systemd[1]: flannel.service failed.\n\n/usr/bin/etcdctl ls --recursive /\n/coreos.com\n/coreos.com/network\n/coreos.com/network/config\n/coreos.com/network/subnets\n/coreos.com/network/subnets/10.244.33.0-24\n/coreos.com/network/subnets/10.244.71.0-24\n/coreos.com/updateengine\n/coreos.com/updateengine/rebootlock\n/coreos.com/updateengine/rebootlock/semaphore\n/registry\n/registry/controllers\n/registry/controllers/default\n/registry/controllers/default/my-nginx\n/registry/events\n/registry/events/default\n/registry/minions\n/registry/minions/100.69.136.59\n/registry/minions/100.69.92.58\n/registry/nodes\n/registry/nodes/100.69.92.58\n/registry/nodes/100.69.92.58/boundpods\n/registry/nodes/100.69.136.59\n/registry/nodes/100.69.136.59/boundpods\n/registry/pods\n/registry/pods/default\n/registry/pods/default/6068d0b5-ad6c-11e4-986b-00155da9d98d\n/registry/pods/default/60692a88-ad6c-11e4-986b-00155da9d98d\n/registry/pods/default/redis-master\n/registry/services\n/registry/services/endpoints\n/registry/services/endpoints/default\n/registry/services/endpoints/default/kubernetes\n/registry/services/endpoints/default/kubernetes-ro\n/registry/services/specs\n/registry/services/specs/default\n/registry/services/specs/default/kubernetes\n/registry/services/specs/default/kubernetes-ro\n\n---\n\nWhen I do \ndocker run -i -t ubuntu /bin/bash\n\nroot@e3af57412e4f:/# \nroot@e3af57412e4f:/# ifconfig\neth0      Link encap:Ethernet  HWaddr 02:42:ac:11:00:02  \n          inet addr:172.17.0.2  Bcast:0.0.0.0  Mask:255.255.0.0\n\nThe ip is in 172 space, not sure where that comes from.\nOn a minion node I get the expected ip in 10.244.x.x range:\n\ndocker run -i -t ubuntu /bin/bash\nUnable to find image 'ubuntu:latest' locally\nubuntu:latest: The image you are pulling has been verified\n511136ea3c5a: Pull complete \n27d47432a69b: Pull complete \n5f92234dcf1e: Pull complete \n51a9c7c1f8bb: Pull complete \n5ba9dab47459: Pull complete \nStatus: Downloaded newer image for ubuntu:latest\nroot@a11bbd902bf5:/# ifconfig\neth0      Link encap:Ethernet  HWaddr 02:42:0a:f4:2e:02  \n          inet addr:10.244.46.2  Bcast:0.0.0.0  Mask:255.255.255.0\n",
  "closed_at": "2015-02-17T17:59:44Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/7725777?v=4",
    "events_url": "https://api.github.com/users/bgrant0607/events{/privacy}",
    "followers_url": "https://api.github.com/users/bgrant0607/followers",
    "following_url": "https://api.github.com/users/bgrant0607/following{/other_user}",
    "gists_url": "https://api.github.com/users/bgrant0607/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bgrant0607",
    "id": 7725777,
    "login": "bgrant0607",
    "node_id": "MDQ6VXNlcjc3MjU3Nzc=",
    "organizations_url": "https://api.github.com/users/bgrant0607/orgs",
    "received_events_url": "https://api.github.com/users/bgrant0607/received_events",
    "repos_url": "https://api.github.com/users/bgrant0607/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bgrant0607/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bgrant0607/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bgrant0607"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/4309/comments",
  "created_at": "2015-02-11T07:04:45Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/4309/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/4309",
  "id": 57283432,
  "labels": [
    {
      "color": "d455d0",
      "default": false,
      "description": "Categorizes issue or PR as a support question.",
      "id": 130318610,
      "name": "kind/support",
      "node_id": "MDU6TGFiZWwxMzAzMTg2MTA=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/support"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Cluster Lifecycle.",
      "id": 173494222,
      "name": "sig/cluster-lifecycle",
      "node_id": "MDU6TGFiZWwxNzM0OTQyMjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/cluster-lifecycle"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/4309/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1NzI4MzQzMg==",
  "number": 4309,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Flannel not starting on master on Azure",
  "updated_at": "2015-08-12T17:35:09Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/4309",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/44435?v=4",
    "events_url": "https://api.github.com/users/chanezon/events{/privacy}",
    "followers_url": "https://api.github.com/users/chanezon/followers",
    "following_url": "https://api.github.com/users/chanezon/following{/other_user}",
    "gists_url": "https://api.github.com/users/chanezon/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/chanezon",
    "id": 44435,
    "login": "chanezon",
    "node_id": "MDQ6VXNlcjQ0NDM1",
    "organizations_url": "https://api.github.com/users/chanezon/orgs",
    "received_events_url": "https://api.github.com/users/chanezon/received_events",
    "repos_url": "https://api.github.com/users/chanezon/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/chanezon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chanezon/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/chanezon"
  }
}