{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/837034?v=4",
    "events_url": "https://api.github.com/users/bowei/events{/privacy}",
    "followers_url": "https://api.github.com/users/bowei/followers",
    "following_url": "https://api.github.com/users/bowei/following{/other_user}",
    "gists_url": "https://api.github.com/users/bowei/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bowei",
    "id": 837034,
    "login": "bowei",
    "node_id": "MDQ6VXNlcjgzNzAzNA==",
    "organizations_url": "https://api.github.com/users/bowei/orgs",
    "received_events_url": "https://api.github.com/users/bowei/received_events",
    "repos_url": "https://api.github.com/users/bowei/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bowei/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bowei/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bowei"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/837034?v=4",
      "events_url": "https://api.github.com/users/bowei/events{/privacy}",
      "followers_url": "https://api.github.com/users/bowei/followers",
      "following_url": "https://api.github.com/users/bowei/following{/other_user}",
      "gists_url": "https://api.github.com/users/bowei/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/bowei",
      "id": 837034,
      "login": "bowei",
      "node_id": "MDQ6VXNlcjgzNzAzNA==",
      "organizations_url": "https://api.github.com/users/bowei/orgs",
      "received_events_url": "https://api.github.com/users/bowei/received_events",
      "repos_url": "https://api.github.com/users/bowei/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/bowei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bowei/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/bowei"
    },
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/1332699?v=4",
      "events_url": "https://api.github.com/users/freehan/events{/privacy}",
      "followers_url": "https://api.github.com/users/freehan/followers",
      "following_url": "https://api.github.com/users/freehan/following{/other_user}",
      "gists_url": "https://api.github.com/users/freehan/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/freehan",
      "id": 1332699,
      "login": "freehan",
      "node_id": "MDQ6VXNlcjEzMzI2OTk=",
      "organizations_url": "https://api.github.com/users/freehan/orgs",
      "received_events_url": "https://api.github.com/users/freehan/received_events",
      "repos_url": "https://api.github.com/users/freehan/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/freehan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/freehan/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/freehan"
    }
  ],
  "author_association": "NONE",
  "body": "<!-- This form is for bug reports and feature requests ONLY! \r\n\r\nIf you're looking for help check [Stack Overflow](https://stackoverflow.com/questions/tagged/kubernetes) and the [troubleshooting guide](https://kubernetes.io/docs/tasks/debug-application-cluster/troubleshooting/).\r\n-->\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**:\r\nbug\r\n\r\n\r\n**What happened**:\r\nGot panic after running:\r\n```\r\ndocker run --net=host --rm=true --privileged --volume=/var/run/dbus gcr.io/google_containers/hyperkube-amd64:v1.7.0-rc.1 /hyperkube proxy --cleanup-iptables=true\r\n```\r\n\r\nPanic:\r\n```\r\n2017-06-28 06:19:08.012844 I | proto: duplicate proto type registered: google.protobuf.Any\r\n2017-06-28 06:19:08.044749 I | proto: duplicate proto type registered: google.protobuf.Duration\r\n2017-06-28 06:19:08.045078 I | proto: duplicate proto type registered: google.protobuf.Timestamp\r\nW0628 06:19:08.165958       1 server.go:188] WARNING: all flags other than --config, --write-config-to, and --cleanup-iptables are deprecated. Please begin using a config file ASAP.\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x20 pc=0x3747724]\r\n\r\ngoroutine 1 [running]:\r\nk8s.io/kubernetes/cmd/kube-proxy/app.(*ProxyServer).Run(0xc42069c240, 0xc420884d01, 0xc4203e7700)\r\n\t/go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/kube-proxy/app/server.go:630 +0x74\r\nk8s.io/kubernetes/cmd/kube-proxy/app.(*Options).Run(0xc420884d10, 0x0, 0x0)\r\n\t/go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/kube-proxy/app/server.go:226 +0xa0\r\nk8s.io/kubernetes/cmd/kube-proxy/app.NewProxyCommand.func1(0xc4205efd40, 0x92146d8, 0x0, 0x0)\r\n\t/go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/kube-proxy/app/server.go:341 +0x80\r\nk8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).execute(0xc4205efd40, 0xc420281220, 0x0, 0x1, 0xc4205efd40, 0xc420281220)\r\n\t/go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:603 +0x22b\r\nk8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0xc4205efd40, 0xc420a579e8, 0x42be9e, 0xc4200ecca8)\r\n\t/go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:689 +0x339\r\nk8s.io/kubernetes/vendor/github.com/spf13/cobra.(*Command).Execute(0xc4205efd40, 0xc420281220, 0xc420a579f8)\r\n\t/go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/github.com/spf13/cobra/command.go:648 +0x2b\r\nmain.NewKubeProxy.func1(0xc4200787e0, 0xc420281220, 0x0, 0x1, 0x0, 0x0)\r\n\t/go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/hyperkube/kube-proxy.go:50 +0x68\r\nmain.(*HyperKube).Run(0xc420084a80, 0xc420010190, 0x1, 0x1, 0x0, 0x0)\r\n\t/go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/hyperkube/hyperkube.go:177 +0x3ec\r\nmain.(*HyperKube).RunToExit(0xc420084a80, 0xc420010180, 0x3, 0x3)\r\n\t/go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/hyperkube/hyperkube.go:187 +0x59\r\nmain.main()\r\n\t/go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/hyperkube/main.go:47 +0x847\r\n```\r\n\r\n**What you expected to happen**:\r\nNo panic and exit successfully.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\nRun the following command on both CoreOS v1298.7.0(bare metal) and Ubuntu 16.04.2 LTS(OpenStack)\r\n```\r\ndocker run --net=host --rm=true --privileged --volume=/var/run/dbus gcr.io/google_containers/hyperkube-amd64:v1.7.0-rc.1 /hyperkube proxy --cleanup-iptables=true\r\n```\r\nHappened with the following versions:\r\nv1.7.0-alpha.3\r\nv1.7.0-alpha.4\r\nv1.7.0-beta.0\r\nv1.7.0-beta.1\r\nv1.7.0-beta.2\r\nv1.7.0-rc.1\r\nv1.8.0-alpha.0\r\nv1.8.0-alpha.1\r\n\r\n**Anything else we need to know?**:\r\nI guess it caused by 43cb024402e6992418b2197228889633b82ddb75.\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`):\r\n- Cloud provider or hardware configuration**:\r\n- OS (e.g. from /etc/os-release):\r\nBoth CoreOS v1298.7.0(bare metal) and Ubuntu 16.04.2 LTS(OpenStack)\r\n- Kernel (e.g. `uname -a`):\r\n  - CoreOS v1298.7.0: \r\n     Linux node-f7d74e 4.9.16-coreos-r1 #1 SMP Tue Apr 4 19:09:38 UTC 2017 x86_64 Intel(R) Core(TM) i5-6500 CPU @ 3.20GHz GenuineIntel GNU/Linux\r\n  - Ubuntu 16.04.2 LTS: \r\n     Linux ubuntu-3b1877 4.4.0-62-generic #83-Ubuntu SMP Wed Jan 18 14:10:15 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n- Install tools:\r\n- Others:\r\n",
  "closed_at": "2017-06-28T19:47:11Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 7,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48177/comments",
  "created_at": "2017-06-28T06:53:18Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48177/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/48177",
  "id": 239068873,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 128716589,
      "name": "area/kube-proxy",
      "node_id": "MDU6TGFiZWwxMjg3MTY1ODk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/kube-proxy"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Highest priority. Must be actively worked on as someone's top priority right now.",
      "id": 114528068,
      "name": "priority/critical-urgent",
      "node_id": "MDU6TGFiZWwxMTQ1MjgwNjg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/critical-urgent"
    },
    {
      "color": "d93f0b",
      "default": false,
      "description": null,
      "id": 435667038,
      "name": "release-blocker",
      "node_id": "MDU6TGFiZWw0MzU2NjcwMzg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/release-blocker"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Network.",
      "id": 116712108,
      "name": "sig/network",
      "node_id": "MDU6TGFiZWwxMTY3MTIxMDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/network"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48177/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2019-08-26T17:22:37Z",
    "closed_issues": 1514,
    "created_at": "2017-01-19T17:41:27Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/7882754?v=4",
      "events_url": "https://api.github.com/users/pwittrock/events{/privacy}",
      "followers_url": "https://api.github.com/users/pwittrock/followers",
      "following_url": "https://api.github.com/users/pwittrock/following{/other_user}",
      "gists_url": "https://api.github.com/users/pwittrock/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/pwittrock",
      "id": 7882754,
      "login": "pwittrock",
      "node_id": "MDQ6VXNlcjc4ODI3NTQ=",
      "organizations_url": "https://api.github.com/users/pwittrock/orgs",
      "received_events_url": "https://api.github.com/users/pwittrock/received_events",
      "repos_url": "https://api.github.com/users/pwittrock/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/pwittrock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pwittrock/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/pwittrock"
    },
    "description": "",
    "due_on": "2017-06-28T07:00:00Z",
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/32",
    "id": 2264750,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/32/labels",
    "node_id": "MDk6TWlsZXN0b25lMjI2NDc1MA==",
    "number": 32,
    "open_issues": 0,
    "state": "closed",
    "title": "v1.7",
    "updated_at": "2019-08-26T17:22:37Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/32"
  },
  "node_id": "MDU6SXNzdWUyMzkwNjg4NzM=",
  "number": 48177,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "hyperkube kube-proxy panics when run with '--cleanup-iptables=true' starting with v1.7.0-alpha.3",
  "updated_at": "2017-06-28T19:47:11Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/48177",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/7057471?v=4",
    "events_url": "https://api.github.com/users/irake99/events{/privacy}",
    "followers_url": "https://api.github.com/users/irake99/followers",
    "following_url": "https://api.github.com/users/irake99/following{/other_user}",
    "gists_url": "https://api.github.com/users/irake99/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/irake99",
    "id": 7057471,
    "login": "irake99",
    "node_id": "MDQ6VXNlcjcwNTc0NzE=",
    "organizations_url": "https://api.github.com/users/irake99/orgs",
    "received_events_url": "https://api.github.com/users/irake99/received_events",
    "repos_url": "https://api.github.com/users/irake99/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/irake99/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/irake99/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/irake99"
  }
}