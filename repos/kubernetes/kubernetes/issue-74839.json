{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/174200?v=4",
    "events_url": "https://api.github.com/users/anfernee/events{/privacy}",
    "followers_url": "https://api.github.com/users/anfernee/followers",
    "following_url": "https://api.github.com/users/anfernee/following{/other_user}",
    "gists_url": "https://api.github.com/users/anfernee/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/anfernee",
    "id": 174200,
    "login": "anfernee",
    "node_id": "MDQ6VXNlcjE3NDIwMA==",
    "organizations_url": "https://api.github.com/users/anfernee/orgs",
    "received_events_url": "https://api.github.com/users/anfernee/received_events",
    "repos_url": "https://api.github.com/users/anfernee/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/anfernee/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/anfernee/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/anfernee"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/174200?v=4",
      "events_url": "https://api.github.com/users/anfernee/events{/privacy}",
      "followers_url": "https://api.github.com/users/anfernee/followers",
      "following_url": "https://api.github.com/users/anfernee/following{/other_user}",
      "gists_url": "https://api.github.com/users/anfernee/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/anfernee",
      "id": 174200,
      "login": "anfernee",
      "node_id": "MDQ6VXNlcjE3NDIwMA==",
      "organizations_url": "https://api.github.com/users/anfernee/orgs",
      "received_events_url": "https://api.github.com/users/anfernee/received_events",
      "repos_url": "https://api.github.com/users/anfernee/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/anfernee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anfernee/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/anfernee"
    }
  ],
  "author_association": "MEMBER",
  "body": "**What happened**: Network services with heavy load will cause \"connection reset\" from time to time. Especially those with big payloads. When packets with sequence number out-of-window arrived k8s node, conntrack marked them as INVALID. kube-proxy will ignore them, without rewriting DNAT. The packet goes back the the original pod, who doesn't recognize the packet because of the wrong source ip, end up RSTing the connection. \r\n\r\n**What you expected to happen**: connection not reset\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**: \r\n@tcarmet wrote this just to reproduce the issue: https://github.com/tcarmet/k8s-connection-reset\r\nBasically run it in a cluster, and after a while you will be able to see \"Connection reset by peer\" on both server and client pods. \r\n\r\n**Anything else we need to know?**:\r\nRelated issue: \r\nhttps://github.com/docker/libnetwork/issues/1090\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): 1.11.7\r\n- Cloud provider or hardware configuration: gke (should be general to all provider)\r\n- OS (e.g: `cat /etc/os-release`): \r\nPRETTY_NAME=\"Debian GNU/Linux 9 (stretch)\"\r\nNAME=\"Debian GNU/Linux\"\r\nVERSION_ID=\"9\"\r\nVERSION=\"9 (stretch)\"\r\nID=debian\r\nHOME_URL=\"https://www.debian.org/\"\r\nSUPPORT_URL=\"https://www.debian.org/support\"\r\nBUG_REPORT_URL=\"https://bugs.debian.org/\"\r\n- Kernel (e.g. `uname -a`): Linux gke-cluster-1-11-default-pool-161c67fc-6nzv 4.14.89+ #1 SMP Wed Jan 9 13:35:00 PST 2019 x86_64 GNU/Linux\r\n\r\n",
  "closed_at": "2019-04-26T21:26:22Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/74839/comments",
  "created_at": "2019-03-02T01:35:10Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/74839/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/74839",
  "id": 416340546,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Network.",
      "id": 116712108,
      "name": "sig/network",
      "node_id": "MDU6TGFiZWwxMTY3MTIxMDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/network"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/74839/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MTYzNDA1NDY=",
  "number": 74839,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "\"Connection reset by peer\" due to invalid conntrack packets",
  "updated_at": "2020-04-09T06:46:11Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/74839",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/174200?v=4",
    "events_url": "https://api.github.com/users/anfernee/events{/privacy}",
    "followers_url": "https://api.github.com/users/anfernee/followers",
    "following_url": "https://api.github.com/users/anfernee/following{/other_user}",
    "gists_url": "https://api.github.com/users/anfernee/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/anfernee",
    "id": 174200,
    "login": "anfernee",
    "node_id": "MDQ6VXNlcjE3NDIwMA==",
    "organizations_url": "https://api.github.com/users/anfernee/orgs",
    "received_events_url": "https://api.github.com/users/anfernee/received_events",
    "repos_url": "https://api.github.com/users/anfernee/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/anfernee/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/anfernee/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/anfernee"
  }
}