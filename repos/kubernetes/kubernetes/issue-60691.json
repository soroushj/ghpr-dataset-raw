{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/676637?v=4",
    "events_url": "https://api.github.com/users/feiskyer/events{/privacy}",
    "followers_url": "https://api.github.com/users/feiskyer/followers",
    "following_url": "https://api.github.com/users/feiskyer/following{/other_user}",
    "gists_url": "https://api.github.com/users/feiskyer/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/feiskyer",
    "id": 676637,
    "login": "feiskyer",
    "node_id": "MDQ6VXNlcjY3NjYzNw==",
    "organizations_url": "https://api.github.com/users/feiskyer/orgs",
    "received_events_url": "https://api.github.com/users/feiskyer/received_events",
    "repos_url": "https://api.github.com/users/feiskyer/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/feiskyer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/feiskyer/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/feiskyer"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/676637?v=4",
      "events_url": "https://api.github.com/users/feiskyer/events{/privacy}",
      "followers_url": "https://api.github.com/users/feiskyer/followers",
      "following_url": "https://api.github.com/users/feiskyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/feiskyer/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/feiskyer",
      "id": 676637,
      "login": "feiskyer",
      "node_id": "MDQ6VXNlcjY3NjYzNw==",
      "organizations_url": "https://api.github.com/users/feiskyer/orgs",
      "received_events_url": "https://api.github.com/users/feiskyer/received_events",
      "repos_url": "https://api.github.com/users/feiskyer/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/feiskyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/feiskyer/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/feiskyer"
    }
  ],
  "author_association": "NONE",
  "body": "<!-- This form is for bug reports and feature requests ONLY! \r\n\r\nIf you're looking for help check [Stack Overflow](https://stackoverflow.com/questions/tagged/kubernetes) and the [troubleshooting guide](https://kubernetes.io/docs/tasks/debug-application-cluster/troubleshooting/).\r\n-->\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**:\r\n\r\n/kind bug\r\n\r\n**What happened**:\r\n\r\nkubelet fails to start on a standard VM with MSI enabled with `failed to run Kubelet: could not init cloud provider \"azure\": No credentials provided for AAD application`.\r\n\r\nProvider config:\r\n\r\n```\r\nsudo cat /etc/kubernetes/config/azure.json\r\n{\r\n        \"cloud\": \"AZUREPUBLICCLOUD\",\r\n        \"tenantId\": \"REDACTED\",\r\n        \"subscriptionId\": \"REDACTED\",\r\n        \"resourceGroup\": \"pawel\",\r\n        \"location\": \"westeurope\",\r\n        \"subnetName\": \"pawel-VirtualNetwork-WorkerSubnet\",\r\n        \"securityGroupName\": \"pawel-WorkerSecurityGroup\",\r\n        \"vnetName\": \"pawel-VirtualNetwork\",\r\n        \"vmType\": \"standard\",\r\n        \"routeTableName\": \"pawel-RouteTable\",\r\n        \"useManagedIdentityExtension\": true\r\n}\r\n```\r\n\r\nLogs:\r\n\r\n```\r\nMar 02 06:31:42 pawel-Master-1 systemd[1]: Started k8s-kubelet.\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --address has been deprecated, This parameter should be set via the config file specified by the Kubelet's --config flag. See https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/ for more information.\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --port has been deprecated, This parameter should be set via the config file specified by the Kubelet's --config flag. See https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/ for more information.\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --machine-id-file has been deprecated, This is a cadvisor flag that was mistakenly registered with the Kubelet. Due to legacy concerns, it will follow the standard CLI deprecation timeline before being removed.\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --cadvisor-port has been deprecated, The default will change to 0 (disabled) in 1.12, and the cadvisor port will be removed entirely in 1.13\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --healthz-bind-address has been deprecated, This parameter should be set via the config file specified by the Kubelet's --config flag. See https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/ for more information.\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --healthz-port has been deprecated, This parameter should be set via the config file specified by the Kubelet's --config flag. See https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/ for more information.\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --cluster-dns has been deprecated, This parameter should be set via the config file specified by the Kubelet's --config flag. See https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/ for more information.\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --cluster-domain has been deprecated, This parameter should be set via the config file specified by the Kubelet's --config flag. See https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/ for more information.\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --allow-privileged has been deprecated, will be removed in a future version\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --pod-manifest-path has been deprecated, This parameter should be set via the config file specified by the Kubelet's --config flag. See https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/ for more information.\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --kube-reserved has been deprecated, This parameter should be set via the config file specified by the Kubelet's --config flag. See https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/ for more information.\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: Flag --system-reserved has been deprecated, This parameter should be set via the config file specified by the Kubelet's --config flag. See https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/ for more information.\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.207936   92348 flags.go:27] FLAG: --address=\"10.14.0.4\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208003   92348 flags.go:27] FLAG: --allow-privileged=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208022   92348 flags.go:27] FLAG: --alsologtostderr=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208038   92348 flags.go:27] FLAG: --anonymous-auth=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208052   92348 flags.go:27] FLAG: --application-metrics-count-limit=\"100\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208077   92348 flags.go:27] FLAG: --authentication-token-webhook=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208092   92348 flags.go:27] FLAG: --authentication-token-webhook-cache-ttl=\"2m0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208113   92348 flags.go:27] FLAG: --authorization-mode=\"AlwaysAllow\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208129   92348 flags.go:27] FLAG: --authorization-webhook-cache-authorized-ttl=\"5m0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208154   92348 flags.go:27] FLAG: --authorization-webhook-cache-unauthorized-ttl=\"30s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208168   92348 flags.go:27] FLAG: --azure-container-registry-config=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208182   92348 flags.go:27] FLAG: --boot-id-file=\"/proc/sys/kernel/random/boot_id\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208196   92348 flags.go:27] FLAG: --bootstrap-checkpoint-path=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208209   92348 flags.go:27] FLAG: --bootstrap-kubeconfig=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208233   92348 flags.go:27] FLAG: --cadvisor-port=\"4194\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208253   92348 flags.go:27] FLAG: --cert-dir=\"/var/lib/kubelet/pki\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208267   92348 flags.go:27] FLAG: --cgroup-driver=\"cgroupfs\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208280   92348 flags.go:27] FLAG: --cgroup-root=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.208293   92348 flags.go:27] FLAG: --cgroups-per-qos=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214196   92348 flags.go:27] FLAG: --chaos-chance=\"0\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214213   92348 flags.go:27] FLAG: --client-ca-file=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214219   92348 flags.go:27] FLAG: --cloud-config=\"/etc/kubernetes/config/azure.json\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214224   92348 flags.go:27] FLAG: --cloud-provider=\"azure\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214229   92348 flags.go:27] FLAG: --cluster-dns=\"[172.31.0.10]\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214242   92348 flags.go:27] FLAG: --cluster-domain=\"cluster.local\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214247   92348 flags.go:27] FLAG: --cni-bin-dir=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214252   92348 flags.go:27] FLAG: --cni-conf-dir=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214264   92348 flags.go:27] FLAG: --config=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214270   92348 flags.go:27] FLAG: --container-hints=\"/etc/cadvisor/container_hints.json\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214276   92348 flags.go:27] FLAG: --container-log-max-files=\"5\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214281   92348 flags.go:27] FLAG: --container-log-max-size=\"10Mi\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214286   92348 flags.go:27] FLAG: --container-runtime=\"docker\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214291   92348 flags.go:27] FLAG: --container-runtime-endpoint=\"unix:///var/run/dockershim.sock\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214296   92348 flags.go:27] FLAG: --containerd=\"unix:///var/run/containerd.sock\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214302   92348 flags.go:27] FLAG: --containerized=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214307   92348 flags.go:27] FLAG: --contention-profiling=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214312   92348 flags.go:27] FLAG: --cpu-cfs-quota=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214317   92348 flags.go:27] FLAG: --cpu-manager-policy=\"none\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214322   92348 flags.go:27] FLAG: --cpu-manager-reconcile-period=\"10s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214328   92348 flags.go:27] FLAG: --docker=\"unix:///var/run/docker.sock\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214333   92348 flags.go:27] FLAG: --docker-disable-shared-pid=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214338   92348 flags.go:27] FLAG: --docker-endpoint=\"unix:///var/run/docker.sock\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214343   92348 flags.go:27] FLAG: --docker-env-metadata-whitelist=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214348   92348 flags.go:27] FLAG: --docker-only=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214353   92348 flags.go:27] FLAG: --docker-root=\"/var/lib/docker\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214359   92348 flags.go:27] FLAG: --docker-tls=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214364   92348 flags.go:27] FLAG: --docker-tls-ca=\"ca.pem\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214369   92348 flags.go:27] FLAG: --docker-tls-cert=\"cert.pem\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214389   92348 flags.go:27] FLAG: --docker-tls-key=\"key.pem\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214397   92348 flags.go:27] FLAG: --dynamic-config-dir=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214406   92348 flags.go:27] FLAG: --enable-controller-attach-detach=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214411   92348 flags.go:27] FLAG: --enable-custom-metrics=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214416   92348 flags.go:27] FLAG: --enable-debugging-handlers=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214421   92348 flags.go:27] FLAG: --enable-load-reader=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214426   92348 flags.go:27] FLAG: --enable-server=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214430   92348 flags.go:27] FLAG: --enforce-node-allocatable=\"[pods]\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214437   92348 flags.go:27] FLAG: --event-burst=\"10\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214442   92348 flags.go:27] FLAG: --event-qps=\"5\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214447   92348 flags.go:27] FLAG: --event-storage-age-limit=\"default=0\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214452   92348 flags.go:27] FLAG: --event-storage-event-limit=\"default=0\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214457   92348 flags.go:27] FLAG: --eviction-hard=\"imagefs.available<15%,memory.available<100Mi,nodefs.available<10%,nodefs.inodesFree<5%\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214473   92348 flags.go:27] FLAG: --eviction-max-pod-grace-period=\"0\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214478   92348 flags.go:27] FLAG: --eviction-minimum-reclaim=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214486   92348 flags.go:27] FLAG: --eviction-pressure-transition-period=\"5m0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214492   92348 flags.go:27] FLAG: --eviction-soft=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214497   92348 flags.go:27] FLAG: --eviction-soft-grace-period=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214502   92348 flags.go:27] FLAG: --exit-on-lock-contention=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214507   92348 flags.go:27] FLAG: --experimental-allocatable-ignore-eviction=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214512   92348 flags.go:27] FLAG: --experimental-allowed-unsafe-sysctls=\"[]\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214521   92348 flags.go:27] FLAG: --experimental-bootstrap-kubeconfig=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214526   92348 flags.go:27] FLAG: --experimental-check-node-capabilities-before-mount=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214532   92348 flags.go:27] FLAG: --experimental-dockershim=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214537   92348 flags.go:27] FLAG: --experimental-dockershim-root-directory=\"/var/lib/dockershim\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214542   92348 flags.go:27] FLAG: --experimental-fail-swap-on=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214547   92348 flags.go:27] FLAG: --experimental-kernel-memcg-notification=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214552   92348 flags.go:27] FLAG: --experimental-mounter-path=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214557   92348 flags.go:27] FLAG: --experimental-qos-reserved=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214562   92348 flags.go:27] FLAG: --fail-swap-on=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214567   92348 flags.go:27] FLAG: --feature-gates=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214575   92348 flags.go:27] FLAG: --file-check-frequency=\"20s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214580   92348 flags.go:27] FLAG: --global-housekeeping-interval=\"1m0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214585   92348 flags.go:27] FLAG: --google-json-key=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214590   92348 flags.go:27] FLAG: --hairpin-mode=\"promiscuous-bridge\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214595   92348 flags.go:27] FLAG: --healthz-bind-address=\"10.14.0.4\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214600   92348 flags.go:27] FLAG: --healthz-port=\"10248\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214606   92348 flags.go:27] FLAG: --help=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214611   92348 flags.go:27] FLAG: --host-ipc-sources=\"[*]\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214617   92348 flags.go:27] FLAG: --host-network-sources=\"[*]\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214624   92348 flags.go:27] FLAG: --host-pid-sources=\"[*]\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214630   92348 flags.go:27] FLAG: --hostname-override=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214635   92348 flags.go:27] FLAG: --housekeeping-interval=\"10s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214640   92348 flags.go:27] FLAG: --http-check-frequency=\"20s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214645   92348 flags.go:27] FLAG: --image-gc-high-threshold=\"85\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214650   92348 flags.go:27] FLAG: --image-gc-low-threshold=\"80\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214655   92348 flags.go:27] FLAG: --image-pull-progress-deadline=\"1m0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214660   92348 flags.go:27] FLAG: --image-service-endpoint=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214665   92348 flags.go:27] FLAG: --iptables-drop-bit=\"15\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214670   92348 flags.go:27] FLAG: --iptables-masquerade-bit=\"14\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214675   92348 flags.go:27] FLAG: --keep-terminated-pod-volumes=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214692   92348 flags.go:27] FLAG: --kube-api-burst=\"10\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214697   92348 flags.go:27] FLAG: --kube-api-content-type=\"application/vnd.kubernetes.protobuf\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214730   92348 flags.go:27] FLAG: --kube-api-qps=\"5\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214737   92348 flags.go:27] FLAG: --kube-reserved=\"cpu=150m,memory=250Mi\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214746   92348 flags.go:27] FLAG: --kube-reserved-cgroup=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214752   92348 flags.go:27] FLAG: --kubeconfig=\"/etc/kubernetes/config/kubelet-kubeconfig.yml\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214758   92348 flags.go:27] FLAG: --kubelet-cgroups=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214764   92348 flags.go:27] FLAG: --lock-file=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.214769   92348 flags.go:27] FLAG: --log-backtrace-at=\":0\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215084   92348 flags.go:27] FLAG: --log-cadvisor-usage=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215094   92348 flags.go:27] FLAG: --log-dir=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215100   92348 flags.go:27] FLAG: --log-flush-frequency=\"5s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215106   92348 flags.go:27] FLAG: --logtostderr=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215112   92348 flags.go:27] FLAG: --machine-id-file=\"/rootfs/etc/machine-id\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215118   92348 flags.go:27] FLAG: --make-iptables-util-chains=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215124   92348 flags.go:27] FLAG: --manifest-url=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215130   92348 flags.go:27] FLAG: --manifest-url-header=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215139   92348 flags.go:27] FLAG: --master-service-namespace=\"default\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215145   92348 flags.go:27] FLAG: --max-open-files=\"1000000\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215154   92348 flags.go:27] FLAG: --max-pods=\"110\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215160   92348 flags.go:27] FLAG: --maximum-dead-containers=\"-1\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215167   92348 flags.go:27] FLAG: --maximum-dead-containers-per-container=\"1\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215173   92348 flags.go:27] FLAG: --minimum-container-ttl-duration=\"0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215179   92348 flags.go:27] FLAG: --minimum-image-ttl-duration=\"2m0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215185   92348 flags.go:27] FLAG: --network-plugin=\"cni\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215190   92348 flags.go:27] FLAG: --network-plugin-mtu=\"0\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215197   92348 flags.go:27] FLAG: --node-ip=\"10.14.0.4\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215203   92348 flags.go:27] FLAG: --node-labels=\"ip=10.14.0.4,kubernetes.io/hostname=,node-role.kubernetes.io/master=,role=master\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215217   92348 flags.go:27] FLAG: --node-status-update-frequency=\"10s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215223   92348 flags.go:27] FLAG: --non-masquerade-cidr=\"10.0.0.0/8\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215229   92348 flags.go:27] FLAG: --oom-score-adj=\"-999\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215235   92348 flags.go:27] FLAG: --pod-cidr=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215241   92348 flags.go:27] FLAG: --pod-infra-container-image=\"k8s.gcr.io/pause-amd64:3.1\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215247   92348 flags.go:27] FLAG: --pod-manifest-path=\"/etc/kubernetes/manifests\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215253   92348 flags.go:27] FLAG: --pod-max-pids=\"-1\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215259   92348 flags.go:27] FLAG: --pods-per-core=\"0\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215264   92348 flags.go:27] FLAG: --port=\"10250\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215270   92348 flags.go:27] FLAG: --protect-kernel-defaults=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215276   92348 flags.go:27] FLAG: --provider-id=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215282   92348 flags.go:27] FLAG: --read-only-port=\"10255\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215287   92348 flags.go:27] FLAG: --really-crash-for-testing=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215293   92348 flags.go:27] FLAG: --register-node=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215299   92348 flags.go:27] FLAG: --register-schedulable=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215304   92348 flags.go:27] FLAG: --register-with-taints=\"node-role.kubernetes.io/master=:NoSchedule\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215317   92348 flags.go:27] FLAG: --registry-burst=\"10\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215323   92348 flags.go:27] FLAG: --registry-qps=\"5\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215328   92348 flags.go:27] FLAG: --resolv-conf=\"/etc/resolv.conf\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215334   92348 flags.go:27] FLAG: --rkt-api-endpoint=\"localhost:15441\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215340   92348 flags.go:27] FLAG: --rkt-path=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215346   92348 flags.go:27] FLAG: --rkt-stage1-image=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215364   92348 flags.go:27] FLAG: --root-dir=\"/var/lib/kubelet\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215369   92348 flags.go:27] FLAG: --rotate-certificates=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215443   92348 flags.go:27] FLAG: --runonce=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215452   92348 flags.go:27] FLAG: --runtime-cgroups=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215457   92348 flags.go:27] FLAG: --runtime-request-timeout=\"2m0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215462   92348 flags.go:27] FLAG: --seccomp-profile-root=\"/var/lib/kubelet/seccomp\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215468   92348 flags.go:27] FLAG: --serialize-image-pulls=\"true\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215473   92348 flags.go:27] FLAG: --stderrthreshold=\"2\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215478   92348 flags.go:27] FLAG: --storage-driver-buffer-duration=\"1m0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215483   92348 flags.go:27] FLAG: --storage-driver-db=\"cadvisor\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215488   92348 flags.go:27] FLAG: --storage-driver-host=\"localhost:8086\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215500   92348 flags.go:27] FLAG: --storage-driver-password=\"root\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215511   92348 flags.go:27] FLAG: --storage-driver-secure=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215521   92348 flags.go:27] FLAG: --storage-driver-table=\"stats\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215527   92348 flags.go:27] FLAG: --storage-driver-user=\"root\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215532   92348 flags.go:27] FLAG: --streaming-connection-idle-timeout=\"4h0m0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215542   92348 flags.go:27] FLAG: --sync-frequency=\"1m0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215547   92348 flags.go:27] FLAG: --system-cgroups=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215552   92348 flags.go:27] FLAG: --system-reserved=\"cpu=150m,memory=250Mi\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215560   92348 flags.go:27] FLAG: --system-reserved-cgroup=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215565   92348 flags.go:27] FLAG: --tls-cert-file=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215570   92348 flags.go:27] FLAG: --tls-cipher-suites=\"[]\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215578   92348 flags.go:27] FLAG: --tls-min-version=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215583   92348 flags.go:27] FLAG: --tls-private-key-file=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215588   92348 flags.go:27] FLAG: --v=\"2\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215593   92348 flags.go:27] FLAG: --version=\"false\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215602   92348 flags.go:27] FLAG: --vmodule=\"\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215607   92348 flags.go:27] FLAG: --volume-plugin-dir=\"/usr/libexec/kubernetes/kubelet-plugins/volume/exec/\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215613   92348 flags.go:27] FLAG: --volume-stats-agg-period=\"1m0s\"\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215643   92348 feature_gate.go:226] feature gates: &{{} map[]}\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215841   92348 mount_linux.go:188] Detected OS without systemd\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.215852   92348 server.go:333] Running kubelet in containerized mode\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: W0302 06:31:43.216037   92348 cni.go:171] Unable to update cni config: No networks found in /etc/cni/net.d\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.219346   92348 iptables.go:198] Could not connect to D-Bus system bus: dial unix /var/run/dbus/system_bus_socket: connect: no such file or directory\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.219553   92348 server.go:373] Version: v1.10.0-beta.1\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: I0302 06:31:43.219750   92348 feature_gate.go:226] feature gates: &{{} map[]}\r\nMar 02 06:31:43 pawel-Master-1 sh[92323]: F0302 06:31:43.220267   92348 server.go:230] failed to run Kubelet: could not init cloud provider \"azure\": No credentials provided for AAD application\r\nMar 02 06:31:43 pawel-Master-1 systemd[1]: k8s-kubelet.service: Main process exited, code=exited, status=255/n/a\r\n```\r\n\r\n**What you expected to happen**:\r\n\r\nkubelet starts finds a token via MSI and starts.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\n- Create Azure VM with MSI enabled.\r\n- Start kubelet with `--cloud-provider=\"azure\"` and  `--cloud-config=\"/path/to/azure.json\"`.\r\n\r\n**Anything else we need to know?**:\r\n\r\nIt was working in 1.9.\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): v1.10.0-beta.1\r\n- Cloud provider or hardware configuration: Azure\r\n- OS (e.g. from /etc/os-release): Container Linux 1576.5.0\r\n- Kernel (e.g. `uname -a`): 4.14.11-coreos\r\n- Install tools: Custom (https://github.com/giantswarm/azure-operator/)\r\n- Others:\r\n",
  "closed_at": "2018-03-05T10:24:47Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 9,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/60691/comments",
  "created_at": "2018-03-02T06:52:07Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/60691/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/60691",
  "id": 301670386,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Highest priority. Must be actively worked on as someone's top priority right now.",
      "id": 114528068,
      "name": "priority/critical-urgent",
      "node_id": "MDU6TGFiZWwxMTQ1MjgwNjg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/critical-urgent"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/60691/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2019-08-26T17:23:39Z",
    "closed_issues": 641,
    "created_at": "2017-07-24T18:50:54Z",
    "creator": {
      "avatar_url": "https://avatars1.githubusercontent.com/u/903617?v=4",
      "events_url": "https://api.github.com/users/mtaufen/events{/privacy}",
      "followers_url": "https://api.github.com/users/mtaufen/followers",
      "following_url": "https://api.github.com/users/mtaufen/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtaufen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mtaufen",
      "id": 903617,
      "login": "mtaufen",
      "node_id": "MDQ6VXNlcjkwMzYxNw==",
      "organizations_url": "https://api.github.com/users/mtaufen/orgs",
      "received_events_url": "https://api.github.com/users/mtaufen/received_events",
      "repos_url": "https://api.github.com/users/mtaufen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mtaufen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtaufen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mtaufen"
    },
    "description": "",
    "due_on": "2018-03-26T07:00:00Z",
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/37",
    "id": 2659046,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/37/labels",
    "node_id": "MDk6TWlsZXN0b25lMjY1OTA0Ng==",
    "number": 37,
    "open_issues": 0,
    "state": "closed",
    "title": "v1.10",
    "updated_at": "2019-08-26T17:23:39Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/37"
  },
  "node_id": "MDU6SXNzdWUzMDE2NzAzODY=",
  "number": 60691,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "kubelet v1.10 can't init azure provider with useManagedIdentityExtension",
  "updated_at": "2018-03-06T02:02:12Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/60691",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/4608994?v=4",
    "events_url": "https://api.github.com/users/kopiczko/events{/privacy}",
    "followers_url": "https://api.github.com/users/kopiczko/followers",
    "following_url": "https://api.github.com/users/kopiczko/following{/other_user}",
    "gists_url": "https://api.github.com/users/kopiczko/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/kopiczko",
    "id": 4608994,
    "login": "kopiczko",
    "node_id": "MDQ6VXNlcjQ2MDg5OTQ=",
    "organizations_url": "https://api.github.com/users/kopiczko/orgs",
    "received_events_url": "https://api.github.com/users/kopiczko/received_events",
    "repos_url": "https://api.github.com/users/kopiczko/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/kopiczko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kopiczko/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/kopiczko"
  }
}