{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "[In the current StatefulSet implementation](https://github.com/kubernetes/kubernetes/blob/master/pkg/controller/petset/pet.go#L125-L136) a situation exists that can cause deadlock under the following conditions.\r\n\r\n1. StatefulSet S is created with 3 replicas {s0,s1,s2}.\r\n2. S creates s0.\r\n3. s0 passes its liveness and readiness probes.\r\n4. S creates s1, and s1 depends on s0 to be Running and Ready for its own readiness probe to pass (This occurs if s0 is the canonical element of the Set on whose health all other Pods in the set depend. An example of this is a replication topology where s0 is the master and [s1,sn) are read only slaves).\r\n5. s0 is deleted prior to s1 becoming Running and Ready.\r\n6. s1  blocks Pod creation and s0 will not be recreated.\r\n\r\nThe current implementation attempts to provide the following guarantee.\r\n\r\nFor any Pod, si, in a StatefulSet S, if any Pod, sj, where si != sj, in S has been created but is not Running and Ready, si will not be created until sj transitions to Running and Ready.\r\n\r\nI think that the understood guarantee, and the one that was the original intention is the following.\r\n\r\nFor any Pod, si, in a StatefulSet S, the StatefulSet controller will not create the Pod unless all Pods, sj , where 0 <= j < i, are Running and Ready.\r\n\r\nIf this is the case than, in the above deadlock condition, we should recreate s0 allowing the controller to make progress.\r\n\r\n@enisoc @erictune @foxish @janetkuo  \r\n",
  "closed_at": "2017-02-10T08:04:49Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/38418/comments",
  "created_at": "2016-12-08T22:57:30Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/38418/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/38418",
  "id": 194467148,
  "labels": [],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/38418/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxOTQ0NjcxNDg=",
  "number": 38418,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "StatefulSet does not recreate Pods at a lower ordinal until successor Pods are Running and Ready",
  "updated_at": "2017-02-10T08:04:49Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/38418",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/11380896?v=4",
    "events_url": "https://api.github.com/users/kow3ns/events{/privacy}",
    "followers_url": "https://api.github.com/users/kow3ns/followers",
    "following_url": "https://api.github.com/users/kow3ns/following{/other_user}",
    "gists_url": "https://api.github.com/users/kow3ns/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/kow3ns",
    "id": 11380896,
    "login": "kow3ns",
    "node_id": "MDQ6VXNlcjExMzgwODk2",
    "organizations_url": "https://api.github.com/users/kow3ns/orgs",
    "received_events_url": "https://api.github.com/users/kow3ns/received_events",
    "repos_url": "https://api.github.com/users/kow3ns/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/kow3ns/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kow3ns/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/kow3ns"
  }
}