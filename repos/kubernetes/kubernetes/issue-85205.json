{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/14335541?v=4",
    "events_url": "https://api.github.com/users/chrisohaver/events{/privacy}",
    "followers_url": "https://api.github.com/users/chrisohaver/followers",
    "following_url": "https://api.github.com/users/chrisohaver/following{/other_user}",
    "gists_url": "https://api.github.com/users/chrisohaver/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/chrisohaver",
    "id": 14335541,
    "login": "chrisohaver",
    "node_id": "MDQ6VXNlcjE0MzM1NTQx",
    "organizations_url": "https://api.github.com/users/chrisohaver/orgs",
    "received_events_url": "https://api.github.com/users/chrisohaver/received_events",
    "repos_url": "https://api.github.com/users/chrisohaver/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/chrisohaver/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chrisohaver/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/chrisohaver"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/14335541?v=4",
      "events_url": "https://api.github.com/users/chrisohaver/events{/privacy}",
      "followers_url": "https://api.github.com/users/chrisohaver/followers",
      "following_url": "https://api.github.com/users/chrisohaver/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisohaver/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/chrisohaver",
      "id": 14335541,
      "login": "chrisohaver",
      "node_id": "MDQ6VXNlcjE0MzM1NTQx",
      "organizations_url": "https://api.github.com/users/chrisohaver/orgs",
      "received_events_url": "https://api.github.com/users/chrisohaver/received_events",
      "repos_url": "https://api.github.com/users/chrisohaver/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/chrisohaver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisohaver/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/chrisohaver"
    }
  ],
  "author_association": "NONE",
  "body": "**What happened**:\r\n\r\nWhen the apiserver is unavailable, CoreDNS pods crash while trying to write log files to the read only file system.\r\n\r\n**What you expected to happen**:\r\n\r\nCoreDNS should continue to run even if the apiserver is unavailable for a short period of time. Log files should be written to an emptyDir.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\nRestart the apiserver. Notice when the apiserver is back up that CoreDNS pod status is either Error, CrashLoopBackOff or Running but Ready is 0/1. Restart count has increased by at least 1.\r\n\r\n**Anything else we need to know?**:\r\n\r\nThis is a regression from #75414. The initial fix was to upgrade CoreDNS from 1.3.1 to 1.5.0, but it was later reverted, as you can see from the history [here](https://github.com/kubernetes/kubernetes/commits/release-1.15/cmd/kubeadm/app/phases/addons/dns/manifests.go). The initial issue then reappeared. A fix was made for 1.14 in pull request #82128 to mount an emptyDir to /tmp to keep the pods from crashing when writing log files. The same fix can be applied in 1.15.\r\n\r\nThis issue is blocking rollout of 1.15 for us. It would be really nice if the suggested fix could be included in 1.15.6.\r\n\r\n**Environment**: Test\r\n- Kubernetes version (use `kubectl version`): v1.15.5\r\n- Cloud provider or hardware configuration: On premise, vmware nodes\r\n- OS (e.g: `cat /etc/os-release`): CentOS Linux release 7.6.1810 (Core)\r\n- Kernel (e.g. `uname -a`): 3.10.0-957.5.1.el7.x86_64\r\n- Install tools: kubeadm\r\n- Network plugin and version (if this is a network-related bug): Canal v3.7.2\r\n- Others:\r\n",
  "closed_at": "2019-12-16T13:54:31Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/186016?v=4",
    "events_url": "https://api.github.com/users/blurpy/events{/privacy}",
    "followers_url": "https://api.github.com/users/blurpy/followers",
    "following_url": "https://api.github.com/users/blurpy/following{/other_user}",
    "gists_url": "https://api.github.com/users/blurpy/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/blurpy",
    "id": 186016,
    "login": "blurpy",
    "node_id": "MDQ6VXNlcjE4NjAxNg==",
    "organizations_url": "https://api.github.com/users/blurpy/orgs",
    "received_events_url": "https://api.github.com/users/blurpy/received_events",
    "repos_url": "https://api.github.com/users/blurpy/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/blurpy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/blurpy/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/blurpy"
  },
  "comments": 5,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/85205/comments",
  "created_at": "2019-11-13T13:03:01Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/85205/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/85205",
  "id": 522209309,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Cluster Lifecycle.",
      "id": 173494222,
      "name": "sig/cluster-lifecycle",
      "node_id": "MDU6TGFiZWwxNzM0OTQyMjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/cluster-lifecycle"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/85205/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1MjIyMDkzMDk=",
  "number": 85205,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "1.15 CoreDNS immediately crash if Kubernetes apiserver is unavailable",
  "updated_at": "2019-12-16T13:54:31Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/85205",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/186016?v=4",
    "events_url": "https://api.github.com/users/blurpy/events{/privacy}",
    "followers_url": "https://api.github.com/users/blurpy/followers",
    "following_url": "https://api.github.com/users/blurpy/following{/other_user}",
    "gists_url": "https://api.github.com/users/blurpy/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/blurpy",
    "id": 186016,
    "login": "blurpy",
    "node_id": "MDQ6VXNlcjE4NjAxNg==",
    "organizations_url": "https://api.github.com/users/blurpy/orgs",
    "received_events_url": "https://api.github.com/users/blurpy/received_events",
    "repos_url": "https://api.github.com/users/blurpy/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/blurpy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/blurpy/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/blurpy"
  }
}