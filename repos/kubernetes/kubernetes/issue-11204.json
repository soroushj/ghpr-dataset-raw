{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/903617?v=4",
    "events_url": "https://api.github.com/users/mtaufen/events{/privacy}",
    "followers_url": "https://api.github.com/users/mtaufen/followers",
    "following_url": "https://api.github.com/users/mtaufen/following{/other_user}",
    "gists_url": "https://api.github.com/users/mtaufen/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mtaufen",
    "id": 903617,
    "login": "mtaufen",
    "node_id": "MDQ6VXNlcjkwMzYxNw==",
    "organizations_url": "https://api.github.com/users/mtaufen/orgs",
    "received_events_url": "https://api.github.com/users/mtaufen/received_events",
    "repos_url": "https://api.github.com/users/mtaufen/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mtaufen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mtaufen/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mtaufen"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/903617?v=4",
      "events_url": "https://api.github.com/users/mtaufen/events{/privacy}",
      "followers_url": "https://api.github.com/users/mtaufen/followers",
      "following_url": "https://api.github.com/users/mtaufen/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtaufen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mtaufen",
      "id": 903617,
      "login": "mtaufen",
      "node_id": "MDQ6VXNlcjkwMzYxNw==",
      "organizations_url": "https://api.github.com/users/mtaufen/orgs",
      "received_events_url": "https://api.github.com/users/mtaufen/received_events",
      "repos_url": "https://api.github.com/users/mtaufen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mtaufen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtaufen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mtaufen"
    }
  ],
  "author_association": "MEMBER",
  "body": "Today kubelet sets up an iptables MASQUERADE rule for any traffic destined for anything except 10.0.0.0/8.  This is close, but not even correct on GCE, and certainly not right elsewhere.\n\nFirst GCE.  We probably want something like:\n\n```\niptables -t nat -N KUBE-IPMASQ\niptables -t nat -A KUBE-IPMASQ -d 10.0.0.0/8 -j RETURN\niptables -t nat -A KUBE-IPMASQ -d 172.16.0.0/12 -j RETURN\niptables -t nat -A KUBE-IPMASQ -d 192.168.0.0/16 -j RETURN\niptables -t nat -A KUBE-IPMASQ -j MASQUERADE\niptables -t nat -I POSTROUTING -j KUBE-IPMASQ\n```\n\nThis catches all traffic to RFC1918 ranges and masquerades it.  We can probably optimize with CONNMARK or something so we only consider packets from containers.  This is probably still imperfect, but better, for lack of project-wide NAT for egress.\n\nFor other environments, we really have no idea what the correct policy for this is.  It is closer to \"your nodes must handle this\" than \"we can handle this for you\".  It's debatable whether we should even try.\n\nEither:\na) We teach kubelet a lot more and let people pass flags to nearly=arbitrarily configure this\nb) We tell people to configure this as part of their node setup\n\nThis popped up when I realized GKE allows users to set up 172.\\* clusters - any traffic between containers in one of these will get masqueraded - not correct behavior!!  This is not a huge deal right now because kube-proxy has the same effect when traversing services.  As we fix kube-proxy in the wake of 1.0, masquerade will be a bigger deal, especially for micro-segmenting.\n\nAdditional considerations: VPNs have bizarre and very custom needs.  Every such thing has an as yet unmeasured perf implication.  This also pops up in our GCE firewall thing that @ArtfulCoder is working on.\n\n@dchen1107 @alex-mohr \n",
  "closed_at": "2017-05-26T17:14:00Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 22,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/11204/comments",
  "created_at": "2015-07-14T04:49:21Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/11204/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/11204",
  "id": 94867480,
  "labels": [
    {
      "color": "fbca04",
      "default": false,
      "description": "Higher priority than priority/awaiting-more-evidence.",
      "id": 114528273,
      "name": "priority/backlog",
      "node_id": "MDU6TGFiZWwxMTQ1MjgyNzM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/backlog"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Network.",
      "id": 116712108,
      "name": "sig/network",
      "node_id": "MDU6TGFiZWwxMTY3MTIxMDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/network"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/11204/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": null,
    "closed_issues": 587,
    "created_at": "2016-01-16T17:58:20Z",
    "creator": {
      "avatar_url": "https://avatars1.githubusercontent.com/u/7725777?v=4",
      "events_url": "https://api.github.com/users/bgrant0607/events{/privacy}",
      "followers_url": "https://api.github.com/users/bgrant0607/followers",
      "following_url": "https://api.github.com/users/bgrant0607/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgrant0607/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/bgrant0607",
      "id": 7725777,
      "login": "bgrant0607",
      "node_id": "MDQ6VXNlcjc3MjU3Nzc=",
      "organizations_url": "https://api.github.com/users/bgrant0607/orgs",
      "received_events_url": "https://api.github.com/users/bgrant0607/received_events",
      "repos_url": "https://api.github.com/users/bgrant0607/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/bgrant0607/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgrant0607/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/bgrant0607"
    },
    "description": "Candidates for the next milestone",
    "due_on": null,
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/17",
    "id": 1510379,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/17/labels",
    "node_id": "MDk6TWlsZXN0b25lMTUxMDM3OQ==",
    "number": 17,
    "open_issues": 34,
    "state": "open",
    "title": "next-candidate",
    "updated_at": "2020-08-28T02:07:27Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/17"
  },
  "node_id": "MDU6SXNzdWU5NDg2NzQ4MA==",
  "number": 11204,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "kubelet's MASQUERADE support is insufficient",
  "updated_at": "2017-09-05T22:44:57Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/11204",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5595220?v=4",
    "events_url": "https://api.github.com/users/thockin/events{/privacy}",
    "followers_url": "https://api.github.com/users/thockin/followers",
    "following_url": "https://api.github.com/users/thockin/following{/other_user}",
    "gists_url": "https://api.github.com/users/thockin/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/thockin",
    "id": 5595220,
    "login": "thockin",
    "node_id": "MDQ6VXNlcjU1OTUyMjA=",
    "organizations_url": "https://api.github.com/users/thockin/orgs",
    "received_events_url": "https://api.github.com/users/thockin/received_events",
    "repos_url": "https://api.github.com/users/thockin/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/thockin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thockin/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/thockin"
  }
}