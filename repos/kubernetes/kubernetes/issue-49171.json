{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "**Is this a BUG REPORT or FEATURE REQUEST?**: BUG\r\n\r\n/kind bug\r\n\r\n**What happened**: If you are using a mac and GCE and you specify NODE_LOCAL_SSDS=0 when using GCE via kube-up or e2e --up, then you end up getting 2 local SSDs.\r\n\r\n**What you expected to happen**: I would expect to get 0 local SSDs by default and when I specify NODE_LOCAL_SSDS=0 explicitly.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nOn mac execute:\r\n\r\n`NODE_LOCAL_SSDS=0 go run hack/e2e.go -- -v --up\r\n`\r\n\r\n**Anything else we need to know?**:\r\n\r\nI've discovered that this issue is due to https://github.com/kubernetes/kubernetes/blob/b353792f9c349abb50a312bc1adaea1b3a8e115c/cluster/gce/util.sh#L579\r\n\r\nIf NODE_LOCAL_SSDS=0, this evaluates to $(seq 0)\r\n\r\n```\r\n$ for i in $(seq 0); do echo $i; done\r\n1\r\n0\r\n```\r\n\r\nFrom man seq on mac osx\r\n\r\n```\r\nThe seq utility prints a sequence of numbers, one per line (default), from first (default 1), \r\nto near last as possible, in increments of incr (default 1).When first is larger than last the \r\ndefault incr is -1.\r\n```\r\n\r\nThis was run on mac with the seq manpage indicating it comes from BSD Feb 19 2010.\r\n\r\nNote: some unix/linux variants, e.g. a test on ubuntu with coreutils 8.25 and a test on centos-7 with coreutils 8.22, had a different behavior that does not demonstrate this bug.\r\n\r\n\r\n**Environment**:\r\n- Cloud provider or hardware configuration**: GCE\r\n- OS (e.g. from /etc/os-release): mac osx\r\n\r\n",
  "closed_at": "2017-07-21T08:13:20Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/49171/comments",
  "created_at": "2017-07-19T02:05:20Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/49171/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/49171",
  "id": 243901761,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/49171/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNDM5MDE3NjE=",
  "number": 49171,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "On mac GCE adds 2 local SSDs even though NODE_LOCAL_SSDS=0 is default",
  "updated_at": "2017-07-21T08:13:20Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/49171",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/4367440?v=4",
    "events_url": "https://api.github.com/users/ianchakeres/events{/privacy}",
    "followers_url": "https://api.github.com/users/ianchakeres/followers",
    "following_url": "https://api.github.com/users/ianchakeres/following{/other_user}",
    "gists_url": "https://api.github.com/users/ianchakeres/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ianchakeres",
    "id": 4367440,
    "login": "ianchakeres",
    "node_id": "MDQ6VXNlcjQzNjc0NDA=",
    "organizations_url": "https://api.github.com/users/ianchakeres/orgs",
    "received_events_url": "https://api.github.com/users/ianchakeres/received_events",
    "repos_url": "https://api.github.com/users/ianchakeres/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ianchakeres/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ianchakeres/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ianchakeres"
  }
}