{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "<!-- This form is for bug reports and feature requests ONLY!\r\n\r\nIf you're looking for help check [Stack Overflow](https://stackoverflow.com/questions/tagged/kubernetes) and the [troubleshooting guide](https://kubernetes.io/docs/tasks/debug-application-cluster/troubleshooting/).\r\n\r\nIf this may be security issue, please disclose it privately via https://kubernetes.io/security/.\r\n-->\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**:\r\n\r\n> Uncomment only one, leave it on its own line:\r\n>\r\n /kind bug\r\n> /kind feature\r\n\r\n\r\n**What happened**:\r\nWhen trying to mount an Azure File mount it fails, it looks as though its putting a new line between the name of the Azure Storage Account and the Azure storage domain. There are no new line characters in the secret that holds the account name.\r\n\r\nThe following is the secret:\r\n```yaml\r\napiVersion: v1\r\nkind: Secret\r\nmetadata:\r\n  name: asa-otm\r\n  labels:\r\n    app: my-app\r\n    role: secret\r\n    env: dev\r\ntype: Opaque\r\ndata:\r\n  azurestorageaccountname: c2FhdXNucHJkZGV2b3RtCg==\r\n  azurestorageaccountkey: PASSWORD  \r\n```\r\n\r\nThe following is the declaration within the `container` section of the Kubernetes yaml:\r\n```yaml\r\n        volumeMounts:\r\n        - name: asa-otm\r\n          mountPath: /opt/my-app/otm\r\n      volumes:\r\n      - name: asa-otm\r\n        azureFile:\r\n          secretName: asa-otm\r\n          shareName: otm\r\n          readOnly: false\r\n```\r\n\r\nThe following is the error that's shown in `kubectl describe po/pod_name:\r\n```\r\nWarning  FailedMount            11s                kubelet, k8s-agentpool0-18189144-2  MountVolume.SetUp failed for volume \"asa-otm\" : mount failed: exit status 1\r\nMounting command: mount\r\nMounting arguments: -t cifs -o username=saausnprddevotm\r\n,password=PASSWORD\r\n,file_mode=0755,dir_mode=0755,vers=3.0 //saausnprddevotm\r\n.file.core.windows.net/otm /var/lib/kubelet/pods/3ae17688-4cdd-11e8-9240-000d3ae0c5ae/volumes/kubernetes.io~azure-file/asa-otm\r\nOutput: mount error: could not resolve address for saausnprddevotm\r\n.file.core.windows.net: Unknown error\r\n```\r\n\r\n**What you expected to happen**:\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): `v1.9.4`\r\n- Cloud provider or hardware configuration: azure\r\n- OS (e.g. from /etc/os-release): Ubuntu  16.04.3 LTS\r\n- Kernel (e.g. `uname -a`): 4.13.0-1011-azure\r\n- Install tools: [acs-engine](https://github.com/Azure/acs-engine)\r\n- Others: [acs-engine #2818](https://github.com/Azure/acs-engine/issues/2818)",
  "closed_at": "2019-08-21T11:35:18Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 17,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/63326/comments",
  "created_at": "2018-05-01T02:22:42Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/63326/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/63326",
  "id": 319097350,
  "labels": [
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/63326/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMTkwOTczNTA=",
  "number": 63326,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "AzureFile Mount fails - putting new line between storage account and domain",
  "updated_at": "2019-08-25T06:18:24Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/63326",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/2595712?v=4",
    "events_url": "https://api.github.com/users/BrendanThompson/events{/privacy}",
    "followers_url": "https://api.github.com/users/BrendanThompson/followers",
    "following_url": "https://api.github.com/users/BrendanThompson/following{/other_user}",
    "gists_url": "https://api.github.com/users/BrendanThompson/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/BrendanThompson",
    "id": 2595712,
    "login": "BrendanThompson",
    "node_id": "MDQ6VXNlcjI1OTU3MTI=",
    "organizations_url": "https://api.github.com/users/BrendanThompson/orgs",
    "received_events_url": "https://api.github.com/users/BrendanThompson/received_events",
    "repos_url": "https://api.github.com/users/BrendanThompson/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/BrendanThompson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/BrendanThompson/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/BrendanThompson"
  }
}