{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "<!-- This form is for bug reports and feature requests ONLY! \r\n\r\nIf you're looking for help check [Stack Overflow](https://stackoverflow.com/questions/tagged/kubernetes) and the [troubleshooting guide](https://kubernetes.io/docs/tasks/debug-application-cluster/troubleshooting/).\r\n-->\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**:\r\n/kind bug\r\n\r\n**What happened**: #52801 Shows that prometheus.MustRegister will panic on things like dashes in the metric name. There are currently 138 calls to prometheus.MustRegister in the Kubernetes code base almost exclusively from controllers. We should audit the code to ensure that panic is the desirable response to a bad metric name for these calls vs. something like prometheus.Register which will instead return an error.\r\n\r\n**What you expected to happen**: See above\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**: See #52801 \r\n\r\n\r\n**Anything else we need to know?**: No\r\n\r\n**Environment**: All\r\n- Kubernetes version (use `kubectl version`): 1.9\r\n- Cloud provider or hardware configuration**: All\r\n- OS (e.g. from /etc/os-release):\r\n- Kernel (e.g. `uname -a`):\r\n- Install tools:\r\n- Others:\r\n",
  "closed_at": "2017-10-10T07:33:26Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 9,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/52872/comments",
  "created_at": "2017-09-21T22:53:42Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/52872/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/52872",
  "id": 259655772,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Instrumentation.",
      "id": 482207917,
      "name": "sig/instrumentation",
      "node_id": "MDU6TGFiZWw0ODIyMDc5MTc=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/instrumentation"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/52872/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNTk2NTU3NzI=",
  "number": 52872,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Audit usages of prometheus.MustRegister",
  "updated_at": "2017-10-13T06:50:29Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/52872",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/947971?v=4",
    "events_url": "https://api.github.com/users/cheftako/events{/privacy}",
    "followers_url": "https://api.github.com/users/cheftako/followers",
    "following_url": "https://api.github.com/users/cheftako/following{/other_user}",
    "gists_url": "https://api.github.com/users/cheftako/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/cheftako",
    "id": 947971,
    "login": "cheftako",
    "node_id": "MDQ6VXNlcjk0Nzk3MQ==",
    "organizations_url": "https://api.github.com/users/cheftako/orgs",
    "received_events_url": "https://api.github.com/users/cheftako/received_events",
    "repos_url": "https://api.github.com/users/cheftako/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/cheftako/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cheftako/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/cheftako"
  }
}