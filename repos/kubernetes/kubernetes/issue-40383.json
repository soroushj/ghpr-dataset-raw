{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "**What keywords did you search in Kubernetes issues before filing this one?** (If you have found any duplicates, you should instead reply there.):\r\n* the server does not allow this method on the requested resource\r\n* Kubernetes\r\n* Kubectl proxy patch request\r\n---\r\n**Is this a BUG REPORT or FEATURE REQUEST?** (choose one):\r\nBug\r\n\r\n*Kubernetes version** (use `kubectl version`):\r\n\r\nClient Version: version.Info{Major:\"1\", Minor:\"5\", GitVersion:\"v1.5.1\", GitCommit:\"82450d03cb057bab0950214ef122b67c83fb11df\", GitTreeState:\"clean\", BuildDate:\"2016-12-14T00:57:05\r\nZ\", GoVersion:\"go1.7.4\", Compiler:\"gc\", Platform:\"darwin/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"4\", GitVersion:\"v1.4.8\", GitCommit:\"c5fcb1951afb8150e4574bc234aed957cb586eb0\", GitTreeState:\"clean\", BuildDate:\"2017-01-12T02:14:29\r\nZ\", GoVersion:\"go1.6.3\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n\r\n**Environment**:\r\n- **Cloud provider or hardware configuration**: Google Container Engine\r\n- **OS** (e.g. from /etc/os-release): Google Container Engine\r\n- **Kernel** (e.g. `uname -a`):\r\nLinux gke-[redacted]-default-pool-766375c0-dp8p 4.4.21+ #1 SMP Thu Nov 10 21:43:53 PST 2016 x86_64 Intel(R) Xeon(R) CPU @ 2.60GHz GenuineIntel GNU/Linux\r\n- **Install tools**:\r\nkubectl proxy\r\n\r\n**What happened**:\r\n\r\nI created a very nginx basic nginx replication controller, and a service that points to that nginx server.\r\n\r\nThen, I use `kubectl proxy` and do this request:\r\n\r\n```\r\ncurl \"http://localhost:8001/api/v1/proxy/namespaces/default/services/nginx:80\" -X GET\r\n```\r\n\r\nThis works fine. But! When I do this request:\r\n\r\n```\r\n10057 \u25ef  curl \"http://localhost:8001/api/v1/proxy/namespaces/default/services/nginx:80\" -X PATCH\r\n{\r\n  \"kind\": \"Status\",\r\n  \"apiVersion\": \"v1\",\r\n  \"metadata\": {},\r\n  \"status\": \"Failure\",\r\n  \"message\": \"the server does not allow this method on the requested resource\",\r\n  \"reason\": \"MethodNotAllowed\",\r\n  \"details\": {},\r\n  \"code\": 405\r\n}%\r\n```\r\n\r\nI get that error message.\r\n\r\nI assume that Kubernetes thinks I'm trying to modify the proxy service resource, and rejects me. But what I'm TRYING to do is send a PATCH request to the pod that service directs traffic to.\r\n\r\n**What you expected to happen**:\r\n\r\nThe proxy would successfully forward my request even if it is a patch.\r\n\r\n**How to reproduce it** (as minimally and precisely as possible):\r\n\r\nCreate a new cluster, and create these resources:\r\n\r\nReplication controller:\r\n```\r\n  \"apiVersion\": \"v1\",\r\n  \"kind\": \"ReplicationController\",\r\n  \"metadata\": {\r\n    \"labels\": {\r\n      \"name\": \"nginx\"\r\n    },\r\n    \"name\": \"nginx\",\r\n    \"namespace\": \"default\"\r\n  },\r\n  \"spec\": {\r\n    \"replicas\": 1,\r\n    \"selector\": {\r\n      \"name\": \"nginx\"\r\n    },\r\n    \"template\": {\r\n      \"metadata\": {\r\n        \"labels\": {\r\n          \"name\": \"nginx\"\r\n        }\r\n      },\r\n      \"spec\": {\r\n        \"containers\": [\r\n          {\r\n            \"name\": \"nginx\",\r\n            \"imagePullPolicy\": \"Always\",\r\n            \"image\": \"nginx\"\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n  Service:\r\n```\r\n{\r\n  \"apiVersion\": \"v1\",\r\n  \"kind\": \"Service\",\r\n  \"metadata\": {\r\n    \"labels\": {\r\n      \"name\": \"nginx\"\r\n    },\r\n    \"name\": \"nginx\",\r\n    \"namespace\": \"default\"\r\n  },\r\n  \"spec\": {\r\n    \"ports\": [\r\n      {\r\n        \"port\": 80,\r\n        \"targetPort\": 80\r\n      }\r\n    ],\r\n    \"selector\": {\r\n      \"name\": \"nginx\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThen `kubectl proxy`\r\n\r\nand run this command: `curl \"http://localhost:8001/api/v1/proxy/namespaces/default/services/nginx:80\" -X PATCH`",
  "closed_at": "2017-02-20T18:34:39Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 4,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/40383/comments",
  "created_at": "2017-01-24T20:28:36Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/40383/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/40383",
  "id": 202931149,
  "labels": [],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/40383/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMDI5MzExNDk=",
  "number": 40383,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Kube proxy is blocking PATCH requests intended to be forwarded through `kubectl proxy`",
  "updated_at": "2017-02-20T18:34:39Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/40383",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/907929?v=4",
    "events_url": "https://api.github.com/users/crestenstclair/events{/privacy}",
    "followers_url": "https://api.github.com/users/crestenstclair/followers",
    "following_url": "https://api.github.com/users/crestenstclair/following{/other_user}",
    "gists_url": "https://api.github.com/users/crestenstclair/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/crestenstclair",
    "id": 907929,
    "login": "crestenstclair",
    "node_id": "MDQ6VXNlcjkwNzkyOQ==",
    "organizations_url": "https://api.github.com/users/crestenstclair/orgs",
    "received_events_url": "https://api.github.com/users/crestenstclair/received_events",
    "repos_url": "https://api.github.com/users/crestenstclair/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/crestenstclair/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/crestenstclair/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/crestenstclair"
  }
}