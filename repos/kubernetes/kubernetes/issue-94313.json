{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4237254?v=4",
    "events_url": "https://api.github.com/users/knight42/events{/privacy}",
    "followers_url": "https://api.github.com/users/knight42/followers",
    "following_url": "https://api.github.com/users/knight42/following{/other_user}",
    "gists_url": "https://api.github.com/users/knight42/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/knight42",
    "id": 4237254,
    "login": "knight42",
    "node_id": "MDQ6VXNlcjQyMzcyNTQ=",
    "organizations_url": "https://api.github.com/users/knight42/orgs",
    "received_events_url": "https://api.github.com/users/knight42/received_events",
    "repos_url": "https://api.github.com/users/knight42/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/knight42/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/knight42/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/knight42"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/4237254?v=4",
      "events_url": "https://api.github.com/users/knight42/events{/privacy}",
      "followers_url": "https://api.github.com/users/knight42/followers",
      "following_url": "https://api.github.com/users/knight42/following{/other_user}",
      "gists_url": "https://api.github.com/users/knight42/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/knight42",
      "id": 4237254,
      "login": "knight42",
      "node_id": "MDQ6VXNlcjQyMzcyNTQ=",
      "organizations_url": "https://api.github.com/users/knight42/orgs",
      "received_events_url": "https://api.github.com/users/knight42/received_events",
      "repos_url": "https://api.github.com/users/knight42/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/knight42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/knight42/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/knight42"
    },
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/32884155?v=4",
      "events_url": "https://api.github.com/users/yliaog/events{/privacy}",
      "followers_url": "https://api.github.com/users/yliaog/followers",
      "following_url": "https://api.github.com/users/yliaog/following{/other_user}",
      "gists_url": "https://api.github.com/users/yliaog/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/yliaog",
      "id": 32884155,
      "login": "yliaog",
      "node_id": "MDQ6VXNlcjMyODg0MTU1",
      "organizations_url": "https://api.github.com/users/yliaog/orgs",
      "received_events_url": "https://api.github.com/users/yliaog/received_events",
      "repos_url": "https://api.github.com/users/yliaog/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/yliaog/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yliaog/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/yliaog"
    }
  ],
  "author_association": "NONE",
  "body": "<!-- Please use this template while reporting a bug and provide as much info as possible. Not doing so may result in your bug not being addressed in a timely manner. Thanks!\r\n\r\nIf the matter is security related, please disclose it privately via https://kubernetes.io/security/\r\n-->\r\n\r\n\r\n**What happened**:\r\nWhen a pvc was specified with a quantity including the suffix `m`:\r\n```yaml\r\n...\r\nspec:\r\n    accessModes:\r\n    - ReadWriteOnce\r\n    resources:\r\n      requests:\r\n        storage: 100m\r\n...\r\n```\r\n\r\nattempts to include that quantity in the resourcequota's storage  resulted in the following error, which blocked all other updates to the resourcequota:\r\n\r\n```\r\nE0827 23:17:08.653750 1744486 resource_quota_controller.go:251] ResourceQuota \"namespaced-quota\" is invalid: status.used[scaleio.storageclass.storage.k8s.io/requests.storage]: Invalid value: resource.Quantity{i:resource.int64Amount{value:518617300992100, scale:-3}, d:resource.infDecAmount{Dec:(*inf.Dec)(nil)}, s:\"518617300992100m\", Format:\"DecimalSI\"}: must be an integer\r\n```\r\n\r\n**What you expected to happen**:\r\n- Updates to all other quantities in the resourcequota should not have been blocked by the error above\r\n- In general, `m` as a suffix (milli) doesn't really make sense when used in the context of memory, and causes issues like the above. Would it be possible to deny the usage of this suffix at admission time for things like pvcs? (Our mitigation right now is to add a rule that does this in Open Policy Agent).\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\nCreate a resourcequota object with limits on pvcs and the a storage type, e.g.\r\n```\r\n...\r\n  spec:\r\n    hard:\r\n      count/persistentvolumeclaims: \"100\"\r\n      scaleio.storageclass.storage.k8s.io/requests.storage: 3Ti\r\n...\r\n```\r\n\r\nThen create a PVC with the following spec:\r\n```\r\nspec:\r\n    accessModes:\r\n    - ReadWriteOnce\r\n    resources:\r\n      requests:\r\n        storage: 100m\r\n```\r\n\r\nThe resource quota controller should start producing the error log above.\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): v1.17.3\r\n- Cloud provider or hardware configuration: \r\n- OS (e.g: `cat /etc/os-release`): \r\n- Kernel (e.g. `uname -a`):\r\n- Install tools:\r\n- Network plugin and version (if this is a network-related bug):\r\n- Others:\r\n",
  "closed_at": "2020-09-09T08:11:53Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 9,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/94313/comments",
  "created_at": "2020-08-28T19:49:11Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/94313/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/94313",
  "id": 688320023,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG API Machinery.",
      "id": 173493835,
      "name": "sig/api-machinery",
      "node_id": "MDU6TGFiZWwxNzM0OTM4MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/api-machinery"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/94313/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU2ODgzMjAwMjM=",
  "number": 94313,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "PVCs specified with quantity containing suffix `m` are not counted in ResourceQuota and block ResourceQuota updates",
  "updated_at": "2020-09-09T08:11:53Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/94313",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/7965897?v=4",
    "events_url": "https://api.github.com/users/gabbifish/events{/privacy}",
    "followers_url": "https://api.github.com/users/gabbifish/followers",
    "following_url": "https://api.github.com/users/gabbifish/following{/other_user}",
    "gists_url": "https://api.github.com/users/gabbifish/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/gabbifish",
    "id": 7965897,
    "login": "gabbifish",
    "node_id": "MDQ6VXNlcjc5NjU4OTc=",
    "organizations_url": "https://api.github.com/users/gabbifish/orgs",
    "received_events_url": "https://api.github.com/users/gabbifish/received_events",
    "repos_url": "https://api.github.com/users/gabbifish/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/gabbifish/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gabbifish/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/gabbifish"
  }
}