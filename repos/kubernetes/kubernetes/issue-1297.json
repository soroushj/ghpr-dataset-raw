{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "In reviewing #951, it came to my attention that we have no validation or formal spec on what character restrictions we impose on label keys and values.  This is bad if we plan to support a more formal complex selector grammar which may require escaping rules.  We need to define a valid schema and enforce it via validation on object persistence.  \n\nClients today are restricted by the set of valid keys allowed in JSON or YAML for use as their label keys depending on the input format they use.\n\nAccording to JSON spec:\n\n```\nA string is a sequence of zero or more Unicode characters, wrapped in double quotes, using backslash escapes. A character is represented as a single character string. A string is very much like a C or Java string.\n```\n\nThis means, it's ok today to have labels keys in our input JSON like the following:\n\n```\n{\n  \"fu=\":\"=bar\"\n  \"fu==bar\":\"something\"\n  \"fu  == :: ?? != bar\": \"seriously??\"\n}\n```\n\nThis makes supporting a label selector grammar ridiculously hard.  For example, a label selector of \"foo==bar\" is undefined because we have no rational way to parse that.  Even \"foo=bar\" today is broken by what we accept as input.\n\nI think k8s should require all label keys to match our dns952 regex.  This means all label keys are lower-case and single word terms.  \n\nWith this model, we can reliably look to support more complex label selector functions because we know where to stop parsing on left-hand operand, pluse we can support nicer unary operators or functions:\n- exists(foo)\n- foo=bar\n",
  "closed_at": "2014-10-27T16:54:19Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5595220?v=4",
    "events_url": "https://api.github.com/users/thockin/events{/privacy}",
    "followers_url": "https://api.github.com/users/thockin/followers",
    "following_url": "https://api.github.com/users/thockin/following{/other_user}",
    "gists_url": "https://api.github.com/users/thockin/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/thockin",
    "id": 5595220,
    "login": "thockin",
    "node_id": "MDQ6VXNlcjU1OTUyMjA=",
    "organizations_url": "https://api.github.com/users/thockin/orgs",
    "received_events_url": "https://api.github.com/users/thockin/received_events",
    "repos_url": "https://api.github.com/users/thockin/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/thockin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thockin/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/thockin"
  },
  "comments": 38,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/1297/comments",
  "created_at": "2014-09-12T16:53:34Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/1297/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/1297",
  "id": 42648700,
  "labels": [
    {
      "color": "c7def8",
      "default": false,
      "description": "Categorizes issue or PR as related to design.",
      "id": 114509261,
      "name": "kind/design",
      "node_id": "MDU6TGFiZWwxMTQ1MDkyNjE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/design"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/1297/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MjY0ODcwMA==",
  "number": 1297,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Label key, value validation rules need to be defined with a label selector grammar.",
  "updated_at": "2014-10-27T16:54:19Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/1297",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6233452?v=4",
    "events_url": "https://api.github.com/users/derekwaynecarr/events{/privacy}",
    "followers_url": "https://api.github.com/users/derekwaynecarr/followers",
    "following_url": "https://api.github.com/users/derekwaynecarr/following{/other_user}",
    "gists_url": "https://api.github.com/users/derekwaynecarr/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/derekwaynecarr",
    "id": 6233452,
    "login": "derekwaynecarr",
    "node_id": "MDQ6VXNlcjYyMzM0NTI=",
    "organizations_url": "https://api.github.com/users/derekwaynecarr/orgs",
    "received_events_url": "https://api.github.com/users/derekwaynecarr/received_events",
    "repos_url": "https://api.github.com/users/derekwaynecarr/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/derekwaynecarr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/derekwaynecarr/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/derekwaynecarr"
  }
}