{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/49258?v=4",
    "events_url": "https://api.github.com/users/spiffxp/events{/privacy}",
    "followers_url": "https://api.github.com/users/spiffxp/followers",
    "following_url": "https://api.github.com/users/spiffxp/following{/other_user}",
    "gists_url": "https://api.github.com/users/spiffxp/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/spiffxp",
    "id": 49258,
    "login": "spiffxp",
    "node_id": "MDQ6VXNlcjQ5MjU4",
    "organizations_url": "https://api.github.com/users/spiffxp/orgs",
    "received_events_url": "https://api.github.com/users/spiffxp/received_events",
    "repos_url": "https://api.github.com/users/spiffxp/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/spiffxp/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/spiffxp/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/spiffxp"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/49258?v=4",
      "events_url": "https://api.github.com/users/spiffxp/events{/privacy}",
      "followers_url": "https://api.github.com/users/spiffxp/followers",
      "following_url": "https://api.github.com/users/spiffxp/following{/other_user}",
      "gists_url": "https://api.github.com/users/spiffxp/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/spiffxp",
      "id": 49258,
      "login": "spiffxp",
      "node_id": "MDQ6VXNlcjQ5MjU4",
      "organizations_url": "https://api.github.com/users/spiffxp/orgs",
      "received_events_url": "https://api.github.com/users/spiffxp/received_events",
      "repos_url": "https://api.github.com/users/spiffxp/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/spiffxp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/spiffxp/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/spiffxp"
    },
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/4876867?v=4",
      "events_url": "https://api.github.com/users/janetkuo/events{/privacy}",
      "followers_url": "https://api.github.com/users/janetkuo/followers",
      "following_url": "https://api.github.com/users/janetkuo/following{/other_user}",
      "gists_url": "https://api.github.com/users/janetkuo/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/janetkuo",
      "id": 4876867,
      "login": "janetkuo",
      "node_id": "MDQ6VXNlcjQ4NzY4Njc=",
      "organizations_url": "https://api.github.com/users/janetkuo/orgs",
      "received_events_url": "https://api.github.com/users/janetkuo/received_events",
      "repos_url": "https://api.github.com/users/janetkuo/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/janetkuo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/janetkuo/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/janetkuo"
    },
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/5595220?v=4",
      "events_url": "https://api.github.com/users/thockin/events{/privacy}",
      "followers_url": "https://api.github.com/users/thockin/followers",
      "following_url": "https://api.github.com/users/thockin/following{/other_user}",
      "gists_url": "https://api.github.com/users/thockin/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/thockin",
      "id": 5595220,
      "login": "thockin",
      "node_id": "MDQ6VXNlcjU1OTUyMjA=",
      "organizations_url": "https://api.github.com/users/thockin/orgs",
      "received_events_url": "https://api.github.com/users/thockin/received_events",
      "repos_url": "https://api.github.com/users/thockin/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/thockin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thockin/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/thockin"
    },
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/8061296?v=4",
      "events_url": "https://api.github.com/users/ixdy/events{/privacy}",
      "followers_url": "https://api.github.com/users/ixdy/followers",
      "following_url": "https://api.github.com/users/ixdy/following{/other_user}",
      "gists_url": "https://api.github.com/users/ixdy/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ixdy",
      "id": 8061296,
      "login": "ixdy",
      "node_id": "MDQ6VXNlcjgwNjEyOTY=",
      "organizations_url": "https://api.github.com/users/ixdy/orgs",
      "received_events_url": "https://api.github.com/users/ixdy/received_events",
      "repos_url": "https://api.github.com/users/ixdy/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ixdy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ixdy/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ixdy"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "When running conformance testing on a cluster with 8 nodes schedulable for jobs, the conformance test for rolling updates on daemon sets fails due to timeout.\r\n\r\nTest name: `Daemon set [Serial] should update pod when spec was updated and update strategy is RollingUpdate [Conformance]\u001b`\r\n\r\nTest code is here:\r\nhttps://github.com/kubernetes/kubernetes/blob/master/test/e2e/apps/daemon_set.go#L326-L369\r\nIt utilizes a hardcoded timeout limit of 5m.\r\n\r\n**What happened**:\r\nThe logs seem to indicate nothing wrong other than the time it takes to complete the rolling restart. The rolling restart timeout is hardcoded at 5m which doesn't seem to be enough time for large enough clusters.\r\n\r\n**What you expected to happen**:\r\nI would expect the timeout to either be sliding or for the check to be kicking the can; ensuring that the update is proceeding by at least one node every minute or two.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nRequires a cluster with at least 8 schedulable nodes; more would make the timeout more certain.\r\n\r\n**Anything else we need to know?**:\r\n\r\nI was trying to see what k8s was testing itself with and it seems (according to this log) that the test is run against a cluster with 4 schedulable nodes and takes ~3m which would line up with what I'm seeing (8 nodes for ~6m, 1 more than given by the hardcoded deadline)\r\n\r\nhttps://storage.googleapis.com/kubernetes-jenkins/logs/ci-cri-containerd-e2e-gci-gce-serial/1555/build-log.txt\r\n\r\nSeems like there are a few options:\r\n - use a \"kick the can\" strategy to ensure the timeout scales\r\n - use a timeout calculated from the number of schedulable nodes\r\n - (mitigation) increase the max number of down nodes so the update can occur faster\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`):\r\nFrom test logs (cluster no longer available):\r\n```\r\nINFO: e2e test version: v1.12.1\r\nINFO: kube-apiserver version: v1.12.2-1+619f4e6f7f010f\r\n```\r\n\r\n/sig testing\r\n/kind bug",
  "closed_at": "2019-02-27T04:55:02Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 18,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71666/comments",
  "created_at": "2018-12-03T17:30:13Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71666/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/71666",
  "id": 386924983,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": "Issues or PRs related to kubernetes conformance tests",
      "id": 717986501,
      "name": "area/conformance",
      "node_id": "MDU6TGFiZWw3MTc5ODY1MDE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/conformance"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Testing.",
      "id": 483069764,
      "name": "sig/testing",
      "node_id": "MDU6TGFiZWw0ODMwNjk3NjQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/testing"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71666/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzODY5MjQ5ODM=",
  "number": 71666,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Conformance test for DaemonSet RollingUpdate to rigid on timeout",
  "updated_at": "2019-02-27T04:55:02Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71666",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/10273533?v=4",
    "events_url": "https://api.github.com/users/johnSchnake/events{/privacy}",
    "followers_url": "https://api.github.com/users/johnSchnake/followers",
    "following_url": "https://api.github.com/users/johnSchnake/following{/other_user}",
    "gists_url": "https://api.github.com/users/johnSchnake/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/johnSchnake",
    "id": 10273533,
    "login": "johnSchnake",
    "node_id": "MDQ6VXNlcjEwMjczNTMz",
    "organizations_url": "https://api.github.com/users/johnSchnake/orgs",
    "received_events_url": "https://api.github.com/users/johnSchnake/received_events",
    "repos_url": "https://api.github.com/users/johnSchnake/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/johnSchnake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/johnSchnake/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/johnSchnake"
  }
}