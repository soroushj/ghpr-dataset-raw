{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/576341?v=4",
    "events_url": "https://api.github.com/users/soltysh/events{/privacy}",
    "followers_url": "https://api.github.com/users/soltysh/followers",
    "following_url": "https://api.github.com/users/soltysh/following{/other_user}",
    "gists_url": "https://api.github.com/users/soltysh/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/soltysh",
    "id": 576341,
    "login": "soltysh",
    "node_id": "MDQ6VXNlcjU3NjM0MQ==",
    "organizations_url": "https://api.github.com/users/soltysh/orgs",
    "received_events_url": "https://api.github.com/users/soltysh/received_events",
    "repos_url": "https://api.github.com/users/soltysh/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/soltysh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/soltysh/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/soltysh"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/576341?v=4",
      "events_url": "https://api.github.com/users/soltysh/events{/privacy}",
      "followers_url": "https://api.github.com/users/soltysh/followers",
      "following_url": "https://api.github.com/users/soltysh/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltysh/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/soltysh",
      "id": 576341,
      "login": "soltysh",
      "node_id": "MDQ6VXNlcjU3NjM0MQ==",
      "organizations_url": "https://api.github.com/users/soltysh/orgs",
      "received_events_url": "https://api.github.com/users/soltysh/received_events",
      "repos_url": "https://api.github.com/users/soltysh/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/soltysh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltysh/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/soltysh"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "The majority of kube binaries print usage when certain invalid arguments are presented.  Unfortunately, most of our binaries have > 2 pages of usage output, and the result of printing that is a very confusing and context disrupting action.\r\n\r\nIn general, CLI commands try to minimize their output - for example:\r\n\r\n```\r\n$ grep --blarg\r\ngrep: unrecognized option `--blarg'\r\nusage: grep [-abcDEFGHhIiJLlmnOoqRSsUVvwxZ] [-A num] [-B num] [-C[num]]\r\n\t[-e pattern] [-f file] [--binary-files=value] [--color=when]\r\n\t[--context[=num]] [--directories=action] [--label] [--line-buffered]\r\n\t[--null] [pattern] [file ...]\r\n```\r\n\r\n```\r\nls --foo\r\nls: illegal option -- -\r\nusage: ls [-ABCFGHLOPRSTUWabcdefghiklmnopqrstuwx1] [file ...]\r\n```\r\n\r\nboth print their minimal sets.  Obviously, as commands grow the number of flags some of the short options become a bit silly (yes, congratulations, you have the entire alphabet of flags) and convey less useful information to a user.\r\n\r\nWhen errors are printed we also end up printing the error both above and below the command (in at least kubectl, kubelet, kube-apiserver, and controller-manager).  I'm not even sure this was intentional, but coincidentally we print the errors twice and so it's both before and after the usage.\r\n\r\nError feedback needs to minimize the amount of extraneous information presented to users for maximum clarity.  Three are broadly four classes of help and error output:\r\n\r\n1. A user explicitly requests help via `--help` or `-h`\r\n2. A user provides an input that is not recognized (flag, command, or argument) and we can unambiguously know provided invalid input.  User needs to change the input.\r\n3. The user provides inputs that don't work well together or have conflicting meaning.  User needs to change the input.\r\n4. The user provided inputs that result in a runtime error, but that error can't be resolved by changing the input of the command.\r\n\r\nRecommended changes:\r\n\r\n1. Since our command and flag sets are so long, I don't think there is value in printing the full usage info in 2 and 3.  Instead, I think we should print a minimal \"usage: Run \"command foo --help\" to see usage info\" message after printing the error.\r\n2. We should stop printing error output twice (once as `Error: ` and once as `error: `)  in 2-4 and print as `error: ` or `Error: ` (the former is more consistent with Posix guidelines).\r\n3. We still need to clean up output.",
  "closed_at": null,
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 19,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66572/comments",
  "created_at": "2018-07-24T14:37:51Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66572/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/66572",
  "id": 344067045,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG CLI.",
      "id": 450823910,
      "name": "sig/cli",
      "node_id": "MDU6TGFiZWw0NTA4MjM5MTA=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/cli"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66572/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNDQwNjcwNDU=",
  "number": 66572,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "open",
  "title": "Behavior of commands with respect to errors and printing usage is inconsistent and reduces usability",
  "updated_at": "2020-09-03T19:53:56Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66572",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1163175?v=4",
    "events_url": "https://api.github.com/users/smarterclayton/events{/privacy}",
    "followers_url": "https://api.github.com/users/smarterclayton/followers",
    "following_url": "https://api.github.com/users/smarterclayton/following{/other_user}",
    "gists_url": "https://api.github.com/users/smarterclayton/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/smarterclayton",
    "id": 1163175,
    "login": "smarterclayton",
    "node_id": "MDQ6VXNlcjExNjMxNzU=",
    "organizations_url": "https://api.github.com/users/smarterclayton/orgs",
    "received_events_url": "https://api.github.com/users/smarterclayton/received_events",
    "repos_url": "https://api.github.com/users/smarterclayton/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/smarterclayton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/smarterclayton/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/smarterclayton"
  }
}