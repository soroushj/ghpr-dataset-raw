{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "In Kubernetes 1.8, we added the support to let kubelet get container stats from CRI.\r\n\r\nHowever, it's not clearly defined whether stats should be returned for non-running container.\r\n\r\nToday's situation:\r\n1) Cadvisor integration: it removes stats for terminated containers (containers without cpu/memory usage) https://github.com/kubernetes/kubernetes/blob/master/pkg/kubelet/stats/cadvisor_stats_provider.go#L93,\r\n and our summary api node e2e test makes the same assumption https://github.com/kubernetes/kubernetes/blob/master/test/e2e_node/summary_test.go#L51;\r\n2) CRI stats integration: it shows all container stats got from container runtime. It does include stats for terminated container if container runtime returns terminated container stats.\r\n\r\nWe should:\r\n1) Clearly define the behavior of Summary API in this case.\r\n2) If stats for terminated containers are not required, we should either update kubelet to filter them out, or define in CRI that CRI stats should not include stats with zero memory/cpu usage;\r\n3) If stats for terminated containers are required, we should update Kubelet to properly consume it.\r\n\r\nFor now, I'll just skip stats with zero memory or cpu usage in cri-containerd.\r\n\r\n@timstclair @yujuhong @yguo0905 @dashpole @feiskyer \r\n/cc @kubernetes/sig-node-api-reviews ",
  "closed_at": "2017-11-18T07:20:36Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 6,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/53514/comments",
  "created_at": "2017-10-05T23:20:40Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/53514/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/53514",
  "id": 263295815,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 116719829,
      "name": "area/kubelet",
      "node_id": "MDU6TGFiZWwxMTY3MTk4Mjk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/kubelet"
    },
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 148734755,
      "name": "area/monitoring",
      "node_id": "MDU6TGFiZWwxNDg3MzQ3NTU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/monitoring"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Node.",
      "id": 173493665,
      "name": "sig/node",
      "node_id": "MDU6TGFiZWwxNzM0OTM2NjU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/node"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/53514/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNjMyOTU4MTU=",
  "number": 53514,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "CRI: Clearly define the expectation of Summary API and CRI Stats",
  "updated_at": "2017-11-18T07:20:36Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/53514",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/5821883?v=4",
    "events_url": "https://api.github.com/users/Random-Liu/events{/privacy}",
    "followers_url": "https://api.github.com/users/Random-Liu/followers",
    "following_url": "https://api.github.com/users/Random-Liu/following{/other_user}",
    "gists_url": "https://api.github.com/users/Random-Liu/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/Random-Liu",
    "id": 5821883,
    "login": "Random-Liu",
    "node_id": "MDQ6VXNlcjU4MjE4ODM=",
    "organizations_url": "https://api.github.com/users/Random-Liu/orgs",
    "received_events_url": "https://api.github.com/users/Random-Liu/received_events",
    "repos_url": "https://api.github.com/users/Random-Liu/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/Random-Liu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Random-Liu/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/Random-Liu"
  }
}