{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/1737110?v=4",
    "events_url": "https://api.github.com/users/honkiko/events{/privacy}",
    "followers_url": "https://api.github.com/users/honkiko/followers",
    "following_url": "https://api.github.com/users/honkiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/honkiko/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/honkiko",
    "id": 1737110,
    "login": "honkiko",
    "node_id": "MDQ6VXNlcjE3MzcxMTA=",
    "organizations_url": "https://api.github.com/users/honkiko/orgs",
    "received_events_url": "https://api.github.com/users/honkiko/received_events",
    "repos_url": "https://api.github.com/users/honkiko/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/honkiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/honkiko/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/honkiko"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/1737110?v=4",
      "events_url": "https://api.github.com/users/honkiko/events{/privacy}",
      "followers_url": "https://api.github.com/users/honkiko/followers",
      "following_url": "https://api.github.com/users/honkiko/following{/other_user}",
      "gists_url": "https://api.github.com/users/honkiko/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/honkiko",
      "id": 1737110,
      "login": "honkiko",
      "node_id": "MDQ6VXNlcjE3MzcxMTA=",
      "organizations_url": "https://api.github.com/users/honkiko/orgs",
      "received_events_url": "https://api.github.com/users/honkiko/received_events",
      "repos_url": "https://api.github.com/users/honkiko/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/honkiko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/honkiko/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/honkiko"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**:\r\n/kind bug\r\n/sig network\r\n/area kube-proxy\r\n/area ipvs\r\n/assign @honkiko\r\nI'll send a fixing pull request tomorrow.\r\n\r\n**What happened**:\r\nOn centos 7.2 with ipset 6.29,  kube-proxy in ipvs mode failed to create ipset sets.\r\n```\r\nJun 25 20:50:00 VM_3_4_centos kube-proxy[3828]: E0625 20:50:00.312569    3828 ipset.go:156] Failed to make sure ip set: &{{KUBE-LOOP-BACK hash:ip,port,ip inet 1024 65536 0-65535 Kubernetes endpoints dst ip:port, source ip for solving hairpin purpose} map[] 0xc42073e1d0} exist, error: error creating ipset KUBE-LOOP-BACK, error: exit status 2\r\n```\r\n\r\nAfter some dig, it turns out to be problem of ipset on centos/rh. See https://bugzilla.redhat.com/show_bug.cgi?id=1496859\r\n\r\nI tried ipset 6.29 on ubuntu, it's OK. But when I tried ipset 6.29 on centos, I got errors:\r\n```\r\n[root@VM_3_4_centos ~]# ipset create foo hash:ip comment\r\nipset v6.29: Unknown argument: `comment'\r\nTry `ipset help' for more information.\r\n```\r\n\r\n**What you expected to happen**:\r\nSince the problematic ipset versions have very large installation base, we could remove ipset commet, or remove ipset commet with problematic ipset version. \r\n\r\nThe problematic ipset also says it support comment by --help. The problem could be detected by a test run of \"ipset create foo hash:ip comment\".\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nCreate some service in kubernetes, run kube-proxy with ipvs mode on Centos 7.x node. \r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): commit 67e7d4c (actually all commits after 10664ee8c6c)\r\n- Cloud provider or hardware configuration:\r\n- OS (e.g. from /etc/os-release): CentOS Linux release 7.2.1511 (Core)\r\n- Kernel (e.g. `uname -a`): Linux VM_3_4_centos 3.10.0-514.26.2.el7.x86_64 #1 SMP Tue Jul 4 15:04:05 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n- Install tools: \r\n- Others: ipset v6.29, protocol version: 6\r\n",
  "closed_at": "2018-07-03T01:19:09Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/65461/comments",
  "created_at": "2018-06-26T03:46:47Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/65461/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/65461",
  "id": 335648076,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 755527763,
      "name": "area/ipvs",
      "node_id": "MDU6TGFiZWw3NTU1Mjc3NjM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/ipvs"
    },
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 128716589,
      "name": "area/kube-proxy",
      "node_id": "MDU6TGFiZWwxMjg3MTY1ODk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/kube-proxy"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Network.",
      "id": 116712108,
      "name": "sig/network",
      "node_id": "MDU6TGFiZWwxMTY3MTIxMDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/network"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/65461/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMzU2NDgwNzY=",
  "number": 65461,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "ipvs broken because ipset on centos does not support comment extension",
  "updated_at": "2018-07-03T01:19:09Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/65461",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/1737110?v=4",
    "events_url": "https://api.github.com/users/honkiko/events{/privacy}",
    "followers_url": "https://api.github.com/users/honkiko/followers",
    "following_url": "https://api.github.com/users/honkiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/honkiko/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/honkiko",
    "id": 1737110,
    "login": "honkiko",
    "node_id": "MDQ6VXNlcjE3MzcxMTA=",
    "organizations_url": "https://api.github.com/users/honkiko/orgs",
    "received_events_url": "https://api.github.com/users/honkiko/received_events",
    "repos_url": "https://api.github.com/users/honkiko/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/honkiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/honkiko/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/honkiko"
  }
}