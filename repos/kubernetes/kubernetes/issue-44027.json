{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "I was running an experiment to verify that Taints are correctly updated when Condition changes from Unreachable to NotReady and found out that Kubelet can't start when the docker is not running.\r\n\r\nI did an experiment on CVM and:\r\n- made `/usr/sbin/kubelet-checker.sh` no op\r\n- made `/usr/sbin/docker-checker.sh` no op\r\n- `service kubelet stop`\r\n- `service docker stop`\r\n- wait\r\n- reverted changes to `kubelet-checker`\r\n- `service kubelet start`\r\n\r\nThe result is following:\r\n```\r\nI0404 08:23:56.527639   13582 oom_linux.go:65] attempting to set \"/proc/self/oom_score_adj\" to \"-999\"\r\nI0404 08:23:56.527669   13582 server.go:616] cloud provider determined current node name to be e2e-test-gmarek-minion-group-7br4\r\nI0404 08:23:56.527680   13582 server.go:802] Using root directory: /var/lib/kubelet\r\nI0404 08:23:56.527721   13582 kubelet.go:320] cloud provider determined current node name to be e2e-test-gmarek-minion-group-7br4\r\nI0404 08:23:56.527733   13582 kubelet.go:255] Adding manifest file: /etc/kubernetes/manifests\r\nI0404 08:23:56.527751   13582 file.go:48] Watching path \"/etc/kubernetes/manifests\"\r\nI0404 08:23:56.527759   13582 kubelet.go:265] Watching apiserver\r\nI0404 08:23:56.527778   13582 reflector.go:187] Starting reflector *v1.Pod (0s) from k8s.io/kubernetes/pkg/kubelet/config/apiserver.go:46\r\nI0404 08:23:56.527837   13582 reflector.go:187] Starting reflector *v1.Service (0s) from k8s.io/kubernetes/pkg/kubelet/kubelet.go:382\r\nI0404 08:23:56.527882   13582 reflector.go:187] Starting reflector *v1.Node (0s) from k8s.io/kubernetes/pkg/kubelet/kubelet.go:390\r\nI0404 08:23:56.527889   13582 file.go:157] Reading config file \"/etc/kubernetes/manifests/e2e-image-puller.manifest\"\r\nI0404 08:23:56.529573   13582 file.go:157] Reading config file \"/etc/kubernetes/manifests/kube-proxy.manifest\"\r\nI0404 08:23:56.530525   13582 reflector.go:236] Listing and watching *v1.Node from k8s.io/kubernetes/pkg/kubelet/kubelet.go:390\r\nI0404 08:23:56.530770   13582 reflector.go:236] Listing and watching *v1.Pod from k8s.io/kubernetes/pkg/kubelet/config/apiserver.go:46\r\nI0404 08:23:56.530932   13582 reflector.go:236] Listing and watching *v1.Service from k8s.io/kubernetes/pkg/kubelet/kubelet.go:382\r\nI0404 08:23:56.531110   13582 config.go:293] Setting pods for source file\r\nI0404 08:23:56.531207   13582 iptables.go:175] Could not connect to D-Bus system bus: dial unix /var/run/dbus/system_bus_socket: connect: no such file or directory\r\nI0404 08:23:56.531249   13582 kubelet.go:494] Hairpin mode set to \"promiscuous-bridge\"\r\nI0404 08:23:56.531252   13582 config.go:415] Receiving a new pod \"e2e-image-puller-e2e-test-gmarek-minion-group-7br4_kube-system(0bdbf2228887dbd54a6b05f67c9bf487)\"\r\nI0404 08:23:56.531274   13582 config.go:415] Receiving a new pod \"kube-proxy-e2e-test-gmarek-minion-group-7br4_kube-system(b86649617afc761351dbd891acaca743)\"\r\nI0404 08:23:56.532756   13582 iptables.go:361] running iptables -C [POSTROUTING -t nat -m comment --comment kubenet: SNAT for outbound traffic from cluster -m addrtype ! --dst-type LOCAL ! -d 10.0.0.0/8 -j MASQUERADE]\r\nI0404 08:23:56.534117   13582 plugins.go:192] Loaded network plugin \"kubenet\"\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0x15000ec]\r\n\r\ngoroutine 1 [running]:\r\npanic(0x2db5f80, 0xc42000e060)\r\n        /usr/local/go/src/runtime/panic.go:500 +0x1a1\r\nk8s.io/kubernetes/pkg/kubelet/dockershim.(*dockerService).getDockerAPIVersion(0xc4206f7b80, 0x351c3b3, 0x351c3b2, 0xc41ffa0e93)\r\n        /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/kubelet/dockershim/docker_service.go:424 +0x7c\r\nk8s.io/kubernetes/pkg/kubelet/dockershim.(*dockerService).checkVersionCompatibility(0xc4206f7b80, 0xc420be2d60, 0x4ea5460)\r\n        /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/kubelet/dockershim/docker_service.go:395 +0x43\r\nk8s.io/kubernetes/pkg/kubelet/dockershim.NewDockerService(0x4d8f0a0, 0xc420a8d0e0, 0xc4200cf300, 0x18, 0x339c09b, 0x28, 0xc4208aae60, 0xc420c40070, 0x7ffdedf30d1b, 0xe, ...)\r\n        /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/kubelet/dockershim/docker_service.go:173 +0x36d\r\nk8s.io/kubernetes/pkg/kubelet.NewMainKubelet(0xc420900600, 0xc420701040, 0x335ef00, 0x18, 0xc4208ab158, 0x1)\r\n        /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/pkg/kubelet/kubelet.go:556 +0x6a67\r\nk8s.io/kubernetes/cmd/kubelet/app.CreateAndInitKubelet(0xc420900600, 0xc420701040, 0x0, 0xc4208ab158, 0x1, 0x1, 0x3)\r\n        /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/kubelet/app/server.go:895 +0x42\r\nk8s.io/kubernetes/cmd/kubelet/app.RunKubelet(0xc420900600, 0xc420701040, 0x0, 0x0, 0x7ffdedf30d1b)\r\n        /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/kubelet/app/server.go:811 +0x451\r\nk8s.io/kubernetes/cmd/kubelet/app.run(0xc420900600, 0xc420701040, 0xc4208abec0, 0x456eb0)\r\n        /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/kubelet/app/server.go:577 +0x3b0\r\nk8s.io/kubernetes/cmd/kubelet/app.Run(0xc420900600, 0x0, 0x22, 0xc420397290)\r\n        /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/kubelet/app/server.go:285 +0x39\r\nmain.main()\r\n        /go/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/cmd/kubelet/kubelet.go:48 +0x92\r\n```\r\nIs this expected, or kubelet should normally start and report itself as 'NotReady'?\r\n\r\n@kubernetes/sig-node-bugs @yujuhong @wojtek-t ",
  "closed_at": "2017-04-04T21:33:21Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/44027/comments",
  "created_at": "2017-04-04T08:28:22Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/44027/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/44027",
  "id": 219175279,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 116719829,
      "name": "area/kubelet",
      "node_id": "MDU6TGFiZWwxMTY3MTk4Mjk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/kubelet"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Highest priority. Must be actively worked on as someone's top priority right now.",
      "id": 114528068,
      "name": "priority/critical-urgent",
      "node_id": "MDU6TGFiZWwxMTQ1MjgwNjg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/critical-urgent"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Node.",
      "id": 173493665,
      "name": "sig/node",
      "node_id": "MDU6TGFiZWwxNzM0OTM2NjU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/node"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/44027/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMTkxNzUyNzk=",
  "number": 44027,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Kubelet segfaults when Docker is not running",
  "updated_at": "2017-04-04T21:33:21Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/44027",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1703842?v=4",
    "events_url": "https://api.github.com/users/gmarek/events{/privacy}",
    "followers_url": "https://api.github.com/users/gmarek/followers",
    "following_url": "https://api.github.com/users/gmarek/following{/other_user}",
    "gists_url": "https://api.github.com/users/gmarek/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/gmarek",
    "id": 1703842,
    "login": "gmarek",
    "node_id": "MDQ6VXNlcjE3MDM4NDI=",
    "organizations_url": "https://api.github.com/users/gmarek/orgs",
    "received_events_url": "https://api.github.com/users/gmarek/received_events",
    "repos_url": "https://api.github.com/users/gmarek/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/gmarek/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gmarek/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/gmarek"
  }
}