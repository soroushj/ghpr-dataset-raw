{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "I built a  cluster of kubernetes with 5 hosts, and created a daemonset, while nodeselector and nodeName were not used. After the daemonset is created, I detected the amount of DESIRED was 4.( To my understanding, it should be 5).\n\nTrouble-shooting: After an intensive troubleshooting, I found out that the amount of DESIRED is influenced by a function called nodeShouldRunDaemonPod. \nIn general, this function is supposed to have an impact on the amount of DESIRED when one of following two cases occurs: the first case is the node doesn't satisfies the daemon set's node selector, or the nodeName is not match. which means the host should not run pod of the daemonset, while the second case is others such as insufficient free resources or host port conflict. which means the host should run pod but not now. However, in reality, the second case does not influence the amount of DESIRED.\n\nSuggestion: I think the function nodeShouldRunDaemonPod should be split into two functions which are shouldRunDaemonPod and canRunDaemonPod respectively. Only the former one has an impact on the amount of DESIRED.\n",
  "closed_at": "2017-01-11T23:35:48Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/28839/comments",
  "created_at": "2016-07-12T14:26:46Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/28839/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/28839",
  "id": 165093865,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 138247961,
      "name": "area/kubectl",
      "node_id": "MDU6TGFiZWwxMzgyNDc5NjE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/kubectl"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/28839/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxNjUwOTM4NjU=",
  "number": 28839,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "defect of the daemonset",
  "updated_at": "2017-01-11T23:35:48Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/28839",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/15712693?v=4",
    "events_url": "https://api.github.com/users/yarntime/events{/privacy}",
    "followers_url": "https://api.github.com/users/yarntime/followers",
    "following_url": "https://api.github.com/users/yarntime/following{/other_user}",
    "gists_url": "https://api.github.com/users/yarntime/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/yarntime",
    "id": 15712693,
    "login": "yarntime",
    "node_id": "MDQ6VXNlcjE1NzEyNjkz",
    "organizations_url": "https://api.github.com/users/yarntime/orgs",
    "received_events_url": "https://api.github.com/users/yarntime/received_events",
    "repos_url": "https://api.github.com/users/yarntime/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/yarntime/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yarntime/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/yarntime"
  }
}