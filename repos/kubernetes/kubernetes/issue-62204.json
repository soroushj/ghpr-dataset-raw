{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "<!-- This form is for bug reports and feature requests ONLY! \r\n\r\nIf you're looking for help check [Stack Overflow](https://stackoverflow.com/questions/tagged/kubernetes) and the [troubleshooting guide](https://kubernetes.io/docs/tasks/debug-application-cluster/troubleshooting/).\r\n-->\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?**:\r\n\r\n/kind bug\r\n\r\n**What happened**:\r\n\r\nI have a Kubernetes (`v1.7`) in AWS. I created a Service of type `LoadBalancer` and used the annotation `service.beta.kubernetes.io/aws-load-balancer-extra-security-groups` to apply an extra security group to the ELB that gets created.\r\n\r\nThe extra security group was created outside of Kubernetes, with the expectation that it is not owned by Kubernetes and will be managed independently.\r\n\r\nI deleted the Service resource. Kubernetes then deleted the ELB **and my extra security group**.\r\n\r\n**What you expected to happen**:\r\n\r\nI expect my extra security group to not be deleted.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\nIn AWS, create security group that is otherwise unused. In Kubernetes, create Service of type `LoadBalancer`, include the annotation `service.beta.kubernetes.io/aws-load-balancer-extra-security-group` with the previously created security group. Watch an ELB be created with that security group. Delete the Service from Kubernetes. Watch the ELB be deleted (as expected) and the security group be deleted (unexpected).\r\n\r\n**Anything else we need to know?**:\r\n\r\nIt seems a workaround may be to ensure the security group is in use by at least one other resource within AWS so that the deletion attempt will fail with a [DependencyVioloation](https://github.com/kubernetes/kubernetes/blob/v1.7.16/pkg/cloudprovider/providers/aws/aws.go#L3186). The deletion process will eventually timeout, if I understand the code correctly.\r\n\r\nI've linked to `v1.7.16`, though I don't see any additional behavior on `master`, so I believe the bug is there as well.\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): v1.7.16\r\n- Cloud provider or hardware configuration: AWS\r\n",
  "closed_at": "2019-03-15T01:10:59Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 10,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/62204/comments",
  "created_at": "2018-04-06T18:38:00Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/62204/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/62204",
  "id": 312076094,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/62204/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMTIwNzYwOTQ=",
  "number": 62204,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "AWS security group (not created by kubernetes) deleted when deleting ELB",
  "updated_at": "2019-03-15T01:10:59Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/62204",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/15878700?v=4",
    "events_url": "https://api.github.com/users/pmahoney-raise/events{/privacy}",
    "followers_url": "https://api.github.com/users/pmahoney-raise/followers",
    "following_url": "https://api.github.com/users/pmahoney-raise/following{/other_user}",
    "gists_url": "https://api.github.com/users/pmahoney-raise/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pmahoney-raise",
    "id": 15878700,
    "login": "pmahoney-raise",
    "node_id": "MDQ6VXNlcjE1ODc4NzAw",
    "organizations_url": "https://api.github.com/users/pmahoney-raise/orgs",
    "received_events_url": "https://api.github.com/users/pmahoney-raise/received_events",
    "repos_url": "https://api.github.com/users/pmahoney-raise/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pmahoney-raise/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pmahoney-raise/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pmahoney-raise"
  }
}