{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/29497748?v=4",
    "events_url": "https://api.github.com/users/jiayingz/events{/privacy}",
    "followers_url": "https://api.github.com/users/jiayingz/followers",
    "following_url": "https://api.github.com/users/jiayingz/following{/other_user}",
    "gists_url": "https://api.github.com/users/jiayingz/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jiayingz",
    "id": 29497748,
    "login": "jiayingz",
    "node_id": "MDQ6VXNlcjI5NDk3NzQ4",
    "organizations_url": "https://api.github.com/users/jiayingz/orgs",
    "received_events_url": "https://api.github.com/users/jiayingz/received_events",
    "repos_url": "https://api.github.com/users/jiayingz/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jiayingz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jiayingz/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jiayingz"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/29497748?v=4",
      "events_url": "https://api.github.com/users/jiayingz/events{/privacy}",
      "followers_url": "https://api.github.com/users/jiayingz/followers",
      "following_url": "https://api.github.com/users/jiayingz/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiayingz/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jiayingz",
      "id": 29497748,
      "login": "jiayingz",
      "node_id": "MDQ6VXNlcjI5NDk3NzQ4",
      "organizations_url": "https://api.github.com/users/jiayingz/orgs",
      "received_events_url": "https://api.github.com/users/jiayingz/received_events",
      "repos_url": "https://api.github.com/users/jiayingz/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jiayingz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiayingz/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jiayingz"
    }
  ],
  "author_association": "MEMBER",
  "body": "/kind feature\r\n\r\nSpun off from https://github.com/kubernetes/kubernetes/issues/53342, there was a regression introduced by device plugin change in 1.8 that we might remove opaque integer resource or non-device extended resources. We fix this problem in 1.8 by never removing any extended resources from kubelet node status and requires cluster admins to manually remove extended resources exposed via device plugins when they remove plugins. This issue is to track better handling of device plugin resource removal after 1.8 so that we can better manage device plugin resource life cycle.\r\n\r\nAs @ConnorDoyle summarized in https://github.com/kubernetes/kubernetes/issues/53342, there are a few options to solve this:\r\n\r\nOption 1: With the assumption that ContainerManager owns the full control of the resources listed in its GetCapacity(), track resource deletion in ContainerManager and mark it in the returning data structure of GetCapacity() by either explicitly introducing a new state field for each resource type or implicitly from special quantity value of a resource (e.g., -1).\r\n\r\nOption 2: Introduce some naming convention for device plugin resources. This will simplify device plugin resource lifecycle management, but will probably require broader discussions.\r\n\r\nOther than distinguishing device plugin resources from other extended resources, we also need to avoid temporary capacity drop for device plugin resources after kubelet restarts. Otherwise, Pods restarted at that time gap window would fail and it is a regression from using device plugin to manage a resource compared to the native resource management by Kubelet (e.g., gpu resource currently managed by GpuManager). Possible options to solve this:\r\nOption 1: Tracks a grace period after Kubelet restart and avoid updating device plugin resource capacity during grace period.\r\nOption 2: Wait for some time period during ContainerManager Start() for device plugins to re-register. ",
  "closed_at": "2018-02-26T06:00:50Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 25,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/53395/comments",
  "created_at": "2017-10-03T17:04:35Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/53395/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/53395",
  "id": 262507676,
  "labels": [
    {
      "color": "c7def8",
      "default": false,
      "description": "Categorizes issue or PR as related to a new feature.",
      "id": 267761362,
      "name": "kind/feature",
      "node_id": "MDU6TGFiZWwyNjc3NjEzNjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/feature"
    },
    {
      "color": "795548",
      "default": false,
      "description": "Denotes an issue or PR has remained open with no activity and has become stale.",
      "id": 778118404,
      "name": "lifecycle/stale",
      "node_id": "MDU6TGFiZWw3NzgxMTg0MDQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/lifecycle/stale"
    },
    {
      "color": "ededed",
      "default": false,
      "description": null,
      "id": 687345274,
      "name": "milestone/removed",
      "node_id": "MDU6TGFiZWw2ODczNDUyNzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/milestone/removed"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Node.",
      "id": 173493665,
      "name": "sig/node",
      "node_id": "MDU6TGFiZWwxNzM0OTM2NjU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/node"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/53395/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNjI1MDc2NzY=",
  "number": 53395,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Better handling of device plugin resource deletion",
  "updated_at": "2018-02-26T06:00:50Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/53395",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/29497748?v=4",
    "events_url": "https://api.github.com/users/jiayingz/events{/privacy}",
    "followers_url": "https://api.github.com/users/jiayingz/followers",
    "following_url": "https://api.github.com/users/jiayingz/following{/other_user}",
    "gists_url": "https://api.github.com/users/jiayingz/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jiayingz",
    "id": 29497748,
    "login": "jiayingz",
    "node_id": "MDQ6VXNlcjI5NDk3NzQ4",
    "organizations_url": "https://api.github.com/users/jiayingz/orgs",
    "received_events_url": "https://api.github.com/users/jiayingz/received_events",
    "repos_url": "https://api.github.com/users/jiayingz/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jiayingz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jiayingz/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jiayingz"
  }
}