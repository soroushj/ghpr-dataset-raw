{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "Implement proposal #58635 for Azure\r\n\r\n> We propose to taint the node with \"Stopped\" condition. When kubelet stops updating, node controller checks cloud provider and see whether the node is in \"stopped\" state (Note: different cloud provider might use different term to represent this state, e.g., terminated). When volume controller gets a node update/delete event, it can check the node taint spec and mark the volumes attached to that node are safe to detach (volumes can be be removed from the list of VolumeInUse (meaning the volumes are mounted). When detach is issued, the operation can be proceeded without delay.\r\n\r\nWe should implement `InstanceShutdownByProviderID()` interface in Azure cloud provider. `InstanceShutdownByProviderID()` returns true if the instance is in stopped state to detach volumes. But if instance is deleted we should not return error.\r\n\r\nRelated features: https://github.com/kubernetes/features/issues/551\r\nRelated proposal: https://github.com/kubernetes/kubernetes/issues/58635\r\nRelated PRs:\r\n- https://github.com/kubernetes/kubernetes/pull/60009\r\n- https://github.com/kubernetes/kubernetes/pull/66213\r\n\r\n/kind feature\r\n/sig azure\r\n\r\n/cc @brendandburns @khenidak @andyzhangx ",
  "closed_at": "2018-09-08T17:43:34Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 5,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66265/comments",
  "created_at": "2018-07-17T04:54:05Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66265/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/66265",
  "id": 341765408,
  "labels": [
    {
      "color": "c7def8",
      "default": false,
      "description": "Categorizes issue or PR as related to a new feature.",
      "id": 267761362,
      "name": "kind/feature",
      "node_id": "MDU6TGFiZWwyNjc3NjEzNjI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/feature"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66265/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNDE3NjU0MDg=",
  "number": 66265,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Support InstanceShutdownByProviderID for Azure",
  "updated_at": "2018-09-08T17:43:34Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/66265",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/676637?v=4",
    "events_url": "https://api.github.com/users/feiskyer/events{/privacy}",
    "followers_url": "https://api.github.com/users/feiskyer/followers",
    "following_url": "https://api.github.com/users/feiskyer/following{/other_user}",
    "gists_url": "https://api.github.com/users/feiskyer/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/feiskyer",
    "id": 676637,
    "login": "feiskyer",
    "node_id": "MDQ6VXNlcjY3NjYzNw==",
    "organizations_url": "https://api.github.com/users/feiskyer/orgs",
    "received_events_url": "https://api.github.com/users/feiskyer/received_events",
    "repos_url": "https://api.github.com/users/feiskyer/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/feiskyer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/feiskyer/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/feiskyer"
  }
}