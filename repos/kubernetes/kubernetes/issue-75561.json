{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/280787?v=4",
    "events_url": "https://api.github.com/users/pjh/events{/privacy}",
    "followers_url": "https://api.github.com/users/pjh/followers",
    "following_url": "https://api.github.com/users/pjh/following{/other_user}",
    "gists_url": "https://api.github.com/users/pjh/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pjh",
    "id": 280787,
    "login": "pjh",
    "node_id": "MDQ6VXNlcjI4MDc4Nw==",
    "organizations_url": "https://api.github.com/users/pjh/orgs",
    "received_events_url": "https://api.github.com/users/pjh/received_events",
    "repos_url": "https://api.github.com/users/pjh/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pjh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pjh/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pjh"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/280787?v=4",
      "events_url": "https://api.github.com/users/pjh/events{/privacy}",
      "followers_url": "https://api.github.com/users/pjh/followers",
      "following_url": "https://api.github.com/users/pjh/following{/other_user}",
      "gists_url": "https://api.github.com/users/pjh/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/pjh",
      "id": 280787,
      "login": "pjh",
      "node_id": "MDQ6VXNlcjI4MDc4Nw==",
      "organizations_url": "https://api.github.com/users/pjh/orgs",
      "received_events_url": "https://api.github.com/users/pjh/received_events",
      "repos_url": "https://api.github.com/users/pjh/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/pjh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pjh/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/pjh"
    }
  ],
  "author_association": "MEMBER",
  "body": "**What happened**:\r\n\r\nAfter creating a Service of the \"LoadBalancer\" type in a cluster with Windows nodes, the management IP of the HNS networks on all windows nodes will change to the external IP assigned to the LoadBalancer service. After that, new pods started on the Windows nodes will not have network connectivity.\r\n\r\nFor example,\r\n```\r\nActivityId             : 18A8B631-A148-4269-8F13-5F6993D31BDD\r\nAdditionalParams       :\r\nCurrentEndpointCount   : 2\r\nExtensions             : {@{Id=E7C3B2F0-F3C5-48DF-AF2B-10FED6D72E7A; IsEnabled=False; Name=Microsoft Windows Filtering Platform}, @{Id=E9B59CFA-2BE1-4B21-828F-B6FBDBDDC017; IsEnabled=True;   \r\n                         Name=Microsoft Azure VFP Switch Extension}, @{Id=EA24CD6C-D17A-4348-9190-09F0D5BE83DD; IsEnabled=True; Name=Microsoft NDIS Capture}}\r\nFlags                  : 0\r\nHealth                 : @{LastErrorCode=0; LastUpdateTime=131975929918561278}\r\nID                     : ACB9211B-10B5-4EC0-AF6C-2B187B1809B8\r\nIPv6                   : False\r\nLayeredOn              : 525980D5-D3F6-488D-BA74-8C702C6C6AA5 \r\nMacPools               : {@{EndMacAddress=00-15-5D-99-BF-FF; StartMacAddress=00-15-5D-99-B0-00}}\r\nManagementIP           : 35.224.254.87\r\nMaxConcurrentEndpoints : 5\r\nName                   : l2bridge\r\n```\r\n\r\nThe \"ManagementIP\" was \"10.40.0.3\" (the internal node IP), but now is \"35.224.254.87\" -- an external IP assigned to the load balancer.\r\n\r\n**What you expected to happen**:\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\nCreate a service of loadbalancer type, and check `Get-HNSNetwork` on Windows nodes.\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): 1.14\r\n- Cloud provider or hardware configuration: GCE/GCP\r\n- OS (e.g: `cat /etc/os-release`): windows 1809\r\n- Kernel (e.g. `uname -a`):\r\n- Install tools:\r\n- Others:\r\n\r\n\r\nThe Management IP will keep changing every time a new load balancer is created. I couldn't find any documentation on how HNS gets the management IP, and how this may affect the network. The pods on the node were definitely having connectivity issues after the creation of the load balancer, so even if this wasn't not the root cause, something else must have been broken by the creation of load balancer.\r\n\r\n/cc @kubernetes/sig-windows-bugs @dineshgovindasamy \r\n@bowei ",
  "closed_at": "2020-01-03T19:22:19Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 24,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/75561/comments",
  "created_at": "2019-03-21T22:24:03Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/75561/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/75561",
  "id": 423968229,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": "Issues or PRs related to gcp provider",
      "id": 158907408,
      "name": "area/provider/gcp",
      "node_id": "MDU6TGFiZWwxNTg5MDc0MDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/provider/gcp"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "604460",
      "default": false,
      "description": "Denotes an issue or PR that has aged beyond stale and will be auto-closed.",
      "id": 778118402,
      "name": "lifecycle/rotten",
      "node_id": "MDU6TGFiZWw3NzgxMTg0MDI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/lifecycle/rotten"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Cloud Provider.",
      "id": 958178286,
      "name": "sig/cloud-provider",
      "node_id": "MDU6TGFiZWw5NTgxNzgyODY=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/cloud-provider"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Network.",
      "id": 116712108,
      "name": "sig/network",
      "node_id": "MDU6TGFiZWwxMTY3MTIxMDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/network"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Windows.",
      "id": 422106010,
      "name": "sig/windows",
      "node_id": "MDU6TGFiZWw0MjIxMDYwMTA=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/windows"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/75561/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MjM5NjgyMjk=",
  "number": 75561,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Creating Service with Type=LoadBalancer has strange side-effect on Windows nodes in GCE",
  "updated_at": "2020-01-03T19:22:20Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/75561",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/10524058?v=4",
    "events_url": "https://api.github.com/users/yujuhong/events{/privacy}",
    "followers_url": "https://api.github.com/users/yujuhong/followers",
    "following_url": "https://api.github.com/users/yujuhong/following{/other_user}",
    "gists_url": "https://api.github.com/users/yujuhong/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/yujuhong",
    "id": 10524058,
    "login": "yujuhong",
    "node_id": "MDQ6VXNlcjEwNTI0MDU4",
    "organizations_url": "https://api.github.com/users/yujuhong/orgs",
    "received_events_url": "https://api.github.com/users/yujuhong/received_events",
    "repos_url": "https://api.github.com/users/yujuhong/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/yujuhong/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yujuhong/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/yujuhong"
  }
}