{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/3262098?v=4",
    "events_url": "https://api.github.com/users/dashpole/events{/privacy}",
    "followers_url": "https://api.github.com/users/dashpole/followers",
    "following_url": "https://api.github.com/users/dashpole/following{/other_user}",
    "gists_url": "https://api.github.com/users/dashpole/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/dashpole",
    "id": 3262098,
    "login": "dashpole",
    "node_id": "MDQ6VXNlcjMyNjIwOTg=",
    "organizations_url": "https://api.github.com/users/dashpole/orgs",
    "received_events_url": "https://api.github.com/users/dashpole/received_events",
    "repos_url": "https://api.github.com/users/dashpole/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/dashpole/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dashpole/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/dashpole"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/493891?v=4",
      "events_url": "https://api.github.com/users/sjenning/events{/privacy}",
      "followers_url": "https://api.github.com/users/sjenning/followers",
      "following_url": "https://api.github.com/users/sjenning/following{/other_user}",
      "gists_url": "https://api.github.com/users/sjenning/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/sjenning",
      "id": 493891,
      "login": "sjenning",
      "node_id": "MDQ6VXNlcjQ5Mzg5MQ==",
      "organizations_url": "https://api.github.com/users/sjenning/orgs",
      "received_events_url": "https://api.github.com/users/sjenning/received_events",
      "repos_url": "https://api.github.com/users/sjenning/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/sjenning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sjenning/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/sjenning"
    },
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/3262098?v=4",
      "events_url": "https://api.github.com/users/dashpole/events{/privacy}",
      "followers_url": "https://api.github.com/users/dashpole/followers",
      "following_url": "https://api.github.com/users/dashpole/following{/other_user}",
      "gists_url": "https://api.github.com/users/dashpole/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/dashpole",
      "id": 3262098,
      "login": "dashpole",
      "node_id": "MDQ6VXNlcjMyNjIwOTg=",
      "organizations_url": "https://api.github.com/users/dashpole/orgs",
      "received_events_url": "https://api.github.com/users/dashpole/received_events",
      "repos_url": "https://api.github.com/users/dashpole/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/dashpole/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dashpole/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/dashpole"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "xref https://github.com/openshift/origin/issues/17595\r\n\r\nI haven't found a trivial reproducer for this yet.\r\n\r\n~~I've pasted the node log entries of a single pod and its containers that exhibit this issue:\r\nhttps://paste.fedoraproject.org/paste/DMlfGbbi~WiezZFBIAv-zw~~\r\n\r\nIf you search for \"updated successfully\", you can see the transition from Running -> Failed -> Succeeded.\r\n\r\nI've tracked it as far as this\r\n```I0110 14:05:35.238295   25503 generic.go:147] GenericPLEG: 4602f268-f60f-11e7-a2fa-0e70c83f826c/2ba70598ffa93e42963715706bc71c1e45bfc15078a1050dfb86b1cb3889bb14: exited -> non-existent\r\nI0110 14:05:35.737387   25503 kuberuntime_manager.go:853] getSandboxIDByPodUID got sandbox IDs [\"98289fc433f806147102f804d9c74461bfa32f7753b9701b0b98448c9cee6636\"] for pod \"deployment-simple-1-deploy_extended-test-cli-deployment-bwrns-v9htn(4602f268-f60f-11e7-a2fa-0e70c83f826c)\"\r\nI0110 14:05:35.768105   25503 generic.go:380] PLEG: Write status for deployment-simple-1-deploy/extended-test-cli-deployment-bwrns-v9htn: &container.PodStatus{ID:\"4602f268-f60f-11e7-a2fa-0e70c83f826c\", Name:\"deployment-simple-1-deploy\", Namespace:\"extended-test-cli-deployment-bwrns-v9htn\", IP:\"\", ContainerStatuses:[]*container.ContainerStatus{}, SandboxStatuses:[]*runtime.PodSandboxStatus{(*runtime.PodSandboxStatus)(0xc4215960f0)}} (err: <nil>)\r\nI0110 14:05:35.768606   25503 kubelet_pods.go:1349] Generating status for \"deployment-simple-1-deploy_extended-test-cli-deployment-bwrns-v9htn(4602f268-f60f-11e7-a2fa-0e70c83f826c)\"\r\nI0110 14:05:35.770208   25503 status_manager.go:367] Status Manager: adding pod: \"4602f268-f60f-11e7-a2fa-0e70c83f826c\", with status: ('\\x06', {Succeeded [{Initialized True 0001-01-01 00:00:00 +0000 UTC 2018-01-10 14:05:11 +0000 UTC PodCompleted } {Ready False 0001-01-01 00:00:00 +0000 UTC 2018-01-10 14:05:34 +0000 UTC PodCompleted } {PodScheduled True 0001-01-01 00:00:00 +0000 UTC 2018-01-10 14:05:11 +0000 UTC  }]   172.18.7.132 10.128.0.86 2018-01-10 14:05:11 +0000 UTC [] [{deployment {nil nil &ContainerStateTerminated{ExitCode:0,Signal:0,Reason:,Message:,StartedAt:0001-01-01 00:00:00 +0000 UTC,FinishedAt:0001-01-01 00:00:00 +0000 UTC,ContainerID:,}} {nil nil nil} false 0 openshift/origin-deployer:db2450c docker://sha256:44bccf94b5a66881265a32c508f8a162f371196480af7912cbac923418a2b02f docker://2ba70598ffa93e42963715706bc71c1e45bfc15078a1050dfb86b1cb3889bb14}] BestEffort}) to podStatusChannel\r\nI0110 14:05:35.770317   25503 status_manager.go:146] Status Manager: syncing pod: \"4602f268-f60f-11e7-a2fa-0e70c83f826c\", with status: (6, {Succeeded [{Initialized True 0001-01-01 00:00:00 +0000 UTC 2018-01-10 14:05:11 +0000 UTC PodCompleted } {Ready False 0001-01-01 00:00:00 +0000 UTC 2018-01-10 14:05:34 +0000 UTC PodCompleted } {PodScheduled True 0001-01-01 00:00:00 +0000 UTC 2018-01-10 14:05:11 +0000 UTC  }]   172.18.7.132 10.128.0.86 2018-01-10 14:05:11 +0000 UTC [] [{deployment {nil nil &ContainerStateTerminated{ExitCode:0,Signal:0,Reason:,Message:,StartedAt:0001-01-01 00:00:00 +0000 UTC,FinishedAt:0001-01-01 00:00:00 +0000 UTC,ContainerID:,}} {nil nil nil} false 0 openshift/origin-deployer:db2450c docker://sha256:44bccf94b5a66881265a32c508f8a162f371196480af7912cbac923418a2b02f docker://2ba70598ffa93e42963715706bc71c1e45bfc15078a1050dfb86b1cb3889bb14}] BestEffort}) from podStatusChannel\r\nI0110 14:05:35.784935   25503 status_manager.go:479] Status for pod \"deployment-simple-1-deploy_extended-test-cli-deployment-bwrns-v9htn(4602f268-f60f-11e7-a2fa-0e70c83f826c)\" updated successfully: (6, {Phase:Succeeded Conditions:[{Type:Initialized Status:True LastProbeTime:0001-01-01 00:00:00 +0000 UTC LastTransitionTime:2018-01-10 14:05:11 +0000 UTC Reason:PodCompleted Message:} {Type:Ready Status:False LastProbeTime:0001-01-01 00:00:00 +0000 UTC LastTransitionTime:2018-01-10 14:05:34 +0000 UTC Reason:PodCompleted Message:} {Type:PodScheduled Status:True LastProbeTime:0001-01-01 00:00:00 +0000 UTC LastTransitionTime:2018-01-10 14:05:11 +0000 UTC Reason: Message:}] Message: Reason: HostIP:172.18.7.132 PodIP:10.128.0.86 StartTime:2018-01-10 14:05:11 +0000 UTC InitContainerStatuses:[] ContainerStatuses:[{Name:deployment State:{Waiting:nil Running:nil Terminated:&ContainerStateTerminated{ExitCode:0,Signal:0,Reason:,Message:,StartedAt:0001-01-01 00:00:00 +0000 UTC,FinishedAt:0001-01-01 00:00:00 +0000 UTC,ContainerID:,}} LastTerminationState:{Waiting:nil Running:nil Terminated:nil} Ready:false RestartCount:0 Image:openshift/origin-deployer:db2450c ImageID:docker://sha256:44bccf94b5a66881265a32c508f8a162f371196480af7912cbac923418a2b02f ContainerID:docker://2ba70598ffa93e42963715706bc71c1e45bfc15078a1050dfb86b1cb3889bb14}] QOSClass:BestEffort})\r\n```\r\n\r\nNote the `ContainerStatuses:[]*container.ContainerStatus{}` is the pod status returned by `GetPodStatus()` in `(g *GenericPLEG) updateCache`. Somehow `generateAPIPodStatus()` corrupts this into a pod status with `Succeeded` phase.\r\n\r\nThis is part of an overall faulty assumption in the code we can rebuild the pod status, along with all the container status, from scratch at any time as long as the pod sandbox exists.  We need to be individually patching ContainerStatuses, as to not corrupt the status of containers that no longer exist in the runtime.\r\n\r\n@dashpole @derekwaynecarr @kargakis @tnozicka \r\n\r\n/sig node",
  "closed_at": "2020-03-05T04:13:05Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 26,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/58711/comments",
  "created_at": "2018-01-23T19:52:35Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/58711/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/58711",
  "id": 290971262,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d3e2f0",
      "default": false,
      "description": "Indicates that an issue or PR should not be auto-closed due to staleness.",
      "id": 778118403,
      "name": "lifecycle/frozen",
      "node_id": "MDU6TGFiZWw3NzgxMTg0MDM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/lifecycle/frozen"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Node.",
      "id": 173493665,
      "name": "sig/node",
      "node_id": "MDU6TGFiZWwxNzM0OTM2NjU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/node"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/58711/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyOTA5NzEyNjI=",
  "number": 58711,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "kubelet: invalid pod phase transition from Failed to Succeeded",
  "updated_at": "2020-03-05T04:13:05Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/58711",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/493891?v=4",
    "events_url": "https://api.github.com/users/sjenning/events{/privacy}",
    "followers_url": "https://api.github.com/users/sjenning/followers",
    "following_url": "https://api.github.com/users/sjenning/following{/other_user}",
    "gists_url": "https://api.github.com/users/sjenning/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sjenning",
    "id": 493891,
    "login": "sjenning",
    "node_id": "MDQ6VXNlcjQ5Mzg5MQ==",
    "organizations_url": "https://api.github.com/users/sjenning/orgs",
    "received_events_url": "https://api.github.com/users/sjenning/received_events",
    "repos_url": "https://api.github.com/users/sjenning/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sjenning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sjenning/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sjenning"
  }
}