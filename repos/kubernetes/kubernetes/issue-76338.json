{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/12699319?v=4",
    "events_url": "https://api.github.com/users/andrewsykim/events{/privacy}",
    "followers_url": "https://api.github.com/users/andrewsykim/followers",
    "following_url": "https://api.github.com/users/andrewsykim/following{/other_user}",
    "gists_url": "https://api.github.com/users/andrewsykim/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/andrewsykim",
    "id": 12699319,
    "login": "andrewsykim",
    "node_id": "MDQ6VXNlcjEyNjk5MzE5",
    "organizations_url": "https://api.github.com/users/andrewsykim/orgs",
    "received_events_url": "https://api.github.com/users/andrewsykim/received_events",
    "repos_url": "https://api.github.com/users/andrewsykim/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/andrewsykim/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andrewsykim/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/andrewsykim"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/12699319?v=4",
      "events_url": "https://api.github.com/users/andrewsykim/events{/privacy}",
      "followers_url": "https://api.github.com/users/andrewsykim/followers",
      "following_url": "https://api.github.com/users/andrewsykim/following{/other_user}",
      "gists_url": "https://api.github.com/users/andrewsykim/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andrewsykim",
      "id": 12699319,
      "login": "andrewsykim",
      "node_id": "MDQ6VXNlcjEyNjk5MzE5",
      "organizations_url": "https://api.github.com/users/andrewsykim/orgs",
      "received_events_url": "https://api.github.com/users/andrewsykim/received_events",
      "repos_url": "https://api.github.com/users/andrewsykim/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andrewsykim/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andrewsykim/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andrewsykim"
    }
  ],
  "author_association": "NONE",
  "body": "<!-- Please use this template while reporting a bug and provide as much info as possible. Not doing so may result in your bug not being addressed in a timely manner. Thanks!\r\n\r\nIf the matter is security related, please disclose it privately via https://kubernetes.io/security/\r\n-->\r\n\r\n\r\n**What happened**:\r\nAfter some api-server outages (2 apparent in logs and they lastestd minutes at least)\r\nKube proxy stopped recieving updates from endpoionts. And stopped updating the ip tables\r\nHere's the kube-proxy logs which show errors and then nothing for 4 days (Log ended on 4/8/2019)\r\n[kubehunglogs.txt](https://github.com/kubernetes/kubernetes/files/3060250/kubehunglogs.txt)\r\nHere's the iptables and endpoints that were out of wack.  \r\n[iptablesandendpoints.txt](https://github.com/kubernetes/kubernetes/files/3060257/iptablesandendpoints.txt)\r\n\r\nWe've had this happen twice so reporting it now though we're still working on a repo. \r\nThe core dns service being out of date is what really kills us as the dns lookup will just start hanging. \r\n\r\n**What you expected to happen**:\r\nEither kube-proxy should continue retrying or fail so it can be restarted. \r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nTake an api-server down for several minutes? We may try this today. Not oure api server is an aks instance where it is acually fqdn not a service in the cluster. \r\n\r\n**Anything else we need to know?**:\r\nSadly the pod was restarted but we're curious if the healthz endpoint may help here. Maybe one stargety is check the last update time of the  if the lastUpdated \u00a0time from healthz and see if we can \u00a0make a liveness prove kill kube-proxy if it has been hours since last update. \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): 1.12.5\r\n- Cloud provider or hardware configuration: Azure\r\n- OS (e.g: `cat /etc/os-release`): Ubuntu 16.04.5 LTS\r\n- Kernel (e.g. `uname -a`):4.15.0-1041-azure\r\n",
  "closed_at": "2020-09-09T21:55:46Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 64,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/76338/comments",
  "created_at": "2019-04-09T17:37:32Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/76338/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/76338",
  "id": 431091975,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "604460",
      "default": false,
      "description": "Denotes an issue or PR that has aged beyond stale and will be auto-closed.",
      "id": 778118402,
      "name": "lifecycle/rotten",
      "node_id": "MDU6TGFiZWw3NzgxMTg0MDI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/lifecycle/rotten"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Network.",
      "id": 116712108,
      "name": "sig/network",
      "node_id": "MDU6TGFiZWwxMTY3MTIxMDg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/network"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/76338/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MzEwOTE5NzU=",
  "number": 76338,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Kube-proxy hangs on api-server errors",
  "updated_at": "2020-09-09T21:55:47Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/76338",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/1474379?v=4",
    "events_url": "https://api.github.com/users/paulgmiller/events{/privacy}",
    "followers_url": "https://api.github.com/users/paulgmiller/followers",
    "following_url": "https://api.github.com/users/paulgmiller/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulgmiller/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/paulgmiller",
    "id": 1474379,
    "login": "paulgmiller",
    "node_id": "MDQ6VXNlcjE0NzQzNzk=",
    "organizations_url": "https://api.github.com/users/paulgmiller/orgs",
    "received_events_url": "https://api.github.com/users/paulgmiller/received_events",
    "repos_url": "https://api.github.com/users/paulgmiller/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/paulgmiller/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulgmiller/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/paulgmiller"
  }
}