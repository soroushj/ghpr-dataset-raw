{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "The new Addon Manager being bumped up in #36008 has some fundamental behavioral changes comparing to the old one. This [README](https://github.com/kubernetes/kubernetes/blob/master/cluster/addons/README.md) explains how the new Addon Manager work and makes below claim:\r\n> The add-ons are visible through the API (they can be listed using kubectl), but direct manipulation of these objects through Apiserver is discouraged because the system will bring them back to the original state.\r\n\r\nHowever, the underlying consequences are not well covered in the case that users don't have access to the master node. Issues we've encountered listed below:\r\n- Some applications may be broke by this new behavior, like #36194. The fact is that if the application depends on changing the addon configuration through the apiserver in order to update it, very likely this application will no longer work.\r\n- A few addons that need to stay adjustable while running are also affected. Under this new behavior, they need to leave specific fields unset in the manifest files in order to make them tunable. Like [`kube-dns`](https://github.com/kubernetes/kubernetes/tree/master/cluster/addons/dns) leaves `replicas` unset for horizontal scaling and [`heapster`](https://github.com/kubernetes/kubernetes/tree/master/cluster/addons/cluster-monitoring/influxdb) leaves `resource` unset for vertical scaling.\r\n- Those fileds left unset in the manifest files are tunable based on one precondition that the modification will not save the configuration of object in its annotation(`last-applied-configuration`). Otherwise the Addon Manager will still reconcile it due to the [three-way-merge](https://github.com/kubernetes/kubernetes/blob/master/pkg/util/strategicpatch/patch.go#L1165-L1247) strategy. For instance, modifications made by k8s go clients will work(like [horizontal autoscaler](https://github.com/kubernetes-incubator/cluster-proportional-autoscaler) and [vertical autoscaler](https://github.com/kubernetes/contrib/tree/master/addon-resizer)). But `kubectl apply`, `kubectl edit`, `kubectl create` etc. will not work because they will update the annotation.\r\n\r\nIn short, the behavior for modifying the adjustable fields of addons are chaos and definitely not recommended to users. We should really emphasize this in docs to reduce the potential of breaking more unexpected applications.\r\n\r\n@mikedanese \r\n\r\ncc @bowei @bprashanth ",
  "closed_at": "2017-02-25T11:02:50Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36411/comments",
  "created_at": "2016-11-08T02:58:57Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36411/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/36411",
  "id": 187889445,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 138247961,
      "name": "area/kubectl",
      "node_id": "MDU6TGFiZWwxMzgyNDc5NjE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/kubectl"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36411/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUxODc4ODk0NDU=",
  "number": 36411,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Need to document the correct behaviors user should expect from Addon Manager v6.0.",
  "updated_at": "2017-02-25T11:02:50Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/36411",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/8681801?v=4",
    "events_url": "https://api.github.com/users/MrHohn/events{/privacy}",
    "followers_url": "https://api.github.com/users/MrHohn/followers",
    "following_url": "https://api.github.com/users/MrHohn/following{/other_user}",
    "gists_url": "https://api.github.com/users/MrHohn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/MrHohn",
    "id": 8681801,
    "login": "MrHohn",
    "node_id": "MDQ6VXNlcjg2ODE4MDE=",
    "organizations_url": "https://api.github.com/users/MrHohn/orgs",
    "received_events_url": "https://api.github.com/users/MrHohn/received_events",
    "repos_url": "https://api.github.com/users/MrHohn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/MrHohn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MrHohn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/MrHohn"
  }
}