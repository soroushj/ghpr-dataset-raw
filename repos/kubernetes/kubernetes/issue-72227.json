{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "**What happened**:\r\nAAD support in kubectl does not work for sovereign cloud\r\nThe 'environment' parameter was introduced to support sovereign cloud, but it works in first round.\r\nThe 'environment' value is not persisted, so follow-up requests will fail.\r\n\r\n```\r\nUnable to connect to the server: acquiring a token for authorization header: acquiring a new fresh token: initialing the device code authentication: autorest/adal/devicetoken: Error occurred while handling response from the Device Endpoint: Error HTTP status != 200\r\n```\r\n\r\n**What you expected to happen**:\r\n'environment' parameter persisted in kubectl config file.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nUse kubectl to connect to Azure sovereign cloud, make the token expire, and do auth.\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`): 1.11\r\n- Cloud provider or hardware configuration:\r\n- OS (e.g. from /etc/os-release):\r\n- Kernel (e.g. `uname -a`):\r\n- Install tools:\r\n- Others:\r\n\r\n<!-- DO NOT EDIT BELOW THIS LINE -->\r\n/kind bug",
  "closed_at": "2018-12-20T06:04:52Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 1,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/72227/comments",
  "created_at": "2018-12-20T03:19:27Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/72227/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/72227",
  "id": 392869787,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "ededed",
      "default": false,
      "description": "Indicates an issue or PR lacks a `sig/foo` label and requires one.",
      "id": 617149945,
      "name": "needs-sig",
      "node_id": "MDU6TGFiZWw2MTcxNDk5NDU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/needs-sig"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/72227/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzOTI4Njk3ODc=",
  "number": 72227,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "AAD support in kubectl does not work well for sovereign cloud",
  "updated_at": "2018-12-20T06:04:52Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/72227",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/10071498?v=4",
    "events_url": "https://api.github.com/users/karataliu/events{/privacy}",
    "followers_url": "https://api.github.com/users/karataliu/followers",
    "following_url": "https://api.github.com/users/karataliu/following{/other_user}",
    "gists_url": "https://api.github.com/users/karataliu/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/karataliu",
    "id": 10071498,
    "login": "karataliu",
    "node_id": "MDQ6VXNlcjEwMDcxNDk4",
    "organizations_url": "https://api.github.com/users/karataliu/orgs",
    "received_events_url": "https://api.github.com/users/karataliu/received_events",
    "repos_url": "https://api.github.com/users/karataliu/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/karataliu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karataliu/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/karataliu"
  }
}