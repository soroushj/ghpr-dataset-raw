{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "In the guestbook example, the redis slaves are instructed to connect to the redis-master using the proxy provided by the minion on which they reside.  The minion is designated by its hostname \"kubernetes-minion-N\".  The container cannot resolve this name to an IP address and so slave connections fail.\n\nhttps://github.com/GoogleCloudPlatform/kubernetes/tree/master/examples/guestbook\n\n1) create vagrant cluster\n2) create redis-master pod\n3) create redis-master service\n4) create redis-slave replicationController\n\nVerify redis-slave pod locations:\n\ncluster/kubecfg.sh list pods\nID                                     Image(s)                   Host                             Labels                                                       Status\n\n---\n\nredis-master-2                         dockerfile/redis           kubernetes-minion-1/10.245.2.2   name=redis-master                                            Running\n27e5db19-3839-11e4-a922-0800279696e1   brendanburns/redis-slave   kubernetes-minion-1/10.245.2.2   name=redisslave,replicationController=redisSlaveController   Running\n27eae8bc-3839-11e4-a922-0800279696e1   brendanburns/redis-slave   kubernetes-minion-3/10.245.2.4   name=redisslave,replicationController=redisSlaveController   Running\n\nLog onto a minion containing a slave\n   (note: vagrant hostnames are minion-N, not kubernetes-minion-N) \n\nFind the slave container\ndocker ps\nCONTAINER ID        IMAGE                             COMMAND                CREATED             STATUS              PORTS                    NAMES\n2e4b77156e77        brendanburns/redis-slave:latest   /bin/sh -c /run.sh     About an hour ago   Up About an hour                             k8s--slave.edf01459--27e5db19_-_3839_-_11e4_-_a922_-_0800279696e1.etcd--dd23c4bb  \n\ndocker logs 2e4b77156e77 | tail\n[7] 09 Sep 17:27:08.428 \\* Connecting to MASTER kubernetes-minion-1:10000\n[7] 09 Sep 17:27:08.430 # Unable to connect to MASTER: No such file or directory\n[7] 09 Sep 17:27:09.435 \\* Connecting to MASTER kubernetes-minion-1:10000\n\nsudo nsenter -m -u -n -i -p -t $(docker inspect --format '{{ .State.Pid }}' 2e4b77156e77) /bin/bash\n[ root@27e5db19-3839-11e4-a922-0800279696e1:/ ]$ ping kubernetes-minion-1\nping: unknown host kubernetes-minion-1\n\n[ root@27e5db19-3839-11e4-a922-0800279696e1:/ ]$ cat /etc/hosts\n10.244.1.4      27e5db19-3839-11e4-a922-0800279696e1\n127.0.0.1       localhost\n::1     localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n\n[ root@27e5db19-3839-11e4-a922-0800279696e1:/ ]$ cat /etc/resolv.conf \n# Generated by NetworkManager\n\nnameserver 10.0.2.3\n\ncat  /proc/1/environ  \nHOME=/rootPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/binHOSTNAME=27e5db19-3839-11e4-a922-0800279696e1REDISMASTER_SERVICE_PORT=10000REDISMASTER_PORT=tcp://kubernetes-minion-1:10000REDISMASTER_PORT_6379_TCP=tcp://kubernetes-minion-1:10000REDISMASTER_PORT_6379_TCP_PROTO=tcpREDISMASTER_PORT_6379_TCP_PORT=10000REDISMASTER_PORT_6379_TCP_ADDR=kubernetes-minion-1SERVICE_HOST=kubernetes-\n",
  "closed_at": "2014-09-11T20:38:58Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/5751682?v=4",
    "events_url": "https://api.github.com/users/brendandburns/events{/privacy}",
    "followers_url": "https://api.github.com/users/brendandburns/followers",
    "following_url": "https://api.github.com/users/brendandburns/following{/other_user}",
    "gists_url": "https://api.github.com/users/brendandburns/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/brendandburns",
    "id": 5751682,
    "login": "brendandburns",
    "node_id": "MDQ6VXNlcjU3NTE2ODI=",
    "organizations_url": "https://api.github.com/users/brendandburns/orgs",
    "received_events_url": "https://api.github.com/users/brendandburns/received_events",
    "repos_url": "https://api.github.com/users/brendandburns/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/brendandburns/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brendandburns/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/brendandburns"
  },
  "comments": 9,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/1233/comments",
  "created_at": "2014-09-09T17:31:27Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/1233/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/1233",
  "id": 42331372,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/1233/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MjMzMTM3Mg==",
  "number": 1233,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Guestbook Example: redis-slave containers can't resolve redis-master service hostname",
  "updated_at": "2015-05-06T21:14:14Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/1233",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/217372?v=4",
    "events_url": "https://api.github.com/users/markllama/events{/privacy}",
    "followers_url": "https://api.github.com/users/markllama/followers",
    "following_url": "https://api.github.com/users/markllama/following{/other_user}",
    "gists_url": "https://api.github.com/users/markllama/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/markllama",
    "id": 217372,
    "login": "markllama",
    "node_id": "MDQ6VXNlcjIxNzM3Mg==",
    "organizations_url": "https://api.github.com/users/markllama/orgs",
    "received_events_url": "https://api.github.com/users/markllama/received_events",
    "repos_url": "https://api.github.com/users/markllama/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/markllama/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/markllama/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/markllama"
  }
}