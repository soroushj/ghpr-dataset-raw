{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/3902875?v=4",
    "events_url": "https://api.github.com/users/juanvallejo/events{/privacy}",
    "followers_url": "https://api.github.com/users/juanvallejo/followers",
    "following_url": "https://api.github.com/users/juanvallejo/following{/other_user}",
    "gists_url": "https://api.github.com/users/juanvallejo/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/juanvallejo",
    "id": 3902875,
    "login": "juanvallejo",
    "node_id": "MDQ6VXNlcjM5MDI4NzU=",
    "organizations_url": "https://api.github.com/users/juanvallejo/orgs",
    "received_events_url": "https://api.github.com/users/juanvallejo/received_events",
    "repos_url": "https://api.github.com/users/juanvallejo/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/juanvallejo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/juanvallejo/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/juanvallejo"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/3902875?v=4",
      "events_url": "https://api.github.com/users/juanvallejo/events{/privacy}",
      "followers_url": "https://api.github.com/users/juanvallejo/followers",
      "following_url": "https://api.github.com/users/juanvallejo/following{/other_user}",
      "gists_url": "https://api.github.com/users/juanvallejo/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/juanvallejo",
      "id": 3902875,
      "login": "juanvallejo",
      "node_id": "MDQ6VXNlcjM5MDI4NzU=",
      "organizations_url": "https://api.github.com/users/juanvallejo/orgs",
      "received_events_url": "https://api.github.com/users/juanvallejo/received_events",
      "repos_url": "https://api.github.com/users/juanvallejo/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/juanvallejo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/juanvallejo/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/juanvallejo"
    }
  ],
  "author_association": "NONE",
  "body": "/kind bug\r\n\r\nWe're having trouble retrieving images from a private registry on DockerCloud. For nearly a year the following has worked flawlessly. Last Friday I pulled down the 1.9.0 CLI (via brew) and since then have not been able to access any image in a private registry on DockerCloud. I've tried this on 10+ brand new clusters created with kops v1.8.0. The Kubernetes cluster version have been 1.8.0, 1.8.4, 1.8.5 and 1.9.0 (which is not supported by kops yet) and all exhibit the same problem.\r\n\r\nWe create the secret as such:\r\n```\r\nkubectl create secret docker-registry dockerclouduser \\\r\n    --docker-server=https://index.docker.io/v1/ \\\r\n    --docker-username={my-username} \\\r\n    --docker-password={my-password} \\\r\n    --docker-email={my-email}\r\n```\r\n\r\nAnd verify it using:\r\n```\r\nkubectl get secret dockerclouduser --output=json | jq --raw-output '.data | .\".dockercfg\"' | base64 -D | python -m json.tool\r\n```\r\n\r\nWhich yields:\r\n```\r\n{\r\n    \"auths\": {\r\n        \"https://index.docker.io/v1/\": {\r\n            \"auth\": \"{what-appears-to-be-a-token}\",\r\n            \"email\": \"{my-email}\",\r\n            \"password\": \"{my-password}\",\r\n            \"username\": \"{my-username}\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd create a test service with `kubectl create -f` with these contents:\r\n```\r\napiVersion: apps/v1beta1\r\nkind: Deployment\r\nmetadata:\r\n  name: test-service\r\nspec:\r\n  replicas: 1\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: test-service\r\n    spec:\r\n      containers:\r\n      - name: test-service\r\n        image: {my-org}/{my-repo-name}:{my-tag}\r\n        imagePullPolicy: Always\r\n      imagePullSecrets:\r\n        - name: dockerclouduser\r\n```\r\n\r\nThe pod fails immediatly with: \r\n```\r\nFailed to pull image \"{my-org}/{mmy-repo-name}:{my-tag}\": rpc error: code = Unknown desc = Error response from daemon: repository {my-org}/{mmy-repo-name} not found: does not exist or no pull access\r\n```\r\n\r\nI've reviewed the 1.9.0 release notes and nothing jumps out as the root cause.\r\n\r\nFor reference I've tried putting quotes around the `{my-password}` value when creating the secret to no avail.\r\n\r\nI've also tried prefixing the `spec.template.spec.containers.[0].image` value with `index.docker.io`, so the full value would read: `image: index.docker.io/{my-org}/{my-repo-name}:{my-tag}` also to no avail.\r\n\r\n**Environment**:\r\nKubernetes version:\r\n```\r\n$ kubectl version\r\nClient Version: version.Info{Major:\"1\", Minor:\"9\", GitVersion:\"v1.9.0\", GitCommit:\"925c127ec6b946659ad0fd596fa959be43f0cc05\", GitTreeState:\"clean\", BuildDate:\"2017-12-16T03:16:50Z\", GoVersion:\"go1.9.2\", Compiler:\"gc\", Platform:\"darwin/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"9\", GitVersion:\"v1.9.0\", GitCommit:\"925c127ec6b946659ad0fd596fa959be43f0cc05\", GitTreeState:\"clean\", BuildDate:\"2017-12-15T20:55:30Z\", GoVersion:\"go1.9.2\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n```\r\nCloud provider and installation info:\r\n* AWS cluster built with Kops 1.8.0, using (to isolate this issue) nearly the default settings for everything.\r\n\r\n",
  "closed_at": "2017-12-20T21:18:36Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 14,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/57427/comments",
  "created_at": "2017-12-20T01:42:24Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/57427/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/57427",
  "id": 283423531,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Highest priority. Must be actively worked on as someone's top priority right now.",
      "id": 114528068,
      "name": "priority/critical-urgent",
      "node_id": "MDU6TGFiZWwxMTQ1MjgwNjg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/priority/critical-urgent"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG CLI.",
      "id": 450823910,
      "name": "sig/cli",
      "node_id": "MDU6TGFiZWw0NTA4MjM5MTA=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/cli"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/57427/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyODM0MjM1MzE=",
  "number": 57427,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Issues with private Docker Cloud repos and the 1.9.0 CLI",
  "updated_at": "2018-01-17T15:42:29Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/57427",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/4094051?v=4",
    "events_url": "https://api.github.com/users/pluttrell/events{/privacy}",
    "followers_url": "https://api.github.com/users/pluttrell/followers",
    "following_url": "https://api.github.com/users/pluttrell/following{/other_user}",
    "gists_url": "https://api.github.com/users/pluttrell/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pluttrell",
    "id": 4094051,
    "login": "pluttrell",
    "node_id": "MDQ6VXNlcjQwOTQwNTE=",
    "organizations_url": "https://api.github.com/users/pluttrell/orgs",
    "received_events_url": "https://api.github.com/users/pluttrell/received_events",
    "repos_url": "https://api.github.com/users/pluttrell/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pluttrell/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pluttrell/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pluttrell"
  }
}