{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "In order to initialize a client-go `record.EventRecorder`, you need an `record.EventBroadcaster`.  `record.NewBroadcaster` and friends initialize a new `watch.Broadcaster`:\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/3317805652d145c4003f5c534c7d87fb5cd87d50/staging/src/k8s.io/client-go/tools/record/event.go#L133-L137\r\n\r\n`watch.NewBroadcaster` launches a goroutine:\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/3317805652d145c4003f5c534c7d87fb5cd87d50/staging/src/k8s.io/apimachinery/pkg/watch/mux.go#L67-L77\r\n\r\nThis goroutine is stoppable with  `watch.Broadcaster.Shutdown`.  However, the `record.EventBroadcaster` interface returned above does not expose anything that calls that shutdown method, AFAICT.  This means that that goroutine cannot ever be cleaned up.\r\n\r\nThat's not great.  It's fine if you're using in like k/k does and never stopping anything, but if you ever want to stop your controllers and start up new ones, it becomes an issue.\r\n\r\nTested/tracked down against master (as of 3317805652d145c4003f5c534c7d87fb5cd87d50).\r\n\r\n/sig apimachinery\r\n/kind bug\r\n",
  "closed_at": "2019-10-08T10:45:31Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/83487/comments",
  "created_at": "2019-10-03T23:22:13Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/83487/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/83487",
  "id": 502345877,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG API Machinery.",
      "id": 173493835,
      "name": "sig/api-machinery",
      "node_id": "MDU6TGFiZWwxNzM0OTM4MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/api-machinery"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/83487/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1MDIzNDU4Nzc=",
  "number": 83487,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "record.NewBroadcaster leaks goroutines",
  "updated_at": "2019-10-08T10:45:31Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/83487",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/119737?v=4",
    "events_url": "https://api.github.com/users/DirectXMan12/events{/privacy}",
    "followers_url": "https://api.github.com/users/DirectXMan12/followers",
    "following_url": "https://api.github.com/users/DirectXMan12/following{/other_user}",
    "gists_url": "https://api.github.com/users/DirectXMan12/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/DirectXMan12",
    "id": 119737,
    "login": "DirectXMan12",
    "node_id": "MDQ6VXNlcjExOTczNw==",
    "organizations_url": "https://api.github.com/users/DirectXMan12/orgs",
    "received_events_url": "https://api.github.com/users/DirectXMan12/received_events",
    "repos_url": "https://api.github.com/users/DirectXMan12/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/DirectXMan12/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DirectXMan12/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/DirectXMan12"
  }
}