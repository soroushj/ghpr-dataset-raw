{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "I'm pretty sure that building the hyperkube images takes longer than building kubernetes itself now.\n\nAt least a large part of this seems to be that we download and install ~172 extra debian packages several times (once for each arch).\n\n<details>\n\n```\nStep 1 : FROM debian:jessie\n ---> ae85c48b369c\nStep 2 : RUN DEBIAN_FRONTEND=noninteractive apt-get update -y     && DEBIAN_FRONTEND=noninteractive apt-get -yy -q install     iptables     ebtables     ethtool     ca-certificates     conntrack     util-linux     socat     git     nfs-common     glusterfs-client     cifs-utils     && DEBIAN_FRONTEND=noninteractive apt-get upgrade -y     && DEBIAN_FRONTEND=noninteractive apt-get autoremove -y     && DEBIAN_FRONTEND=noninteractive apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* # 8d44e7d0-167f-48a2-8d52-c3d7748438c2\n ---> Running in 70dd6f4a01e7\nGet:1 http://security.debian.org jessie/updates InRelease [63.1 kB]\nGet:2 http://security.debian.org jessie/updates/main amd64 Packages [392 kB]\nIgn http://httpredir.debian.org jessie InRelease\nGet:3 http://httpredir.debian.org jessie-updates InRelease [142 kB]\nGet:4 http://httpredir.debian.org jessie Release.gpg [2373 B]\nGet:5 http://httpredir.debian.org jessie Release [148 kB]\nGet:6 http://httpredir.debian.org jessie-updates/main amd64 Packages [17.6 kB]\nGet:7 http://httpredir.debian.org jessie/main amd64 Packages [9064 kB]\nFetched 9829 kB in 3s (2871 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nutil-linux is already the newest version.\nThe following extra packages will be installed:\n  attr bsd-mailx cron dbus exim4 exim4-base exim4-config exim4-daemon-light\n  file fuse git-man glusterfs-common init-system-helpers keyutils kmod\n  krb5-locales less libaio1 libalgorithm-c3-perl libarchive-extract-perl\n  libasn1-8-heimdal libavahi-client3 libavahi-common-data libavahi-common3\n  libbsd0 libcap-ng0 libcgi-fast-perl libcgi-pm-perl libclass-c3-perl\n  libclass-c3-xs-perl libcpan-meta-perl libcups2 libcurl3-gnutls\n  libdata-optlist-perl libdata-section-perl libdbus-1-3\n  libdevmapper-event1.02.1 libedit2 liberror-perl libevent-2.0-5 libexpat1\n  libfcgi-perl libffi6 libfile-copy-recursive-perl libfuse2 libgdbm3\n  libglib2.0-0 libglib2.0-data libgmp10 libgnutls-deb0-28 libgssapi-krb5-2\n  libhcrypto4-heimdal libhdb9-heimdal libheimbase1-heimdal libhogweed2\n  libhx509-5-heimdal libibverbs1 libidn11 libk5crypto3 libkeyutils1\n  libkrb5-26-heimdal libkrb5-3 libkrb5support0 libldap-2.4-2 libldb1\n  liblockfile-bin liblockfile1 liblog-message-perl liblog-message-simple-perl\n  liblvm2app2.2 libmagic1 libmnl0 libmodule-build-perl\n  libmodule-pluggable-perl libmodule-signature-perl libmro-compat-perl\n  libnetfilter-conntrack3 libnettle4 libnfnetlink0 libnfsidmap2 libntdb1\n  libp11-kit0 libpackage-constants-perl libparams-util-perl libpod-latex-perl\n  libpod-readme-perl libpopt0 libpython-stdlib libpython2.7\n  libpython2.7-minimal libpython2.7-stdlib librdmacm1 libregexp-common-perl\n  libroken18-heimdal librtmp1 libsasl2-2 libsasl2-modules libsasl2-modules-db\n  libsoftware-license-perl libsqlite3-0 libssh2-1 libssl1.0.0\n  libsub-exporter-perl libsub-install-perl libtalloc2 libtasn1-6 libtdb1\n  libterm-ui-perl libtevent0 libtext-soundex-perl libtext-template-perl\n  libtirpc1 libwbclient0 libwind0-heimdal libwrap0 libx11-6 libx11-data\n  libxau6 libxcb1 libxdmcp6 libxext6 libxml2 libxmuu1 libxtables10 logrotate\n  mime-support openssh-client openssl patch perl perl-modules psmisc python\n  python-crypto python-dnspython python-ldb python-minimal python-ntdb\n  python-samba python-talloc python-tdb python2.7 python2.7-minimal rename\n  rpcbind rsync samba samba-common samba-common-bin samba-dsdb-modules\n  samba-libs samba-vfs-modules sgml-base shared-mime-info tcpd tdb-tools ucf\n  update-inetd winbind xauth xdg-user-dirs xml-core\nSuggested packages:\n  smbclient anacron checksecurity dbus-x11 mail-reader eximon4 exim4-doc-html\n  exim4-doc-info spf-tools-perl swaks gettext-base git-daemon-run\n  git-daemon-sysvinit git-doc git-el git-email git-gui gitk gitweb git-arch\n  git-cvs git-mediawiki git-svn cups-common gnutls-bin krb5-doc krb5-user\n  libsasl2-modules-otp libsasl2-modules-ldap libsasl2-modules-sql\n  libsasl2-modules-gssapi-mit libsasl2-modules-gssapi-heimdal open-iscsi\n  watchdog ssh-askpass libpam-ssh keychain monkeysphere ed diffutils-doc\n  perl-doc libterm-readline-gnu-perl libterm-readline-perl-perl make\n  libb-lint-perl libcpanplus-dist-build-perl libcpanplus-perl\n  libfile-checktree-perl libobject-accessor-perl python-doc python-tk\n  python-crypto-dbg python-crypto-doc python2.7-doc binutils binfmt-support\n  openssh-server bind9 bind9utils ctdb ldb-tools ntp smbldap-tools\n  heimdal-clients sgml-base-doc libnss-winbind libpam-winbind debhelper\nRecommended packages:\n  mailx ssh-client libarchive-tar-perl\nThe following NEW packages will be installed:\n  attr bsd-mailx ca-certificates cifs-utils conntrack cron dbus ebtables\n  ethtool exim4 exim4-base exim4-config exim4-daemon-light file fuse git\n  git-man glusterfs-client glusterfs-common init-system-helpers iptables\n  keyutils kmod krb5-locales less libaio1 libalgorithm-c3-perl\n  libarchive-extract-perl libasn1-8-heimdal libavahi-client3\n  libavahi-common-data libavahi-common3 libbsd0 libcap-ng0 libcgi-fast-perl\n  libcgi-pm-perl libclass-c3-perl libclass-c3-xs-perl libcpan-meta-perl\n  libcups2 libcurl3-gnutls libdata-optlist-perl libdata-section-perl\n  libdbus-1-3 libdevmapper-event1.02.1 libedit2 liberror-perl libevent-2.0-5\n  libexpat1 libfcgi-perl libffi6 libfile-copy-recursive-perl libfuse2 libgdbm3\n  libglib2.0-0 libglib2.0-data libgmp10 libgnutls-deb0-28 libgssapi-krb5-2\n  libhcrypto4-heimdal libhdb9-heimdal libheimbase1-heimdal libhogweed2\n  libhx509-5-heimdal libibverbs1 libidn11 libk5crypto3 libkeyutils1\n  libkrb5-26-heimdal libkrb5-3 libkrb5support0 libldap-2.4-2 libldb1\n  liblockfile-bin liblockfile1 liblog-message-perl liblog-message-simple-perl\n  liblvm2app2.2 libmagic1 libmnl0 libmodule-build-perl\n  libmodule-pluggable-perl libmodule-signature-perl libmro-compat-perl\n  libnetfilter-conntrack3 libnettle4 libnfnetlink0 libnfsidmap2 libntdb1\n  libp11-kit0 libpackage-constants-perl libparams-util-perl libpod-latex-perl\n  libpod-readme-perl libpopt0 libpython-stdlib libpython2.7\n  libpython2.7-minimal libpython2.7-stdlib librdmacm1 libregexp-common-perl\n  libroken18-heimdal librtmp1 libsasl2-2 libsasl2-modules libsasl2-modules-db\n  libsoftware-license-perl libsqlite3-0 libssh2-1 libssl1.0.0\n  libsub-exporter-perl libsub-install-perl libtalloc2 libtasn1-6 libtdb1\n  libterm-ui-perl libtevent0 libtext-soundex-perl libtext-template-perl\n  libtirpc1 libwbclient0 libwind0-heimdal libwrap0 libx11-6 libx11-data\n  libxau6 libxcb1 libxdmcp6 libxext6 libxml2 libxmuu1 libxtables10 logrotate\n  mime-support nfs-common openssh-client openssl patch perl perl-modules\n  psmisc python python-crypto python-dnspython python-ldb python-minimal\n  python-ntdb python-samba python-talloc python-tdb python2.7\n  python2.7-minimal rename rpcbind rsync samba samba-common samba-common-bin\n  samba-dsdb-modules samba-libs samba-vfs-modules sgml-base shared-mime-info\n  socat tcpd tdb-tools ucf update-inetd winbind xauth xdg-user-dirs xml-core\n0 upgraded, 172 newly installed, 0 to remove and 0 not upgraded.\n```\n\n</details>\n\nNot sure how to improve this - maybe better caching? Do we actually want to install these extra packages? Should we use a better base image than `debian:jessie`?\n\ncc @jbeda @luxas \n",
  "closed_at": "2017-08-03T05:32:50Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 14,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/35058/comments",
  "created_at": "2016-10-18T19:10:08Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/35058/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/35058",
  "id": 183776322,
  "labels": [
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 125299793,
      "name": "area/build-release",
      "node_id": "MDU6TGFiZWwxMjUyOTk3OTM=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/build-release"
    },
    {
      "color": "0052cc",
      "default": false,
      "description": null,
      "id": 136601472,
      "name": "area/controller-manager",
      "node_id": "MDU6TGFiZWwxMzY2MDE0NzI=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/controller-manager"
    },
    {
      "color": "0052cc",
      "default": false,
      "description": "Issues or PRs related to the Release Engineering subproject",
      "id": 268190668,
      "name": "area/release-eng",
      "node_id": "MDU6TGFiZWwyNjgxOTA2Njg=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/area/release-eng"
    },
    {
      "color": "006b75",
      "default": true,
      "description": "Denotes an issue that needs help from a contributor. Must meet \"help wanted\" guidelines.",
      "id": 433686790,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWw0MzM2ODY3OTA=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/help%20wanted"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Release.",
      "id": 614023989,
      "name": "sig/release",
      "node_id": "MDU6TGFiZWw2MTQwMjM5ODk=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/release"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/35058/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2019-08-26T17:23:28Z",
    "closed_issues": 1061,
    "created_at": "2017-05-26T17:18:43Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/169553?v=4",
      "events_url": "https://api.github.com/users/timothysc/events{/privacy}",
      "followers_url": "https://api.github.com/users/timothysc/followers",
      "following_url": "https://api.github.com/users/timothysc/following{/other_user}",
      "gists_url": "https://api.github.com/users/timothysc/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/timothysc",
      "id": 169553,
      "login": "timothysc",
      "node_id": "MDQ6VXNlcjE2OTU1Mw==",
      "organizations_url": "https://api.github.com/users/timothysc/orgs",
      "received_events_url": "https://api.github.com/users/timothysc/received_events",
      "repos_url": "https://api.github.com/users/timothysc/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/timothysc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timothysc/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/timothysc"
    },
    "description": "",
    "due_on": "2017-09-27T07:00:00Z",
    "html_url": "https://github.com/kubernetes/kubernetes/milestone/36",
    "id": 2545392,
    "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/36/labels",
    "node_id": "MDk6TWlsZXN0b25lMjU0NTM5Mg==",
    "number": 36,
    "open_issues": 0,
    "state": "closed",
    "title": "v1.8",
    "updated_at": "2019-08-26T17:23:28Z",
    "url": "https://api.github.com/repos/kubernetes/kubernetes/milestones/36"
  },
  "node_id": "MDU6SXNzdWUxODM3NzYzMjI=",
  "number": 35058,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "hyperkube images take forever to build",
  "updated_at": "2017-08-03T05:32:50Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/35058",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/8061296?v=4",
    "events_url": "https://api.github.com/users/ixdy/events{/privacy}",
    "followers_url": "https://api.github.com/users/ixdy/followers",
    "following_url": "https://api.github.com/users/ixdy/following{/other_user}",
    "gists_url": "https://api.github.com/users/ixdy/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ixdy",
    "id": 8061296,
    "login": "ixdy",
    "node_id": "MDQ6VXNlcjgwNjEyOTY=",
    "organizations_url": "https://api.github.com/users/ixdy/orgs",
    "received_events_url": "https://api.github.com/users/ixdy/received_events",
    "repos_url": "https://api.github.com/users/ixdy/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ixdy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ixdy/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ixdy"
  }
}