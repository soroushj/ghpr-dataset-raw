{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "**Is this a request for help?** (If yes, you should use our troubleshooting guide and community support channels, see http://kubernetes.io/docs/troubleshooting/.):\r\nno\r\n\r\n**What keywords did you search in Kubernetes issues before filing this one?** (If you have found any duplicates, you should instead reply there.):\r\n\r\n---\r\n\r\n**Is this a BUG REPORT or FEATURE REQUEST?** (choose one):\r\nBug Report\r\n\r\n**Kubernetes version** (use `kubectl version`):\r\n`Kubernetes v1.5.1`\r\n\r\n**Environment**:\r\n- **Cloud provider or hardware configuration**: Openstack\r\n- **OS** (e.g. from /etc/os-release):  CentOS Linux 7 (Core) v1608\r\n- **Kernel** (e.g. `uname -a`): `Linux k8s-cluster-2-node-fjhcjjzz 3.10.0-327.28.3.el7.x86_64 #1 SMP Thu Aug 18 19:05:49 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux`\r\n- **Install tools**: openstack-heat\r\n- **Others**:\r\n\r\n\r\n**What happened**:\r\nKeystone v3 authentication by user name [requires the domain (name or ID)](http://developer.openstack.org/api-ref/identity/v3/index.html?expanded=password-authentication-with-scoped-authorization-detail). If `domain-name` is not provided kubelet fails as seen below:\r\n  \r\n```\r\nkubelet: error: failed to run Kubelet: could not init cloud provider \"openstack\": You must provide exactly one of DomainID or DomainName to authenticate by Username\r\nsystemd: kubelet.service: main process exited, code=exited, status=1/FAILURE\r\nsystemd: Unit kubelet.service entered failed state.\r\nsystemd: kubelet.service failed.\r\n```\r\n\r\n**What you expected to happen**:\r\nAuthenticate correctly.\r\n\r\nTo solve this by passing a new`OS_USER_DOMAIN_NAME` environment variable through openstack-heat's heat-templates to write it as `domain-name` in `/srv/kubernetes/openstack.conf`.  (Will issue PR)\r\n\r\n**How to reproduce it** (as minimally and precisely as possible):\r\nrun `. ../openrc.sh && KUBERNETES_PROVIDER=openstack-heat ./cluster/kube-up.sh` with a keystone v3 setup\r\n\r\n**Anything else do we need to know**:\r\n\r\n",
  "closed_at": "2017-01-26T03:30:32Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39783/comments",
  "created_at": "2017-01-12T05:58:52Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39783/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/39783",
  "id": 200285073,
  "labels": [],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39783/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMDAyODUwNzM=",
  "number": 39783,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "'openstack-heat' cluster provider misses 'domain-name' for Keystone v3",
  "updated_at": "2017-01-26T03:30:32Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/39783",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/1680390?v=4",
    "events_url": "https://api.github.com/users/micmro/events{/privacy}",
    "followers_url": "https://api.github.com/users/micmro/followers",
    "following_url": "https://api.github.com/users/micmro/following{/other_user}",
    "gists_url": "https://api.github.com/users/micmro/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/micmro",
    "id": 1680390,
    "login": "micmro",
    "node_id": "MDQ6VXNlcjE2ODAzOTA=",
    "organizations_url": "https://api.github.com/users/micmro/orgs",
    "received_events_url": "https://api.github.com/users/micmro/received_events",
    "repos_url": "https://api.github.com/users/micmro/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/micmro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/micmro/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/micmro"
  }
}