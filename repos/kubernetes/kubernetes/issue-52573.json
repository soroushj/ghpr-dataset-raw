{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "/kind Bug\r\n\r\nA Volume can escape attach detach contoller for various reasons. i.e - even though volume is attached to a node, volume may not be present in actual state of world of A/D Controller.\r\n\r\nFor example:\r\n\r\n1. User started a Pod `P` with PVC `VC` at time t1.\r\n2. For some reason - `VC` was stuck in `waitForAttach` call on controller for 1 hour.\r\n3. In meanwhile user gives up and deletes the Pod.\r\n4. Attach eventually succeeds but `WaitForAttach`  already gave up after waiting for 30 minutes and hence this volume never gets added to Actual State of World.\r\n \r\n\r\nNow this PVC can not be used again without manual intervention from an admin. There are in fact several cases that can cause this problem.\r\n\r\nI am thinking of doing opposite of mechanism proposed in https://github.com/kubernetes/kubernetes/pull/34859 issue. I am thinking that, we can periodically poll all PVCs and verify if their volumes are attached to nodes, then we can go ahead and add the volume in Actual State of World of A/D Controller. We will also update `node.Status.AttachedVolume` with same information.\r\n\r\nThis will make sure, depending on whether volume indeed needs to be present in node (based on state in desired state of world), it could be detached properly.\r\n\r\ncc @kubernetes/sig-storage-api-reviews \r\n",
  "closed_at": "2017-11-17T08:18:20Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/13653959?v=4",
    "events_url": "https://api.github.com/users/k8s-github-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-github-robot/followers",
    "following_url": "https://api.github.com/users/k8s-github-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-github-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-github-robot",
    "id": 13653959,
    "login": "k8s-github-robot",
    "node_id": "MDQ6VXNlcjEzNjUzOTU5",
    "organizations_url": "https://api.github.com/users/k8s-github-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-github-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-github-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-github-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-github-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-github-robot"
  },
  "comments": 6,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/52573/comments",
  "created_at": "2017-09-15T21:51:25Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/52573/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/52573",
  "id": 258173987,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to adding, removing, or otherwise changing an API",
      "id": 261005360,
      "name": "kind/api-change",
      "node_id": "MDU6TGFiZWwyNjEwMDUzNjA=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/api-change"
    },
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/52573/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNTgxNzM5ODc=",
  "number": 52573,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Add support for verifying attached but desired to be detached PVCs ",
  "updated_at": "2017-11-17T08:18:20Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/52573",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/278?v=4",
    "events_url": "https://api.github.com/users/gnufied/events{/privacy}",
    "followers_url": "https://api.github.com/users/gnufied/followers",
    "following_url": "https://api.github.com/users/gnufied/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnufied/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/gnufied",
    "id": 278,
    "login": "gnufied",
    "node_id": "MDQ6VXNlcjI3OA==",
    "organizations_url": "https://api.github.com/users/gnufied/orgs",
    "received_events_url": "https://api.github.com/users/gnufied/received_events",
    "repos_url": "https://api.github.com/users/gnufied/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/gnufied/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnufied/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/gnufied"
  }
}