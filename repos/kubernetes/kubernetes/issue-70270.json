{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/980082?v=4",
    "events_url": "https://api.github.com/users/liggitt/events{/privacy}",
    "followers_url": "https://api.github.com/users/liggitt/followers",
    "following_url": "https://api.github.com/users/liggitt/following{/other_user}",
    "gists_url": "https://api.github.com/users/liggitt/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/liggitt",
    "id": 980082,
    "login": "liggitt",
    "node_id": "MDQ6VXNlcjk4MDA4Mg==",
    "organizations_url": "https://api.github.com/users/liggitt/orgs",
    "received_events_url": "https://api.github.com/users/liggitt/received_events",
    "repos_url": "https://api.github.com/users/liggitt/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/liggitt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/liggitt/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/liggitt"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/980082?v=4",
      "events_url": "https://api.github.com/users/liggitt/events{/privacy}",
      "followers_url": "https://api.github.com/users/liggitt/followers",
      "following_url": "https://api.github.com/users/liggitt/following{/other_user}",
      "gists_url": "https://api.github.com/users/liggitt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/liggitt",
      "id": 980082,
      "login": "liggitt",
      "node_id": "MDQ6VXNlcjk4MDA4Mg==",
      "organizations_url": "https://api.github.com/users/liggitt/orgs",
      "received_events_url": "https://api.github.com/users/liggitt/received_events",
      "repos_url": "https://api.github.com/users/liggitt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/liggitt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liggitt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/liggitt"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "**What happened**:\r\n1. We used to run k8s1.9, which has volume subpath feature enabled.\r\n https://kubernetes.io/docs/concepts/storage/volumes/#using-subpath\r\n\r\nThen user create pods with volume subpath.\r\nUser's pods have finalizers.\r\n\r\n2. Since we met many issues with this feature at k8s 1.9.  \r\nrelated link: https://github.com/kubernetes/kubernetes/issues/61563\r\nWe decide to disable this feature when we upgrade to k8s 1.10\r\n\r\n3. After we upgrade to k8s 1.10, some of the pods which use volumepath feature are still running on the cluster. It has subpath field in their pod spec, but now  we can't remove the pod's finalizer,  because of\r\n\r\n```\r\nErr:Pod \\\"api-xxxx\\\" is invalid: spec.containers[0].volumeMounts.subPath: Forbidden: subPath is disabled by feature-gate\\n\",\"stream\":\"stderr\",\"time\":\"2018-10-18T18:48:25.343285188Z\"\r\n```\r\n4. So the pod will stuck at terminating and can't be deleted.\r\n\r\n**What you expected to happen**:\r\nThe pod can be deleted. \r\nThe api validation should handle this case.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n1. In the cluster, enable volume subpath feature\r\n2. Create a pod with this feature.\r\n3. Add a finalizer to the pod\r\n4. Disable this feature \r\n5. Delete the pod , and remove the finalizer manually\r\n6. Pod stuck at `terminating`\r\n \r\n**Anything else we need to know?**:\r\nI think issue should happens for many of the features , not just volume subpath\r\n@msau42 's comments is valuable for solve this kind of issue.\r\nhttps://github.com/kubernetes/kubernetes/pull/65829#issuecomment-432441449\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`):\r\n- Cloud provider or hardware configuration:\r\n- OS (e.g. from /etc/os-release):\r\n- Kernel (e.g. `uname -a`):\r\n- Install tools:\r\n- Others:\r\n\r\n<!-- DO NOT EDIT BELOW THIS LINE -->\r\n/kind bug",
  "closed_at": "2018-12-18T19:16:51Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/70270/comments",
  "created_at": "2018-10-26T03:30:06Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/70270/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/70270",
  "id": 374213033,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG API Machinery.",
      "id": 173493835,
      "name": "sig/api-machinery",
      "node_id": "MDU6TGFiZWwxNzM0OTM4MzU=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/api-machinery"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/70270/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNzQyMTMwMzM=",
  "number": 70270,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "Pod can't be deleted because  of feature disabled",
  "updated_at": "2018-12-18T19:16:51Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/70270",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/7530735?v=4",
    "events_url": "https://api.github.com/users/wenlxie/events{/privacy}",
    "followers_url": "https://api.github.com/users/wenlxie/followers",
    "following_url": "https://api.github.com/users/wenlxie/following{/other_user}",
    "gists_url": "https://api.github.com/users/wenlxie/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/wenlxie",
    "id": 7530735,
    "login": "wenlxie",
    "node_id": "MDQ6VXNlcjc1MzA3MzU=",
    "organizations_url": "https://api.github.com/users/wenlxie/orgs",
    "received_events_url": "https://api.github.com/users/wenlxie/received_events",
    "repos_url": "https://api.github.com/users/wenlxie/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/wenlxie/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wenlxie/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/wenlxie"
  }
}