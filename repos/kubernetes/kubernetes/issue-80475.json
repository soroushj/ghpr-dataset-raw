{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/15641246?v=4",
    "events_url": "https://api.github.com/users/matte21/events{/privacy}",
    "followers_url": "https://api.github.com/users/matte21/followers",
    "following_url": "https://api.github.com/users/matte21/following{/other_user}",
    "gists_url": "https://api.github.com/users/matte21/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/matte21",
    "id": 15641246,
    "login": "matte21",
    "node_id": "MDQ6VXNlcjE1NjQxMjQ2",
    "organizations_url": "https://api.github.com/users/matte21/orgs",
    "received_events_url": "https://api.github.com/users/matte21/received_events",
    "repos_url": "https://api.github.com/users/matte21/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/matte21/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matte21/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/matte21"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/15641246?v=4",
      "events_url": "https://api.github.com/users/matte21/events{/privacy}",
      "followers_url": "https://api.github.com/users/matte21/followers",
      "following_url": "https://api.github.com/users/matte21/following{/other_user}",
      "gists_url": "https://api.github.com/users/matte21/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/matte21",
      "id": 15641246,
      "login": "matte21",
      "node_id": "MDQ6VXNlcjE1NjQxMjQ2",
      "organizations_url": "https://api.github.com/users/matte21/orgs",
      "received_events_url": "https://api.github.com/users/matte21/received_events",
      "repos_url": "https://api.github.com/users/matte21/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/matte21/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matte21/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/matte21"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "**What happened**:\r\nWhile studying https://github.com/kubernetes/kubernetes/blob/255a73ffc64d1c4e0f9a378ebf8d0005edfe6962/pkg/controller/volume/pvcprotection/pvc_protection_controller.go to address https://github.com/kubernetes/kubernetes/issues/75980 I noticed another error. When the PVC protection controller receives an update notification for a pod, it enqueues all the PVCs referenced by the new version of the Pod, and it ignores the old version of the pod:\r\nhttps://github.com/kubernetes/kubernetes/blob/255a73ffc64d1c4e0f9a378ebf8d0005edfe6962/pkg/controller/volume/pvcprotection/pvc_protection_controller.go#L87-L89\r\nThat is fine as long as the two versions are for the same Pod. But if the update notification masks a delete followed by a create with the same namespaced name and the deleted Pod was blocking deletion of a PVC which is not referenced by the new Pod the finalizer will incorrectly not be removed from the PVC, which in turn will not be deleted even if no pod is using it.  \r\n\r\n**What you expected to happen**:\r\nI expected https://github.com/kubernetes/kubernetes/blob/255a73ffc64d1c4e0f9a378ebf8d0005edfe6962/pkg/controller/volume/pvcprotection/pvc_protection_controller.go to examine the PVCs referenced by a deleted pod even if the deletion is conflated with a creation in a single update event.\r\n\r\n**Anything else we need to know?**:\r\n\r\n",
  "closed_at": "2019-07-26T12:32:00Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/20407524?v=4",
    "events_url": "https://api.github.com/users/k8s-ci-robot/events{/privacy}",
    "followers_url": "https://api.github.com/users/k8s-ci-robot/followers",
    "following_url": "https://api.github.com/users/k8s-ci-robot/following{/other_user}",
    "gists_url": "https://api.github.com/users/k8s-ci-robot/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/k8s-ci-robot",
    "id": 20407524,
    "login": "k8s-ci-robot",
    "node_id": "MDQ6VXNlcjIwNDA3NTI0",
    "organizations_url": "https://api.github.com/users/k8s-ci-robot/orgs",
    "received_events_url": "https://api.github.com/users/k8s-ci-robot/received_events",
    "repos_url": "https://api.github.com/users/k8s-ci-robot/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/k8s-ci-robot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/k8s-ci-robot/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/k8s-ci-robot"
  },
  "comments": 7,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/80475/comments",
  "created_at": "2019-07-23T10:35:13Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/80475/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/80475",
  "id": 471617298,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/80475/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0NzE2MTcyOTg=",
  "number": 80475,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "PVC protection controller can fail to remove finalizer from PVC even if no pod is using it",
  "updated_at": "2019-07-26T12:32:00Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/80475",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/15641246?v=4",
    "events_url": "https://api.github.com/users/matte21/events{/privacy}",
    "followers_url": "https://api.github.com/users/matte21/followers",
    "following_url": "https://api.github.com/users/matte21/following{/other_user}",
    "gists_url": "https://api.github.com/users/matte21/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/matte21",
    "id": 15641246,
    "login": "matte21",
    "node_id": "MDQ6VXNlcjE1NjQxMjQ2",
    "organizations_url": "https://api.github.com/users/matte21/orgs",
    "received_events_url": "https://api.github.com/users/matte21/received_events",
    "repos_url": "https://api.github.com/users/matte21/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/matte21/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matte21/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/matte21"
  }
}