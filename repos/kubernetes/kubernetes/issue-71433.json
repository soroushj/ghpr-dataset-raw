{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "<!-- Please use this template while reporting a bug and provide as much info as possible. Not doing so may result in your bug not being addressed in a timely manner. Thanks!-->\r\n\r\n**What happened**:\r\nFrom https://github.com/kubernetes/kubernetes/issues/71383#issuecomment-441796126, it took around a minute for the CSI plugin to register. It would be good to understand why it took so long and if it's normal/expected.\r\n\r\n> Timeline of events:\r\n> \r\n> Test pod started getting processed by kubelet:\r\n> ```\r\n> I1126 15:27:34.537403    1446 config.go:414] Receiving a new pod \"pod-subpath-test-csi-hostpath-dynamicpv-mgnk_e2e-tests-csi-volumes-92vsl(cc5409be-f18f-11e8-9a1b-42010a800002)\"\r\n> ```\r\n> \r\n> It took a minute after the test pod was created for the csi driver to finish registering and mount to succeed, and then subpath event to trigger:\r\n> ```\r\n> I1126 15:28:32.392198    1446 csi_plugin.go:116] kubernetes.io/csi: Trying to validate a new CSI Driver with name: csi-hostpath-e2e-tests-csi-volumes-92vsl endpoint: /var/lib/kubelet/plugins/csi-hostpath-e2e-tests-csi-volumes-92vsl/csi.sock versions: 1.0.0, foundInDeprecatedDir: false\r\n> I1126 15:28:32.392254    1446 csi_plugin.go:137] kubernetes.io/csi: Register new plugin with name: csi-hostpath-e2e-tests-csi-volumes-92vsl at endpoint: /var/lib/kubelet/plugins/csi-hostpath-e2e-tests-csi-volumes-92vsl/csi.sock\r\n> \r\n> I1126 15:28:32.433217    1446 operation_generator.go:567] MountVolume.SetUp succeeded for volume \"pvc-c9e516f1-f18f-11e8-9a1b-42010a800002\" (UniqueName: \"kubernetes.io/csi/csi-hostpath-e2e-tests-csi-volumes-92vsl^cbfcc214-f18f-11e8-9505-42010a800005\") pod \"pod-subpath-test-csi-hostpath-dynamicpv-mgnk\" (UID: \"cc5409be-f18f-11e8-9a1b-42010a800002\")\r\n> I1126 15:28:32.465509    1446 volume_manager.go:383] All volumes are attached and mounted for pod \"pod-subpath-test-csi-hostpath-dynamicpv-mgnk_e2e-tests-csi-volumes-92vsl(cc5409be-f18f-11e8-9a1b-42010a800002)\"\r\n> I1126 15:28:34.082064    1446 server.go:459] Event(v1.ObjectReference{Kind:\"Pod\", Namespace:\"e2e-tests-csi-volumes-92vsl\", Name:\"pod-subpath-test-csi-hostpath-dynamicpv-mgnk\", UID:\"cc5409be-f18f-11e8-9a1b-42010a800002\", APIVersion:\"v1\", ResourceVersion:\"47363\", FieldPath:\"spec.containers{test-container-subpath-csi-hostpath-dynamicpv-mgnk}\"}): type: 'Warning' reason: 'Failed' Error: failed to prepare subPath for volumeMount \"test-volume\" of container \"test-container-subpath-csi-hostpath-dynamicpv-mgnk\"\r\n> ```\r\n> \r\n> So #71428 should address the issue.  I was initially confused because the test logs didn't show the subpath event for some reason\r\n\r\n\r\n@kubernetes/sig-storage-bugs \r\n\r\n<!-- DO NOT EDIT BELOW THIS LINE -->\r\n/kind bug",
  "closed_at": "2018-11-26T23:48:55Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/10052848?v=4",
    "events_url": "https://api.github.com/users/saad-ali/events{/privacy}",
    "followers_url": "https://api.github.com/users/saad-ali/followers",
    "following_url": "https://api.github.com/users/saad-ali/following{/other_user}",
    "gists_url": "https://api.github.com/users/saad-ali/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/saad-ali",
    "id": 10052848,
    "login": "saad-ali",
    "node_id": "MDQ6VXNlcjEwMDUyODQ4",
    "organizations_url": "https://api.github.com/users/saad-ali/orgs",
    "received_events_url": "https://api.github.com/users/saad-ali/received_events",
    "repos_url": "https://api.github.com/users/saad-ali/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/saad-ali/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/saad-ali/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/saad-ali"
  },
  "comments": 6,
  "comments_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71433/comments",
  "created_at": "2018-11-26T21:12:48Z",
  "events_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71433/events",
  "html_url": "https://github.com/kubernetes/kubernetes/issues/71433",
  "id": 384512371,
  "labels": [
    {
      "color": "e11d21",
      "default": false,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 105146071,
      "name": "kind/bug",
      "node_id": "MDU6TGFiZWwxMDUxNDYwNzE=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/kind/bug"
    },
    {
      "color": "d2b48c",
      "default": false,
      "description": "Categorizes an issue or PR as relevant to SIG Storage.",
      "id": 169428334,
      "name": "sig/storage",
      "node_id": "MDU6TGFiZWwxNjk0MjgzMzQ=",
      "url": "https://api.github.com/repos/kubernetes/kubernetes/labels/sig/storage"
    }
  ],
  "labels_url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71433/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzODQ1MTIzNzE=",
  "number": 71433,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/kubernetes/kubernetes",
  "state": "closed",
  "title": "CSI plugin registration can be slow",
  "updated_at": "2018-11-28T16:32:31Z",
  "url": "https://api.github.com/repos/kubernetes/kubernetes/issues/71433",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/24448061?v=4",
    "events_url": "https://api.github.com/users/msau42/events{/privacy}",
    "followers_url": "https://api.github.com/users/msau42/followers",
    "following_url": "https://api.github.com/users/msau42/following{/other_user}",
    "gists_url": "https://api.github.com/users/msau42/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/msau42",
    "id": 24448061,
    "login": "msau42",
    "node_id": "MDQ6VXNlcjI0NDQ4MDYx",
    "organizations_url": "https://api.github.com/users/msau42/orgs",
    "received_events_url": "https://api.github.com/users/msau42/received_events",
    "repos_url": "https://api.github.com/users/msau42/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/msau42/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/msau42/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/msau42"
  }
}