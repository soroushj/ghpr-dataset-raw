{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "Hi envoy-api shepards,\r\n\r\nGiven the recent improvement to the golang APIs via #8003 and the upcoming goproto compatible version of go-control-plane via envoyproxy/go-control-plane#213, I wanted to propose another change: Is it possible that we could check in generate golang protos into the `api/` folder?\r\n\r\nMost golang code uses the built-in go build system instead of Bazel. This is a standard in the open-source golang community. This means that the generated golang protos (.pb.go files) must be checked into these repos, allowing consumers to depend upon them and build them using the go build system.\r\n\r\nCurrently, envoy's api repository does not have the generated golang protos. Instead, both [go-control-plane/envoy](https://github.com/envoyproxy/go-control-plane/tree/master/envoy) and [gprc-go/xds/internal/proto/envoy](https://github.com/grpc/grpc-go/tree/master/xds/internal/proto/envoy) contain the generated envoy golang protos. This is a problem because:\r\n\r\n1. Each repo needs to manually update their generated protos everytime any protos in envoy are updated\r\n2. There is no single source-of-truth for generated protos. We could modify either go-control-plane or grpc-go to serve as the SOT, but it would bring in more dependencies than required. The ideal solution is to have the data-plane-api be the SOT.\r\n3. We recently split the UDPA apis into cncf/udpa. With this change, grpc-go was also forced to add generation for the UDPA protos. [Here are the generated protos](https://github.com/grpc/grpc-go/tree/master/xds/internal/proto/udpa) in grpc-go. Once again, this breaks the single source-of-truth.\r\n4. In the worst case, it may be impossible for external golang code to import both go-control-plane and grpc-go due to \"duplicate proto type registered\" errors. This would be extremely painful to solve.\r\n\r\nChecking in generated files is OK for golang protos. Other than go-control-plane and grpc-go, some other repositories also follow the same structure for non-envoy protos:\r\n\r\n- census-instrumentation/opencensus-proto in the [gen-go/](https://github.com/census-instrumentation/opencensus-proto/tree/master/gen-go) folder\r\n- googleapis/go-genproto in the [googleapis/](https://github.com/googleapis/go-genproto/tree/master/googleapis) folder\r\n\r\nIt would be ideal to have golang protos auto-generated and checked-in to the `api/` folder whenever any of the underlying protos files are updated. Proto generation would occur with `protoc` using grpc and protoc-gen-validate.\r\n\r\nI know that envoy primarily supports C++, but this change would help drive golang adoption for the control plane.",
  "closed_at": "2019-09-19T03:51:03Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/10914751?v=4",
    "events_url": "https://api.github.com/users/htuch/events{/privacy}",
    "followers_url": "https://api.github.com/users/htuch/followers",
    "following_url": "https://api.github.com/users/htuch/following{/other_user}",
    "gists_url": "https://api.github.com/users/htuch/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/htuch",
    "id": 10914751,
    "login": "htuch",
    "node_id": "MDQ6VXNlcjEwOTE0NzUx",
    "organizations_url": "https://api.github.com/users/htuch/orgs",
    "received_events_url": "https://api.github.com/users/htuch/received_events",
    "repos_url": "https://api.github.com/users/htuch/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/htuch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/htuch/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/htuch"
  },
  "comments": 9,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/8151/comments",
  "created_at": "2019-09-04T21:24:51Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/8151/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/8151",
  "id": 489406171,
  "labels": [
    {
      "color": "0e8a16",
      "default": false,
      "description": "",
      "id": 646547909,
      "name": "api/v2",
      "node_id": "MDU6TGFiZWw2NDY1NDc5MDk=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/api/v2"
    },
    {
      "color": "bfd4f2",
      "default": false,
      "description": "Major version release @ end of Q3 2019",
      "id": 1490900933,
      "name": "api/v3",
      "node_id": "MDU6TGFiZWwxNDkwOTAwOTMz",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/api/v3"
    },
    {
      "color": "5319e7",
      "default": false,
      "description": "",
      "id": 545563713,
      "name": "area/build",
      "node_id": "MDU6TGFiZWw1NDU1NjM3MTM=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/build"
    },
    {
      "color": "c5def5",
      "default": false,
      "description": "Needs design doc/proposal before implementation",
      "id": 620444894,
      "name": "design proposal",
      "node_id": "MDU6TGFiZWw2MjA0NDQ4OTQ=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/design%20proposal"
    },
    {
      "color": "84b6eb",
      "default": true,
      "description": "Feature requests. Not bugs or questions.",
      "id": 421403909,
      "name": "enhancement",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDk=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/enhancement"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/8151/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2019-11-03T23:59:23Z",
    "closed_issues": 73,
    "created_at": "2019-07-03T16:32:43Z",
    "creator": {
      "avatar_url": "https://avatars3.githubusercontent.com/u/6305260?v=4",
      "events_url": "https://api.github.com/users/mattklein123/events{/privacy}",
      "followers_url": "https://api.github.com/users/mattklein123/followers",
      "following_url": "https://api.github.com/users/mattklein123/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattklein123/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mattklein123",
      "id": 6305260,
      "login": "mattklein123",
      "node_id": "MDQ6VXNlcjYzMDUyNjA=",
      "organizations_url": "https://api.github.com/users/mattklein123/orgs",
      "received_events_url": "https://api.github.com/users/mattklein123/received_events",
      "repos_url": "https://api.github.com/users/mattklein123/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mattklein123/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattklein123/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mattklein123"
    },
    "description": "",
    "due_on": null,
    "html_url": "https://github.com/envoyproxy/envoy/milestone/11",
    "id": 4463348,
    "labels_url": "https://api.github.com/repos/envoyproxy/envoy/milestones/11/labels",
    "node_id": "MDk6TWlsZXN0b25lNDQ2MzM0OA==",
    "number": 11,
    "open_issues": 0,
    "state": "closed",
    "title": "1.12.0",
    "updated_at": "2019-11-09T17:21:27Z",
    "url": "https://api.github.com/repos/envoyproxy/envoy/milestones/11"
  },
  "node_id": "MDU6SXNzdWU0ODk0MDYxNzE=",
  "number": 8151,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Proposal: Check-in generated golang protos in envoy/api",
  "updated_at": "2019-09-19T03:51:03Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/8151",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/11142171?v=4",
    "events_url": "https://api.github.com/users/nareddyt/events{/privacy}",
    "followers_url": "https://api.github.com/users/nareddyt/followers",
    "following_url": "https://api.github.com/users/nareddyt/following{/other_user}",
    "gists_url": "https://api.github.com/users/nareddyt/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/nareddyt",
    "id": 11142171,
    "login": "nareddyt",
    "node_id": "MDQ6VXNlcjExMTQyMTcx",
    "organizations_url": "https://api.github.com/users/nareddyt/orgs",
    "received_events_url": "https://api.github.com/users/nareddyt/received_events",
    "repos_url": "https://api.github.com/users/nareddyt/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/nareddyt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nareddyt/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/nareddyt"
  }
}