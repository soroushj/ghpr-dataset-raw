{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "**Issue Template**\r\n\r\n*Title:  Add a `FileBasedMetadataCredentialsPlugin` to load credential from a file as CallCredentials*\r\n\r\n*Description*:\r\n\r\n**What we want to do**\r\nEnvoy recently adds the support,  to implement customized CallCredentials as MetadataCredentialsPlugin, https://github.com/envoyproxy/envoy/pull/3161.\r\n\r\nWe'd like to add an implementation of `FileBasedMetadataCredentialsPlugin` (just an illustrative name)which can:\r\n\r\n1. Configured with a path to the credentials file.\r\n1. When `FileBasedMetadataCredentialPlugin::GetMetadata` is invoked, the plugin reads the credential file, and populates the metadata with the file's content.\r\n1. The outcome is that every xDS request includes this credential as metadata header.\r\n\r\n**Use Case**\r\nFor our use case,\r\n1. We run envoy on Kubernetes. And Kubernetes mounts [a credential file](https://github.com/mikedanese/community/blob/6e209490c441d8df84b6b5d8e352c0e2491a41bd/contributors/design-proposals/auth/bound-service-account-tokens.md)(in format of a JWT) into the envoy container file system.\r\n1. Envoy sends SDS request to an identity server to get Istio key and certificate.\r\n1. The SDS service will be configured with `FileBasedMetadataCredentialsPlugin` proposed above, and load the credential from the file, put in the metadata header.\r\n1. The identity server then can verify the credential and authenticate the envoy, issue the key cert.\r\n\r\nThat describes Istio workload identity provisioning process. However,\r\n\r\n- The JWT credential is provided by native Kubernetes, anyone who wants  make Envoy xDS requests including this Kubernetes-credentials can benefit from such feature.\r\n- Potentially, it can be used beyong Kubernetes as long as a platform can provide a bootstrap credential as a file.\r\n\r\n[optional *Relevant Links*:]\r\n\r\n1. [Kubernetes JWT design doc](https://github.com/mikedanese/community/blob/6e209490c441d8df84b6b5d8e352c0e2491a41bd/contributors/design-proposals/auth/bound-service-account-tokens.md)\r\n",
  "closed_at": "2018-05-31T19:18:43Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/10914751?v=4",
    "events_url": "https://api.github.com/users/htuch/events{/privacy}",
    "followers_url": "https://api.github.com/users/htuch/followers",
    "following_url": "https://api.github.com/users/htuch/following{/other_user}",
    "gists_url": "https://api.github.com/users/htuch/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/htuch",
    "id": 10914751,
    "login": "htuch",
    "node_id": "MDQ6VXNlcjEwOTE0NzUx",
    "organizations_url": "https://api.github.com/users/htuch/orgs",
    "received_events_url": "https://api.github.com/users/htuch/received_events",
    "repos_url": "https://api.github.com/users/htuch/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/htuch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/htuch/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/htuch"
  },
  "comments": 4,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/3392/comments",
  "created_at": "2018-05-15T22:06:06Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/3392/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/3392",
  "id": 323400412,
  "labels": [
    {
      "color": "84b6eb",
      "default": true,
      "description": "Feature requests. Not bugs or questions.",
      "id": 421403909,
      "name": "enhancement",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDk=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/enhancement"
    },
    {
      "color": "fbca04",
      "default": true,
      "description": "Needs help!",
      "id": 645516726,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWw2NDU1MTY3MjY=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/help%20wanted"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/3392/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMjM0MDA0MTI=",
  "number": 3392,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "GrpcService CallCredentials loads credentials from filesystem",
  "updated_at": "2018-05-31T19:18:43Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/3392",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/1661831?v=4",
    "events_url": "https://api.github.com/users/incfly/events{/privacy}",
    "followers_url": "https://api.github.com/users/incfly/followers",
    "following_url": "https://api.github.com/users/incfly/following{/other_user}",
    "gists_url": "https://api.github.com/users/incfly/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/incfly",
    "id": 1661831,
    "login": "incfly",
    "node_id": "MDQ6VXNlcjE2NjE4MzE=",
    "organizations_url": "https://api.github.com/users/incfly/orgs",
    "received_events_url": "https://api.github.com/users/incfly/received_events",
    "repos_url": "https://api.github.com/users/incfly/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/incfly/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/incfly/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/incfly"
  }
}