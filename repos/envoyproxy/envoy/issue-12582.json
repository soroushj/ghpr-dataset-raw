{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "**Background**\r\nThe `format_json` support was implemented in #2692 but it only allows flat single-level objects as JSON output. As I understand from the discussion on the issue, nesting was left out because there was no clear need for it at the time, but the API was designed to be future proof to support it.\r\n\r\n**Rational**\r\nAt Wikimedia, we ingest all the access logs into Kafka, funneling them into Hadoop for analytics purposes. All of our logs have a schema, and unluckily, our schema has nested objects. We would like to have envoy access logs conform to the common schema patterns we have. \r\n\r\nThere are endless possibilities on how to convert flat JSON structure into a nested one when upon ingestion, but by far the cleanest option is to support nested structures in envoy natively to emit the logs in a correct format right away. In the end, I do not see any downsides in supporting nested objects, so the rational could be best described as \"why not?\".\r\n\r\n**Proposal**\r\nSupport nested JSON in `format_json` access log.\r\n\r\nIf we provide the implementation/testing/documentation, would this feature be accepted?\r\ncc @aa-stripe as an author of the original patch",
  "closed_at": "2020-08-21T16:25:22Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/53179?v=4",
    "events_url": "https://api.github.com/users/zuercher/events{/privacy}",
    "followers_url": "https://api.github.com/users/zuercher/followers",
    "following_url": "https://api.github.com/users/zuercher/following{/other_user}",
    "gists_url": "https://api.github.com/users/zuercher/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/zuercher",
    "id": 53179,
    "login": "zuercher",
    "node_id": "MDQ6VXNlcjUzMTc5",
    "organizations_url": "https://api.github.com/users/zuercher/orgs",
    "received_events_url": "https://api.github.com/users/zuercher/received_events",
    "repos_url": "https://api.github.com/users/zuercher/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/zuercher/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zuercher/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/zuercher"
  },
  "comments": 4,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12582/comments",
  "created_at": "2020-08-10T21:52:09Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12582/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/12582",
  "id": 676438492,
  "labels": [
    {
      "color": "3f890b",
      "default": false,
      "description": "",
      "id": 1890308783,
      "name": "area/access_log",
      "node_id": "MDU6TGFiZWwxODkwMzA4Nzgz",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/access_log"
    },
    {
      "color": "fbca04",
      "default": true,
      "description": "Needs help!",
      "id": 645516726,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWw2NDU1MTY3MjY=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/help%20wanted"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12582/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU2NzY0Mzg0OTI=",
  "number": 12582,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Proposal: Support nested structures JSON formatted in access_log",
  "updated_at": "2020-08-21T16:25:22Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/12582",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/814754?v=4",
    "events_url": "https://api.github.com/users/Pchelolo/events{/privacy}",
    "followers_url": "https://api.github.com/users/Pchelolo/followers",
    "following_url": "https://api.github.com/users/Pchelolo/following{/other_user}",
    "gists_url": "https://api.github.com/users/Pchelolo/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/Pchelolo",
    "id": 814754,
    "login": "Pchelolo",
    "node_id": "MDQ6VXNlcjgxNDc1NA==",
    "organizations_url": "https://api.github.com/users/Pchelolo/orgs",
    "received_events_url": "https://api.github.com/users/Pchelolo/received_events",
    "repos_url": "https://api.github.com/users/Pchelolo/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/Pchelolo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Pchelolo/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/Pchelolo"
  }
}