{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/32749078?v=4",
    "events_url": "https://api.github.com/users/davinci26/events{/privacy}",
    "followers_url": "https://api.github.com/users/davinci26/followers",
    "following_url": "https://api.github.com/users/davinci26/following{/other_user}",
    "gists_url": "https://api.github.com/users/davinci26/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/davinci26",
    "id": 32749078,
    "login": "davinci26",
    "node_id": "MDQ6VXNlcjMyNzQ5MDc4",
    "organizations_url": "https://api.github.com/users/davinci26/orgs",
    "received_events_url": "https://api.github.com/users/davinci26/received_events",
    "repos_url": "https://api.github.com/users/davinci26/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/davinci26/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/davinci26/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/davinci26"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/32749078?v=4",
      "events_url": "https://api.github.com/users/davinci26/events{/privacy}",
      "followers_url": "https://api.github.com/users/davinci26/followers",
      "following_url": "https://api.github.com/users/davinci26/following{/other_user}",
      "gists_url": "https://api.github.com/users/davinci26/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/davinci26",
      "id": 32749078,
      "login": "davinci26",
      "node_id": "MDQ6VXNlcjMyNzQ5MDc4",
      "organizations_url": "https://api.github.com/users/davinci26/orgs",
      "received_events_url": "https://api.github.com/users/davinci26/received_events",
      "repos_url": "https://api.github.com/users/davinci26/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/davinci26/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davinci26/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/davinci26"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "The use-case I\u2019d like to address is the ability to measure the rtt latency to upstreams so that this per-request rtt latency can be reported in detailed metrics.\r\n\r\nWithin the Linux TCP/IP stack, the TCP-level rtt is computed and available (like [this](https://developer.fastly.com/reference/vcl/variables/tcp-info/backend-socket-tcpi-rtt/)) via file descriptors and retrieved via `getsockopt` calls using the file descriptor value. While the Listener filters can access [this value](https://github.com/envoyproxy/envoy/blob/08464ecdc0c93846f3d039d0f0c6fed935f5bdc8/source/extensions/filters/listener/tls_inspector/tls_inspector.cc#L96), our desire is to record this value on a per-request basis.\r\n\r\nWhat do you think about having the socket file descriptor accessible via the HTTP filter callbacks? \r\n\r\nWhile one possibility would be to store this information in the Listener filter state and access it via the HTTP filter connection\u2019s StreamInfo data, there isn\u2019t a way of invoking a function in the context of the Listener filter to retrieve the TCP-level info from the underlying socket\u2019s file descriptor at the time of the request.\r\n\r\nAnother possible option is to use HTTP/2 `PING` frames to measure rtt, but this would only apply to clients that speak HTTP/2 and in our use-case, the upstreams clients control the protocol being used.\r\n\r\nThis use-case was also discussed a bit in https://github.com/envoyproxy/envoy/issues/1464.",
  "closed_at": "2020-10-23T16:01:54Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6305260?v=4",
    "events_url": "https://api.github.com/users/mattklein123/events{/privacy}",
    "followers_url": "https://api.github.com/users/mattklein123/followers",
    "following_url": "https://api.github.com/users/mattklein123/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattklein123/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mattklein123",
    "id": 6305260,
    "login": "mattklein123",
    "node_id": "MDQ6VXNlcjYzMDUyNjA=",
    "organizations_url": "https://api.github.com/users/mattklein123/orgs",
    "received_events_url": "https://api.github.com/users/mattklein123/received_events",
    "repos_url": "https://api.github.com/users/mattklein123/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mattklein123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattklein123/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mattklein123"
  },
  "comments": 19,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12305/comments",
  "created_at": "2020-07-27T13:59:25Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12305/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/12305",
  "id": 666317917,
  "labels": [
    {
      "color": "d4c5f9",
      "default": false,
      "description": "",
      "id": 1715341036,
      "name": "area/http",
      "node_id": "MDU6TGFiZWwxNzE1MzQxMDM2",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/http"
    },
    {
      "color": "e56491",
      "default": false,
      "description": "",
      "id": 1771473940,
      "name": "area/windows",
      "node_id": "MDU6TGFiZWwxNzcxNDczOTQw",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/windows"
    },
    {
      "color": "c5def5",
      "default": false,
      "description": "Needs design doc/proposal before implementation",
      "id": 620444894,
      "name": "design proposal",
      "node_id": "MDU6TGFiZWw2MjA0NDQ4OTQ=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/design%20proposal"
    },
    {
      "color": "fbca04",
      "default": true,
      "description": "Needs help!",
      "id": 645516726,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWw2NDU1MTY3MjY=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/help%20wanted"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12305/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU2NjYzMTc5MTc=",
  "number": 12305,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Per-request rtt latency metrics in HTTP filters",
  "updated_at": "2020-10-23T16:01:54Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/12305",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/435867?v=4",
    "events_url": "https://api.github.com/users/fcfort/events{/privacy}",
    "followers_url": "https://api.github.com/users/fcfort/followers",
    "following_url": "https://api.github.com/users/fcfort/following{/other_user}",
    "gists_url": "https://api.github.com/users/fcfort/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/fcfort",
    "id": 435867,
    "login": "fcfort",
    "node_id": "MDQ6VXNlcjQzNTg2Nw==",
    "organizations_url": "https://api.github.com/users/fcfort/orgs",
    "received_events_url": "https://api.github.com/users/fcfort/received_events",
    "repos_url": "https://api.github.com/users/fcfort/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/fcfort/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fcfort/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/fcfort"
  }
}