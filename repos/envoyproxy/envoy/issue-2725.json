{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/10914751?v=4",
    "events_url": "https://api.github.com/users/htuch/events{/privacy}",
    "followers_url": "https://api.github.com/users/htuch/followers",
    "following_url": "https://api.github.com/users/htuch/following{/other_user}",
    "gists_url": "https://api.github.com/users/htuch/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/htuch",
    "id": 10914751,
    "login": "htuch",
    "node_id": "MDQ6VXNlcjEwOTE0NzUx",
    "organizations_url": "https://api.github.com/users/htuch/orgs",
    "received_events_url": "https://api.github.com/users/htuch/received_events",
    "repos_url": "https://api.github.com/users/htuch/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/htuch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/htuch/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/htuch"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/10914751?v=4",
      "events_url": "https://api.github.com/users/htuch/events{/privacy}",
      "followers_url": "https://api.github.com/users/htuch/followers",
      "following_url": "https://api.github.com/users/htuch/following{/other_user}",
      "gists_url": "https://api.github.com/users/htuch/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/htuch",
      "id": 10914751,
      "login": "htuch",
      "node_id": "MDQ6VXNlcjEwOTE0NzUx",
      "organizations_url": "https://api.github.com/users/htuch/orgs",
      "received_events_url": "https://api.github.com/users/htuch/received_events",
      "repos_url": "https://api.github.com/users/htuch/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/htuch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/htuch/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/htuch"
    }
  ],
  "author_association": "MEMBER",
  "body": "We have a need for weighted LB that respects the (v2) locality weighting in addition to endpoint weighting. This needs to work initially for RR and Maglev LB, but eventually we would like any implementation to generalize to all LBs (at least at the locality level). This issue will track design discussion and implementation work. \r\n\r\nWe can weight RR via replication of hosts in the queue, at the expense of some memory use. Similarly, while populating the Maglev table, a similar approach can be taken.\r\n\r\nOne fundamental design question is whether we have true two-level hierarchical weighted LB (first pick locality, then pick endpoint within locality) or flat LB (combined locality weight and intra-locality endpoint weight for a single weight). Flat LB is conceptually simple, but may be expensive in terms of memory cost when we have a wide range of LB weights that combined weighting would imply. By having true hierarchical LB, we also get \"for free\" locality weighted LB for LBs that don't support weighting. The downside is we will need to implement at least a simple weighted locality LB and a consistent hash locality LB to support affinity and non-affinity second-level LBs.\r\n\r\nI think based on the above it makes sense to do hierarchical LB. If this makes sense, I can work on weighted RR as a first step.\r\n\r\n@mattklein123 @zuercher @alyssawilk WDYT?",
  "closed_at": "2018-04-06T20:49:11Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/10914751?v=4",
    "events_url": "https://api.github.com/users/htuch/events{/privacy}",
    "followers_url": "https://api.github.com/users/htuch/followers",
    "following_url": "https://api.github.com/users/htuch/following{/other_user}",
    "gists_url": "https://api.github.com/users/htuch/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/htuch",
    "id": 10914751,
    "login": "htuch",
    "node_id": "MDQ6VXNlcjEwOTE0NzUx",
    "organizations_url": "https://api.github.com/users/htuch/orgs",
    "received_events_url": "https://api.github.com/users/htuch/received_events",
    "repos_url": "https://api.github.com/users/htuch/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/htuch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/htuch/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/htuch"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/2725/comments",
  "created_at": "2018-03-05T21:51:41Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/2725/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/2725",
  "id": 302477727,
  "labels": [
    {
      "color": "0e8a16",
      "default": false,
      "description": "",
      "id": 646547909,
      "name": "api/v2",
      "node_id": "MDU6TGFiZWw2NDY1NDc5MDk=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/api/v2"
    },
    {
      "color": "c5def5",
      "default": false,
      "description": "Needs design doc/proposal before implementation",
      "id": 620444894,
      "name": "design proposal",
      "node_id": "MDU6TGFiZWw2MjA0NDQ4OTQ=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/design%20proposal"
    },
    {
      "color": "84b6eb",
      "default": true,
      "description": "Feature requests. Not bugs or questions.",
      "id": 421403909,
      "name": "enhancement",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDk=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/enhancement"
    },
    {
      "color": "0e8a16",
      "default": false,
      "description": null,
      "id": 527497761,
      "name": "tech debt",
      "node_id": "MDU6TGFiZWw1Mjc0OTc3NjE=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/tech%20debt"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/2725/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2018-06-23T16:17:31Z",
    "closed_issues": 70,
    "created_at": "2018-03-05T22:43:00Z",
    "creator": {
      "avatar_url": "https://avatars3.githubusercontent.com/u/6305260?v=4",
      "events_url": "https://api.github.com/users/mattklein123/events{/privacy}",
      "followers_url": "https://api.github.com/users/mattklein123/followers",
      "following_url": "https://api.github.com/users/mattklein123/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattklein123/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mattklein123",
      "id": 6305260,
      "login": "mattklein123",
      "node_id": "MDQ6VXNlcjYzMDUyNjA=",
      "organizations_url": "https://api.github.com/users/mattklein123/orgs",
      "received_events_url": "https://api.github.com/users/mattklein123/received_events",
      "repos_url": "https://api.github.com/users/mattklein123/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mattklein123/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattklein123/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mattklein123"
    },
    "description": "",
    "due_on": null,
    "html_url": "https://github.com/envoyproxy/envoy/milestone/6",
    "id": 3163642,
    "labels_url": "https://api.github.com/repos/envoyproxy/envoy/milestones/6/labels",
    "node_id": "MDk6TWlsZXN0b25lMzE2MzY0Mg==",
    "number": 6,
    "open_issues": 0,
    "state": "closed",
    "title": "1.7.0",
    "updated_at": "2018-06-23T16:17:31Z",
    "url": "https://api.github.com/repos/envoyproxy/envoy/milestones/6"
  },
  "node_id": "MDU6SXNzdWUzMDI0Nzc3Mjc=",
  "number": 2725,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Weighted load balancing",
  "updated_at": "2018-04-06T20:49:11Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/2725",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/10914751?v=4",
    "events_url": "https://api.github.com/users/htuch/events{/privacy}",
    "followers_url": "https://api.github.com/users/htuch/followers",
    "following_url": "https://api.github.com/users/htuch/following{/other_user}",
    "gists_url": "https://api.github.com/users/htuch/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/htuch",
    "id": 10914751,
    "login": "htuch",
    "node_id": "MDQ6VXNlcjEwOTE0NzUx",
    "organizations_url": "https://api.github.com/users/htuch/orgs",
    "received_events_url": "https://api.github.com/users/htuch/received_events",
    "repos_url": "https://api.github.com/users/htuch/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/htuch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/htuch/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/htuch"
  }
}