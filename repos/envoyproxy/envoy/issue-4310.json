{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/8603643?v=4",
    "events_url": "https://api.github.com/users/ggreenway/events{/privacy}",
    "followers_url": "https://api.github.com/users/ggreenway/followers",
    "following_url": "https://api.github.com/users/ggreenway/following{/other_user}",
    "gists_url": "https://api.github.com/users/ggreenway/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ggreenway",
    "id": 8603643,
    "login": "ggreenway",
    "node_id": "MDQ6VXNlcjg2MDM2NDM=",
    "organizations_url": "https://api.github.com/users/ggreenway/orgs",
    "received_events_url": "https://api.github.com/users/ggreenway/received_events",
    "repos_url": "https://api.github.com/users/ggreenway/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ggreenway/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ggreenway/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ggreenway"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/8603643?v=4",
      "events_url": "https://api.github.com/users/ggreenway/events{/privacy}",
      "followers_url": "https://api.github.com/users/ggreenway/followers",
      "following_url": "https://api.github.com/users/ggreenway/following{/other_user}",
      "gists_url": "https://api.github.com/users/ggreenway/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ggreenway",
      "id": 8603643,
      "login": "ggreenway",
      "node_id": "MDQ6VXNlcjg2MDM2NDM=",
      "organizations_url": "https://api.github.com/users/ggreenway/orgs",
      "received_events_url": "https://api.github.com/users/ggreenway/received_events",
      "repos_url": "https://api.github.com/users/ggreenway/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ggreenway/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ggreenway/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ggreenway"
    }
  ],
  "author_association": "NONE",
  "body": "*Description*:\r\nWhen a client attempts to make a very short connection -- for example, checking that a port is open -- Envoy crashes with a seg fault. For context, we have health check logic that tries to establish these short connections periodically.\r\n\r\n*Repro steps*:\r\n1. Start with `envoyproxoy/envoy:3b47cbabb517db69a40f38843a405d1d6f742f5d` docker image.\r\n2. Run Envoy (see config below):\r\n  ```\r\n  envoy -c /config/config.yaml --service-cluster c --service-node n &\r\n  ```\r\n\r\n3. Run a listener \"app\":\r\n  ```\r\n  nc -l -p 8080 &\r\n  ```\r\n\r\n4. Attempt a short connection to the listener via Envoy:\r\n  ```\r\n  nc -z localhost 61001\r\n  ```\r\n\r\n5. Observe the Segfault:\r\n  ```\r\n  [2018-08-30 21:15:19.120][138][debug][filter] source/common/tcp_proxy/tcp_proxy.cc:157] [C0] new tcp proxy session\r\n[2018-08-30 21:15:19.120][138][debug][filter] source/common/tcp_proxy/tcp_proxy.cc:293] [C0] Creating connection to cluster 0-service-cluster\r\n[2018-08-30 21:15:19.120][138][debug][pool] source/common/tcp/conn_pool.cc:67] creating a new connection\r\n[2018-08-30 21:15:19.120][138][debug][pool] source/common/tcp/conn_pool.cc:325] [C1] connecting\r\n[2018-08-30 21:15:19.120][138][debug][connection] source/common/network/connection_impl.cc:576] [C1] connecting to 10.255.139.5:8080\r\n[2018-08-30 21:15:19.121][138][debug][connection] source/common/network/connection_impl.cc:585] [C1] connection in progress\r\n[2018-08-30 21:15:19.121][138][debug][pool] source/common/tcp/conn_pool.cc:92] queueing request due to no available connections\r\n[2018-08-30 21:15:19.121][138][debug][main] source/server/connection_handler_impl.cc:218] [C0] new connection\r\n[2018-08-30 21:15:19.121][138][debug][connection] source/common/ssl/ssl_socket.cc:131] [C0] handshake error: 5\r\n[2018-08-30 21:15:19.121][138][debug][connection] source/common/network/connection_impl.cc:133] [C0] closing socket: 0\r\n[2018-08-30 21:15:19.122][138][debug][main] source/server/connection_handler_impl.cc:51] [C0] adding to cleanup list\r\n[2018-08-30 21:15:19.122][138][debug][connection] source/common/network/connection_impl.cc:466] [C1] connected\r\n[2018-08-30 21:15:19.122][138][debug][pool] source/common/tcp/conn_pool.cc:249] [C1] assigning connection\r\n[2018-08-30 21:15:19.122][138][debug][filter] source/common/tcp_proxy/tcp_proxy.cc:467] TCP:onUpstreamEvent(), requestedServerName:\r\n[2018-08-30 21:15:19.122][138][debug][connection] source/common/network/connection_impl.cc:98] [C1] closing data_to_write=0 type=1\r\n[2018-08-30 21:15:19.123][138][debug][connection] source/common/network/connection_impl.cc:133] [C1] closing socket: 1\r\n[2018-08-30 21:15:19.123][138][debug][pool] source/common/tcp/conn_pool.cc:107] [C1] client disconnected\r\n[2018-08-30 21:15:19.123][138][critical][backtrace] bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:125] Caught Segmentation fault, suspect faulting address 0x80\r\n  ```\r\n\r\n*Config*:\r\nconfig.yml:\r\n```\r\nadmin:\r\n  access_log_path: /dev/null\r\n  address:\r\n    socket_address:\r\n      address: 127.0.0.1\r\n      port_value: 61003\r\nstatic_resources:\r\n  clusters:\r\n  - name: 0-service-cluster\r\n    connect_timeout: 0.25s\r\n    type: STATIC\r\n    lb_policy: ROUND_ROBIN\r\n    hosts:\r\n    - socket_address:\r\n        address: 127.0.0.1\r\n        port_value: 8080\r\n    circuit_breakers:\r\n      thresholds:\r\n      - max_connections: 4294967295\r\ndynamic_resources:\r\n  lds_config:\r\n    path: /config/listeners.yaml\r\n```\r\n\r\nlisteners.yml:\r\n```\r\nversion_info: \"0\"\r\nresources:\r\n- '@type': type.googleapis.com/envoy.api.v2.Listener\r\n  name: listener-8080\r\n  address:\r\n    socket_address:\r\n      address: 0.0.0.0\r\n      port_value: 61001\r\n  filter_chains:\r\n  - filters:\r\n    - name: envoy.tcp_proxy\r\n      config:\r\n        stat_prefix: 0-stats\r\n        cluster: 0-service-cluster\r\n    tls_context:\r\n      common_tls_context:\r\n        tls_certificates:\r\n        - certificate_chain:\r\n            inline_string: |\r\n              -----BEGIN CERTIFICATE-----\r\n              MIID9jCCAt6gAwIBAgIQBz3mQy9iS35PA89k8+AnDzANBgkqhkiG9w0BAQsFADBD\r\n              MQwwCgYDVQQGEwNVU0ExFjAUBgNVBAoTDUNsb3VkIEZvdW5kcnkxGzAZBgNVBAMT\r\n              Emluc3RhbmNlSWRlbnRpdHlDQTAeFw0xODA4MzAyMTA1NDRaFw0xODA4MzEyMTA1\r\n              NDRaMIHIMYGeMDgGA1UECxMxb3JnYW5pemF0aW9uOmE0OTJlZjIxLTRjY2YtNDU3\r\n              Ny05NzhlLWFiNDc1OTEzNGUxNjAxBgNVBAsTKnNwYWNlOjBiY2ZlNTA3LWRmYmMt\r\n              NGRhMy1iNGUzLTNjZGZlMjFjY2FhMzAvBgNVBAsTKGFwcDo5YmVkMTI5Mi1kOThl\r\n              LTRmMDYtOWMzYS01MTE2MjNkZWJmYzMxJTAjBgNVBAMTHDBiNGQxZDhkLTZkN2It\r\n              NGUzMi02MDRkLTViN2QwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCu\r\n              ocWoukTrzeSiEacAiO9j7exjKb+Wf5LW6hCpi7pY/U9NdQvYG70R1eVYzvxu1Rhg\r\n              2KergFDmEK8prqIfuG4WD1Je0nBk5f7jXXj+4Gpmke1ZRRrq4Ie3TxVDFv5xRc9W\r\n              UB2SygQvDH6DxIy3ipsbyNLftGyABEmuLCDLP4ttshKw6Aq5BO/mmTglGbANFu05\r\n              6ki1s000bevGaC9r+q/28Ro6gNiW60tnSv/WjriaT8R/UYjyuqaoBvJMYZNlPB58\r\n              nRDaGOj67+XTtttRFhzgwA8bAsdSn9o7N1gl9rs/lDDjV2X0ZbycnWeys67TWl+T\r\n              A0kDcfWnTa/3BIqqbH1pAgMBAAGjYDBeMA4GA1UdDwEB/wQEAwIDqDAdBgNVHSUE\r\n              FjAUBggrBgEFBQcDAgYIKwYBBQUHAwEwLQYDVR0RBCYwJIIcMGI0ZDFkOGQtNmQ3\r\n              Yi00ZTMyLTYwNGQtNWI3ZIcECv+LPzANBgkqhkiG9w0BAQsFAAOCAQEAfcgYjtwE\r\n              DSuqBtH9SD2bKhZVW8qKCSuWCu5VC9JN1ilWjNQaIuksvVRCeAPCFKmzJ/7odvQ4\r\n              ERoJY2taddM3nURnaLPacKrBUuZ6g3d9NPEZa5vUImojDWS/wcO06iAVNNcostOJ\r\n              +4nrk3VZFiHZL0tAQGpwZC9G7Pz2oOBD8/sDmncaPByKBCP8lo3Yb5yz05eoKAiI\r\n              1dpqKbeboLDNnmLmmvwpho+prW+ezGo5tGhWltcwHH/HDmOa0+udq7OPTLiKN9d6\r\n              f8M2YbaksGNcygN+PWlKFlUZD22m/8KpXk5DQqYACsI6dfU84gB+7EJViziwsBjz\r\n              ZIdT9YI21DqFYg==\r\n              -----END CERTIFICATE-----\r\n              -----BEGIN CERTIFICATE-----\r\n              MIIDKzCCAhOgAwIBAgIRAJnmAqJ7LL0zLTWpRzA6d/swDQYJKoZIhvcNAQELBQAw\r\n              OjEMMAoGA1UEBhMDVVNBMRYwFAYDVQQKEw1DbG91ZCBGb3VuZHJ5MRIwEAYDVQQD\r\n              EwlhcHBSb290Q0EwHhcNMTgwODMwMTcwOTQxWhcNMTkwODMwMTcwOTQxWjBDMQww\r\n              CgYDVQQGEwNVU0ExFjAUBgNVBAoTDUNsb3VkIEZvdW5kcnkxGzAZBgNVBAMTEmlu\r\n              c3RhbmNlSWRlbnRpdHlDQTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEB\r\n              AJhDW9kdTlSRKosFo4iVFZRGoeg3oRgd+xp10j1qoEUPHLF6+mhqhsjV2XqnCf4C\r\n              7ULyDKZvseVK0qzo0OfLfVX6d+mDdnry/veatxD71sIHf7Dq8Z3z1goawSn91HBL\r\n              6Ogzx4fxN/WMoMmwUF9DFq4goAoI0uUdRqN7PLvowucbqMAlTW1M3agbfVRGUmo2\r\n              Qk4C5en4J9XkupQaROP2ZG7ktbsMj215C+f/w+pcwrm5uqkYkIkTZGSm4nol7xuB\r\n              xNN63X/rnTnulEecCKO5fdOIf6yU5ijCNjSQ3teCM2HBje/JMUSmc+yj3eHewQaY\r\n              XmqmT2Mkb3IRUdTsoMP6JG0CAwEAAaMjMCEwDgYDVR0PAQH/BAQDAgEGMA8GA1Ud\r\n              EwEB/wQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBANDHj3ON0WCPGGwXg33vT9ll\r\n              LlijXd7ek8cEMp/Axjnqv8NoBZZ89DJfVPWyatz44txMELezFUKL8x4kQLRdkS9l\r\n              7lSzx6r3NeVr4HRERFsFCMeT2++MIm0POyleaY+odjDN3PLGdzPLnFe3S/+iFOa7\r\n              Dtii5bG0aB83NebVLmKzVKi1OlZxUVIMHBxWPqblH9UPF+UB7syCAGxtYXujd6cl\r\n              fUly0QVowxPPQ13yst038fWkfKtNVf/paXt1dxvAgce9O923WIgGOTpSFfxLNuno\r\n              uX7ewXOHplteJsZxyV1U44Y1RThmu7NLRdDFT32cQPo45HdjAnKdxV/UEDGuidc=\r\n              -----END CERTIFICATE-----\r\n          private_key:\r\n            inline_string: |\r\n              -----BEGIN RSA PRIVATE KEY-----\r\n              MIIEpAIBAAKCAQEArqHFqLpE683kohGnAIjvY+3sYym/ln+S1uoQqYu6WP1PTXUL\r\n              2Bu9EdXlWM78btUYYNinq4BQ5hCvKa6iH7huFg9SXtJwZOX+4114/uBqZpHtWUUa\r\n              6uCHt08VQxb+cUXPVlAdksoELwx+g8SMt4qbG8jS37RsgARJriwgyz+LbbISsOgK\r\n              uQTv5pk4JRmwDRbtOepItbNNNG3rxmgva/qv9vEaOoDYlutLZ0r/1o64mk/Ef1GI\r\n              8rqmqAbyTGGTZTwefJ0Q2hjo+u/l07bbURYc4MAPGwLHUp/aOzdYJfa7P5Qw41dl\r\n              9GW8nJ1nsrOu01pfkwNJA3H1p02v9wSKqmx9aQIDAQABAoIBAAkL4lRqSdW5VcW7\r\n              il4xuc0Ab0V3zS/7rdyqRXCzB1VC0g/eJ13rmfDJltbx6gvHyDqEHrN4szgn1xse\r\n              q9Fe2X0VEBxPZHklnP2kQvdZIsnrd1MvjERsmzs4wo42K7osdqAvCEkpY+wYBpnG\r\n              3c9IQ969mYbzLse28SYvrQc6ZHurLvCyKFQooETXJsPRyJLkK3fPcaca/m+dc8jV\r\n              qIJBSJIMTVwDI7zPKehn1tlXsUQLxjfoPKHFV+6xJyhU4rGRWAxJ+Ud53tfbBqpv\r\n              tLSFCRFh1nmmdhkBOVdKPtskUW+0WGm9/sSi1sLWQu8imJtWd0EVYSdUvzARvXAi\r\n              50AkH30CgYEA4Gm0gJJHKuqQyCEr7hMpusKDOo8HWDmAvFGxJrxh/XZeYZZEQJwU\r\n              6AfNsJ6nSgpuFGcPRb4obVdlRcWjcWKK1dSgRIYTJpikpC/93rZpvknr3gKuMazx\r\n              a8NA/HuKFCW3mj6dEU3aFAQdf1qq5BFc5W5xmVEFh7Tujse+/rQsCT8CgYEAxzZN\r\n              oL+90AirV5YZArLDeJg12zYUuqVs93vYVkjCfBw3+nJH7FylK4fGW5IyyoAeccJD\r\n              Rwzo9kb5J7Oa/gIWIRikFDsNWeSt2Mqt0O180e1mo5kzzWlolJWz/ZtBQFKB3guf\r\n              +dC6ALF0/bqfxbXrfHBg9PDKfu0/36rCY2QDZ1cCgYATAgEO7tTmVq3itaSR6r+b\r\n              GQSifiDiISS9TrIRlN076b2+yEqJqm6+5IJQlm+W/uEqCzyo7J1h/YgPa9kXLoCR\r\n              8guNIkoW99DiM0puhcbZHkvDJzj37i0YspYbjJ86a6Nshicpow14qoyRD+3vmWTj\r\n              7gHjOZCdWP7nyxVrX3lnYwKBgQCTNYilyisMyOs83Pj8andR7UCXDd7Bki70rvrN\r\n              wBSfvAaNttd5TXjssvecgWuxAn382G342gxouUey0+Er5QTPTjMpk/2ouPjSo+tP\r\n              4b8ELidTq4mBOGyEqB+Kv6i3TIEVQYflBh39FyV5vegFJQqwOSccubcZll5F/RyK\r\n              b8SoHwKBgQDb2LGEiNecwQ+iTSRGNn8FbvNzP/PFb98p0Dzy6+7iVuqGuBSFhLgT\r\n              w+LtNeN5zhioSqCTxEQLQ4HxYXm4U+HJ0SubnWSWFAFoHqU9IA3KirzEudycq6CW\r\n              XXc4s05QAXI1e9JJ222q8PShhkyT5ruYt9aeOSslSvMaqB3W2Fuybg==\r\n              -----END RSA PRIVATE KEY-----\r\n        tls_params:\r\n          cipher_suites: '[ECDHE-RSA-AES256-GCM-SHA384|ECDHE-RSA-AES128-GCM-SHA256]'\r\n        validation_context:\r\n          trusted_ca:\r\n            inline_string: |\r\n              -----BEGIN CERTIFICATE-----\r\n              MIIDJDCCAgygAwIBAgIRALXtOp85ebqiIifjBw5nScswDQYJKoZIhvcNAQELBQAw\r\n              OzEMMAoGA1UEBhMDVVNBMRYwFAYDVQQKEw1DbG91ZCBGb3VuZHJ5MRMwEQYDVQQD\r\n              EwppbnRlcm5hbENBMB4XDTE4MDgzMDE3MDkyN1oXDTE5MDgzMDE3MDkyN1owOzEM\r\n              MAoGA1UEBhMDVVNBMRYwFAYDVQQKEw1DbG91ZCBGb3VuZHJ5MRMwEQYDVQQDEwpp\r\n              bnRlcm5hbENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzfAurTTy\r\n              l99unSzDJ5JorUZBDqdbuEwZqNYMbyWLUVpthXwMlWxmj9f+KOrIvCXDlTaq0zaf\r\n              u4ZLzX6UtZYtWjQnPTVRGQzOMrO2Alu6/G5hEn6wBv3gjYTD5HXv2N8OAdCbMRm7\r\n              4FQfTyF5pdTacEOmWtkqMAvTU0yQSgorXxCRchZmp2T4W7/1w/A3VqyZTzWBgVAL\r\n              Dmt76Pi3harkY0eecgSRO6i3CCLI0DI3ZgjF/4W8rB6d23ejBbGqsIPA7KJV2hOm\r\n              fvvXBI9sTu/mCgQgQ/4uGtWI7XDCV1aeXd6YCAW3vwoIJF+vu09pDSAmBmRSxHO7\r\n              Pt13sph3UXknPQIDAQABoyMwITAOBgNVHQ8BAf8EBAMCAQYwDwYDVR0TAQH/BAUw\r\n              AwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAn/ux7CVPH0Vwj/IQLr6r6avQna7179Tk\r\n              6gDoO7NWD67sggVKsWfofHKerI8HuN9aHhZjnOUHtWC+3SGJPXQNcOYBjGTMQTN6\r\n              13hBb+CGf+Lpj6QPcdXUZhcAmsxhuR4Oq0HHs4819v32AaZT4rcUhBbsr3C8Pkap\r\n              iyviaRwkv9vvARrotb/rivRQcNt35ujIWUZMhg/jGtfWIzcQfgOElgg0Lzaqm+Zv\r\n              rj+WGPTZkur6CMAKh/eALMuVA8CqcghBjbJijOcAJujbMQKXzDhgVXFLT/a/ZADI\r\n              81j5Nbzk/KM2r2NqIPeHT2Qi3J9H93ayf9obN+GcpcZV8BzHM6bs7Q==\r\n              -----END CERTIFICATE-----\r\n          verify_subject_alt_name:\r\n          - gorouter.service.cf.internal\r\n      require_client_certificate: true\r\n```\r\n\r\n*Call Stack*:\r\n```\r\n#0  0x0000000000ce6c99 in uw_frame_state_for ()\r\n#1  0x0000000000ce88d8 in _Unwind_Backtrace ()\r\n#2  0x0000000000c57cac in backward::details::Unwinder<backward::StackTraceImpl<backward::system_tag::linux_tag>::callback>::operator() (depth=72, f=..., this=0x7fa11c8647c0) at external/com_github_bombela_backward/backward.hpp:647\r\n#3  backward::details::unwind<backward::StackTraceImpl<backward::system_tag::linux_tag>::callback> (depth=72, f=...) at external/com_github_bombela_backward/backward.hpp:688\r\n#4  backward::StackTraceImpl<backward::system_tag::linux_tag>::load_here (this=this@entry=0x7fa11c864820, depth=depth@entry=72) at external/com_github_bombela_backward/backward.hpp:704\r\n#5  0x0000000000c59265 in backward::StackTraceImpl<backward::system_tag::linux_tag>::load_from (depth=64, addr=0x80, this=0x7fa11c864820) at external/com_github_bombela_backward/backward.hpp:710\r\n#6  Envoy::BackwardsTrace::captureFrom (address=0x80, this=0x7fa11c864820) at bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:66\r\n#7  Envoy::SignalAction::sigHandler (sig=11, info=<optimized out>, context=<optimized out>) at source/exe/signal_action.cc:33 \r\n#8  <signal handler called>\r\n#9  0x0000000000000080 in ?? ()\r\n#10 0x00000000006f054a in Envoy::Network::ConnectionImpl::state (this=0x31e3a40) at source/common/network/connection_impl.cc:119\r\n#11 0x00000000008c1efe in Envoy::TcpProxy::Filter::onUpstreamEvent (this=0x319ea10, event=Envoy::Network::ConnectionEvent::LocalClose) at source/common/tcp_proxy/tcp_proxy.cc:452\r\n#12 0x00000000006f3f85 in Envoy::Network::ConnectionImpl::raiseEvent (this=0x31e3b80, event=Envoy::Network::ConnectionEvent::LocalClose) at source/common/network/connection_impl.cc:279\r\n#13 0x00000000006f1acd in Envoy::Network::ConnectionImpl::closeSocket (this=0x31e3b80, close_type=Envoy::Network::ConnectionEvent::LocalClose) at source/common/network/connection_impl.cc:144\r\n#14 0x00000000006f1c06 in Envoy::Network::ConnectionImpl::close (this=0x31e3b80, type=Envoy::Network::ConnectionCloseType::NoFlush) at source/common/network/connection_impl.cc:107\r\n#15 0x00000000008c3250 in Envoy::TcpProxy::Filter::~Filter (this=0x319ea10, __in_chrg=<optimized out>) at source/common/tcp_proxy/tcp_proxy.cc:143\r\n#16 0x00000000006f50e1 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release (this=0x319ea00) at /usr/include/c++/5/bits/shared_ptr_base.h:150\r\n#17 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count (this=0x31f1268, __in_chrg=<optimized out>) at /usr/include/c++/5/bits/shared_ptr_base.h:659\r\n#18 std::__shared_ptr<Envoy::Network::ReadFilter, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr (this=0x31f1260, __in_chrg=<optimized out>) at /usr/include/c++/5/bits/shared_ptr_base.h:925\r\n#19 std::shared_ptr<Envoy::Network::ReadFilter>::~shared_ptr (this=0x31f1260, __in_chrg=<optimized out>) at /usr/include/c++/5/bits/shared_ptr.h:93\r\n#20 Envoy::Network::FilterManagerImpl::ActiveReadFilter::~ActiveReadFilter (this=0x31f1240, __in_chrg=<optimized out>)\r\n    at bazel-out/k8-opt/bin/source/common/network/_virtual_includes/filter_manager_lib/common/network/filter_manager_impl.h:52\r\n#21 Envoy::Network::FilterManagerImpl::ActiveReadFilter::~ActiveReadFilter (this=0x31f1240, __in_chrg=<optimized out>)\r\n    at bazel-out/k8-opt/bin/source/common/network/_virtual_includes/filter_manager_lib/common/network/filter_manager_impl.h:52\r\n#22 0x00000000006f21d2 in std::default_delete<Envoy::Network::FilterManagerImpl::ActiveReadFilter>::operator() (this=<optimized out>, __ptr=<optimized out>) at /usr/include/c++/5/bits/unique_ptr.h:76\r\n#23 std::unique_ptr<Envoy::Network::FilterManagerImpl::ActiveReadFilter, std::default_delete<Envoy::Network::FilterManagerImpl::ActiveReadFilter> >::~unique_ptr (this=0x31eaa10, __in_chrg=<optimized out>)\r\n    at /usr/include/c++/5/bits/unique_ptr.h:236\r\n#24 std::_List_node<std::unique_ptr<Envoy::Network::FilterManagerImpl::ActiveReadFilter, std::default_delete<Envoy::Network::FilterManagerImpl::ActiveReadFilter> > >::~_List_node (this=0x31eaa00, __in_chrg=<optimized out>)\r\n    at /usr/include/c++/5/bits/stl_list.h:106\r\n#25 __gnu_cxx::new_allocator<std::_List_node<std::unique_ptr<Envoy::Network::FilterManagerImpl::ActiveReadFilter, std::default_delete<Envoy::Network::FilterManagerImpl::ActiveReadFilter> > > >::destroy<std::_List_node<std::unique_ptr<Envoy::Network::FilterManagerImpl::Act\r\niveReadFilter, std::default_delete<Envoy::Network::FilterManagerImpl::ActiveReadFilter> > > > (this=<optimized out>, __p=0x31eaa00) at /usr/include/c++/5/ext/new_allocator.h:124\r\n#26 std::__cxx11::_List_base<std::unique_ptr<Envoy::Network::FilterManagerImpl::ActiveReadFilter, std::default_delete<Envoy::Network::FilterManagerImpl::ActiveReadFilter> >, std::allocator<std::unique_ptr<Envoy::Network::FilterManagerImpl::ActiveReadFilter, std::default_d\r\nelete<Envoy::Network::FilterManagerImpl::ActiveReadFilter> > > >::_M_clear (this=0x31e3a78) at /usr/include/c++/5/bits/list.tcc:75\r\n#27 std::__cxx11::_List_base<std::unique_ptr<Envoy::Network::FilterManagerImpl::ActiveReadFilter, std::default_delete<Envoy::Network::FilterManagerImpl::ActiveReadFilter> >, std::allocator<std::unique_ptr<Envoy::Network::FilterManagerImpl::ActiveReadFilter, std::default_d\r\nelete<Envoy::Network::FilterManagerImpl::ActiveReadFilter> > > >::~_List_base (this=0x31e3a78, __in_chrg=<optimized out>) at /usr/include/c++/5/bits/stl_list.h:446\r\n#28 std::__cxx11::list<std::unique_ptr<Envoy::Network::FilterManagerImpl::ActiveReadFilter, std::default_delete<Envoy::Network::FilterManagerImpl::ActiveReadFilter> >, std::allocator<std::unique_ptr<Envoy::Network::FilterManagerImpl::ActiveReadFilter, std::default_delete<\r\nEnvoy::Network::FilterManagerImpl::ActiveReadFilter> > > >::~list (this=0x31e3a78, __in_chrg=<optimized out>) at /usr/include/c++/5/bits/stl_list.h:507\r\n#29 Envoy::Network::FilterManagerImpl::~FilterManagerImpl (this=0x31e3a58, __in_chrg=<optimized out>) at bazel-out/k8-opt/bin/source/common/network/_virtual_includes/filter_manager_lib/common/network/filter_manager_impl.h:39\r\n#30 Envoy::Network::ConnectionImpl::~ConnectionImpl (this=this@entry=0x31e3a40, __in_chrg=<optimized out>, __vtt_parm=<optimized out>) at source/common/network/connection_impl.cc:70\r\n#31 0x00000000006f22a1 in Envoy::Network::ConnectionImpl::~ConnectionImpl (this=0x31e3a40, __in_chrg=<optimized out>, __vtt_parm=<optimized out>) at source/common/network/connection_impl.cc:78\r\n#32 0x00000000006e8e71 in Envoy::Server::ConnectionHandlerImpl::ActiveConnection::~ActiveConnection (this=0x31f1500, __in_chrg=<optimized out>) at source/server/connection_handler_impl.cc:244\r\n#33 0x00000000006ece0d in std::default_delete<Envoy::Event::DeferredDeletable>::operator() (this=<optimized out>, __ptr=<optimized out>) at /usr/include/c++/5/bits/unique_ptr.h:76\r\n#34 std::unique_ptr<Envoy::Event::DeferredDeletable, std::default_delete<Envoy::Event::DeferredDeletable> >::reset (__p=<optimized out>, this=<optimized out>) at /usr/include/c++/5/bits/unique_ptr.h:344\r\n#35 Envoy::Event::DispatcherImpl::clearDeferredDeleteList (this=0x3134b00) at source/common/event/dispatcher_impl.cc:68\r\n#36 0x0000000000a01418 in event_process_active_single_queue (base=base@entry=0x3136840, max_to_process=max_to_process@entry=2147483647, endtime=endtime@entry=0x0, activeq=<optimized out>) at ../event.c:1646\r\n#37 0x0000000000a01b0f in event_process_active (base=base@entry=0x3136840) at ../event.c:1738\r\n#38 0x0000000000a04898 in event_base_loop (base=0x3136840, flags=<optimized out>) at ../event.c:1961\r\n#39 0x00000000006e8986 in Envoy::Server::WorkerImpl::threadRoutine (this=0x312cf30, guard_dog=...) at source/server/worker_impl.cc:94\r\n#40 0x0000000000a52c6e in Envoy::Thread::Thread::Thread(std::function<void ()>)::{lambda(void*)#1}::_FUN(void*) () at /usr/include/c++/5/functional:2267\r\n#41 0x00007fa134a0a6ba in start_thread (arg=0x7fa11c877700) at pthread_create.c:333\r\n#42 0x00007fa13443741d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\r\n```\r\n\r\ncc @jvshahid ",
  "closed_at": "2018-09-05T19:27:51Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/8603643?v=4",
    "events_url": "https://api.github.com/users/ggreenway/events{/privacy}",
    "followers_url": "https://api.github.com/users/ggreenway/followers",
    "following_url": "https://api.github.com/users/ggreenway/following{/other_user}",
    "gists_url": "https://api.github.com/users/ggreenway/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ggreenway",
    "id": 8603643,
    "login": "ggreenway",
    "node_id": "MDQ6VXNlcjg2MDM2NDM=",
    "organizations_url": "https://api.github.com/users/ggreenway/orgs",
    "received_events_url": "https://api.github.com/users/ggreenway/received_events",
    "repos_url": "https://api.github.com/users/ggreenway/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ggreenway/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ggreenway/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ggreenway"
  },
  "comments": 7,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/4310/comments",
  "created_at": "2018-08-30T22:03:08Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/4310/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/4310",
  "id": 355770460,
  "labels": [
    {
      "color": "ee0701",
      "default": true,
      "description": null,
      "id": 421403907,
      "name": "bug",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDc=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/4310/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNTU3NzA0NjA=",
  "number": 4310,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Short lived connections causing segmentation fault",
  "updated_at": "2018-09-05T19:27:51Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/4310",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/898949?v=4",
    "events_url": "https://api.github.com/users/dsabeti/events{/privacy}",
    "followers_url": "https://api.github.com/users/dsabeti/followers",
    "following_url": "https://api.github.com/users/dsabeti/following{/other_user}",
    "gists_url": "https://api.github.com/users/dsabeti/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/dsabeti",
    "id": 898949,
    "login": "dsabeti",
    "node_id": "MDQ6VXNlcjg5ODk0OQ==",
    "organizations_url": "https://api.github.com/users/dsabeti/orgs",
    "received_events_url": "https://api.github.com/users/dsabeti/received_events",
    "repos_url": "https://api.github.com/users/dsabeti/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/dsabeti/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dsabeti/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/dsabeti"
  }
}