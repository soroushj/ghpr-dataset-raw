{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "There is no config validation for prefix_rewrite and host_rewrite config.  The inclusion of \\0 in these config fields results in ASSERT failures in HeaderMapImpl due to invalid characters added to authority and path pseudo headers.\r\n\r\nASSERT call stack:\r\n\r\n#0: Envoy::SignalAction::sigHandler() [0x55ce3cbb66bc]\r\n#1: __restore_rt [0x7fc276a68520]\r\n#2: Envoy::Http::HeaderString::setCopy() [0x55ce3ca9f734]\r\n#3: Envoy::Http::HeaderMapImpl::setHost() [0x55ce3cab0593]\r\n#4: Envoy::Router::RouteEntryImplBase::finalizeRequestHeaders() [0x55ce3c662a6c]\r\n#5: Envoy::Router::Filter::decodeHeaders() [0x55ce3c4bf286]\r\n#6: Envoy::Http::ConnectionManagerImpl::ActiveStreamDecoderFilter::decodeHeaders() [0x55ce3c5fb315]\r\n#7: Envoy::Http::ConnectionManagerImpl::ActiveStream::decodeHeaders() [0x55ce3c5dd679]\r\n#8: Envoy::Http::ConnectionManagerImpl::ActiveStream::decodeHeaders() [0x55ce3c5dc52f]\r\n#9: Envoy::Http::Http1::ServerConnectionImpl::onMessageComplete() [0x55ce3c6172db]\r\n#10: Envoy::Http::Http1::ConnectionImpl::onMessageCompleteBase() [0x55ce3c615abc]\r\n#11: Envoy::Http::Http1::ConnectionImpl::$_8::operator()() [0x55ce3c6191e0]\r\n#12: Envoy::Http::Http1::ConnectionImpl::$_8::__invoke() [0x55ce3c6191b5]\r\n#13: http_parser_execute [0x55ce3c85d531]\r\n#14: Envoy::Http::Http1::ConnectionImpl::dispatchSlice() [0x55ce3c614339]\r\n#15: Envoy::Http::Http1::ConnectionImpl::dispatch() [0x55ce3c6141cb]\r\n#16: Envoy::Http::ConnectionManagerImpl::onData() [0x55ce3c5d60cc]\r\n#17: Envoy::Network::FilterManagerImpl::onContinueReading() [0x55ce3bfca605]\r\n#18: Envoy::Network::FilterManagerImpl::onRead() [0x55ce3bfca788]\r\n#19: Envoy::Network::ConnectionImpl::onRead() [0x55ce3bfba582]\r\n#20: Envoy::Network::ConnectionImpl::onReadReady() [0x55ce3bfbca51]\r\n#21: Envoy::Network::ConnectionImpl::onFileEvent() [0x55ce3bfbc795]\r\n#22: Envoy::Network::ConnectionImpl::ConnectionImpl()::$_2::operator()() [0x55ce3bfc1a5e]\r\n#23: std::__1::__invoke<>() [0x55ce3bfc1a21]\r\n#24: std::__1::__invoke_void_return_wrapper<>::__call<>() [0x55ce3bfc19c2]\r\n#25: std::__1::__function::__alloc_func<>::operator()() [0x55ce3bfc1982]\r\n#26: std::__1::__function::__func<>::operator()() [0x55ce3bfc0ac3]\r\n#27: std::__1::__function::__value_func<>::operator()() [0x55ce3bfb064d]\r\n#28: std::__1::function<>::operator()() [0x55ce3bfb009f]\r\n#29: Envoy::Event::FileEventImpl::assignEvents()::$_0::operator()() [0x55ce3bfafdbc]\r\n#30: Envoy::Event::FileEventImpl::assignEvents()::$_0::__invoke() [0x55ce3bfafc46]\r\n#31: event_persist_closure [0x55ce3c8485ae]\r\n#32: event_process_active_single_queue [0x55ce3c847bd8]\r\n#33: event_process_active [0x55ce3c84239a]\r\n#34: event_base_loop [0x55ce3c84126c]\r\n#35: Envoy::Event::LibeventScheduler::run() [0x55ce3bfe0da8]\r\n#36: Envoy::Event::DispatcherImpl::run() [0x55ce3bfa4c4a]\r\n#37: Envoy::Server::WorkerImpl::threadRoutine() [0x55ce3bf80ae1]\r\n#38: Envoy::Server::WorkerImpl::start()::$_3::operator()() [0x55ce3bf8665c]\r\n#39: std::__1::__invoke<>() [0x55ce3bf8661d]\r\n#40: std::__1::__invoke_void_return_wrapper<>::__call<>() [0x55ce3bf865cd]\r\n#41: std::__1::__function::__alloc_func<>::operator()() [0x55ce3bf8659d]\r\n#42: std::__1::__function::__func<>::operator()() [0x55ce3bf856ce]\r\n#43: std::__1::__function::__value_func<>::operator()() [0x55ce3a8cf335]\r\n#44: std::__1::function<>::operator()() [0x55ce3a8cefd5]\r\n#45: Envoy::Thread::ThreadImplPosix::ThreadImplPosix()::$_0::operator()() [0x55ce3cbbcde2]\r\n#46: Envoy::Thread::ThreadImplPosix::ThreadImplPosix()::$_0::__invoke() [0x55ce3cbbcdb5]\r\n#47: start_thread [0x7fc276a5dfb7]\r\n",
  "closed_at": "2020-03-15T19:49:16Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6305260?v=4",
    "events_url": "https://api.github.com/users/mattklein123/events{/privacy}",
    "followers_url": "https://api.github.com/users/mattklein123/followers",
    "following_url": "https://api.github.com/users/mattklein123/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattklein123/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mattklein123",
    "id": 6305260,
    "login": "mattklein123",
    "node_id": "MDQ6VXNlcjYzMDUyNjA=",
    "organizations_url": "https://api.github.com/users/mattklein123/orgs",
    "received_events_url": "https://api.github.com/users/mattklein123/received_events",
    "repos_url": "https://api.github.com/users/mattklein123/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mattklein123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattklein123/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mattklein123"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/10332/comments",
  "created_at": "2020-03-11T16:56:17Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/10332/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/10332",
  "id": 579409814,
  "labels": [
    {
      "color": "84b6eb",
      "default": true,
      "description": "Feature requests. Not bugs or questions.",
      "id": 421403909,
      "name": "enhancement",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDk=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/enhancement"
    },
    {
      "color": "0e8a16",
      "default": false,
      "description": null,
      "id": 527497761,
      "name": "tech debt",
      "node_id": "MDU6TGFiZWw1Mjc0OTc3NjE=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/tech%20debt"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/10332/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1Nzk0MDk4MTQ=",
  "number": 10332,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "[config] Weak validation of prefix_rewrite and host_rewrite allows config inputs that trigger ASSERT failures while proxying",
  "updated_at": "2020-03-15T19:49:16Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/10332",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/28556681?v=4",
    "events_url": "https://api.github.com/users/antoniovicente/events{/privacy}",
    "followers_url": "https://api.github.com/users/antoniovicente/followers",
    "following_url": "https://api.github.com/users/antoniovicente/following{/other_user}",
    "gists_url": "https://api.github.com/users/antoniovicente/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/antoniovicente",
    "id": 28556681,
    "login": "antoniovicente",
    "node_id": "MDQ6VXNlcjI4NTU2Njgx",
    "organizations_url": "https://api.github.com/users/antoniovicente/orgs",
    "received_events_url": "https://api.github.com/users/antoniovicente/received_events",
    "repos_url": "https://api.github.com/users/antoniovicente/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/antoniovicente/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/antoniovicente/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/antoniovicente"
  }
}