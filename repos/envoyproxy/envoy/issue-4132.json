{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "*Title*: *health_check: active healthchecking during warming scalability concern*\r\n\r\n*Description*:\r\n*This issue is partly a theoretical issue as i've not yet directly observed issues this as a cause of issues, but i have seen it exacerbate existing ones. However, I believe it is possible for it to cause issues directly*\r\n\r\nIn troubleshooting an active healthchecking issue, I noticed that jittering healthchecks does not apply to the initial healthchecks for cluster warming. In steady-state this is not an issue, but during startup or restart, this causes a pretty significant amount of healthcheck traffic.\r\n\r\nGiven that Envoy restarts are often correlated in time (e.g. a fleet restart), and that endpoints are frequently colocated with other endpoints, this can cause a thundering herd of healthcheck traffic against single servers.\r\n\r\nMy immediate thought is to allow for jittering cluster warmup checks. However, the tradeoff here would be that startup would take some time before clusters are marked healthy. (In fact, I believe this is what HAProxy does).\r\n\r\nPerhaps we can have another two parameters. Something like `unchecked_interval` (is it really an interval?) and have this respect `interval_jitter_percent`. The difference here is that the `base_time_ms` would be 0 I think.\r\n\r\nCC: @julia-stripe ",
  "closed_at": "2019-05-13T20:34:46Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6305260?v=4",
    "events_url": "https://api.github.com/users/mattklein123/events{/privacy}",
    "followers_url": "https://api.github.com/users/mattklein123/followers",
    "following_url": "https://api.github.com/users/mattklein123/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattklein123/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mattklein123",
    "id": 6305260,
    "login": "mattklein123",
    "node_id": "MDQ6VXNlcjYzMDUyNjA=",
    "organizations_url": "https://api.github.com/users/mattklein123/orgs",
    "received_events_url": "https://api.github.com/users/mattklein123/received_events",
    "repos_url": "https://api.github.com/users/mattklein123/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mattklein123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattklein123/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mattklein123"
  },
  "comments": 6,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/4132/comments",
  "created_at": "2018-08-13T20:23:54Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/4132/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/4132",
  "id": 350180081,
  "labels": [
    {
      "color": "84b6eb",
      "default": true,
      "description": "Feature requests. Not bugs or questions.",
      "id": 421403909,
      "name": "enhancement",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDk=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/enhancement"
    },
    {
      "color": "fbca04",
      "default": true,
      "description": "Needs help!",
      "id": 645516726,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWw2NDU1MTY3MjY=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/help%20wanted"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/4132/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNTAxODAwODE=",
  "number": 4132,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "health_check: active healthchecking thundering herd during cluster warming",
  "updated_at": "2019-05-13T20:34:46Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/4132",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/5392381?v=4",
    "events_url": "https://api.github.com/users/bplotnick/events{/privacy}",
    "followers_url": "https://api.github.com/users/bplotnick/followers",
    "following_url": "https://api.github.com/users/bplotnick/following{/other_user}",
    "gists_url": "https://api.github.com/users/bplotnick/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bplotnick",
    "id": 5392381,
    "login": "bplotnick",
    "node_id": "MDQ6VXNlcjUzOTIzODE=",
    "organizations_url": "https://api.github.com/users/bplotnick/orgs",
    "received_events_url": "https://api.github.com/users/bplotnick/received_events",
    "repos_url": "https://api.github.com/users/bplotnick/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bplotnick/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bplotnick/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bplotnick"
  }
}