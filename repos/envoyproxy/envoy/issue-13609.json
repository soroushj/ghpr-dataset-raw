{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "*Title*: Route connect_matcher not working with non-wildcard virtual_host domains\r\n\r\n*Description*:\r\nWhen configuring a `VirtualHost` and route for HTTP CONNECT termination, setting anything but `*` for the `domains` field fails to match the route.  \r\n\r\nI've also tried changing to a prefix match, which fails to work.  I believe this is expected behavior according to the [docs](https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/route/v3/route_components.proto#config-route-v3-routematch), though.\r\n\r\n*Repro steps*:\r\n\r\n```shell\r\n% telnet localhost 10000\r\nCONNECT localhost:22 HTTP/1.1\r\nHost: localhost\r\nProxy-Connection: Keep-Alive\r\n\r\nHTTP/1.1 404 Not Found\r\ndate: Fri, 16 Oct 2020 15:11:05 GMT\r\nserver: envoy\r\nconnection: close\r\ncontent-length: 0\r\n\r\nConnection closed by foreign host.\r\n```\r\n\r\nIf I change the config yaml to use a wildcard domain match, it works:\r\n\r\n```yaml\r\n                  virtual_hosts:\r\n                    - name: local_ssh\r\n                      domains: [\"*\"]\r\n```\r\n\r\n```bash\r\nCONNECT localhost:22 HTTP/1.1\r\nHost: localhost\r\nProxy-Connection: Keep-Alive\r\n\r\nHTTP/1.1 200 OK\r\ndate: Fri, 16 Oct 2020 15:35:00 GMT\r\nserver: envoy\r\n\r\nSSH-2.0-OpenSSH_8.1\r\n```\r\n\r\n>**Note**: The [Envoy_collect tool](https://github.com/envoyproxy/envoy/blob/master/tools/envoy_collect/README.md)\r\ngathers a tarball with debug logs, config and the following admin\r\nendpoints: /stats, /clusters and /server_info. Please note if there are\r\nprivacy concerns, sanitize the data prior to sharing the tarball/pasting.\r\n\r\n```bash\r\n./envoy_collect.py --envoy-binary ~/.getenvoy/builds/standard/1.16.0/darwin/bin/envoy --config-path config.json --output-path .\r\nTraceback (most recent call last):\r\n  File \"./envoy_collect.py\", line 247, in <module>\r\n    sys.exit(envoy_collect(*parser.parse_known_args(sys.argv)))\r\n  File \"./envoy_collect.py\", line 171, in envoy_collect\r\n    modified_envoy_config_path, access_log_paths = modify_envoy_config(\r\n  File \"./envoy_collect.py\", line 86, in modify_envoy_config\r\n    for n, listener in enumerate(envoy_config['listeners']):\r\nKeyError: 'listeners'\r\n\r\n```\r\n\r\n*Admin and Stats Output*:\r\n>Include the admin output for the following endpoints: /stats,\r\n/clusters, /routes, /server_info. For more information, refer to the\r\n[admin endpoint documentation.](https://www.envoyproxy.io/docs/envoy/latest/operations/admin)\r\n\r\n[clusters.txt](https://github.com/envoyproxy/envoy/files/5392624/clusters.txt)\r\n[routes.txt](https://github.com/envoyproxy/envoy/files/5392626/routes.txt)\r\n[server_info.txt](https://github.com/envoyproxy/envoy/files/5392627/server_info.txt)\r\n\r\n\r\n>**Note**: If there are privacy concerns, sanitize the data prior to\r\nsharing.\r\n\r\n*Config*:\r\n>Include the config used to configure Envoy.\r\n\r\n```yaml\r\nadmin:\r\n  access_log_path: /tmp/admin_access.log\r\n  address:\r\n    socket_address:\r\n      protocol: TCP\r\n      address: 127.0.0.1\r\n      port_value: 9901\r\nstatic_resources:\r\n  listeners:\r\n    - name: listener_0\r\n      address:\r\n        socket_address:\r\n          protocol: TCP\r\n          address: 0.0.0.0\r\n          port_value: 10000\r\n      filter_chains:\r\n        - filters:\r\n            - name: envoy.filters.network.http_connection_manager\r\n              typed_config:\r\n                \"@type\": type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager\r\n                stat_prefix: ingress_http\r\n                access_log:\r\n                  - name: envoy.access_loggers.file\r\n                    typed_config:\r\n                      \"@type\": type.googleapis.com/envoy.extensions.access_loggers.file.v3.FileAccessLog\r\n                      \"path\": \"/tmp/envoy_access_log\"\r\n                route_config:\r\n                  name: local_route\r\n                  virtual_hosts:\r\n                    - name: local_ssh\r\n                      domains: [\"localhost\"]\r\n                      routes:\r\n                        - match:\r\n                            connect_matcher: {}\r\n                          route:\r\n                            cluster: local_ssh\r\n                            upgrade_configs:\r\n                              - upgrade_type: CONNECT\r\n                                connect_config: {}\r\n                http_filters:\r\n                  - name: envoy.filters.http.router\r\n                    typed_config:\r\n                      \"@type\": type.googleapis.com/envoy.extensions.filters.http.router.v3.Router\r\n                http2_protocol_options:\r\n                  allow_connect: true\r\n                upgrade_configs:\r\n                  - upgrade_type: CONNECT\r\n\r\n  clusters:\r\n    - name: local_ssh\r\n      connect_timeout: 1s\r\n      type: LOGICAL_DNS\r\n      dns_lookup_family: V4_ONLY\r\n      lb_policy: ROUND_ROBIN\r\n      load_assignment:\r\n        cluster_name: local_ssh\r\n        endpoints:\r\n          - lb_endpoints:\r\n              - endpoint:\r\n                  address:\r\n                    socket_address:\r\n                      address: localhost\r\n                      port_value: 22\r\n```\r\n\r\n*Logs*:\r\n>Include the access logs and the Envoy logs.\r\n\r\n<details>\r\n<summary>Debug Logs</summary>\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:305] initializing epoch 0 (base id=0, hot restart version=disabled)\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:307] statically linked extensions:\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.resource_monitors: envoy.resource_monitors.fixed_heap, envoy.resource_monitors.injected_resource\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.upstreams: envoy.filters.connection_pools.http.generic, envoy.filters.connection_pools.http.http, envoy.filters.connection_pools.http.tcp\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.resolvers: envoy.ip\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.transport_sockets.upstream: envoy.transport_sockets.alts, envoy.transport_sockets.quic, envoy.transport_sockets.raw_buffer, envoy.transport_sockets.tap, envoy.transport_sockets.tls, envoy.transport_sockets.upstream_proxy_protocol, raw_buffer, tls\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.access_loggers: envoy.access_loggers.file, envoy.access_loggers.http_grpc, envoy.access_loggers.tcp_grpc, envoy.file_access_log, envoy.http_grpc_access_log, envoy.tcp_grpc_access_log\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.compression.decompressor: envoy.compression.gzip.decompressor\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.transport_sockets.downstream: envoy.transport_sockets.alts, envoy.transport_sockets.quic, envoy.transport_sockets.raw_buffer, envoy.transport_sockets.tap, envoy.transport_sockets.tls, raw_buffer, tls\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.quic_server_codec: quiche\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.retry_host_predicates: envoy.retry_host_predicates.omit_canary_hosts, envoy.retry_host_predicates.omit_host_metadata, envoy.retry_host_predicates.previous_hosts\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.thrift_proxy.protocols: auto, binary, binary/non-strict, compact, twitter\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.filters.udp_listener: envoy.filters.udp.dns_filter, envoy.filters.udp_listener.udp_proxy\r\n[2020-10-16 11:30:14.709][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.filters.network: envoy.client_ssl_auth, envoy.echo, envoy.ext_authz, envoy.filters.network.client_ssl_auth, envoy.filters.network.direct_response, envoy.filters.network.dubbo_proxy, envoy.filters.network.echo, envoy.filters.network.ext_authz, envoy.filters.network.http_connection_manager, envoy.filters.network.kafka_broker, envoy.filters.network.local_ratelimit, envoy.filters.network.mongo_proxy, envoy.filters.network.mysql_proxy, envoy.filters.network.postgres_proxy, envoy.filters.network.ratelimit, envoy.filters.network.rbac, envoy.filters.network.redis_proxy, envoy.filters.network.rocketmq_proxy, envoy.filters.network.sni_cluster, envoy.filters.network.sni_dynamic_forward_proxy, envoy.filters.network.tcp_proxy, envoy.filters.network.thrift_proxy, envoy.filters.network.zookeeper_proxy, envoy.http_connection_manager, envoy.mongo_proxy, envoy.ratelimit, envoy.redis_proxy, envoy.tcp_proxy\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.udp_listeners: quiche_quic_listener, raw_udp_listener\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.quic_client_codec: quiche\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.internal_redirect_predicates: envoy.internal_redirect_predicates.allow_listed_routes, envoy.internal_redirect_predicates.previous_routes, envoy.internal_redirect_predicates.safe_cross_scheme\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.udp_packet_writers: udp_default_writer, udp_gso_batch_writer\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.grpc_credentials: envoy.grpc_credentials.aws_iam, envoy.grpc_credentials.default, envoy.grpc_credentials.file_based_metadata\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.bootstrap: envoy.extensions.network.socket_interface.default_socket_interface\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.filters.listener: envoy.filters.listener.http_inspector, envoy.filters.listener.original_dst, envoy.filters.listener.original_src, envoy.filters.listener.proxy_protocol, envoy.filters.listener.tls_inspector, envoy.listener.http_inspector, envoy.listener.original_dst, envoy.listener.original_src, envoy.listener.proxy_protocol, envoy.listener.tls_inspector\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.filters.http: envoy.buffer, envoy.cors, envoy.csrf, envoy.ext_authz, envoy.fault, envoy.filters.http.adaptive_concurrency, envoy.filters.http.admission_control, envoy.filters.http.aws_lambda, envoy.filters.http.aws_request_signing, envoy.filters.http.buffer, envoy.filters.http.cache, envoy.filters.http.cdn_loop, envoy.filters.http.compressor, envoy.filters.http.cors, envoy.filters.http.csrf, envoy.filters.http.decompressor, envoy.filters.http.dynamic_forward_proxy, envoy.filters.http.dynamo, envoy.filters.http.ext_authz, envoy.filters.http.fault, envoy.filters.http.grpc_http1_bridge, envoy.filters.http.grpc_http1_reverse_bridge, envoy.filters.http.grpc_json_transcoder, envoy.filters.http.grpc_stats, envoy.filters.http.grpc_web, envoy.filters.http.gzip, envoy.filters.http.header_to_metadata, envoy.filters.http.health_check, envoy.filters.http.ip_tagging, envoy.filters.http.jwt_authn, envoy.filters.http.local_ratelimit, envoy.filters.http.lua, envoy.filters.http.oauth, envoy.filters.http.on_demand, envoy.filters.http.original_src, envoy.filters.http.ratelimit, envoy.filters.http.rbac, envoy.filters.http.router, envoy.filters.http.squash, envoy.filters.http.tap, envoy.grpc_http1_bridge, envoy.grpc_json_transcoder, envoy.grpc_web, envoy.gzip, envoy.health_check, envoy.http_dynamo_filter, envoy.ip_tagging, envoy.local_rate_limit, envoy.lua, envoy.rate_limit, envoy.router, envoy.squash\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.retry_priorities: envoy.retry_priorities.previous_priorities\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.dubbo_proxy.serializers: dubbo.hessian2\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.stats_sinks: envoy.dog_statsd, envoy.metrics_service, envoy.stat_sinks.dog_statsd, envoy.stat_sinks.hystrix, envoy.stat_sinks.metrics_service, envoy.stat_sinks.statsd, envoy.statsd\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.dubbo_proxy.filters: envoy.filters.dubbo.router\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.dubbo_proxy.route_matchers: default\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.compression.compressor: envoy.compression.gzip.compressor\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.thrift_proxy.transports: auto, framed, header, unframed\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.thrift_proxy.filters: envoy.filters.thrift.rate_limit, envoy.filters.thrift.router\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.http.cache: envoy.extensions.http.cache.simple\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.guarddog_actions: envoy.watchdog.abort_action, envoy.watchdog.profile_action\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.tracers: envoy.dynamic.ot, envoy.lightstep, envoy.tracers.datadog, envoy.tracers.dynamic_ot, envoy.tracers.lightstep, envoy.tracers.opencensus, envoy.tracers.xray, envoy.tracers.zipkin, envoy.zipkin\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.health_checkers: envoy.health_checkers.redis\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.dubbo_proxy.protocols: dubbo\r\n[2020-10-16 11:30:14.710][38616745][info][main] [external/envoy/source/server/server.cc:309]   envoy.clusters: envoy.cluster.eds, envoy.cluster.logical_dns, envoy.cluster.original_dst, envoy.cluster.static, envoy.cluster.strict_dns, envoy.clusters.aggregate, envoy.clusters.dynamic_forward_proxy, envoy.clusters.redis\r\n[2020-10-16 11:30:14.718][38616745][info][main] [external/envoy/source/server/server.cc:325] HTTP header map info:\r\n[2020-10-16 11:30:14.718][38616745][warning][runtime] [external/envoy/source/common/runtime/runtime_features.cc:31] Unable to use runtime singleton for feature envoy.http.headermap.lazy_map_min_size\r\n[2020-10-16 11:30:14.718][38616745][warning][runtime] [external/envoy/source/common/runtime/runtime_features.cc:31] Unable to use runtime singleton for feature envoy.http.headermap.lazy_map_min_size\r\n[2020-10-16 11:30:14.719][38616745][warning][runtime] [external/envoy/source/common/runtime/runtime_features.cc:31] Unable to use runtime singleton for feature envoy.http.headermap.lazy_map_min_size\r\n[2020-10-16 11:30:14.719][38616745][warning][runtime] [external/envoy/source/common/runtime/runtime_features.cc:31] Unable to use runtime singleton for feature envoy.http.headermap.lazy_map_min_size\r\n[2020-10-16 11:30:14.719][38616745][info][main] [external/envoy/source/server/server.cc:328]   request header map: 608 bytes: :authority,:method,:path,:protocol,:scheme,accept,accept-encoding,access-control-request-method,authorization,cache-control,cdn-loop,connection,content-encoding,content-length,content-type,expect,grpc-accept-encoding,grpc-timeout,if-match,if-modified-since,if-none-match,if-range,if-unmodified-since,keep-alive,origin,pragma,proxy-connection,referer,te,transfer-encoding,upgrade,user-agent,via,x-client-trace-id,x-envoy-attempt-count,x-envoy-decorator-operation,x-envoy-downstream-service-cluster,x-envoy-downstream-service-node,x-envoy-expected-rq-timeout-ms,x-envoy-external-address,x-envoy-force-trace,x-envoy-hedge-on-per-try-timeout,x-envoy-internal,x-envoy-ip-tags,x-envoy-max-retries,x-envoy-original-path,x-envoy-original-url,x-envoy-retriable-header-names,x-envoy-retriable-status-codes,x-envoy-retry-grpc-on,x-envoy-retry-on,x-envoy-upstream-alt-stat-name,x-envoy-upstream-rq-per-try-timeout-ms,x-envoy-upstream-rq-timeout-alt-response,x-envoy-upstream-rq-timeout-ms,x-forwarded-client-cert,x-forwarded-for,x-forwarded-proto,x-ot-span-context,x-request-id\r\n[2020-10-16 11:30:14.719][38616745][info][main] [external/envoy/source/server/server.cc:328]   request trailer map: 128 bytes: \r\n[2020-10-16 11:30:14.719][38616745][info][main] [external/envoy/source/server/server.cc:328]   response header map: 424 bytes: :status,access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,access-control-expose-headers,access-control-max-age,age,cache-control,connection,content-encoding,content-length,content-type,date,etag,expires,grpc-message,grpc-status,keep-alive,last-modified,location,proxy-connection,server,transfer-encoding,upgrade,vary,via,x-envoy-attempt-count,x-envoy-decorator-operation,x-envoy-degraded,x-envoy-immediate-health-check-fail,x-envoy-ratelimited,x-envoy-upstream-canary,x-envoy-upstream-healthchecked-cluster,x-envoy-upstream-service-time,x-request-id\r\n[2020-10-16 11:30:14.719][38616745][info][main] [external/envoy/source/server/server.cc:328]   response trailer map: 152 bytes: grpc-message,grpc-status\r\n[2020-10-16 11:30:14.720][38616745][debug][main] [external/envoy/source/server/overload_manager_impl.cc:264] No overload action is configured for envoy.overload_actions.shrink_heap.\r\n[2020-10-16 11:30:14.720][38616745][debug][main] [external/envoy/source/server/overload_manager_impl.cc:264] No overload action is configured for envoy.overload_actions.stop_accepting_connections.\r\n[2020-10-16 11:30:14.720][38616745][debug][main] [external/envoy/source/server/overload_manager_impl.cc:264] No overload action is configured for envoy.overload_actions.stop_accepting_connections.\r\n[2020-10-16 11:30:14.720][38616745][debug][main] [external/envoy/source/server/overload_manager_impl.cc:264] No overload action is configured for envoy.overload_actions.stop_accepting_connections.\r\n[2020-10-16 11:30:14.720][38616745][debug][main] [external/envoy/source/server/overload_manager_impl.cc:264] No overload action is configured for envoy.overload_actions.stop_accepting_connections.\r\n[2020-10-16 11:30:14.720][38616745][debug][main] [external/envoy/source/server/overload_manager_impl.cc:264] No overload action is configured for envoy.overload_actions.stop_accepting_connections.\r\n[2020-10-16 11:30:14.720][38616745][debug][main] [external/envoy/source/server/overload_manager_impl.cc:264] No overload action is configured for envoy.overload_actions.stop_accepting_connections.\r\n[2020-10-16 11:30:14.720][38616745][debug][main] [external/envoy/source/server/overload_manager_impl.cc:264] No overload action is configured for envoy.overload_actions.stop_accepting_connections.\r\n[2020-10-16 11:30:14.720][38616745][debug][main] [external/envoy/source/server/overload_manager_impl.cc:264] No overload action is configured for envoy.overload_actions.stop_accepting_connections.\r\n[2020-10-16 11:30:14.720][38616745][info][main] [external/envoy/source/server/server.cc:448] admin address: 127.0.0.1:9901\r\n[2020-10-16 11:30:14.721][38616745][info][main] [external/envoy/source/server/server.cc:583] runtime: layers:\r\n  - name: base\r\n    static_layer:\r\n      {}\r\n  - name: admin\r\n    admin_layer:\r\n      {}\r\n[2020-10-16 11:30:14.721][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:25] Constructing DNS resolver\r\n[2020-10-16 11:30:14.721][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:62] DNS resolver has fd=14\r\n[2020-10-16 11:30:14.721][38616745][info][config] [external/envoy/source/server/configuration_impl.cc:95] loading tracing configuration\r\n[2020-10-16 11:30:14.721][38616745][info][config] [external/envoy/source/server/configuration_impl.cc:70] loading 0 static secret(s)\r\n[2020-10-16 11:30:14.721][38616745][info][config] [external/envoy/source/server/configuration_impl.cc:76] loading 1 cluster(s)\r\n[2020-10-16 11:30:14.721][38616749][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:49] completionThread running\r\n[2020-10-16 11:30:14.723][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1044] adding TLS initial cluster local_ssh\r\n[2020-10-16 11:30:14.723][38616745][debug][upstream] [external/envoy/source/common/upstream/logical_dns_cluster.cc:100] starting async DNS resolution for localhost\r\n[2020-10-16 11:30:14.723][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:82] DNS resolver resolve=localhost\r\n[2020-10-16 11:30:14.723][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:79] cm init: adding: cluster=local_ssh primary=1 secondary=0\r\n[2020-10-16 11:30:14.723][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:127] maybe finish initialize state: 1\r\n[2020-10-16 11:30:14.723][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:136] maybe finish initialize primary init clusters empty: false\r\n[2020-10-16 11:30:14.723][38616745][info][config] [external/envoy/source/server/configuration_impl.cc:80] loading 1 listener(s)\r\n[2020-10-16 11:30:14.723][38616745][debug][config] [external/envoy/source/server/configuration_impl.cc:82] listener #0:\r\n[2020-10-16 11:30:14.729][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:395] begin add/update listener: name=listener_0 hash=8273926099384046357\r\n[2020-10-16 11:30:14.729][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:432] use full listener update path for listener name=listener_0 hash=8273926099384046357\r\n[2020-10-16 11:30:14.729][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:95]   filter #0:\r\n[2020-10-16 11:30:14.729][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:96]     name: envoy.filters.network.http_connection_manager\r\n[2020-10-16 11:30:14.729][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:103]   config: {\r\n \"@type\": \"type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager\",\r\n \"route_config\": {\r\n  \"name\": \"local_route\",\r\n  \"virtual_hosts\": [\r\n   {\r\n    \"routes\": [\r\n     {\r\n      \"route\": {\r\n       \"upgrade_configs\": [\r\n        {\r\n         \"connect_config\": {},\r\n         \"upgrade_type\": \"CONNECT\"\r\n        }\r\n       ],\r\n       \"cluster\": \"local_ssh\"\r\n      },\r\n      \"match\": {\r\n       \"connect_matcher\": {}\r\n      }\r\n     }\r\n    ],\r\n    \"domains\": [\r\n     \"localhost\"\r\n    ],\r\n    \"name\": \"local_ssh\"\r\n   }\r\n  ]\r\n },\r\n \"stat_prefix\": \"ingress_http\",\r\n \"upgrade_configs\": [\r\n  {\r\n   \"upgrade_type\": \"CONNECT\"\r\n  }\r\n ],\r\n \"access_log\": [\r\n  {\r\n   \"typed_config\": {\r\n    \"@type\": \"type.googleapis.com/envoy.extensions.access_loggers.file.v3.FileAccessLog\",\r\n    \"path\": \"/tmp/envoy_access_log\"\r\n   },\r\n   \"name\": \"envoy.access_loggers.file\"\r\n  }\r\n ],\r\n \"http_filters\": [\r\n  {\r\n   \"typed_config\": {\r\n    \"@type\": \"type.googleapis.com/envoy.extensions.filters.http.router.v3.Router\"\r\n   },\r\n   \"name\": \"envoy.filters.http.router\"\r\n  }\r\n ],\r\n \"http2_protocol_options\": {\r\n  \"allow_connect\": true\r\n }\r\n}\r\n\r\n[2020-10-16 11:30:14.732][38616745][debug][config] [external/envoy/source/extensions/filters/network/http_connection_manager/config.cc:482]     http filter #0\r\n[2020-10-16 11:30:14.735][38616745][debug][config] [external/envoy/source/extensions/filters/network/http_connection_manager/config.cc:504]       name: envoy.filters.http.router\r\n[2020-10-16 11:30:14.735][38616745][debug][config] [external/envoy/source/extensions/filters/network/http_connection_manager/config.cc:511]     config: {\r\n \"@type\": \"type.googleapis.com/envoy.extensions.filters.http.router.v3.Router\"\r\n}\r\n\r\n[2020-10-16 11:30:14.735][38616745][debug][config] [external/envoy/source/server/filter_chain_manager_impl.cc:215] new fc_contexts has 1 filter chains, including 1 newly built\r\n[2020-10-16 11:30:14.736][38616745][debug][init] [external/envoy/source/common/init/manager_impl.cc:24] added target Listener-init-target listener_0 to init manager Server\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_impl.cc:107] Create listen socket for listener listener_0 on address 0.0.0.0:10000\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_impl.cc:117] listener_0: Setting socket options succeeded\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_impl.cc:97] Set listener listener_0 socket factory local address to 0.0.0.0:10000\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_impl.cc:653] add active listener: name=listener_0, hash=8273926099384046357, address=0.0.0.0:10000\r\n[2020-10-16 11:30:14.736][38616745][info][config] [external/envoy/source/server/configuration_impl.cc:121] loading stats sink configuration\r\n[2020-10-16 11:30:14.736][38616745][info][main] [external/envoy/source/server/server.cc:679] starting main dispatch loop\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:74] DNS resolver file event\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:192] DNS for localhost resolved with: flags=1073741826[MoreComing=no, Add=yes], interface_index=4294967295, error_code=0, hostname=localhost.\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:221] Address to add address=127.0.0.1, ttl=1\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:224] Adding to queries pending callback\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:250] DNS Resolver flushing queries pending callback\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:112] DNS Resolver flushing 1 queries\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/logical_dns_cluster.cc:108] async DNS resolution complete for localhost\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/upstream_impl.cc:286] transport socket match, socket default selected for host with address 127.0.0.1:22\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/logical_dns_cluster.cc:153] DNS refresh rate reset for localhost, refresh rate 5000 ms\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/upstream_impl.cc:991] initializing Primary cluster local_ssh completed\r\n[2020-10-16 11:30:14.736][38616745][debug][init] [external/envoy/source/common/init/manager_impl.cc:49] init manager Cluster local_ssh contains no targets\r\n[2020-10-16 11:30:14.736][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:14] init manager Cluster local_ssh initialized, notifying ClusterImplBase\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1198] membership update for TLS cluster local_ssh added 1 removed 0\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:107] cm init: init complete: cluster=local_ssh primary=0 secondary=0\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:127] maybe finish initialize state: 1\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:136] maybe finish initialize primary init clusters empty: true\r\n[2020-10-16 11:30:14.736][38616745][debug][init] [external/envoy/source/common/init/manager_impl.cc:49] init manager RTDS contains no targets\r\n[2020-10-16 11:30:14.736][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:14] init manager RTDS initialized, notifying RTDS\r\n[2020-10-16 11:30:14.736][38616745][info][runtime] [external/envoy/source/common/runtime/runtime_impl.cc:421] RTDS has finished initialization\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:196] continue initializing secondary clusters\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:127] maybe finish initialize state: 2\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:136] maybe finish initialize primary init clusters empty: true\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:151] maybe finish initialize secondary init clusters empty: true\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:172] maybe finish initialize cds api ready: false\r\n[2020-10-16 11:30:14.736][38616745][info][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:178] cm init: all clusters initialized\r\n[2020-10-16 11:30:14.736][38616745][info][main] [external/envoy/source/server/server.cc:660] all clusters initialized. initializing init manager\r\n[2020-10-16 11:30:14.736][38616745][debug][init] [external/envoy/source/common/init/manager_impl.cc:53] init manager Server initializing\r\n[2020-10-16 11:30:14.736][38616745][debug][init] [external/envoy/source/common/init/target_impl.cc:15] init manager Server initializing target Listener-init-target listener_0\r\n[2020-10-16 11:30:14.736][38616745][debug][init] [external/envoy/source/common/init/manager_impl.cc:49] init manager Listener-local-init-manager listener_0 8273926099384046357 contains no targets\r\n[2020-10-16 11:30:14.736][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:14] init manager Listener-local-init-manager listener_0 8273926099384046357 initialized, notifying Listener-local-init-watcher listener_0\r\n[2020-10-16 11:30:14.736][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:14] target Listener-init-target listener_0 initialized, notifying init manager Server\r\n[2020-10-16 11:30:14.736][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:14] init manager Server initialized, notifying RunHelper\r\n[2020-10-16 11:30:14.736][38616745][info][config] [external/envoy/source/server/listener_manager_impl.cc:888] all dependencies initialized. starting workers\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:899] starting worker 0\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:899] starting worker 1\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:899] starting worker 2\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:899] starting worker 3\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:899] starting worker 4\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:899] starting worker 5\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:899] starting worker 6\r\n[2020-10-16 11:30:14.736][38616753][debug][main] [external/envoy/source/server/worker_impl.cc:124] worker entering dispatch loop\r\n[2020-10-16 11:30:14.736][38616752][debug][main] [external/envoy/source/server/worker_impl.cc:124] worker entering dispatch loop\r\n[2020-10-16 11:30:14.736][38616745][debug][config] [external/envoy/source/server/listener_manager_impl.cc:899] starting worker 7\r\n[2020-10-16 11:30:14.736][38616755][debug][main] [external/envoy/source/server/worker_impl.cc:124] worker entering dispatch loop\r\n[2020-10-16 11:30:14.736][38616745][warning][main] [external/envoy/source/server/server.cc:565] there is no configured limit to the number of allowed active connections. Set a limit via the runtime key overload.global_downstream_max_connections\r\n[2020-10-16 11:30:14.736][38616754][debug][main] [external/envoy/source/server/worker_impl.cc:124] worker entering dispatch loop\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:128] Resolution for localhost completed (async)\r\n[2020-10-16 11:30:14.736][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:152] Destroying PendingResolution for localhost\r\n[2020-10-16 11:30:14.736][38616755][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1044] adding TLS initial cluster local_ssh\r\n[2020-10-16 11:30:14.736][38616752][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1044] adding TLS initial cluster local_ssh\r\n[2020-10-16 11:30:14.736][38616753][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1044] adding TLS initial cluster local_ssh\r\n[2020-10-16 11:30:14.736][38616756][debug][main] [external/envoy/source/server/worker_impl.cc:124] worker entering dispatch loop\r\n[2020-10-16 11:30:14.736][38616754][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1044] adding TLS initial cluster local_ssh\r\n[2020-10-16 11:30:14.736][38616756][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1044] adding TLS initial cluster local_ssh\r\n[2020-10-16 11:30:14.736][38616758][debug][main] [external/envoy/source/server/worker_impl.cc:124] worker entering dispatch loop\r\n[2020-10-16 11:30:14.736][38616757][debug][main] [external/envoy/source/server/worker_impl.cc:124] worker entering dispatch loop\r\n[2020-10-16 11:30:14.736][38616760][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:49] completionThread running\r\n[2020-10-16 11:30:14.737][38616756][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1198] membership update for TLS cluster local_ssh added 1 removed 0\r\n[2020-10-16 11:30:14.737][38616758][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1044] adding TLS initial cluster local_ssh\r\n[2020-10-16 11:30:14.737][38616757][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1044] adding TLS initial cluster local_ssh\r\n[2020-10-16 11:30:14.737][38616758][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1198] membership update for TLS cluster local_ssh added 1 removed 0\r\n[2020-10-16 11:30:14.737][38616761][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:49] completionThread running\r\n[2020-10-16 11:30:14.737][38616754][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1198] membership update for TLS cluster local_ssh added 1 removed 0\r\n[2020-10-16 11:30:14.737][38616762][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:49] completionThread running\r\n[2020-10-16 11:30:14.736][38616759][debug][main] [external/envoy/source/server/worker_impl.cc:124] worker entering dispatch loop\r\n[2020-10-16 11:30:14.737][38616759][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1044] adding TLS initial cluster local_ssh\r\n[2020-10-16 11:30:14.737][38616764][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:49] completionThread running\r\n[2020-10-16 11:30:14.737][38616763][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:49] completionThread running\r\n[2020-10-16 11:30:14.737][38616755][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1198] membership update for TLS cluster local_ssh added 1 removed 0\r\n[2020-10-16 11:30:14.737][38616765][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:49] completionThread running\r\n[2020-10-16 11:30:14.737][38616766][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:49] completionThread running\r\n[2020-10-16 11:30:14.737][38616767][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:49] completionThread running\r\n[2020-10-16 11:30:14.737][38616757][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1198] membership update for TLS cluster local_ssh added 1 removed 0\r\n[2020-10-16 11:30:14.737][38616753][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1198] membership update for TLS cluster local_ssh added 1 removed 0\r\n[2020-10-16 11:30:14.737][38616759][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1198] membership update for TLS cluster local_ssh added 1 removed 0\r\n[2020-10-16 11:30:14.738][38616752][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1198] membership update for TLS cluster local_ssh added 1 removed 0\r\n[2020-10-16 11:30:17.236][38616752][debug][conn_handler] [external/envoy/source/server/connection_handler_impl.cc:459] [C0] new connection\r\n[2020-10-16 11:30:19.739][38616745][debug][main] [external/envoy/source/server/server.cc:190] flushing stats\r\n[2020-10-16 11:30:19.739][38616745][debug][upstream] [external/envoy/source/common/upstream/logical_dns_cluster.cc:100] starting async DNS resolution for localhost\r\n[2020-10-16 11:30:19.739][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:82] DNS resolver resolve=localhost\r\n[2020-10-16 11:30:19.740][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:74] DNS resolver file event\r\n[2020-10-16 11:30:19.740][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:192] DNS for localhost resolved with: flags=1073741826[MoreComing=no, Add=yes], interface_index=4294967295, error_code=0, hostname=localhost.\r\n[2020-10-16 11:30:19.740][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:221] Address to add address=127.0.0.1, ttl=1\r\n[2020-10-16 11:30:19.740][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:224] Adding to queries pending callback\r\n[2020-10-16 11:30:19.740][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:250] DNS Resolver flushing queries pending callback\r\n[2020-10-16 11:30:19.740][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:112] DNS Resolver flushing 1 queries\r\n[2020-10-16 11:30:19.740][38616745][debug][upstream] [external/envoy/source/common/upstream/logical_dns_cluster.cc:108] async DNS resolution complete for localhost\r\n[2020-10-16 11:30:19.740][38616745][debug][upstream] [external/envoy/source/common/upstream/logical_dns_cluster.cc:153] DNS refresh rate reset for localhost, refresh rate 5000 ms\r\n[2020-10-16 11:30:19.740][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:128] Resolution for localhost completed (async)\r\n[2020-10-16 11:30:19.740][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:152] Destroying PendingResolution for localhost\r\n[2020-10-16 11:30:22.435][38616752][debug][http] [external/envoy/source/common/http/conn_manager_impl.cc:225] [C0] new stream\r\n[2020-10-16 11:30:22.435][38616752][debug][http] [external/envoy/source/common/http/conn_manager_impl.cc:837] [C0][S6160696471777353796] request headers complete (end_stream=false):\r\n':authority', 'localhost:22'\r\n':method', 'CONNECT'\r\n'proxy-connection', 'Keep-Alive'\r\n\r\n[2020-10-16 11:30:22.436][38616752][debug][router] [external/envoy/source/common/router/router.cc:364] [C0][S6160696471777353796] no cluster match for URL ''\r\n[2020-10-16 11:30:22.436][38616752][debug][http] [external/envoy/source/common/http/filter_manager.cc:805] [C0][S6160696471777353796] Sending local reply with details route_not_found\r\n[2020-10-16 11:30:22.436][38616752][debug][http] [external/envoy/source/common/http/conn_manager_impl.cc:1435] [C0][S6160696471777353796] encoding headers via codec (end_stream=true):\r\n':status', '404'\r\n'date', 'Fri, 16 Oct 2020 15:30:22 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-10-16 11:30:22.436][38616752][debug][http] [external/envoy/source/common/http/conn_manager_impl.cc:176] [C0][S6160696471777353796] doEndStream() resetting stream\r\n[2020-10-16 11:30:22.436][38616752][debug][http] [external/envoy/source/common/http/conn_manager_impl.cc:1484] [C0][S6160696471777353796] stream reset\r\n[2020-10-16 11:30:22.436][38616752][debug][connection] [external/envoy/source/common/network/connection_impl.cc:106] [C0] closing data_to_write=116 type=2\r\n[2020-10-16 11:30:22.436][38616752][debug][connection] [external/envoy/source/common/network/connection_impl_base.cc:40] [C0] setting delayed close timer with timeout 1000 ms\r\n[2020-10-16 11:30:22.436][38616752][debug][connection] [external/envoy/source/common/network/connection_impl.cc:106] [C0] closing data_to_write=116 type=2\r\n[2020-10-16 11:30:22.437][38616752][debug][connection] [external/envoy/source/common/network/connection_impl.cc:641] [C0] write flush complete\r\n[2020-10-16 11:30:22.437][38616752][debug][connection] [external/envoy/source/common/network/connection_impl.cc:641] [C0] write flush complete\r\n[2020-10-16 11:30:23.439][38616752][debug][connection] [external/envoy/source/common/network/connection_impl_base.cc:54] [C0] triggered delayed close\r\n[2020-10-16 11:30:23.439][38616752][debug][connection] [external/envoy/source/common/network/connection_impl.cc:202] [C0] closing socket: 1\r\n[2020-10-16 11:30:23.439][38616752][debug][conn_handler] [external/envoy/source/server/connection_handler_impl.cc:152] [C0] adding to cleanup list\r\n[2020-10-16 11:30:24.743][38616745][debug][main] [external/envoy/source/server/server.cc:190] flushing stats\r\n[2020-10-16 11:30:24.743][38616745][debug][upstream] [external/envoy/source/common/upstream/logical_dns_cluster.cc:100] starting async DNS resolution for localhost\r\n[2020-10-16 11:30:24.743][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:82] DNS resolver resolve=localhost\r\n[2020-10-16 11:30:24.744][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:74] DNS resolver file event\r\n[2020-10-16 11:30:24.744][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:192] DNS for localhost resolved with: flags=1073741826[MoreComing=no, Add=yes], interface_index=4294967295, error_code=0, hostname=localhost.\r\n[2020-10-16 11:30:24.744][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:221] Address to add address=127.0.0.1, ttl=1\r\n[2020-10-16 11:30:24.744][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:224] Adding to queries pending callback\r\n[2020-10-16 11:30:24.744][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:250] DNS Resolver flushing queries pending callback\r\n[2020-10-16 11:30:24.744][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:112] DNS Resolver flushing 1 queries\r\n[2020-10-16 11:30:24.744][38616745][debug][upstream] [external/envoy/source/common/upstream/logical_dns_cluster.cc:108] async DNS resolution complete for localhost\r\n[2020-10-16 11:30:24.744][38616745][debug][upstream] [external/envoy/source/common/upstream/logical_dns_cluster.cc:153] DNS refresh rate reset for localhost, refresh rate 5000 ms\r\n[2020-10-16 11:30:24.744][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:128] Resolution for localhost completed (async)\r\n[2020-10-16 11:30:24.744][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:152] Destroying PendingResolution for localhost\r\n^C[2020-10-16 11:30:25.774][38616745][warning][main] [external/envoy/source/server/server.cc:622] caught SIGINT\r\n[2020-10-16 11:30:25.774][38616745][info][main] [external/envoy/source/server/server.cc:738] shutting down server instance\r\n[2020-10-16 11:30:25.774][38616745][info][main] [external/envoy/source/server/server.cc:685] main dispatch loop exited\r\n[2020-10-16 11:30:25.774][38616752][debug][main] [external/envoy/source/server/worker_impl.cc:133] worker exited dispatch loop\r\n[2020-10-16 11:30:25.774][38616752][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:39] Joining completionThread\r\n[2020-10-16 11:30:25.774][38616761][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:72] completionThread exiting\r\n[2020-10-16 11:30:25.774][38616752][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:41] Joined completionThread\r\n[2020-10-16 11:30:25.774][38616752][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1056] shutting down thread local cluster manager\r\n[2020-10-16 11:30:25.774][38616753][debug][main] [external/envoy/source/server/worker_impl.cc:133] worker exited dispatch loop\r\n[2020-10-16 11:30:25.774][38616753][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:39] Joining completionThread\r\n[2020-10-16 11:30:25.774][38616762][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:72] completionThread exiting\r\n[2020-10-16 11:30:25.774][38616753][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:41] Joined completionThread\r\n[2020-10-16 11:30:25.774][38616753][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1056] shutting down thread local cluster manager\r\n[2020-10-16 11:30:25.775][38616754][debug][main] [external/envoy/source/server/worker_impl.cc:133] worker exited dispatch loop\r\n[2020-10-16 11:30:25.775][38616754][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:39] Joining completionThread\r\n[2020-10-16 11:30:25.775][38616763][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:72] completionThread exiting\r\n[2020-10-16 11:30:25.775][38616754][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:41] Joined completionThread\r\n[2020-10-16 11:30:25.775][38616754][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1056] shutting down thread local cluster manager\r\n[2020-10-16 11:30:25.775][38616755][debug][main] [external/envoy/source/server/worker_impl.cc:133] worker exited dispatch loop\r\n[2020-10-16 11:30:25.775][38616755][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:39] Joining completionThread\r\n[2020-10-16 11:30:25.775][38616760][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:72] completionThread exiting\r\n[2020-10-16 11:30:25.775][38616755][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:41] Joined completionThread\r\n[2020-10-16 11:30:25.775][38616755][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1056] shutting down thread local cluster manager\r\n[2020-10-16 11:30:25.776][38616756][debug][main] [external/envoy/source/server/worker_impl.cc:133] worker exited dispatch loop\r\n[2020-10-16 11:30:25.776][38616756][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:39] Joining completionThread\r\n[2020-10-16 11:30:25.776][38616764][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:72] completionThread exiting\r\n[2020-10-16 11:30:25.776][38616756][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:41] Joined completionThread\r\n[2020-10-16 11:30:25.776][38616756][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1056] shutting down thread local cluster manager\r\n[2020-10-16 11:30:25.776][38616757][debug][main] [external/envoy/source/server/worker_impl.cc:133] worker exited dispatch loop\r\n[2020-10-16 11:30:25.776][38616757][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:39] Joining completionThread\r\n[2020-10-16 11:30:25.777][38616766][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:72] completionThread exiting\r\n[2020-10-16 11:30:25.777][38616757][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:41] Joined completionThread\r\n[2020-10-16 11:30:25.777][38616757][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1056] shutting down thread local cluster manager\r\n[2020-10-16 11:30:25.777][38616758][debug][main] [external/envoy/source/server/worker_impl.cc:133] worker exited dispatch loop\r\n[2020-10-16 11:30:25.777][38616758][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:39] Joining completionThread\r\n[2020-10-16 11:30:25.777][38616765][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:72] completionThread exiting\r\n[2020-10-16 11:30:25.777][38616758][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:41] Joined completionThread\r\n[2020-10-16 11:30:25.777][38616758][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1056] shutting down thread local cluster manager\r\n[2020-10-16 11:30:25.777][38616759][debug][main] [external/envoy/source/server/worker_impl.cc:133] worker exited dispatch loop\r\n[2020-10-16 11:30:25.777][38616759][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:39] Joining completionThread\r\n[2020-10-16 11:30:25.777][38616767][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:72] completionThread exiting\r\n[2020-10-16 11:30:25.777][38616759][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:41] Joined completionThread\r\n[2020-10-16 11:30:25.777][38616759][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1056] shutting down thread local cluster manager\r\n[2020-10-16 11:30:25.777][38616745][debug][main] [external/envoy/source/server/server.cc:190] flushing stats\r\n[2020-10-16 11:30:25.777][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:31] ClusterImplBase destroyed\r\n[2020-10-16 11:30:25.777][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:31] init manager Cluster local_ssh destroyed\r\n[2020-10-16 11:30:25.777][38616745][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:39] Joining completionThread\r\n[2020-10-16 11:30:25.777][38616749][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:72] completionThread exiting\r\n[2020-10-16 11:30:25.777][38616745][debug][grpc] [external/envoy/source/common/grpc/google_async_client_impl.cc:41] Joined completionThread\r\n[2020-10-16 11:30:25.777][38616745][debug][upstream] [external/envoy/source/common/upstream/cluster_manager_impl.cc:1056] shutting down thread local cluster manager\r\n[2020-10-16 11:30:25.777][38616745][info][main] [external/envoy/source/server/server.cc:731] exiting\r\n[2020-10-16 11:30:25.777][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:31] RunHelper destroyed\r\n[2020-10-16 11:30:25.777][38616745][debug][main] [external/envoy/source/server/server.cc:132] destroying listener manager\r\n[2020-10-16 11:30:25.777][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:31] Listener-local-init-watcher listener_0 destroyed\r\n[2020-10-16 11:30:25.778][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:31] init manager Listener-local-init-manager listener_0 8273926099384046357 destroyed\r\n[2020-10-16 11:30:25.778][38616745][debug][init] [external/envoy/source/common/init/target_impl.cc:34] target Listener-init-target listener_0 destroyed\r\n[2020-10-16 11:30:25.778][38616745][debug][main] [external/envoy/source/server/server.cc:134] destroyed listener manager\r\n[2020-10-16 11:30:25.778][38616745][debug][main] [external/envoy/source/common/access_log/access_log_manager_impl.cc:16] destroying access logger /tmp/envoy_access_log\r\n[2020-10-16 11:30:25.778][38616745][debug][main] [external/envoy/source/common/access_log/access_log_manager_impl.cc:16] destroying access logger /tmp/admin_access.log\r\n[2020-10-16 11:30:25.778][38616745][debug][main] [external/envoy/source/common/access_log/access_log_manager_impl.cc:19] destroyed access loggers\r\n[2020-10-16 11:30:25.778][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:30] Destructing DNS resolver\r\n[2020-10-16 11:30:25.778][38616745][debug][upstream] [external/envoy/source/common/network/apple_dns_impl.cc:35] DNSServiceRefDeallocate main sd ref\r\n[2020-10-16 11:30:25.778][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:31] init manager RTDS destroyed\r\n[2020-10-16 11:30:25.778][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:31] RTDS destroyed\r\n[2020-10-16 11:30:25.779][38616745][debug][init] [external/envoy/source/common/init/watcher_impl.cc:31] init manager Server destroyed\r\n</details>\r\n\r\n<details>\r\n<summary>Access Logs</summary>\r\n[2020-10-16T15:30:22.435Z] \"CONNECT - HTTP/1.1\" 404 NR 0 0 1 - \"-\" \"-\" \"dc97253a-f401-4007-8272-289f2418f825\" \"localhost:22\" \"-\"\r\n</details>\r\n\r\nSpecific section:\r\n\r\n```\r\n[2020-10-16 11:30:22.435][38616752][debug][http] [external/envoy/source/common/http/conn_manager_impl.cc:837] [C0][S6160696471777353796] request headers complete (end_stream=false):\r\n':authority', 'localhost:22'\r\n':method', 'CONNECT'\r\n'proxy-connection', 'Keep-Alive'\r\n\r\n[2020-10-16 11:30:22.436][38616752][debug][router] [external/envoy/source/common/router/router.cc:364] [C0][S6160696471777353796] no cluster match for URL ''\r\n[2020-10-16 11:30:22.436][38616752][debug][http] [external/envoy/source/common/http/filter_manager.cc:805] [C0][S6160696471777353796] Sending local reply with details route_not_found\r\n[2020-10-16 11:30:22.436][38616752][debug][http] [external/envoy/source/common/http/conn_manager_impl.cc:1435] [C0][S6160696471777353796] encoding headers via codec (end_stream=true):\r\n':status', '404'\r\n'date', 'Fri, 16 Oct 2020 15:30:22 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-10-16 11:30:22.436][38616752][debug][http] [external/envoy/source/common/http/conn_manager_impl.cc:176] [C0][S6160696471777353796] doEndStream() resetting stream\r\n[2020-10-16 11:30:22.436][38616752][debug][http] [external/envoy/source/common/http/conn_manager_impl.cc:1484] [C0][S6160696471777353796] stream reset\r\n```\r\n\r\n>**Note**: If there are privacy concerns, sanitize the data prior to\r\nsharing.\r\n\r\n*Call Stack*:\r\n> If the Envoy binary is crashing, a call stack is **required**.\r\nPlease refer to the [Bazel Stack trace documentation](https://github.com/envoyproxy/envoy/tree/master/bazel#stack-trace-symbol-resolution).\r\n",
  "closed_at": "2020-10-21T20:25:39Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/5194569?v=4",
    "events_url": "https://api.github.com/users/asraa/events{/privacy}",
    "followers_url": "https://api.github.com/users/asraa/followers",
    "following_url": "https://api.github.com/users/asraa/following{/other_user}",
    "gists_url": "https://api.github.com/users/asraa/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/asraa",
    "id": 5194569,
    "login": "asraa",
    "node_id": "MDQ6VXNlcjUxOTQ1Njk=",
    "organizations_url": "https://api.github.com/users/asraa/orgs",
    "received_events_url": "https://api.github.com/users/asraa/received_events",
    "repos_url": "https://api.github.com/users/asraa/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/asraa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/asraa/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/asraa"
  },
  "comments": 6,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/13609/comments",
  "created_at": "2020-10-16T15:37:48Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/13609/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/13609",
  "id": 723328550,
  "labels": [
    {
      "color": "d4c5f9",
      "default": false,
      "description": "",
      "id": 1715341036,
      "name": "area/http",
      "node_id": "MDU6TGFiZWwxNzE1MzQxMDM2",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/http"
    },
    {
      "color": "ee0701",
      "default": true,
      "description": null,
      "id": 421403907,
      "name": "bug",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDc=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/13609/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU3MjMzMjg1NTA=",
  "number": 13609,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Route connect_matcher not working with non-wildcard VirtualHost domains",
  "updated_at": "2020-10-21T20:25:39Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/13609",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/6198562?v=4",
    "events_url": "https://api.github.com/users/travisgroth/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisgroth/followers",
    "following_url": "https://api.github.com/users/travisgroth/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisgroth/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisgroth",
    "id": 6198562,
    "login": "travisgroth",
    "node_id": "MDQ6VXNlcjYxOTg1NjI=",
    "organizations_url": "https://api.github.com/users/travisgroth/orgs",
    "received_events_url": "https://api.github.com/users/travisgroth/received_events",
    "repos_url": "https://api.github.com/users/travisgroth/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisgroth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisgroth/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisgroth"
  }
}