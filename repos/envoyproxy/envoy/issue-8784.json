{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/2023366?v=4",
    "events_url": "https://api.github.com/users/snowp/events{/privacy}",
    "followers_url": "https://api.github.com/users/snowp/followers",
    "following_url": "https://api.github.com/users/snowp/following{/other_user}",
    "gists_url": "https://api.github.com/users/snowp/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/snowp",
    "id": 2023366,
    "login": "snowp",
    "node_id": "MDQ6VXNlcjIwMjMzNjY=",
    "organizations_url": "https://api.github.com/users/snowp/orgs",
    "received_events_url": "https://api.github.com/users/snowp/received_events",
    "repos_url": "https://api.github.com/users/snowp/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/snowp/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/snowp/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/snowp"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/2023366?v=4",
      "events_url": "https://api.github.com/users/snowp/events{/privacy}",
      "followers_url": "https://api.github.com/users/snowp/followers",
      "following_url": "https://api.github.com/users/snowp/following{/other_user}",
      "gists_url": "https://api.github.com/users/snowp/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/snowp",
      "id": 2023366,
      "login": "snowp",
      "node_id": "MDQ6VXNlcjIwMjMzNjY=",
      "organizations_url": "https://api.github.com/users/snowp/orgs",
      "received_events_url": "https://api.github.com/users/snowp/received_events",
      "repos_url": "https://api.github.com/users/snowp/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/snowp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/snowp/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/snowp"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "*Title*: *Caught Segmentation fault, suspect faulting address 0x0.*\r\n\r\n*Description*:\r\n>We are experiencing periodic restarts due to a segmentation fault. With envoy.filters.http.grpc_http1_reverse_bridge enabled.\r\nWe have realized that it is \"always\" after an error 418 due to [nginx waf](https://docs.nginx.com/nginx-waf/).\r\nIs it possible that we have forgotten some envoy config?\r\nEnvoy version: ebd972ecb49bc50bd754fdecb3f84c70d2ad26b6/1.12.0-dev/Clean/RELEASE/BoringSSL (but we experienced it using v1.11.0 stable version too)\r\n\r\n*Config*:\r\n```\r\nadmin:\r\n  access_log_path: /dev/stdout\r\n  address:\r\n    socket_address:\r\n      address: 0.0.0.0\r\n      port_value: 9901\r\n\r\nstatic_resources:\r\n  listeners:\r\n  - name: listener_0\r\n    address:\r\n      socket_address:\r\n        address: 0.0.0.0\r\n        port_value: 443\r\n    filter_chains:\r\n    - filters:\r\n      - name: envoy.http_connection_manager\r\n        config:\r\n          use_remote_address: true\r\n          access_log:\r\n          - name: envoy.file_access_log\r\n            config:\r\n              path: /dev/stdout\r\n          stat_prefix: ingress_http\r\n          route_config:\r\n            name: local_route\r\n            virtual_hosts:\r\n            - name: local_service\r\n              domains: [\"*\"]\r\n              routes:\r\n              - match:\r\n                  prefix: \"/\"\r\n                route:\r\n                  host_rewrite: grpcbackend-internal\r\n                  cluster: backend\r\n                  timeout: 50.00s\r\n          http_filters:\r\n          - name: envoy.filters.http.grpc_http1_reverse_bridge\r\n            config:\r\n              content_type: application/grpc+proto\r\n              withhold_grpc_frames: true\r\n          - name: envoy.router\r\n      use_proxy_proto: true\r\n      tls_context:\r\n        common_tls_context:\r\n          alpn_protocols:\r\n            - h2\r\n            - http/1.1\r\n          tls_certificates:\r\n            - certificate_chain: {filename: xxx.pem}\r\n              private_key: {filename: xxx.key}\r\n  clusters:\r\n  - name: backend\r\n    connect_timeout: 50.00s\r\n    type: LOGICAL_DNS\r\n    dns_lookup_family: V4_ONLY\r\n    lb_policy: ROUND_ROBIN\r\n    hosts:\r\n      - socket_address:\r\n          address: http-internal\r\n          port_value: 80\r\n```\r\n\r\n*Call Stack*:\r\n>\r\n```\r\nStreamInfoImpl 0x2506eb8, protocol_: 2, response_code_: null, response_code_details_: via_upstream, health_check_request_: 0, route_name_:\r\n&stream_info_:\r\nresponse_trailers_: null\r\n'x-envoy-upstream-service-time', '29'\r\n'connection', 'keep-alive'\r\n'content-length', '0'\r\n'date', 'Mon, 28 Oct 2019 10:49:42 GMT'\r\n'server', 'nginx'\r\n':status', '418'\r\nresponse_headers_:\r\nrequest_trailers_: null\r\n'x-envoy-expected-rq-timeout-ms', '50000'\r\n'accept', 'application/grpc+proto'\r\n'x-request-id', 'xxx'\r\n'x-envoy-external-address', 'x.x.x.x'\r\n'x-forwarded-proto', 'https'\r\n'x-forwarded-for', 'x.x.x.x'\r\n'grpc-timeout', '4770m'\r\n'accept-encoding', 'identity,gzip'\r\n'grpc-accept-encoding', 'identity,deflate,gzip'\r\n'user-agent', 'grpc-csharp/1.23.0-dev grpc-c/7.0.0 (android; chttp2; gangnam)'\r\n'content-type', 'application/grpc+proto'\r\n'te', 'trailers'\r\n':path', '/rpc.backend.Service/Xxxx'\r\n':authority', 'backend'\r\n':method', 'POST'\r\n':scheme', 'http'\r\nrequest_headers_:\r\nActiveStream 0x2506d80, stream_id_: 9773374393975308796, has_continue_headers_: 0, is_head_request_: 0, decoding_headers_only_: 0, encoding_headers_only_: 0\r\n[2019-10-28 10:49:42.552][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:77] #22: [0x7f859b400f30]\r\n[2019-10-28 10:49:42.552][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #21: Envoy::Thread::ThreadImplPosix::ThreadImplPosix()::$_0::__invoke() [0x128d1a5]\r\n[2019-10-28 10:49:42.548][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #20: Envoy::Server::WorkerImpl::threadRoutine() [0xe0bd3b]\r\n[2019-10-28 10:49:42.543][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #19: event_base_loop [0x1104d9e]\r\n[2019-10-28 10:49:42.459][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #18: event_process_active_single_queue [0x11065b7]\r\n[2019-10-28 10:49:42.454][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #17: Envoy::Event::FileEventImpl::assignEvents()::$_0::__invoke() [0xe13f15]\r\n[2019-10-28 10:49:42.450][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #16: Envoy::Network::ConnectionImpl::onFileEvent() [0xe19381]\r\n[2019-10-28 10:49:42.445][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #15: Envoy::Network::ConnectionImpl::onReadReady() [0xe198c6]\r\n[2019-10-28 10:49:42.366][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #14: Envoy::Network::FilterManagerImpl::onContinueReading() [0xe1cf0b]\r\n[2019-10-28 10:49:42.363][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #13: Envoy::Http::CodecClient::CodecReadFilter::onData() [0xfbeb4d]\r\n[2019-10-28 10:49:42.360][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #12: Envoy::Http::CodecClient::onData() [0xfbdf96]\r\n[2019-10-28 10:49:42.357][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #11: Envoy::Http::Http1::ConnectionImpl::dispatch() [0x103546f]\r\n[2019-10-28 10:49:42.353][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #10: Envoy::Http::Http1::ConnectionImpl::dispatchSlice() [0x1035685]\r\n[2019-10-28 10:49:42.349][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #9: http_parser_execute [0x110c95e]\r\n[2019-10-28 10:49:42.345][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #8: Envoy::Http::Http1::ConnectionImpl::$_7::__invoke() [0x1039e9d]\r\n[2019-10-28 10:49:42.261][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #7: Envoy::Http::Http1::ConnectionImpl::onMessageCompleteBase() [0x1036429]\r\n[2019-10-28 10:49:42.254][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #6: Envoy::Http::Http1::ClientConnectionImpl::onMessageComplete() [0x1038b16]\r\n[2019-10-28 10:49:42.250][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #5: Envoy::Http::StreamDecoderWrapper::decodeHeaders() [0xfbec7c]\r\n[2019-10-28 10:49:42.245][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #4: Envoy::Http::Http1::ConnPoolImpl::StreamWrapper::decodeHeaders() [0xf4f336]\r\n[2019-10-28 10:49:42.238][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #3: Envoy::Router::Filter::UpstreamRequest::decodeHeaders() [0xfddbf6]\r\n[2019-10-28 10:49:42.234][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #2: Envoy::Router::Filter::onUpstreamHeaders() [0xfdba05]\r\n[2019-10-28 10:49:42.229][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:75] #1: Envoy::Http::ConnectionManagerImpl::ActiveStream::encodeHeaders() [0x102710b]\r\n[2019-10-28 10:49:42.225][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:77] #0: [0x7f859b40c420]\r\n[2019-10-28 10:49:42.224][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:71] Envoy version: ebd972ecb49bc50bd754fdecb3f84c70d2ad26b6/1.12.0-dev/Clean/RELEASE/BoringSSL\r\n[2019-10-28 10:49:42.224][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:70] Backtrace (use tools/stack_decode.py to get line numbers):\r\n[2019-10-28 10:49:42.224][18][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:83] Caught Segmentation fault, suspect faulting address 0x0\r\n```",
  "closed_at": "2019-10-28T21:56:22Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/2023366?v=4",
    "events_url": "https://api.github.com/users/snowp/events{/privacy}",
    "followers_url": "https://api.github.com/users/snowp/followers",
    "following_url": "https://api.github.com/users/snowp/following{/other_user}",
    "gists_url": "https://api.github.com/users/snowp/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/snowp",
    "id": 2023366,
    "login": "snowp",
    "node_id": "MDQ6VXNlcjIwMjMzNjY=",
    "organizations_url": "https://api.github.com/users/snowp/orgs",
    "received_events_url": "https://api.github.com/users/snowp/received_events",
    "repos_url": "https://api.github.com/users/snowp/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/snowp/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/snowp/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/snowp"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/8784/comments",
  "created_at": "2019-10-28T14:40:42Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/8784/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/8784",
  "id": 513347735,
  "labels": [
    {
      "color": "ee0701",
      "default": true,
      "description": null,
      "id": 421403907,
      "name": "bug",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDc=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/8784/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1MTMzNDc3MzU=",
  "number": 8784,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Caught Segmentation fault, suspect faulting address 0x0.",
  "updated_at": "2019-10-28T21:56:22Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/8784",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/8776679?v=4",
    "events_url": "https://api.github.com/users/sp-manuel-jurado/events{/privacy}",
    "followers_url": "https://api.github.com/users/sp-manuel-jurado/followers",
    "following_url": "https://api.github.com/users/sp-manuel-jurado/following{/other_user}",
    "gists_url": "https://api.github.com/users/sp-manuel-jurado/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sp-manuel-jurado",
    "id": 8776679,
    "login": "sp-manuel-jurado",
    "node_id": "MDQ6VXNlcjg3NzY2Nzk=",
    "organizations_url": "https://api.github.com/users/sp-manuel-jurado/orgs",
    "received_events_url": "https://api.github.com/users/sp-manuel-jurado/received_events",
    "repos_url": "https://api.github.com/users/sp-manuel-jurado/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sp-manuel-jurado/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sp-manuel-jurado/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sp-manuel-jurado"
  }
}