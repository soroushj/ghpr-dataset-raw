{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "*Description*:\r\n\r\nWe're running envoy to serve customer traffic in GKE clusters, configured by contour. Currently we're using contour 0.7 and envoy 1.7.0.\r\n\r\nWe would like to monitor the TLS versions that are actively being used by our customers, to determine when it's feasible to ratchet up the minimum version.\r\n\r\nI've noticed that the stats exposed by envoy include the ciphers being used, but not the TLS version:\r\n\r\n```\r\n$ curl -s 127.0.0.1:8002/stats | grep tls\r\ntls_inspector.alpn_found: 584\r\ntls_inspector.alpn_not_found: 2674193\r\ntls_inspector.client_hello_too_large: 0\r\ntls_inspector.connection_closed: 2\r\ntls_inspector.read_error: 0\r\ntls_inspector.read_timeout: 3\r\ntls_inspector.sni_found: 2674754\r\ntls_inspector.sni_not_found: 23\r\ntls_inspector.tls_found: 2674777\r\ntls_inspector.tls_not_found: 41\r\n\r\n$ curl -s 127.0.0.1:8002/stats | grep ssl\r\nhttp.admin.downstream_cx_ssl_active: 0\r\nhttp.admin.downstream_cx_ssl_total: 0\r\nhttp.ingress_http.downstream_cx_ssl_active: 0\r\nhttp.ingress_http.downstream_cx_ssl_total: 0\r\nhttp.ingress_https.downstream_cx_ssl_active: 2\r\nhttp.ingress_https.downstream_cx_ssl_total: 2674877\r\nhttp.stats.downstream_cx_ssl_active: 0\r\nhttp.stats.downstream_cx_ssl_total: 0\r\nlistener.0.0.0.0_8443.ssl.ciphers.ECDHE-RSA-AES128-GCM-SHA256: 2674875\r\nlistener.0.0.0.0_8443.ssl.ciphers.ECDHE-RSA-CHACHA20-POLY1305: 2\r\nlistener.0.0.0.0_8443.ssl.connection_error: 0\r\nlistener.0.0.0.0_8443.ssl.fail_verify_cert_hash: 0\r\nlistener.0.0.0.0_8443.ssl.fail_verify_error: 0\r\nlistener.0.0.0.0_8443.ssl.fail_verify_no_cert: 0\r\nlistener.0.0.0.0_8443.ssl.fail_verify_san: 0\r\nlistener.0.0.0.0_8443.ssl.handshake: 2674877\r\nlistener.0.0.0.0_8443.ssl.no_certificate: 2674877\r\nlistener.0.0.0.0_8443.ssl.session_reused: 1336186\r\n```\r\n\r\nIs it possible to have a count of TLS versions (1.0/1.1/1.2/1.3) exported as well?\r\n",
  "closed_at": "2018-12-11T19:23:53Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/53179?v=4",
    "events_url": "https://api.github.com/users/zuercher/events{/privacy}",
    "followers_url": "https://api.github.com/users/zuercher/followers",
    "following_url": "https://api.github.com/users/zuercher/following{/other_user}",
    "gists_url": "https://api.github.com/users/zuercher/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/zuercher",
    "id": 53179,
    "login": "zuercher",
    "node_id": "MDQ6VXNlcjUzMTc5",
    "organizations_url": "https://api.github.com/users/zuercher/orgs",
    "received_events_url": "https://api.github.com/users/zuercher/received_events",
    "repos_url": "https://api.github.com/users/zuercher/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/zuercher/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zuercher/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/zuercher"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/5188/comments",
  "created_at": "2018-12-03T07:08:52Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/5188/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/5188",
  "id": 386685775,
  "labels": [
    {
      "color": "84b6eb",
      "default": true,
      "description": "Feature requests. Not bugs or questions.",
      "id": 421403909,
      "name": "enhancement",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDk=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/enhancement"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/5188/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzODY2ODU3NzU=",
  "number": 5188,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Feature Request: expose stats on TLS versions in use",
  "updated_at": "2018-12-11T19:23:53Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/5188",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/8132?v=4",
    "events_url": "https://api.github.com/users/yob/events{/privacy}",
    "followers_url": "https://api.github.com/users/yob/followers",
    "following_url": "https://api.github.com/users/yob/following{/other_user}",
    "gists_url": "https://api.github.com/users/yob/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/yob",
    "id": 8132,
    "login": "yob",
    "node_id": "MDQ6VXNlcjgxMzI=",
    "organizations_url": "https://api.github.com/users/yob/orgs",
    "received_events_url": "https://api.github.com/users/yob/received_events",
    "repos_url": "https://api.github.com/users/yob/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/yob/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yob/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/yob"
  }
}