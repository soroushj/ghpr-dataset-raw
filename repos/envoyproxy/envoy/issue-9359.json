{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "\r\n**Problem description**:\r\n\r\nThe official docker container is used by e.g. Contour ingress controller.\r\n\r\nWhile Contour is able to replace certificates for user plane by using SDS, it is not currently possible to rotate control plane certificates (xDS gRPC interface) without traffic interruption.\r\n\r\n**Proposal for a new feature**:\r\n\r\nInclude a new binary in official Envoy container images at https://hub.docker.com/r/envoyproxy/.  This new binary can be used by deployments to\r\n\r\n1) acting as pid 1 in the container and forking & execing `envoy`\r\n2) triggering Envoy's hot restart procedure when certificate or key files are updated\r\n\r\ninotify can be used to watch the file updates, which works with e.g. Kubernetes secret volume mounts.\r\n\r\n**Implementation alternatives**:\r\n\r\nWith your guidance, I'd be interested in implementing the above feature and submitting PR.\r\n\r\nThe default entrypoint can still remain like it is currently.  The new binary could be \"opt-in\" for deployments that require xDS with TLS and hot-reload.\r\n\r\nOne implementation alternative would be to extend [hot-restarter.py](https://github.com/envoyproxy/envoy/tree/master/restarter) with inotify, but alternatively new version could be implemented with C++ in order to avoid bringing Python as dependency into all Envoy images.",
  "closed_at": "2020-04-01T19:04:02Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/1016047?v=4",
    "events_url": "https://api.github.com/users/lizan/events{/privacy}",
    "followers_url": "https://api.github.com/users/lizan/followers",
    "following_url": "https://api.github.com/users/lizan/following{/other_user}",
    "gists_url": "https://api.github.com/users/lizan/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/lizan",
    "id": 1016047,
    "login": "lizan",
    "node_id": "MDQ6VXNlcjEwMTYwNDc=",
    "organizations_url": "https://api.github.com/users/lizan/orgs",
    "received_events_url": "https://api.github.com/users/lizan/received_events",
    "repos_url": "https://api.github.com/users/lizan/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/lizan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lizan/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/lizan"
  },
  "comments": 17,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/9359/comments",
  "created_at": "2019-12-16T14:55:28Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/9359/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/9359",
  "id": 538462886,
  "labels": [
    {
      "color": "0e8a16",
      "default": false,
      "description": "",
      "id": 1717585465,
      "name": "area/xds",
      "node_id": "MDU6TGFiZWwxNzE3NTg1NDY1",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/xds"
    },
    {
      "color": "c5def5",
      "default": false,
      "description": "Needs design doc/proposal before implementation",
      "id": 620444894,
      "name": "design proposal",
      "node_id": "MDU6TGFiZWw2MjA0NDQ4OTQ=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/design%20proposal"
    },
    {
      "color": "fbca04",
      "default": true,
      "description": "Needs help!",
      "id": 645516726,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWw2NDU1MTY3MjY=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/help%20wanted"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/9359/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1Mzg0NjI4ODY=",
  "number": 9359,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Provide support for certificate rotation for xDS connection in Envoy container images",
  "updated_at": "2020-04-01T19:04:02Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/9359",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/85464?v=4",
    "events_url": "https://api.github.com/users/tsaarni/events{/privacy}",
    "followers_url": "https://api.github.com/users/tsaarni/followers",
    "following_url": "https://api.github.com/users/tsaarni/following{/other_user}",
    "gists_url": "https://api.github.com/users/tsaarni/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/tsaarni",
    "id": 85464,
    "login": "tsaarni",
    "node_id": "MDQ6VXNlcjg1NDY0",
    "organizations_url": "https://api.github.com/users/tsaarni/orgs",
    "received_events_url": "https://api.github.com/users/tsaarni/received_events",
    "repos_url": "https://api.github.com/users/tsaarni/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/tsaarni/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tsaarni/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/tsaarni"
  }
}