{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "*Title*: *Initialise Envoy with static config only, when management server is not responding*\r\n\r\n*Description*:\r\nIn our envoy config we have static listeners, several static clusters and some dynamic resources fetched from management server (by RDS, CDS and EDS).\r\n\r\nOur static config is sufficient to handle our \"minimal\" viable scenario, so we want to be able to initialise Envoy successfully, even if the management server is down.\r\n\r\nOne of the static listeners doesn't use dynamic resources at all (only static route config and static clusters). However, when the management server is not responding, even that listener doesn't work (returns empty reply for all requests) \r\n\r\nWhen the management server is down Envoy is stuck at `PRE_INITIALIZING` state and we have in application log:\r\n\r\n```\r\n[2019-01-16 16:38:02.009][000025][info][config] [source/server/configuration_impl.cc:50] loading 0 static secret(s)\r\n[2019-01-16 16:38:02.009][000025][info][config] [source/server/configuration_impl.cc:56] loading 2 cluster(s)\r\n[2019-01-16 16:38:02.014][000025][info][config] [source/server/configuration_impl.cc:67] loading 2 listener(s)\r\n[2019-01-16 16:38:02.017][000025][info][config] [source/server/configuration_impl.cc:92] loading tracing configuration\r\n[2019-01-16 16:38:02.017][000025][info][config] [source/server/configuration_impl.cc:112] loading stats sink configuration\r\n[2019-01-16 16:38:02.017][000025][info][main] [source/server/server.cc:463] starting main dispatch loop\r\n[2019-01-16 16:38:02.019][000025][info][upstream] [source/common/upstream/cluster_manager_impl.cc:132] cm init: initializing cds\r\n[2019-01-16 16:38:03.015][000025][warning][upstream] [source/common/config/grpc_mux_impl.cc:268] gRPC config stream closed: 14, upstream connect error or disconnect/reset before headers\r\n[2019-01-16 16:38:04.101][000025][warning][upstream] [source/common/config/grpc_mux_impl.cc:268] gRPC config stream closed: 14, upstream connect error or disconnect/reset before headers\r\n<the last line is repeated infinitely>\r\n```\r\n\r\nIs there any way to make management server optional, and successfully initialise Envoy when management server is not responding?\r\n",
  "closed_at": "2019-01-23T15:45:51Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6305260?v=4",
    "events_url": "https://api.github.com/users/mattklein123/events{/privacy}",
    "followers_url": "https://api.github.com/users/mattklein123/followers",
    "following_url": "https://api.github.com/users/mattklein123/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattklein123/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mattklein123",
    "id": 6305260,
    "login": "mattklein123",
    "node_id": "MDQ6VXNlcjYzMDUyNjA=",
    "organizations_url": "https://api.github.com/users/mattklein123/orgs",
    "received_events_url": "https://api.github.com/users/mattklein123/received_events",
    "repos_url": "https://api.github.com/users/mattklein123/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mattklein123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattklein123/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mattklein123"
  },
  "comments": 9,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/5622/comments",
  "created_at": "2019-01-16T16:47:30Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/5622/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/5622",
  "id": 399899489,
  "labels": [
    {
      "color": "ee0701",
      "default": true,
      "description": null,
      "id": 421403907,
      "name": "bug",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDc=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/bug"
    },
    {
      "color": "fbca04",
      "default": true,
      "description": "Needs help!",
      "id": 645516726,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWw2NDU1MTY3MjY=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/help%20wanted"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/5622/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzOTk4OTk0ODk=",
  "number": 5622,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Initialize with static config only when management server is not responding",
  "updated_at": "2019-01-23T15:45:51Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/5622",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/30294040?v=4",
    "events_url": "https://api.github.com/users/MarcinFalkowski/events{/privacy}",
    "followers_url": "https://api.github.com/users/MarcinFalkowski/followers",
    "following_url": "https://api.github.com/users/MarcinFalkowski/following{/other_user}",
    "gists_url": "https://api.github.com/users/MarcinFalkowski/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/MarcinFalkowski",
    "id": 30294040,
    "login": "MarcinFalkowski",
    "node_id": "MDQ6VXNlcjMwMjk0MDQw",
    "organizations_url": "https://api.github.com/users/MarcinFalkowski/orgs",
    "received_events_url": "https://api.github.com/users/MarcinFalkowski/received_events",
    "repos_url": "https://api.github.com/users/MarcinFalkowski/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/MarcinFalkowski/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MarcinFalkowski/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/MarcinFalkowski"
  }
}