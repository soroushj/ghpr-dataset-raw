{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "```\r\n2020-08-05T00:31:36.4291883Z [ RUN      ] LuaHttpFilterTest.ImportPublicKey\r\n2020-08-05T00:31:36.4292591Z TestRandomGenerator running with seed 1094790776\r\n2020-08-05T00:31:36.4293344Z unknown file: Failure\r\n2020-08-05T00:31:36.4293602Z \r\n2020-08-05T00:31:36.4294586Z Unexpected mock function call - returning directly.\r\n2020-08-05T00:31:36.4295160Z     Function call: scriptLog(4, 0xffff95346518 pointing to \"bad light userdata pointer\")\r\n2020-08-05T00:31:36.4296042Z Google Mock tried the following 1 expectation, but it didn't match:\r\n2020-08-05T00:31:36.4296451Z \r\n2020-08-05T00:31:36.4297076Z test/extensions/filters/http/lua/lua_filter_test.cc:2001: EXPECT_CALL(*filter_, scriptLog(spdlog::level::trace, StrEq(\"succeeded to import public key\")))...\r\n2020-08-05T00:31:36.4297773Z   Expected arg #0: is equal to 0\r\n2020-08-05T00:31:36.4298144Z            Actual: 4\r\n2020-08-05T00:31:36.4298577Z   Expected arg #1: is equal to \"succeeded to import public key\"\r\n2020-08-05T00:31:36.4299113Z            Actual: 0xffff95346518 pointing to \"bad light userdata pointer\"\r\n2020-08-05T00:31:36.4299798Z          Expected: to be called once\r\n2020-08-05T00:31:36.4300529Z            Actual: never called - unsatisfied and active\r\n2020-08-05T00:31:36.4300970Z Stack trace:\r\n2020-08-05T00:31:36.4301463Z   0x11d5210: testing::internal::UntypedFunctionMockerBase::UntypedInvokeWith()\r\n2020-08-05T00:31:36.4302166Z   0x6a5280: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::TestFilter::scriptLog()\r\n2020-08-05T00:31:36.4302867Z   0x766e84: Envoy::Extensions::HttpFilters::Lua::Filter::scriptError()\r\n2020-08-05T00:31:36.4303616Z   0x768dfc: Envoy::Extensions::HttpFilters::Lua::Filter::doHeaders()\r\n2020-08-05T00:31:36.4304370Z   0x7597a8: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest_ImportPublicKey_Test::TestBody()\r\n2020-08-05T00:31:36.4305120Z   0x11e69b8: testing::internal::HandleExceptionsInMethodIfSupported<>()\r\n2020-08-05T00:31:36.4305629Z   0x11e68d0: testing::Test::Run()\r\n2020-08-05T00:31:36.4306075Z   0x11e7548: testing::TestInfo::Run()\r\n2020-08-05T00:31:36.4306496Z ... Google Test internal frames ...\r\n2020-08-05T00:31:36.4306765Z \r\n2020-08-05T00:31:36.4307164Z test/extensions/filters/http/lua/lua_filter_test.cc:2001: Failure\r\n2020-08-05T00:31:36.4308266Z Actual function call count doesn't match EXPECT_CALL(*filter_, scriptLog(spdlog::level::trace, StrEq(\"succeeded to import public key\")))...\r\n2020-08-05T00:31:36.4308985Z          Expected: to be called once\r\n2020-08-05T00:31:36.4309714Z            Actual: never called - unsatisfied and active\r\n2020-08-05T00:31:36.4310151Z Stack trace:\r\n2020-08-05T00:31:36.4310658Z   0x11d5c4c: testing::internal::UntypedFunctionMockerBase::VerifyAndClearExpectationsLocked()\r\n2020-08-05T00:31:36.4311310Z   0x6b70c8: testing::internal::FunctionMocker<>::~FunctionMocker()\r\n2020-08-05T00:31:36.4311983Z   0x6a5218: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::TestFilter::~TestFilter()\r\n2020-08-05T00:31:36.4312774Z   0x6f6e0c: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest::~LuaHttpFilterTest()\r\n2020-08-05T00:31:36.4313684Z   0x759384: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest_ImportPublicKey_Test::~LuaHttpFilterTest_ImportPublicKey_Test()\r\n2020-08-05T00:31:36.4314488Z   0x11e69b8: testing::internal::HandleExceptionsInMethodIfSupported<>()\r\n2020-08-05T00:31:36.4315010Z   0x11e75a8: testing::TestInfo::Run()\r\n2020-08-05T00:31:36.4315466Z   0x11e7e84: testing::TestSuite::Run()\r\n2020-08-05T00:31:36.4315880Z ... Google Test internal frames ...\r\n2020-08-05T00:31:36.4316152Z \r\n2020-08-05T00:31:36.4316512Z [  FAILED  ] LuaHttpFilterTest.ImportPublicKey (55 ms)\r\n2020-08-05T00:31:36.4316978Z [ RUN      ] LuaHttpFilterTest.InvalidPublicKey\r\n2020-08-05T00:31:36.4317415Z TestRandomGenerator running with seed 1094790776\r\n2020-08-05T00:31:36.4317863Z [       OK ] LuaHttpFilterTest.InvalidPublicKey (6 ms)\r\n2020-08-05T00:31:36.4318310Z [ RUN      ] LuaHttpFilterTest.SignatureVerify\r\n2020-08-05T00:31:36.4318736Z TestRandomGenerator running with seed 1094790776\r\n2020-08-05T00:31:36.4319133Z unknown file: Failure\r\n2020-08-05T00:31:36.4319385Z \r\n2020-08-05T00:31:36.4319975Z Unexpected mock function call - returning directly.\r\n2020-08-05T00:31:36.4320724Z     Function call: scriptLog(4, 0xffff95373f18 pointing to \"bad light userdata pointer\")\r\n2020-08-05T00:31:36.4321345Z Google Mock tried the following 4 expectations, but none matched:\r\n2020-08-05T00:31:36.4321717Z \r\n2020-08-05T00:31:36.4322353Z test/extensions/filters/http/lua/lua_filter_test.cc:2092: tried expectation #0: EXPECT_CALL(*filter_, scriptLog(spdlog::level::trace, StrEq(\"signature is valid\")))...\r\n2020-08-05T00:31:36.4323054Z   Expected arg #0: is equal to 0\r\n2020-08-05T00:31:36.4323422Z            Actual: 4\r\n2020-08-05T00:31:36.4323838Z   Expected arg #1: is equal to \"signature is valid\"\r\n2020-08-05T00:31:36.4324347Z            Actual: 0xffff95373f18 pointing to \"bad light userdata pointer\"\r\n2020-08-05T00:31:36.4324844Z          Expected: to be called once\r\n2020-08-05T00:31:36.4325572Z            Actual: never called - unsatisfied and active\r\n2020-08-05T00:31:36.4326479Z test/extensions/filters/http/lua/lua_filter_test.cc:2093: tried expectation #1: EXPECT_CALL(*filter_, scriptLog(spdlog::level::trace, StrEq(\"unknown is not supported.\")))...\r\n2020-08-05T00:31:36.4327200Z   Expected arg #0: is equal to 0\r\n2020-08-05T00:31:36.4327570Z            Actual: 4\r\n2020-08-05T00:31:36.4327984Z   Expected arg #1: is equal to \"unknown is not supported.\"\r\n2020-08-05T00:31:36.4328510Z            Actual: 0xffff95373f18 pointing to \"bad light userdata pointer\"\r\n2020-08-05T00:31:36.4329005Z          Expected: to be called once\r\n2020-08-05T00:31:36.4329912Z            Actual: never called - unsatisfied and active\r\n2020-08-05T00:31:36.4330827Z test/extensions/filters/http/lua/lua_filter_test.cc:2095: tried expectation #2: EXPECT_CALL(*filter_, scriptLog(spdlog::level::trace, StrEq(\"Failed to verify digest. Error code: 0\")))...\r\n2020-08-05T00:31:36.4331702Z   Expected arg #0: is equal to 0\r\n2020-08-05T00:31:36.4332088Z            Actual: 4\r\n2020-08-05T00:31:36.4332584Z   Expected arg #1: is equal to \"Failed to verify digest. Error code: 0\"\r\n2020-08-05T00:31:36.4333171Z            Actual: 0xffff95373f18 pointing to \"bad light userdata pointer\"\r\n2020-08-05T00:31:36.4333675Z          Expected: to be called once\r\n2020-08-05T00:31:36.4334371Z            Actual: never called - unsatisfied and active\r\n2020-08-05T00:31:36.4335217Z test/extensions/filters/http/lua/lua_filter_test.cc:2097: tried expectation #3: EXPECT_CALL(*filter_, scriptLog(spdlog::level::trace, StrEq(\"Failed to verify digest. Error code: 0\")))...\r\n2020-08-05T00:31:36.4335994Z   Expected arg #0: is equal to 0\r\n2020-08-05T00:31:36.4336360Z            Actual: 4\r\n2020-08-05T00:31:36.4336846Z   Expected arg #1: is equal to \"Failed to verify digest. Error code: 0\"\r\n2020-08-05T00:31:36.4337429Z            Actual: 0xffff95373f18 pointing to \"bad light userdata pointer\"\r\n2020-08-05T00:31:36.4337912Z          Expected: to be called once\r\n2020-08-05T00:31:36.4338631Z            Actual: never called - unsatisfied and active\r\n2020-08-05T00:31:36.4339060Z Stack trace:\r\n2020-08-05T00:31:36.4339557Z   0x11d5210: testing::internal::UntypedFunctionMockerBase::UntypedInvokeWith()\r\n2020-08-05T00:31:36.4340262Z   0x6a5280: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::TestFilter::scriptLog()\r\n2020-08-05T00:31:36.4340953Z   0x766e84: Envoy::Extensions::HttpFilters::Lua::Filter::scriptError()\r\n2020-08-05T00:31:36.4341566Z   0x768dfc: Envoy::Extensions::HttpFilters::Lua::Filter::doHeaders()\r\n2020-08-05T00:31:36.4342320Z   0x75b300: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest_SignatureVerify_Test::TestBody()\r\n2020-08-05T00:31:36.4343047Z   0x11e69b8: testing::internal::HandleExceptionsInMethodIfSupported<>()\r\n2020-08-05T00:31:36.4343561Z   0x11e68d0: testing::Test::Run()\r\n2020-08-05T00:31:36.4344003Z   0x11e7548: testing::TestInfo::Run()\r\n2020-08-05T00:31:36.4344423Z ... Google Test internal frames ...\r\n2020-08-05T00:31:36.4344683Z \r\n2020-08-05T00:31:36.4345087Z test/extensions/filters/http/lua/lua_filter_test.cc:2092: Failure\r\n2020-08-05T00:31:36.4346127Z Actual function call count doesn't match EXPECT_CALL(*filter_, scriptLog(spdlog::level::trace, StrEq(\"signature is valid\")))...\r\n2020-08-05T00:31:36.4347012Z          Expected: to be called once\r\n2020-08-05T00:31:36.4347742Z            Actual: never called - unsatisfied and active\r\n2020-08-05T00:31:36.4348183Z Stack trace:\r\n2020-08-05T00:31:36.4348698Z   0x11d5c4c: testing::internal::UntypedFunctionMockerBase::VerifyAndClearExpectationsLocked()\r\n2020-08-05T00:31:36.4349337Z   0x6b70c8: testing::internal::FunctionMocker<>::~FunctionMocker()\r\n2020-08-05T00:31:36.4350013Z   0x6a5218: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::TestFilter::~TestFilter()\r\n2020-08-05T00:31:36.4350805Z   0x6f6e0c: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest::~LuaHttpFilterTest()\r\n2020-08-05T00:31:36.4351869Z   0x75a574: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest_SignatureVerify_Test::~LuaHttpFilterTest_SignatureVerify_Test()\r\n2020-08-05T00:31:36.4352811Z   0x11e69b8: testing::internal::HandleExceptionsInMethodIfSupported<>()\r\n2020-08-05T00:31:36.4353318Z   0x11e75a8: testing::TestInfo::Run()\r\n2020-08-05T00:31:36.4353779Z   0x11e7e84: testing::TestSuite::Run()\r\n2020-08-05T00:31:36.4354205Z ... Google Test internal frames ...\r\n2020-08-05T00:31:36.4354470Z \r\n2020-08-05T00:31:36.4354875Z test/extensions/filters/http/lua/lua_filter_test.cc:2093: Failure\r\n2020-08-05T00:31:36.4355961Z Actual function call count doesn't match EXPECT_CALL(*filter_, scriptLog(spdlog::level::trace, StrEq(\"unknown is not supported.\")))...\r\n2020-08-05T00:31:36.4356637Z          Expected: to be called once\r\n2020-08-05T00:31:36.4357380Z            Actual: never called - unsatisfied and active\r\n2020-08-05T00:31:36.4357812Z Stack trace:\r\n2020-08-05T00:31:36.4358327Z   0x11d5c4c: testing::internal::UntypedFunctionMockerBase::VerifyAndClearExpectationsLocked()\r\n2020-08-05T00:31:36.4358962Z   0x6b70c8: testing::internal::FunctionMocker<>::~FunctionMocker()\r\n2020-08-05T00:31:36.4359634Z   0x6a5218: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::TestFilter::~TestFilter()\r\n2020-08-05T00:31:36.4360427Z   0x6f6e0c: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest::~LuaHttpFilterTest()\r\n2020-08-05T00:31:36.4361343Z   0x75a574: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest_SignatureVerify_Test::~LuaHttpFilterTest_SignatureVerify_Test()\r\n2020-08-05T00:31:36.4362139Z   0x11e69b8: testing::internal::HandleExceptionsInMethodIfSupported<>()\r\n2020-08-05T00:31:36.4362642Z   0x11e75a8: testing::TestInfo::Run()\r\n2020-08-05T00:31:36.4363093Z   0x11e7e84: testing::TestSuite::Run()\r\n2020-08-05T00:31:36.4363513Z ... Google Test internal frames ...\r\n2020-08-05T00:31:36.4363775Z \r\n2020-08-05T00:31:36.4364183Z test/extensions/filters/http/lua/lua_filter_test.cc:2095: Failure\r\n2020-08-05T00:31:36.4365286Z Actual function call count doesn't match EXPECT_CALL(*filter_, scriptLog(spdlog::level::trace, StrEq(\"Failed to verify digest. Error code: 0\")))...\r\n2020-08-05T00:31:36.4366028Z          Expected: to be called once\r\n2020-08-05T00:31:36.4366762Z            Actual: never called - unsatisfied and active\r\n2020-08-05T00:31:36.4367201Z Stack trace:\r\n2020-08-05T00:31:36.4367713Z   0x11d5c4c: testing::internal::UntypedFunctionMockerBase::VerifyAndClearExpectationsLocked()\r\n2020-08-05T00:31:36.4368352Z   0x6b70c8: testing::internal::FunctionMocker<>::~FunctionMocker()\r\n2020-08-05T00:31:36.4369020Z   0x6a5218: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::TestFilter::~TestFilter()\r\n2020-08-05T00:31:36.4410799Z   0x6f6e0c: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest::~LuaHttpFilterTest()\r\n2020-08-05T00:31:36.4411807Z   0x75a574: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest_SignatureVerify_Test::~LuaHttpFilterTest_SignatureVerify_Test()\r\n2020-08-05T00:31:36.4412615Z   0x11e69b8: testing::internal::HandleExceptionsInMethodIfSupported<>()\r\n2020-08-05T00:31:36.4413127Z   0x11e75a8: testing::TestInfo::Run()\r\n2020-08-05T00:31:36.4413599Z   0x11e7e84: testing::TestSuite::Run()\r\n2020-08-05T00:31:36.4414023Z ... Google Test internal frames ...\r\n2020-08-05T00:31:36.4414561Z \r\n2020-08-05T00:31:36.4414974Z test/extensions/filters/http/lua/lua_filter_test.cc:2097: Failure\r\n2020-08-05T00:31:36.4416352Z Actual function call count doesn't match EXPECT_CALL(*filter_, scriptLog(spdlog::level::trace, StrEq(\"Failed to verify digest. Error code: 0\")))...\r\n2020-08-05T00:31:36.4417116Z          Expected: to be called once\r\n2020-08-05T00:31:36.4417810Z            Actual: never called - unsatisfied and active\r\n2020-08-05T00:31:36.4418240Z Stack trace:\r\n2020-08-05T00:31:36.4418755Z   0x11d5c4c: testing::internal::UntypedFunctionMockerBase::VerifyAndClearExpectationsLocked()\r\n2020-08-05T00:31:36.4419394Z   0x6b70c8: testing::internal::FunctionMocker<>::~FunctionMocker()\r\n2020-08-05T00:31:36.4420076Z   0x6a5218: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::TestFilter::~TestFilter()\r\n2020-08-05T00:31:36.4420873Z   0x6f6e0c: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest::~LuaHttpFilterTest()\r\n2020-08-05T00:31:36.4421948Z   0x75a574: Envoy::Extensions::HttpFilters::Lua::(anonymous namespace)::LuaHttpFilterTest_SignatureVerify_Test::~LuaHttpFilterTest_SignatureVerify_Test()\r\n2020-08-05T00:31:36.4422758Z   0x11e69b8: testing::internal::HandleExceptionsInMethodIfSupported<>()\r\n2020-08-05T00:31:36.4423270Z   0x11e75a8: testing::TestInfo::Run()\r\n2020-08-05T00:31:36.4423730Z   0x11e7e84: testing::TestSuite::Run()\r\n2020-08-05T00:31:36.4424157Z ... Google Test internal frames ...\r\n2020-08-05T00:31:36.4424419Z \r\n2020-08-05T00:31:36.4424786Z [  FAILED  ] LuaHttpFilterTest.SignatureVerify (13 ms)\r\n```",
  "closed_at": "2020-08-17T19:40:17Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/6360027?v=4",
    "events_url": "https://api.github.com/users/yanavlasov/events{/privacy}",
    "followers_url": "https://api.github.com/users/yanavlasov/followers",
    "following_url": "https://api.github.com/users/yanavlasov/following{/other_user}",
    "gists_url": "https://api.github.com/users/yanavlasov/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/yanavlasov",
    "id": 6360027,
    "login": "yanavlasov",
    "node_id": "MDQ6VXNlcjYzNjAwMjc=",
    "organizations_url": "https://api.github.com/users/yanavlasov/orgs",
    "received_events_url": "https://api.github.com/users/yanavlasov/received_events",
    "repos_url": "https://api.github.com/users/yanavlasov/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/yanavlasov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yanavlasov/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/yanavlasov"
  },
  "comments": 6,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12485/comments",
  "created_at": "2020-08-05T04:44:40Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12485/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/12485",
  "id": 673249113,
  "labels": [
    {
      "color": "24e5a8",
      "default": false,
      "description": "",
      "id": 821652591,
      "name": "area/test flakes",
      "node_id": "MDU6TGFiZWw4MjE2NTI1OTE=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/test%20flakes"
    },
    {
      "color": "ee0701",
      "default": true,
      "description": null,
      "id": 421403907,
      "name": "bug",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDc=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/bug"
    },
    {
      "color": "fbca04",
      "default": true,
      "description": "Needs help!",
      "id": 645516726,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWw2NDU1MTY3MjY=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/help%20wanted"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12485/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU2NzMyNDkxMTM=",
  "number": 12485,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Using lua_pushlightuserdata() might be broken on ARM",
  "updated_at": "2020-08-17T19:40:17Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/12485",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6305260?v=4",
    "events_url": "https://api.github.com/users/mattklein123/events{/privacy}",
    "followers_url": "https://api.github.com/users/mattklein123/followers",
    "following_url": "https://api.github.com/users/mattklein123/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattklein123/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mattklein123",
    "id": 6305260,
    "login": "mattklein123",
    "node_id": "MDQ6VXNlcjYzMDUyNjA=",
    "organizations_url": "https://api.github.com/users/mattklein123/orgs",
    "received_events_url": "https://api.github.com/users/mattklein123/received_events",
    "repos_url": "https://api.github.com/users/mattklein123/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mattklein123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattklein123/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mattklein123"
  }
}