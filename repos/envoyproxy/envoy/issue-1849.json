{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "I have an open PR in istio https://github.com/istio/pilot/pull/1406 that uses the Envoy decorator configuration to specify the operation name on client and server spans. It currently uses the route name by default.\r\n\r\nHowever there is one problem with the current PR - if multiple route rules are defined for the same destination service (i.e. with different source service criteria), but with the same matching criteria, it can result in non-deterministic behavior in identifying the operation/span name on the server span - i.e. it depends which route rule matched first in the inbound listener.\r\n\r\nOne way to avoid this problem would be for a decorated outbound request to include an Envoy specific header property defining the operation/span name used in the client span. Once received by the inbound listener, this header value would override any decorator (or default) operation/span name that would have been used on the server span associated with that inbound request.\r\n\r\nTo clarify - this header property would only be added if a decorator had been defined on the outbound listener. If there were concerns about the additional header, then possibly it could also be configurable in some way, so that would only be used in appropriate situations, such as the case in Istio.",
  "closed_at": "2017-10-18T18:52:55Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6305260?v=4",
    "events_url": "https://api.github.com/users/mattklein123/events{/privacy}",
    "followers_url": "https://api.github.com/users/mattklein123/followers",
    "following_url": "https://api.github.com/users/mattklein123/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattklein123/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mattklein123",
    "id": 6305260,
    "login": "mattklein123",
    "node_id": "MDQ6VXNlcjYzMDUyNjA=",
    "organizations_url": "https://api.github.com/users/mattklein123/orgs",
    "received_events_url": "https://api.github.com/users/mattklein123/received_events",
    "repos_url": "https://api.github.com/users/mattklein123/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mattklein123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattklein123/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mattklein123"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/1849/comments",
  "created_at": "2017-10-13T09:31:52Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/1849/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/1849",
  "id": 265226260,
  "labels": [
    {
      "color": "006b75",
      "default": false,
      "description": "",
      "id": 588577390,
      "name": "area/tracing",
      "node_id": "MDU6TGFiZWw1ODg1NzczOTA=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/tracing"
    },
    {
      "color": "84b6eb",
      "default": true,
      "description": "Feature requests. Not bugs or questions.",
      "id": 421403909,
      "name": "enhancement",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDk=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/enhancement"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/1849/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNjUyMjYyNjA=",
  "number": 1849,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "tracing: Enable inbound request header to override tracing operation name",
  "updated_at": "2017-10-18T18:52:55Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/1849",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/164562?v=4",
    "events_url": "https://api.github.com/users/objectiser/events{/privacy}",
    "followers_url": "https://api.github.com/users/objectiser/followers",
    "following_url": "https://api.github.com/users/objectiser/following{/other_user}",
    "gists_url": "https://api.github.com/users/objectiser/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/objectiser",
    "id": 164562,
    "login": "objectiser",
    "node_id": "MDQ6VXNlcjE2NDU2Mg==",
    "organizations_url": "https://api.github.com/users/objectiser/orgs",
    "received_events_url": "https://api.github.com/users/objectiser/received_events",
    "repos_url": "https://api.github.com/users/objectiser/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/objectiser/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/objectiser/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/objectiser"
  }
}