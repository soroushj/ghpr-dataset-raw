{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "*Description*:\r\nThe redis_proxy:command_split_speed_test_test benchmark hits an ASSERT in extensions/filters/network/common/redis/codec.h when run in debug mode.\r\n\r\n*Repro steps*:\r\nbazel run -c dbg //test/extensions/filters/network/redis_proxy:command_split_speed_test\r\n\r\n*Logs*:\r\nBM_Split_Copy/64/131072                594388 ns       594386 ns         1124\r\nBM_Split_Copy/100/131072               675364 ns       675320 ns          816\r\n[2020-01-02 18:52:43.086][123603][critical][assert] [bazel-out/k8-dbg/bin/source/extensions/filters/network/common/redis/_virtual_includes/codec_interface/extensions/filters/network/common/redis/codec.h:67] assert failure: end < base_array_->asArray().size().\r\n\r\n*Call Stack*:\r\nCaught Aborted, suspect faulting address 0x14e380001e2d3\r\nBacktrace (use tools/stack_decode.py to get line numbers):\r\nEnvoy version: 0821223bfed22a890dee853e6c84ce4d27befcf3/1.13.0-dev/Modified/DEBUG/BoringSSL\r\n#0: Envoy::SignalAction::sigHandler() [0x1eed9bc]\r\n#1: __restore_rt [0x7f411b24f3a0]\r\n#2: Envoy::Extensions::NetworkFilters::Common::Redis::RespValue::RespValue() [0xc8629d]\r\n#3: std::__1::__compressed_pair_elem<>::__compressed_pair_elem<>() [0xca2335]\r\n#4: std::__1::__compressed_pair<>::__compressed_pair<>() [0xca1e86]\r\n#5: std::__1::__shared_ptr_emplace<>::__shared_ptr_emplace<>() [0xca1ad5]\r\n#6: std::__1::shared_ptr<>::make_shared<>() [0xca17f7]\r\n#7: std::__1::make_shared<>() [0xca1685]\r\n#8: Envoy::Extensions::NetworkFilters::RedisProxy::CommandSplitSpeedTest::createShared() [0xca1512]\r\n#9: BM_Split_CreateShared() [0xc82acc]\r\n#10: benchmark::internal::FunctionBenchmark::Run() [0x1fc5cd1]\r\n#11: benchmark::internal::BenchmarkInstance::Run() [0x1fd814f]\r\n#12: benchmark::internal::(anonymous namespace)::RunInThread() [0x1fd0631]\r\n#13: benchmark::internal::(anonymous namespace)::BenchmarkRunner::DoNIterations() [0x1fcfe9c]\r\n#14: benchmark::internal::(anonymous namespace)::BenchmarkRunner::DoOneRepetition() [0x1fcf78b]\r\n#15: benchmark::internal::(anonymous namespace)::BenchmarkRunner::BenchmarkRunner() [0x1fcf54a]\r\n#16: benchmark::internal::RunBenchmark() [0x1fcf216]\r\n#17: benchmark::internal::(anonymous namespace)::RunBenchmarks() [0x1fbe3f8]\r\n#18: benchmark::RunSpecifiedBenchmarks() [0x1fbdd49]\r\n#19: benchmark::RunSpecifiedBenchmarks() [0x1fbd7a3]\r\n#20: main [0x1eecf86]\r\n#21: __libc_start_main [0x7f411aea152b]\r\n",
  "closed_at": "2020-02-09T22:39:32Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/in/1724?v=4",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/apps/stale",
    "id": 26384082,
    "login": "stale[bot]",
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "type": "Bot",
    "url": "https://api.github.com/users/stale%5Bbot%5D"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/9541/comments",
  "created_at": "2020-01-02T23:55:42Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/9541/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/9541",
  "id": 544797645,
  "labels": [
    {
      "color": "bfd4f2",
      "default": false,
      "description": "stalebot believes this issue/PR has not been touched recently",
      "id": 867150379,
      "name": "stale",
      "node_id": "MDU6TGFiZWw4NjcxNTAzNzk=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/stale"
    },
    {
      "color": "0e8a16",
      "default": false,
      "description": null,
      "id": 527497761,
      "name": "tech debt",
      "node_id": "MDU6TGFiZWw1Mjc0OTc3NjE=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/tech%20debt"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/9541/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1NDQ3OTc2NDU=",
  "number": 9541,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "[benchmark] ASSERT failure in //test/extensions/filters/network/redis_proxy:command_split_speed_test_test",
  "updated_at": "2020-02-09T22:39:32Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/9541",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/28556681?v=4",
    "events_url": "https://api.github.com/users/antoniovicente/events{/privacy}",
    "followers_url": "https://api.github.com/users/antoniovicente/followers",
    "following_url": "https://api.github.com/users/antoniovicente/following{/other_user}",
    "gists_url": "https://api.github.com/users/antoniovicente/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/antoniovicente",
    "id": 28556681,
    "login": "antoniovicente",
    "node_id": "MDQ6VXNlcjI4NTU2Njgx",
    "organizations_url": "https://api.github.com/users/antoniovicente/orgs",
    "received_events_url": "https://api.github.com/users/antoniovicente/received_events",
    "repos_url": "https://api.github.com/users/antoniovicente/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/antoniovicente/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/antoniovicente/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/antoniovicente"
  }
}