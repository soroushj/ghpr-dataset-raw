{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "\r\n\r\n*Title*: *Redis latency stats coming as 0 when latency is less than 1 ms*\r\n\r\n*Description*:\r\nOur redis server command latencies P50, P90 are under 1 milliseconds. Currently redis stats unit is in milliseconds due to which P50, P90 stats are coming as 0.\r\n\r\n>*redis.redis_test.command.set.latency: P0(0,0) P25(0,0) P50(0,0) P75(0,0) P90(0,0)...*\r\n\r\nProposed solution :\r\nAdd a new config parameter to redis network filter config, which when set will result in latency stats in microseconds. By default latency stats will be in milliseconds to support backward compatibility and existing users. \r\n\r\n > static_resources:\r\n >listeners:\r\n > - name: listener_0\r\n >   address:\r\n >     socket_address: { address: 127.0.0.1, port_value: 12000 }\r\n >   filter_chains:\r\n >      filters:\r\n >       name: envoy.redis_proxy\r\n >       config:\r\n >         stat_prefix: redis_test\r\n >         *latency_in_micros: true*\r\n >         cluster: redis_service\r\n>          settings: { op_timeout: 1000s, enable_hashtagging: false }\r\n\r\nI have made these changes and can raise a PR for this. With this change the latency are displayed in microseconds for redis latency stats. Below is the stats in that case in microseconds:\r\n\r\n>*redis.redis_test.command.set.latency: P0(65,49) P25(80,75.8235) P50(88.25,199.997) >*P75(101.25,487.972) P90(155,866.644)...\r\n",
  "closed_at": "2019-03-18T16:26:31Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6305260?v=4",
    "events_url": "https://api.github.com/users/mattklein123/events{/privacy}",
    "followers_url": "https://api.github.com/users/mattklein123/followers",
    "following_url": "https://api.github.com/users/mattklein123/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattklein123/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mattklein123",
    "id": 6305260,
    "login": "mattklein123",
    "node_id": "MDQ6VXNlcjYzMDUyNjA=",
    "organizations_url": "https://api.github.com/users/mattklein123/orgs",
    "received_events_url": "https://api.github.com/users/mattklein123/received_events",
    "repos_url": "https://api.github.com/users/mattklein123/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mattklein123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattklein123/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mattklein123"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/6194/comments",
  "created_at": "2019-03-06T18:05:41Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/6194/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/6194",
  "id": 417938778,
  "labels": [
    {
      "color": "c5def5",
      "default": false,
      "description": "Needs design doc/proposal before implementation",
      "id": 620444894,
      "name": "design proposal",
      "node_id": "MDU6TGFiZWw2MjA0NDQ4OTQ=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/design%20proposal"
    },
    {
      "color": "84b6eb",
      "default": true,
      "description": "Feature requests. Not bugs or questions.",
      "id": 421403909,
      "name": "enhancement",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDk=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/enhancement"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/6194/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MTc5Mzg3Nzg=",
  "number": 6194,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Redis latency stats coming as 0 when latency is less than 1 ms",
  "updated_at": "2019-03-18T16:26:31Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/6194",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/15522602?v=4",
    "events_url": "https://api.github.com/users/rammantripragada/events{/privacy}",
    "followers_url": "https://api.github.com/users/rammantripragada/followers",
    "following_url": "https://api.github.com/users/rammantripragada/following{/other_user}",
    "gists_url": "https://api.github.com/users/rammantripragada/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/rammantripragada",
    "id": 15522602,
    "login": "rammantripragada",
    "node_id": "MDQ6VXNlcjE1NTIyNjAy",
    "organizations_url": "https://api.github.com/users/rammantripragada/orgs",
    "received_events_url": "https://api.github.com/users/rammantripragada/received_events",
    "repos_url": "https://api.github.com/users/rammantripragada/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/rammantripragada/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rammantripragada/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/rammantripragada"
  }
}