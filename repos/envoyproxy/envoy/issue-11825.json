{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "In a number of places throughout the test code, and likely also in user's anticipated behavior of Envoy, it seems that the unordered nature of an unordered map has been ignored. The results are compared to constant strings where the resulting iteration is predicted, and this does not conform to stdc++ unordered map's definition.\r\n\r\nFor examples, two secrets are documented in an expected list of secrets, and compared to the string dump of an unordered map by SecretManagerImplTest.ConfigDumpHandlerStaticSecrets. In the second case (already fixed) we elected to simplify a configuration to a single element, to avoid this predictable, but inverted ordering that occurs in the libc++/libstdc++ vs msvc cpp runtime library implementations of std::unordered_map.\r\n\r\nThe later example was discussed at some length https://github.com/envoyproxy/envoy/pull/11335#pullrequestreview-421444954 - however the suggestion to use absl::flat_hash_map turned out to be a non-starter because it is non-deterministic by design. A request to add determinism for purposes such as Envoy seeks turn out to be roundly rejected by the absl authors, see the feedback of the feature request https://github.com/abseil/abseil-cpp/issues/339 for their philosophy.\r\n\r\nAs a general solution to this and similar observations of small sets for testing that are implemented in Envoy by an unordered_map today, it still seems sensible to migrate to absl::flat_hash_map for the very reason given by the abesil authors. This will obviously break tests which will need to be modified, and possibly could break some user expectations based on expected sequencing. Do we have any thoughts on the Envoy project's approach to this set of issues?\r\n\r\nTagging @mattklein123 and @sunjayBhatia for feedback.",
  "closed_at": "2020-07-28T06:32:58Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/1016047?v=4",
    "events_url": "https://api.github.com/users/lizan/events{/privacy}",
    "followers_url": "https://api.github.com/users/lizan/followers",
    "following_url": "https://api.github.com/users/lizan/following{/other_user}",
    "gists_url": "https://api.github.com/users/lizan/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/lizan",
    "id": 1016047,
    "login": "lizan",
    "node_id": "MDQ6VXNlcjEwMTYwNDc=",
    "organizations_url": "https://api.github.com/users/lizan/orgs",
    "received_events_url": "https://api.github.com/users/lizan/received_events",
    "repos_url": "https://api.github.com/users/lizan/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/lizan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lizan/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/lizan"
  },
  "comments": 6,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/11825/comments",
  "created_at": "2020-06-30T20:33:01Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/11825/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/11825",
  "id": 648473364,
  "labels": [
    {
      "color": "fbca04",
      "default": true,
      "description": "Needs help!",
      "id": 645516726,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWw2NDU1MTY3MjY=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/help%20wanted"
    },
    {
      "color": "0e8a16",
      "default": false,
      "description": null,
      "id": 527497761,
      "name": "tech debt",
      "node_id": "MDU6TGFiZWw1Mjc0OTc3NjE=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/tech%20debt"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/11825/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU2NDg0NzMzNjQ=",
  "number": 11825,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Replace std::unordered_map with absl::node_hash_map?",
  "updated_at": "2020-07-28T06:32:58Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/11825",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/84146?v=4",
    "events_url": "https://api.github.com/users/wrowe/events{/privacy}",
    "followers_url": "https://api.github.com/users/wrowe/followers",
    "following_url": "https://api.github.com/users/wrowe/following{/other_user}",
    "gists_url": "https://api.github.com/users/wrowe/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/wrowe",
    "id": 84146,
    "login": "wrowe",
    "node_id": "MDQ6VXNlcjg0MTQ2",
    "organizations_url": "https://api.github.com/users/wrowe/orgs",
    "received_events_url": "https://api.github.com/users/wrowe/received_events",
    "repos_url": "https://api.github.com/users/wrowe/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/wrowe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wrowe/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/wrowe"
  }
}