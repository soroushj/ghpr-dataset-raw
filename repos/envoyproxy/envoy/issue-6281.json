{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "*Title*: Jaeger sandbox is broken\r\n\r\n*Description*:\r\n\r\nJaeger sandbox should run as explained in https://www.envoyproxy.io/docs/envoy/latest/start/sandboxes/jaeger_tracing.html; however, `jaeger-tracing_front-envoy_1` exits with an error.\r\n\r\n*Repro steps*:\r\n```console\r\n$ cd examples/jaeger-tracing\r\n$ docker-compose up --build -d\r\n$ docker-compose ps\r\n            Name                          Command               State                                                        Ports\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\njaeger-tracing_front-envoy_1   /usr/bin/dumb-init -- /bin ...   Exit 1\r\njaeger-tracing_jaeger_1        /go/bin/all-in-one-linux - ...   Up       14250/tcp, 14268/tcp, 0.0.0.0:16686->16686/tcp, 5775/udp, 5778/tcp, 6831/udp, 6832/udp, 0.0.0.0:9411->9411/tcp\r\njaeger-tracing_service1_1      /bin/sh -c /usr/local/bin/ ...   Up       10000/tcp, 80/tcp\r\njaeger-tracing_service2_1      /bin/sh -c /usr/local/bin/ ...   Up       10000/tcp, 80/tcp\r\n```\r\n\r\n*Logs*:\r\n```console\r\n$ docker logs jaeger-tracing_front-envoy_1\r\n[2019-03-13 18:09:57.257][000008][info][main] [source/server/server.cc:202] initializing epoch 0 (hot restart version=10.200.16384.127.options=capacity=16384, num_slots=8209 hash=228984379728933363 size=2654312)\r\n[2019-03-13 18:09:57.257][000008][info][main] [source/server/server.cc:204] statically linked extensions:\r\n[2019-03-13 18:09:57.258][000008][info][main] [source/server/server.cc:206]   access_loggers: envoy.file_access_log,envoy.http_grpc_access_log\r\n[2019-03-13 18:09:57.258][000008][info][main] [source/server/server.cc:209]   filters.http: envoy.buffer,envoy.cors,envoy.ext_authz,envoy.fault,envoy.filters.http.header_to_metadata,envoy.filters.http.jwt_authn,envoy.filters.http.rbac,envoy.grpc_http1_bridge,envoy.grpc_json_transcoder,envoy.grpc_web,envoy.gzip,envoy.health_check,envoy.http_dynamo_filter,envoy.ip_tagging,envoy.lua,envoy.rate_limit,envoy.router,envoy.squash\r\n[2019-03-13 18:09:57.258][000008][info][main] [source/server/server.cc:212]   filters.listener: envoy.listener.original_dst,envoy.listener.proxy_protocol,envoy.listener.tls_inspector\r\n[2019-03-13 18:09:57.258][000008][info][main] [source/server/server.cc:215]   filters.network: envoy.client_ssl_auth,envoy.echo,envoy.ext_authz,envoy.filters.network.rbac,envoy.filters.network.sni_cluster,envoy.filters.network.thrift_proxy,envoy.http_connection_manager,envoy.mongo_proxy,envoy.ratelimit,envoy.redis_proxy,envoy.tcp_proxy\r\n[2019-03-13 18:09:57.258][000008][info][main] [source/server/server.cc:217]   stat_sinks: envoy.dog_statsd,envoy.metrics_service,envoy.stat_sinks.hystrix,envoy.statsd\r\n[2019-03-13 18:09:57.258][000008][info][main] [source/server/server.cc:219]   tracers: envoy.dynamic.ot,envoy.lightstep,envoy.zipkin\r\n[2019-03-13 18:09:57.258][000008][info][main] [source/server/server.cc:222]   transport_sockets.downstream: envoy.transport_sockets.capture,raw_buffer,tls\r\n[2019-03-13 18:09:57.258][000008][info][main] [source/server/server.cc:225]   transport_sockets.upstream: envoy.transport_sockets.capture,raw_buffer,tls\r\n[2019-03-13 18:09:57.296][000008][critical][main] [source/server/server.cc:80] error initializing configuration '/etc/front-envoy.yaml': Unable to parse JSON as proto (INVALID_ARGUMENT:(static_resources.listeners[0].filter_chains[0].filters[0]) typed_config: Cannot find field.): {\"tracing\":{\"http\":{\"typed_config\":{\"shared_span_context\":false,\"collector_endpoint\":\"/api/v1/spans\",\"collector_cluster\":\"jaeger\",\"@type\":\"type.googleapis.com/envoy.config.trace.v2.ZipkinConfig\"},\"name\":\"envoy.zipkin\"}},\"admin\":{\"address\":{\"socket_address\":{\"port_value\":8001,\"address\":\"0.0.0.0\"}},\"access_log_path\":\"/dev/null\"},\"static_resources\":{\"clusters\":[{\"load_assignment\":{\"endpoints\":[{\"lb_endpoints\":[{\"endpoint\":{\"address\":{\"socket_address\":{\"port_value\":80,\"address\":\"service1\"}}}}]}],\"cluster_name\":\"service1\"},\"http2_protocol_options\":{},\"name\":\"service1\",\"connect_timeout\":\"0.250s\",\"type\":\"strict_dns\",\"lb_policy\":\"round_robin\"},{\"load_assignment\":{\"endpoints\":[{\"lb_endpoints\":[{\"endpoint\":{\"address\":{\"socket_address\":{\"port_value\":80,\"address\":\"jaeger\"}}}}]}],\"cluster_name\":\"jaeger\"},\"name\":\"jaeger\",\"connect_timeout\":\"1s\",\"type\":\"strict_dns\",\"lb_policy\":\"round_robin\"}],\"listeners\":[{\"filter_chains\":[{\"filters\":[{\"typed_config\":{\"route_config\":{\"virtual_hosts\":[{\"routes\":[{\"decorator\":{\"operation\":\"checkAvailability\"},\"route\":{\"cluster\":\"service1\"},\"match\":{\"prefix\":\"/\"}}],\"domains\":[\"*\"],\"name\":\"backend\"}],\"name\":\"local_route\"},\"@type\":\"type.googleapis.com/envoy.config.filter.network.http_connection_manager.v2.HttpConnectionManager\",\"codec_type\":\"auto\",\"stat_prefix\":\"ingress_http\",\"http_filters\":[{\"typed_config\":{},\"name\":\"envoy.router\"}],\"tracing\":{\"operation_name\":\"egress\"}},\"name\":\"envoy.http_connection_manager\"}]}],\"address\":{\"socket_address\":{\"port_value\":80,\"address\":\"0.0.0.0\"}}}]}}\r\n[2019-03-13 18:09:57.296][000008][info][main] [source/server/server.cc:500] exiting\r\n```",
  "closed_at": "2019-03-21T03:11:42Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6305260?v=4",
    "events_url": "https://api.github.com/users/mattklein123/events{/privacy}",
    "followers_url": "https://api.github.com/users/mattklein123/followers",
    "following_url": "https://api.github.com/users/mattklein123/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattklein123/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mattklein123",
    "id": 6305260,
    "login": "mattklein123",
    "node_id": "MDQ6VXNlcjYzMDUyNjA=",
    "organizations_url": "https://api.github.com/users/mattklein123/orgs",
    "received_events_url": "https://api.github.com/users/mattklein123/received_events",
    "repos_url": "https://api.github.com/users/mattklein123/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mattklein123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattklein123/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mattklein123"
  },
  "comments": 11,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/6281/comments",
  "created_at": "2019-03-13T18:15:05Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/6281/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/6281",
  "id": 420648508,
  "labels": [
    {
      "color": "ee0701",
      "default": true,
      "description": null,
      "id": 421403907,
      "name": "bug",
      "node_id": "MDU6TGFiZWw0MjE0MDM5MDc=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/6281/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0MjA2NDg1MDg=",
  "number": 6281,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Jaeger sandbox is broken",
  "updated_at": "2019-03-21T03:11:42Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/6281",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/1722758?v=4",
    "events_url": "https://api.github.com/users/venilnoronha/events{/privacy}",
    "followers_url": "https://api.github.com/users/venilnoronha/followers",
    "following_url": "https://api.github.com/users/venilnoronha/following{/other_user}",
    "gists_url": "https://api.github.com/users/venilnoronha/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/venilnoronha",
    "id": 1722758,
    "login": "venilnoronha",
    "node_id": "MDQ6VXNlcjE3MjI3NTg=",
    "organizations_url": "https://api.github.com/users/venilnoronha/orgs",
    "received_events_url": "https://api.github.com/users/venilnoronha/received_events",
    "repos_url": "https://api.github.com/users/venilnoronha/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/venilnoronha/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/venilnoronha/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/venilnoronha"
  }
}