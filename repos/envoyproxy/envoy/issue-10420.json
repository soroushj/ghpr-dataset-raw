{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "*Title*: *We encounter two different compilation errors building the quiche dependency on the MSVC compiler for Windows*\r\n\r\n*Description*:\r\nThese two upstream errors prevent us from building the quic_listeners tests on Windows;\r\n\r\nThis first compilation failure should be relatively straightforward to review and correct;\r\n```\r\nERROR: C:/_eb/external/com_googlesource_quiche/BUILD.bazel:2762:1: C++ compilation of rule '@com_googlesource_quiche//:quic_core_sent_packet_manager_lib' failed (Exit 2)\r\nC:\\_eb\\execroot\\envoy\\bazel-out\\x64_windows-opt\\bin\\external\\com_googlesource_quiche\\quiche\\quic\\core\\quic_sent_packet_manager.cc(754) : error C2220: the following warning is treated as an error\r\nC:\\_eb\\execroot\\envoy\\bazel-out\\x64_windows-opt\\bin\\external\\com_googlesource_quiche\\quiche\\quic\\core\\quic_sent_packet_manager.cc(754) : warning C4715: 'quic::QuicSentPacketManager::OnRetransmissionTimeout': not all control paths return a value\r\nTarget //test/extensions/quic_listeners/quiche:envoy_quic_dispatcher_test failed to build\r\n```\r\n\r\nThis second compilation failure seems similar to other differences of interpretation and inferences drawn by gcc, clang and the Microsoft VC compiler, and we have been unable to sort it out;\r\n```\r\nERROR: C:/_eb/external/com_googlesource_quiche/BUILD.bazel:2941:1: C++ compilation of rule '@com_googlesource_quiche//:quic_core_stream_send_buffer_lib' failed (Exit 2)\r\nC:\\var\\vcap\\data\\VSBuildTools\\2019\\VC\\Tools\\MSVC\\14.24.28314\\include\\xutility(4853): error C2678: binary '*': no operator found which takes a left-hand operand of type 'const _InIt' (or there is no acceptable conversion)\r\n        with\r\n        [\r\n            _InIt=quic::QuicIntervalDeque<quic::BufferedSlice,quic::QuicCircularDeque<quic::BufferedSlice,3,std::allocator<quic::BufferedSlice>>>::Iterator\r\n        ]\r\nbazel-out/x64_windows-opt/bin/external/com_googlesource_quiche\\quiche/quic/core/quic_interval_deque.h(188): note: could be 'quic::BufferedSlice &quic::QuicIntervalDeque<quic::BufferedSlice,quic::QuicCircularDeque<T,3,std::allocator<T>>>::Iterator::operator *(void)'\r\n        with\r\n        [\r\n            T=quic::BufferedSlice\r\n        ]\r\nC:\\var\\vcap\\data\\VSBuildTools\\2019\\VC\\Tools\\MSVC\\14.24.28314\\include\\xutility(4853): note: while trying to match the argument list '(const _InIt)'\r\n        with\r\n        [\r\n            _InIt=quic::QuicIntervalDeque<quic::BufferedSlice,quic::QuicCircularDeque<quic::BufferedSlice,3,std::allocator<quic::BufferedSlice>>>::Iterator\r\n        ]\r\nbazel-out/x64_windows-opt/bin/external/com_googlesource_quiche/quiche/quic/core/quic_stream_send_buffer.cc(240): note: see reference to function template instantiation '_FwdIt std::lower_bound<quic::QuicIntervalDeque<quic::BufferedSlice,quic::QuicCircularDeque<T,3,std:\r\n:allocator<T>>>::Iterator,quic::QuicStreamOffset,quic::`anonymous-namespace'::CompareOffset>(_FwdIt,const _FwdIt,const _Ty &,_Pr)' being compiled\r\n        with\r\n        [\r\n            _FwdIt=quic::QuicIntervalDeque<quic::BufferedSlice,quic::QuicCircularDeque<quic::BufferedSlice,3,std::allocator<quic::BufferedSlice>>>::Iterator,\r\n            T=quic::BufferedSlice,\r\n            _Ty=quic::QuicStreamOffset,\r\n            _Pr=quic::`anonymous-namespace'::CompareOffset\r\n        ]\r\nC:\\var\\vcap\\data\\VSBuildTools\\2019\\VC\\Tools\\MSVC\\14.24.28314\\include\\xutility(4853): error C2100: illegal indirection\r\n```\r\n",
  "closed_at": "2020-09-18T22:03:20Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/8603643?v=4",
    "events_url": "https://api.github.com/users/ggreenway/events{/privacy}",
    "followers_url": "https://api.github.com/users/ggreenway/followers",
    "following_url": "https://api.github.com/users/ggreenway/following{/other_user}",
    "gists_url": "https://api.github.com/users/ggreenway/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ggreenway",
    "id": 8603643,
    "login": "ggreenway",
    "node_id": "MDQ6VXNlcjg2MDM2NDM=",
    "organizations_url": "https://api.github.com/users/ggreenway/orgs",
    "received_events_url": "https://api.github.com/users/ggreenway/received_events",
    "repos_url": "https://api.github.com/users/ggreenway/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ggreenway/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ggreenway/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ggreenway"
  },
  "comments": 8,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/10420/comments",
  "created_at": "2020-03-17T18:07:44Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/10420/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/10420",
  "id": 583201391,
  "labels": [
    {
      "color": "5319e7",
      "default": false,
      "description": "",
      "id": 545563713,
      "name": "area/build",
      "node_id": "MDU6TGFiZWw1NDU1NjM3MTM=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/build"
    },
    {
      "color": "bf7413",
      "default": false,
      "description": "",
      "id": 1110626960,
      "name": "area/quic",
      "node_id": "MDU6TGFiZWwxMTEwNjI2OTYw",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/quic"
    },
    {
      "color": "e56491",
      "default": false,
      "description": "",
      "id": 1771473940,
      "name": "area/windows",
      "node_id": "MDU6TGFiZWwxNzcxNDczOTQw",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/windows"
    },
    {
      "color": "e2ce8a",
      "default": false,
      "description": "Disables stalebot from closing an issue",
      "id": 988830710,
      "name": "no stalebot",
      "node_id": "MDU6TGFiZWw5ODg4MzA3MTA=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/no%20stalebot"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/10420/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1ODMyMDEzOTE=",
  "number": 10420,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "MSVC Compilation errors with current quiche implementation",
  "updated_at": "2020-09-18T22:03:20Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/10420",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/84146?v=4",
    "events_url": "https://api.github.com/users/wrowe/events{/privacy}",
    "followers_url": "https://api.github.com/users/wrowe/followers",
    "following_url": "https://api.github.com/users/wrowe/following{/other_user}",
    "gists_url": "https://api.github.com/users/wrowe/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/wrowe",
    "id": 84146,
    "login": "wrowe",
    "node_id": "MDQ6VXNlcjg0MTQ2",
    "organizations_url": "https://api.github.com/users/wrowe/orgs",
    "received_events_url": "https://api.github.com/users/wrowe/received_events",
    "repos_url": "https://api.github.com/users/wrowe/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/wrowe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wrowe/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/wrowe"
  }
}