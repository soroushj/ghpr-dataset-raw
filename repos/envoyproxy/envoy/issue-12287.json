{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "MEMBER",
  "body": "### description\r\n\r\nWhile testing the examples in the repo, i noticed that the `jaeger-native-tracing` example segfaults when you make an `http` request of it.\r\n\r\n### steps to reproduce\r\n\r\nFollow the example instructions, eg\r\n\r\n```\r\ncd examples/jaeger-native-tracing\r\ndocker-compose up --build -d\r\ncurl -v localhost:8000/trace/1\r\n```\r\n\r\n### logs\r\n\r\nthe logs from the failing container show\r\n\r\n```\r\nfront-envoy_1  | [2020-07-24 12:51:35.638][11][info][config] [source/server/listener_manager_impl.cc:844] all dependencies initialized. starting workers\r\nfront-envoy_1  | [2020-07-24 12:51:35.639][11][warning][main] [source/server/server.cc:549] there is no configured limit to the number of allowed active connections. Set a limit via the runtime key overload.global_downstream_max_connections\r\nfront-envoy_1  | [2020-07-24 12:52:15.762][19][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:104] Caught Segmentation fault, suspect faulting address 0x10\r\nfront-envoy_1  | [2020-07-24 12:52:15.762][19][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:91] Backtrace (use tools/stack_decode.py to get line numbers):\r\nfront-envoy_1  | [2020-07-24 12:52:15.762][19][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:92] Envoy version: f20c9168aa2e92b2c5b6f8103d792e66fd813c62/1.16.0-dev/Clean/RELEASE/BoringSSL\r\nfront-envoy_1  | [2020-07-24 12:52:15.763][19][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:96] #0: __restore_rt [0x7f92319d18a0]\r\nfront-envoy_1  | [2020-07-24 12:52:15.765][19][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:96] #1: jaegertracing::propagation::Propagator<>::extract() [0x7f922f1b4ffe]\r\nfront-envoy_1  | [2020-07-24 12:52:15.766][19][critical][backtrace] [bazel-out/k8-opt/bin/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:96] #2: jaegertracing::Tracer::Extract() [0x7f922f1b531a]\r\nfront-envoy_1  | ActiveStream 0x55ca59282880, stream_id_: 12345331179989539751, state_.has_continue_headers_: 0, state_.is_head_request_: 0, state_.decoding_headers_only_: 0, state_.encoding_headers_only_: 0\r\nfront-envoy_1  | request_headers_: \r\nfront-envoy_1  |   ':authority', 'localhost:8000'\r\nfront-envoy_1  |   ':path', '/trace/1'\r\nfront-envoy_1  |   ':method', 'GET'\r\nfront-envoy_1  |   'user-agent', 'curl/7.68.0'\r\nfront-envoy_1  |   'accept', '*/*'\r\nfront-envoy_1  |   'x-forwarded-for', '192.168.128.1'\r\nfront-envoy_1  |   'x-forwarded-proto', 'http'\r\nfront-envoy_1  |   'x-envoy-internal', 'true'\r\nfront-envoy_1  |   'x-request-id', 'efe080d2-f7ab-9e33-aabd-a460fa4164b2'\r\nfront-envoy_1  | request_trailers_: null\r\nfront-envoy_1  | response_headers_: null\r\nfront-envoy_1  | response_trailers_: null\r\nfront-envoy_1  | &stream_info_: \r\nfront-envoy_1  |   StreamInfoImpl 0x55ca592829c8, protocol_: 1, response_code_: null, response_code_details_: null, health_check_request_: 0, route_name_: \r\nfront-envoy_1  | /start-front.sh: line 3:    11 Segmentation fault      (core dumped) /usr/local/bin/envoy -c /etc/front-envoy.yaml --service-cluster front-proxy\r\n```",
  "closed_at": "2020-08-03T16:11:14Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/6305260?v=4",
    "events_url": "https://api.github.com/users/mattklein123/events{/privacy}",
    "followers_url": "https://api.github.com/users/mattklein123/followers",
    "following_url": "https://api.github.com/users/mattklein123/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattklein123/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mattklein123",
    "id": 6305260,
    "login": "mattklein123",
    "node_id": "MDQ6VXNlcjYzMDUyNjA=",
    "organizations_url": "https://api.github.com/users/mattklein123/orgs",
    "received_events_url": "https://api.github.com/users/mattklein123/received_events",
    "repos_url": "https://api.github.com/users/mattklein123/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mattklein123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattklein123/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mattklein123"
  },
  "comments": 1,
  "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12287/comments",
  "created_at": "2020-07-24T16:57:26Z",
  "events_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12287/events",
  "html_url": "https://github.com/envoyproxy/envoy/issues/12287",
  "id": 665295362,
  "labels": [
    {
      "color": "006b75",
      "default": false,
      "description": "",
      "id": 588577390,
      "name": "area/tracing",
      "node_id": "MDU6TGFiZWw1ODg1NzczOTA=",
      "url": "https://api.github.com/repos/envoyproxy/envoy/labels/area/tracing"
    }
  ],
  "labels_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12287/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU2NjUyOTUzNjI=",
  "number": 12287,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/envoyproxy/envoy",
  "state": "closed",
  "title": "Jaeger native tracing example segfaults",
  "updated_at": "2020-08-03T16:11:14Z",
  "url": "https://api.github.com/repos/envoyproxy/envoy/issues/12287",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/454682?v=4",
    "events_url": "https://api.github.com/users/phlax/events{/privacy}",
    "followers_url": "https://api.github.com/users/phlax/followers",
    "following_url": "https://api.github.com/users/phlax/following{/other_user}",
    "gists_url": "https://api.github.com/users/phlax/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/phlax",
    "id": 454682,
    "login": "phlax",
    "node_id": "MDQ6VXNlcjQ1NDY4Mg==",
    "organizations_url": "https://api.github.com/users/phlax/orgs",
    "received_events_url": "https://api.github.com/users/phlax/received_events",
    "repos_url": "https://api.github.com/users/phlax/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/phlax/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/phlax/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/phlax"
  }
}