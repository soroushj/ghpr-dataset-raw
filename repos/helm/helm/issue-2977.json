{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "Installation [from script](https://github.com/kubernetes/helm/blob/master/docs/install.md#from-script):\r\n```bash\r\ncurl https://raw.githubusercontent.com/kubernetes/helm/master/scripts/get | bash\r\n```\r\nfails with the message:\r\n```\r\n % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100  6329  100  6329    0     0  43110      0 --:--:-- --:--:-- --:--:-- 43349\r\nDownloading https://kubernetes-helm.storage.googleapis.com/helm-v2.6.1-linux-amd64.tar.gz\r\ncurl: (23) Failed writing body (0 != 65)\r\nFailed to install helm\r\n        For support, go to https://github.com/kubernetes/helm.\r\n```\r\n\r\n#### UPDATE 1:\r\nThe command succeeds only when performed directly on `root`, `sudo` is not enough and also fails.\r\n\r\n#### UPDATE 2:\r\nDebug output:\r\n```\r\n+ PROJECT_NAME=helm\r\n+ : /usr/local/bin\r\n+ trap fail_trap EXIT\r\n+ set -e\r\n+ export INPUT_ARGUMENTS=\r\n+ INPUT_ARGUMENTS=\r\n+ set -u\r\n+ [[ 0 -gt 0 ]]\r\n+ set +u\r\n+ initArch\r\n++ uname -m\r\n+ ARCH=x86_64\r\n+ case $ARCH in\r\n+ ARCH=amd64\r\n+ initOS\r\n++ tr '[:upper:]' '[:lower:]'\r\n+++ uname\r\n++ echo Linux\r\n+ OS=linux\r\n+ case \"$OS\" in\r\n+ verifySupported\r\n+ local 'supported=linux-amd64\\ndarwin-amd64\\nlinux-386'\r\n+ echo 'linux-amd64\\ndarwin-amd64\\nlinux-386'\r\n+ grep -q linux-amd64\r\n+ type curl\r\n+ checkDesiredVersion\r\n+ local release_url=https://github.com/kubernetes/helm/releases/latest\r\n+ type curl\r\n++ curl -SsL https://github.com/kubernetes/helm/releases/latest\r\n++ awk '/\\/tag\\//'\r\n++ cut -d '\"' -f 2\r\n++ awk 'a !~ $0{print}; {a=$0}'\r\n++ awk '{n=split($NF,a,\"/\");print a[n]}'\r\n+ TAG=v2.6.1\r\n+ '[' xv2.6.1 == x ']'\r\n+ checkHelmInstalledVersion\r\n+ [[ -f /usr/local/bin/helm ]]\r\n+ return 1\r\n+ downloadFile\r\n+ HELM_DIST=helm-v2.6.1-linux-amd64.tar.gz\r\n+ DOWNLOAD_URL=https://kubernetes-helm.storage.googleapis.com/helm-v2.6.1-linux-amd64.tar.gz\r\n+ CHECKSUM_URL=https://kubernetes-helm.storage.googleapis.com/helm-v2.6.1-linux-amd64.tar.gz.sha256\r\n+ HELM_TMP_FILE=/tmp/helm-v2.6.1-linux-amd64.tar.gz\r\n+ HELM_SUM_FILE=/tmp/helm-v2.6.1-linux-amd64.tar.gz.sha256\r\n+ echo 'Downloading https://kubernetes-helm.storage.googleapis.com/helm-v2.6.1-linux-amd64.tar.gz'\r\nDownloading https://kubernetes-helm.storage.googleapis.com/helm-v2.6.1-linux-amd64.tar.gz\r\n+ type curl\r\n+ curl -SsL https://kubernetes-helm.storage.googleapis.com/helm-v2.6.1-linux-amd64.tar.gz.sha256 -o /tmp/helm-v2.6.1-linux-amd64.tar.gz.sha256\r\ncurl: (23) Failed writing body (0 != 65)\r\n+ fail_trap\r\n+ result=23\r\n+ '[' 23 '!=' 0 ']'\r\n+ [[ -n '' ]]\r\n+ echo 'Failed to install helm'\r\nFailed to install helm\r\n+ echo -e '\\tFor support, go to https://github.com/kubernetes/helm.'\r\n        For support, go to https://github.com/kubernetes/helm.\r\n+ exit 23\r\n```\r\n\r\n#### Update 3:\r\nThe problem occurs if the script was executed by `root`, then the `root` removed installed `helm` binaries and another user reruns the installation script. The reason is that the script does not perform `/tmp` directory cleanup. There are temporary files written with different rights and subsequent installation script execution by a different user fails to overwrite it. **Manual `sudo rm -rf /tmp/helm*` directory cleanup solved the problem**. I will issue an appropriate PR with the fix later.",
  "closed_at": "2017-12-28T23:22:42Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/1360539?v=4",
    "events_url": "https://api.github.com/users/bacongobbler/events{/privacy}",
    "followers_url": "https://api.github.com/users/bacongobbler/followers",
    "following_url": "https://api.github.com/users/bacongobbler/following{/other_user}",
    "gists_url": "https://api.github.com/users/bacongobbler/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bacongobbler",
    "id": 1360539,
    "login": "bacongobbler",
    "node_id": "MDQ6VXNlcjEzNjA1Mzk=",
    "organizations_url": "https://api.github.com/users/bacongobbler/orgs",
    "received_events_url": "https://api.github.com/users/bacongobbler/received_events",
    "repos_url": "https://api.github.com/users/bacongobbler/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bacongobbler/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bacongobbler/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bacongobbler"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/helm/helm/issues/2977/comments",
  "created_at": "2017-09-27T12:57:09Z",
  "events_url": "https://api.github.com/repos/helm/helm/issues/2977/events",
  "html_url": "https://github.com/helm/helm/issues/2977",
  "id": 260963837,
  "labels": [],
  "labels_url": "https://api.github.com/repos/helm/helm/issues/2977/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNjA5NjM4Mzc=",
  "number": 2977,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/helm/helm",
  "state": "closed",
  "title": "Error installing from provided script",
  "updated_at": "2018-07-18T19:42:53Z",
  "url": "https://api.github.com/repos/helm/helm/issues/2977",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/7780330?v=4",
    "events_url": "https://api.github.com/users/goostleek/events{/privacy}",
    "followers_url": "https://api.github.com/users/goostleek/followers",
    "following_url": "https://api.github.com/users/goostleek/following{/other_user}",
    "gists_url": "https://api.github.com/users/goostleek/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/goostleek",
    "id": 7780330,
    "login": "goostleek",
    "node_id": "MDQ6VXNlcjc3ODAzMzA=",
    "organizations_url": "https://api.github.com/users/goostleek/orgs",
    "received_events_url": "https://api.github.com/users/goostleek/received_events",
    "repos_url": "https://api.github.com/users/goostleek/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/goostleek/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/goostleek/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/goostleek"
  }
}