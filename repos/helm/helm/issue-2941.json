{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "After installing a chart successfully, I ran a `helm upgrade` with modified values. This caused a `pre-upgrade` hook to fail, since the hook tried to create a job that already existed (since it wasn't deleted before the upgrade).\r\n\r\nAt that point, `helm ls` would show the first revision as `DEPLOYED`. The second revision would appear only with `helm ls -a`. After deleting the job and rerunning `helm upgrade`, I noticed that there were now two releases of the same chart, both marked as `DEPLOYED` -- the first one, before the `PENDING_UPGRADE` revision, and the most recent.\r\n\r\n```\r\n$ helm ls\r\nNAME \tREVISION\tUPDATED                 \tSTATUS  \tCHART      \tNAMESPACE\r\ncomfy\t1       \tThu Sep 14 18:24:07 2017\tDEPLOYED\tcomfy-1.0.0\tdefault\r\ncomfy\t4       \tThu Sep 14 18:47:03 2017\tDEPLOYED\tcomfy-1.0.0\tdefault\r\n```\r\n\r\nAs expected `helm status` shows the status of the most recent deployed revision. Helm history for the release shows the following:\r\n\r\n```\r\nREVISION\tUPDATED                 \tSTATUS         \tCHART      \tDESCRIPTION\r\n1       \tThu Sep 14 18:24:07 2017\tDEPLOYED       \tcomfy-1.0.0\tInstall complete\r\n2       \tThu Sep 14 18:46:33 2017\tPENDING_UPGRADE\tcomfy-1.0.0\tPreparing upgrade\r\n3       \tThu Sep 14 18:46:52 2017\tSUPERSEDED     \tcomfy-1.0.0\tPreparing upgrade\r\n4       \tThu Sep 14 18:47:03 2017\tDEPLOYED       \tcomfy-1.0.0\tUpgrade complete\r\n```\r\n\r\nThis conflicts with my understanding of what `DEPLOYED` means -- I thought that for any release, there could only be one revision that is `DEPLOYED`, corresponding to the kubernetes objects currently in the cluster. Should I be interpreting the meaning of `DEPLOYED` differently or is this behavior not expected?\r\n\r\n",
  "closed_at": "2018-02-27T18:25:41Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/2347529?v=4",
    "events_url": "https://api.github.com/users/adamreese/events{/privacy}",
    "followers_url": "https://api.github.com/users/adamreese/followers",
    "following_url": "https://api.github.com/users/adamreese/following{/other_user}",
    "gists_url": "https://api.github.com/users/adamreese/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/adamreese",
    "id": 2347529,
    "login": "adamreese",
    "node_id": "MDQ6VXNlcjIzNDc1Mjk=",
    "organizations_url": "https://api.github.com/users/adamreese/orgs",
    "received_events_url": "https://api.github.com/users/adamreese/received_events",
    "repos_url": "https://api.github.com/users/adamreese/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/adamreese/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adamreese/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/adamreese"
  },
  "comments": 53,
  "comments_url": "https://api.github.com/repos/helm/helm/issues/2941/comments",
  "created_at": "2017-09-15T18:19:35Z",
  "events_url": "https://api.github.com/repos/helm/helm/issues/2941/events",
  "html_url": "https://github.com/helm/helm/issues/2941",
  "id": 258123366,
  "labels": [],
  "labels_url": "https://api.github.com/repos/helm/helm/issues/2941/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNTgxMjMzNjY=",
  "number": 2941,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/helm/helm",
  "state": "closed",
  "title": "Multiple revisions of same release marked as DEPLOYED",
  "updated_at": "2020-10-09T16:09:36Z",
  "url": "https://api.github.com/repos/helm/helm/issues/2941",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/545954?v=4",
    "events_url": "https://api.github.com/users/thoyt/events{/privacy}",
    "followers_url": "https://api.github.com/users/thoyt/followers",
    "following_url": "https://api.github.com/users/thoyt/following{/other_user}",
    "gists_url": "https://api.github.com/users/thoyt/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/thoyt",
    "id": 545954,
    "login": "thoyt",
    "node_id": "MDQ6VXNlcjU0NTk1NA==",
    "organizations_url": "https://api.github.com/users/thoyt/orgs",
    "received_events_url": "https://api.github.com/users/thoyt/received_events",
    "repos_url": "https://api.github.com/users/thoyt/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/thoyt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thoyt/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/thoyt"
  }
}