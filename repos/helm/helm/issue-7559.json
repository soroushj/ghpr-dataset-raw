{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "Recursion in template functions is not properly detected. The count is never decremented after the template executes which results in a false positive. Link to the PR which fixes this: https://github.com/helm/helm/pull/7558\r\n\r\nOutput of `helm version`:\r\n```\r\nversion.BuildInfo{Version:\"v3.0.3\", GitCommit:\"ac925eb7279f4a6955df663a0128044a8a6b7593\", GitTreeState:\"clean\", GoVersion:\"go1.13.7\"}\r\n```\r\nOutput of `kubectl version`:\r\n\r\nCloud Provider/Platform (AKS, GKE, Minikube etc.): \r\n\r\n\r\nWith a function defined as follows:\r\n```\r\n{{- define \"test.nonRecursive\" -}}\r\n{{- printf \"this is fine\" -}}\r\n{{- end -}}\r\n```\r\nAnd a template file with\r\n```\r\n{{- $ok := include \"test.nonRecursive\" . -}}\r\n```\r\nrepeated several thousand times, the recursion detection kicks in and returns the error\r\n```\r\nError: template: ibm-dlaas/templates/test.yaml:1002:11: executing \"ibm-dlaas/templates/test.yaml\" at <include \"test.nonRecursive\" .>: error calling include: rendering template has a nested reference name: test.nonRecursive: unable to execute template\r\n```\r\neven though there is no recursion involved.",
  "closed_at": "2020-02-11T20:13:17Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/62991?v=4",
    "events_url": "https://api.github.com/users/mattfarina/events{/privacy}",
    "followers_url": "https://api.github.com/users/mattfarina/followers",
    "following_url": "https://api.github.com/users/mattfarina/following{/other_user}",
    "gists_url": "https://api.github.com/users/mattfarina/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/mattfarina",
    "id": 62991,
    "login": "mattfarina",
    "node_id": "MDQ6VXNlcjYyOTkx",
    "organizations_url": "https://api.github.com/users/mattfarina/orgs",
    "received_events_url": "https://api.github.com/users/mattfarina/received_events",
    "repos_url": "https://api.github.com/users/mattfarina/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/mattfarina/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mattfarina/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/mattfarina"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/helm/helm/issues/7559/comments",
  "created_at": "2020-02-07T23:31:13Z",
  "events_url": "https://api.github.com/repos/helm/helm/issues/7559/events",
  "html_url": "https://github.com/helm/helm/issues/7559",
  "id": 561923786,
  "labels": [
    {
      "color": "e11d21",
      "default": true,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 778135666,
      "name": "bug",
      "node_id": "MDU6TGFiZWw3NzgxMzU2NjY=",
      "url": "https://api.github.com/repos/helm/helm/labels/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/helm/helm/issues/7559/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1NjE5MjM3ODY=",
  "number": 7559,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/helm/helm",
  "state": "closed",
  "title": "template recursion bug",
  "updated_at": "2020-02-11T20:13:17Z",
  "url": "https://api.github.com/repos/helm/helm/issues/7559",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/13970400?v=4",
    "events_url": "https://api.github.com/users/danielchengibm/events{/privacy}",
    "followers_url": "https://api.github.com/users/danielchengibm/followers",
    "following_url": "https://api.github.com/users/danielchengibm/following{/other_user}",
    "gists_url": "https://api.github.com/users/danielchengibm/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/danielchengibm",
    "id": 13970400,
    "login": "danielchengibm",
    "node_id": "MDQ6VXNlcjEzOTcwNDAw",
    "organizations_url": "https://api.github.com/users/danielchengibm/orgs",
    "received_events_url": "https://api.github.com/users/danielchengibm/received_events",
    "repos_url": "https://api.github.com/users/danielchengibm/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/danielchengibm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/danielchengibm/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/danielchengibm"
  }
}