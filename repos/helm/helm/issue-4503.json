{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "## test1 - A universal and inherited chart\r\n\r\nvalues.yaml\r\n\r\n```\r\n...\r\nports: []\r\n...\r\n``` \r\n\r\nservice.yaml\r\n\r\n```\r\nports:\r\n{{- range .Values.ports }}\r\n- port: {{ .port }}\r\n  protocol: {{ .protocol }}\r\n{{- end }}\r\n```\r\n\r\n## chart test2\r\n\r\nrequirements.yaml\r\n\r\n```\r\ndependencies:\r\n- name: test1\r\n...\r\n```\r\n\r\nif I want to override the ports in chart test2\r\n\r\n```\r\n/ $: helm install --set test1.ports\\[0\\].port=8080 --set test1.ports\\[0\\].protocol=TCP --set test1.ports\\[1\\].port=9090 --set test1.ports\\[1\\].protocol=TCP ...\r\n```\r\nthis command works as expected, but if I change the order of the  sets(In most cases, it is impossible to do so), like\r\n\r\n```\r\n/ $: helm install --set test1.ports\\[1\\].port=8080 --set test1.ports\\[0\\].protocol=TCP --set test1.ports\\[0\\].port=9090 --set test1.ports\\[1\\].protocol=TCP ...\r\n```\r\n\r\nThis will lead to assertion panic\r\n\r\n```\r\npanic: interface conversion: interface {} is nil, not map[string]interface {}\r\n\r\ngoroutine 1 [running]:\r\nk8s.io/helm/pkg/strvals.(*parser).listItem(0xc42087bf80, 0xc42087bf40, 0x2, 0x2, 0x0, 0x1, 0x5b, 0x0, 0x0, 0x0)\r\n\t/go/src/k8s.io/helm/pkg/strvals/parser.go:291 +0xef3\r\nk8s.io/helm/pkg/strvals.(*parser).key(0xc42087bf80, 0xc420807530, 0xc420cdd4b8, 0x3)\r\n\t/go/src/k8s.io/helm/pkg/strvals/parser.go:177 +0xc1b\r\nk8s.io/helm/pkg/strvals.(*parser).key(0xc42087bf80, 0xc420761f80, 0xc420cdd6f0, 0x8)\r\n\t/go/src/k8s.io/helm/pkg/strvals/parser.go:215 +0x1a3\r\nk8s.io/helm/pkg/strvals.(*parser).key(0xc42087bf80, 0xc420761f20, 0x1e14d7d, 0x20d7200)\r\n\t/go/src/k8s.io/helm/pkg/strvals/parser.go:215 +0x1a3\r\nk8s.io/helm/pkg/strvals.(*parser).parse(0xc42087bf80, 0xc420761f20, 0x0)\r\n\t/go/src/k8s.io/helm/pkg/strvals/parser.go:133 +0x38\r\nk8s.io/helm/pkg/strvals.ParseInto(0x7ffeefbff8c2, 0x22, 0xc420761f20, 0x0, 0x0)\r\n\t/go/src/k8s.io/helm/pkg/strvals/parser.go:85 +0xbf\r\nmain.vals(0x0, 0x0, 0x0, 0xc420274600, 0xd, 0x10, 0x2cd7b28, 0x0, 0x0, 0x2cd7b28, ...)\r\n\t/go/src/k8s.io/helm/cmd/helm/install.go:382 +0x45a\r\nmain.(*installCmd).run(0xc4201d0600, 0x0, 0x2378600)\r\n\t/go/src/k8s.io/helm/cmd/helm/install.go:232 +0x1e4\r\nmain.newInstallCmd.func2(0xc4207666c0, 0xc420310780, 0x1, 0x1d, 0x0, 0x0)\r\n\t/go/src/k8s.io/helm/cmd/helm/install.go:191 +0x326\r\nk8s.io/helm/vendor/github.com/spf13/cobra.(*Command).execute(0xc4207666c0, 0xc4203101e0, 0x1d, 0x1e, 0xc4207666c0, 0xc4203101e0)\r\n\t/go/src/k8s.io/helm/vendor/github.com/spf13/cobra/command.go:599 +0x3db\r\nk8s.io/helm/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0xc4207b0000, 0xc42071ab40, 0xc42071b440, 0xc42071bd40)\r\n\t/go/src/k8s.io/helm/vendor/github.com/spf13/cobra/command.go:689 +0x2d4\r\nk8s.io/helm/vendor/github.com/spf13/cobra.(*Command).Execute(0xc4207b0000, 0x1e, 0x1f)\r\n\t/go/src/k8s.io/helm/vendor/github.com/spf13/cobra/command.go:648 +0x2b\r\nmain.main()\r\n\t/go/src/k8s.io/helm/cmd/helm/helm.go:161 +0x79\r\n```\r\n\r\nSort values before invoking function `strvals.ParseInto` and `strvals.ParseIntoString` might do the trick",
  "closed_at": "2018-11-19T16:58:26Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/1360539?v=4",
    "events_url": "https://api.github.com/users/bacongobbler/events{/privacy}",
    "followers_url": "https://api.github.com/users/bacongobbler/followers",
    "following_url": "https://api.github.com/users/bacongobbler/following{/other_user}",
    "gists_url": "https://api.github.com/users/bacongobbler/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bacongobbler",
    "id": 1360539,
    "login": "bacongobbler",
    "node_id": "MDQ6VXNlcjEzNjA1Mzk=",
    "organizations_url": "https://api.github.com/users/bacongobbler/orgs",
    "received_events_url": "https://api.github.com/users/bacongobbler/received_events",
    "repos_url": "https://api.github.com/users/bacongobbler/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bacongobbler/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bacongobbler/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bacongobbler"
  },
  "comments": 7,
  "comments_url": "https://api.github.com/repos/helm/helm/issues/4503/comments",
  "created_at": "2018-08-21T12:53:47Z",
  "events_url": "https://api.github.com/repos/helm/helm/issues/4503/events",
  "html_url": "https://github.com/helm/helm/issues/4503",
  "id": 352525117,
  "labels": [
    {
      "color": "e11d21",
      "default": true,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 778135666,
      "name": "bug",
      "node_id": "MDU6TGFiZWw3NzgxMzU2NjY=",
      "url": "https://api.github.com/repos/helm/helm/labels/bug"
    },
    {
      "color": "7057ff",
      "default": true,
      "description": "Denotes an issue ready for a new contributor, according to the \"help wanted\" guidelines.",
      "id": 877559203,
      "name": "good first issue",
      "node_id": "MDU6TGFiZWw4Nzc1NTkyMDM=",
      "url": "https://api.github.com/repos/helm/helm/labels/good%20first%20issue"
    },
    {
      "color": "006b75",
      "default": true,
      "description": "Denotes an issue that needs help from a contributor. Must meet \"help wanted\" guidelines.",
      "id": 269212354,
      "name": "help wanted",
      "node_id": "MDU6TGFiZWwyNjkyMTIzNTQ=",
      "url": "https://api.github.com/repos/helm/helm/labels/help%20wanted"
    }
  ],
  "labels_url": "https://api.github.com/repos/helm/helm/issues/4503/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNTI1MjUxMTc=",
  "number": 4503,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/helm/helm",
  "state": "closed",
  "title": "Proposal: sort set values from command line before merging",
  "updated_at": "2018-11-19T16:58:26Z",
  "url": "https://api.github.com/repos/helm/helm/issues/4503",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/7008971?v=4",
    "events_url": "https://api.github.com/users/fengxsong/events{/privacy}",
    "followers_url": "https://api.github.com/users/fengxsong/followers",
    "following_url": "https://api.github.com/users/fengxsong/following{/other_user}",
    "gists_url": "https://api.github.com/users/fengxsong/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/fengxsong",
    "id": 7008971,
    "login": "fengxsong",
    "node_id": "MDQ6VXNlcjcwMDg5NzE=",
    "organizations_url": "https://api.github.com/users/fengxsong/orgs",
    "received_events_url": "https://api.github.com/users/fengxsong/received_events",
    "repos_url": "https://api.github.com/users/fengxsong/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/fengxsong/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fengxsong/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/fengxsong"
  }
}