{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "With helm 3, `helm dependency update` followed by `helm dependency build` complains about `Chart.lock` being out of sync when a repository contains an alias.\r\n\r\n```\r\n$ helm version\r\nversion.BuildInfo{Version:\"v3.0.0-rc.2\", GitCommit:\"82ea5aa774661cc6557cb57293571d06f94aff0c\", GitTreeState:\"clean\", GoVersion:\"go1.13.3\"}\r\n$ helm repo list\r\nNAME    \tURL\r\nstable  \thttps://kubernetes-charts.storage.googleapis.com/\r\njetstack\thttps://charts.jetstack.io\r\n$ cat Chart.yaml\r\nname: alias\r\napiVersion: v2\r\nversion: 1.0.0\r\n\r\ndependencies:\r\n  - name: postgresql\r\n    version: \"6.5.5\"\r\n    repository: \"@stable\"\r\n$ helm dependency update .\r\nHang tight while we grab the latest from your chart repositories...\r\n...Successfully got an update from the \"jetstack\" chart repository\r\n...Successfully got an update from the \"stable\" chart repository\r\nUpdate Complete. \u2388Happy Helming!\u2388\r\nSaving 1 charts\r\nDownloading postgresql from repo https://kubernetes-charts.storage.googleapis.com/\r\nDeleting outdated charts\r\n$ cat Chart.lock\r\ndependencies:\r\n- name: postgresql\r\n  repository: https://kubernetes-charts.storage.googleapis.com/\r\n  version: 6.5.5\r\ndigest: sha256:72394d61ae09dba4eb534de7c51a9285c2fe4ea6eb537c1593d593f06894ca68\r\ngenerated: \"2019-11-02T18:03:00.63001711+01:00\"\r\n$ helm dependency build .\r\nError: Chart.lock is out of sync with Chart.yaml\r\n```\r\n\r\nThis is surprising since I just did the `update` to make sure the `Chart.lock` is in sync. If I resolve the alias, then everything works as expected.\r\n\r\n```\r\n$ cat Chart.yaml\r\nname: alias\r\napiVersion: v2\r\nversion: 1.0.0\r\n\r\ndependencies:\r\n  - name: postgresql\r\n    version: \"6.5.5\"\r\n    repository: https://kubernetes-charts.storage.googleapis.com/\r\n$ helm dependency update .\r\nHang tight while we grab the latest from your chart repositories...\r\n...Successfully got an update from the \"jetstack\" chart repository\r\n...Successfully got an update from the \"stable\" chart repository\r\nUpdate Complete. \u2388Happy Helming!\u2388\r\nSaving 1 charts\r\nDownloading postgresql from repo https://kubernetes-charts.storage.googleapis.com/\r\nDeleting outdated charts\r\n$ helm dependency build .\r\nHang tight while we grab the latest from your chart repositories...\r\n...Successfully got an update from the \"jetstack\" chart repository\r\n...Successfully got an update from the \"stable\" chart repository\r\nUpdate Complete. \u2388Happy Helming!\u2388\r\nSaving 1 charts\r\nDownloading postgresql from repo https://kubernetes-charts.storage.googleapis.com/\r\nDeleting outdated charts\r\n```\r\n\r\nAre aliases not supported in this context? If so, I think the error messages should be improved :)",
  "closed_at": "2019-11-12T18:34:24Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/1360539?v=4",
    "events_url": "https://api.github.com/users/bacongobbler/events{/privacy}",
    "followers_url": "https://api.github.com/users/bacongobbler/followers",
    "following_url": "https://api.github.com/users/bacongobbler/following{/other_user}",
    "gists_url": "https://api.github.com/users/bacongobbler/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bacongobbler",
    "id": 1360539,
    "login": "bacongobbler",
    "node_id": "MDQ6VXNlcjEzNjA1Mzk=",
    "organizations_url": "https://api.github.com/users/bacongobbler/orgs",
    "received_events_url": "https://api.github.com/users/bacongobbler/received_events",
    "repos_url": "https://api.github.com/users/bacongobbler/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bacongobbler/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bacongobbler/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bacongobbler"
  },
  "comments": 4,
  "comments_url": "https://api.github.com/repos/helm/helm/issues/6871/comments",
  "created_at": "2019-11-02T17:13:56Z",
  "events_url": "https://api.github.com/repos/helm/helm/issues/6871/events",
  "html_url": "https://github.com/helm/helm/issues/6871",
  "id": 516660887,
  "labels": [
    {
      "color": "e11d21",
      "default": true,
      "description": "Categorizes issue or PR as related to a bug.",
      "id": 778135666,
      "name": "bug",
      "node_id": "MDU6TGFiZWw3NzgxMzU2NjY=",
      "url": "https://api.github.com/repos/helm/helm/labels/bug"
    },
    {
      "color": "e82969",
      "default": false,
      "description": "Issues and Pull Requests related to the major version v3",
      "id": 926755770,
      "name": "v3.x",
      "node_id": "MDU6TGFiZWw5MjY3NTU3NzA=",
      "url": "https://api.github.com/repos/helm/helm/labels/v3.x"
    }
  ],
  "labels_url": "https://api.github.com/repos/helm/helm/issues/6871/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1MTY2NjA4ODc=",
  "number": 6871,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/helm/helm",
  "state": "closed",
  "title": "Helm 3.0.0-rc.2 dependency build does not allow aliases",
  "updated_at": "2019-11-12T18:34:24Z",
  "url": "https://api.github.com/repos/helm/helm/issues/6871",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/373765?v=4",
    "events_url": "https://api.github.com/users/saraedum/events{/privacy}",
    "followers_url": "https://api.github.com/users/saraedum/followers",
    "following_url": "https://api.github.com/users/saraedum/following{/other_user}",
    "gists_url": "https://api.github.com/users/saraedum/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/saraedum",
    "id": 373765,
    "login": "saraedum",
    "node_id": "MDQ6VXNlcjM3Mzc2NQ==",
    "organizations_url": "https://api.github.com/users/saraedum/orgs",
    "received_events_url": "https://api.github.com/users/saraedum/received_events",
    "repos_url": "https://api.github.com/users/saraedum/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/saraedum/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/saraedum/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/saraedum"
  }
}