{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "# Problem\r\n\r\nWhen working on complicated nested charts developers would like to create 'library charts' that contain common values that need to be accessible from the parent chart but there is no mechanism to do this. Developers resort to workarounds such as build scripts that merge values files which add more steps and are not helm native.\r\n\r\n# Proposed Solution\r\n\r\nAllow the import of a child's values to parent values by adding a `imports-values:` field in requirements.yaml as in the example below\r\n\r\n```\r\n# requirements.yaml (simple list)\r\ndependencies:\r\n  - name: kolla-common\r\n    repository: http://localhost:10191\r\n    version: 0.1.0\r\n    import-values:\r\n      - foo.thing\r\n```\r\n\r\nThe above would instruct helm to take the values found at path \"foo.thing\" in sub-chart \"kolla-common\" and place them at the root of the top parent's values. So that given a parent values of \r\n\r\n````\r\n# parent values\r\nmything: yay\r\n````\r\n\r\nand child values\r\n````\r\n# child values\r\nfoo:\r\n  thing:\r\n    bar: true\r\n    baz: false\r\n    other:\r\n      - 1\r\n      - 2\r\n      - 3\r\n````\r\n\r\nThe resulting parent values would be \r\n\r\n````\r\n# result parent values\r\nmything: yay\r\nbar: true\r\nbaz: false\r\n  other:\r\n    - 1\r\n    - 2\r\n    - 3\r\n````\r\n\r\n## Advanced usage\r\n\r\nAdditionally the `import-values:` field would support a child/parent dictionary value that would allow reparenting the imported values into a specific path in the parent values as in the example below:\r\n\r\n````\r\n# requirements (child/parent)\r\n...\r\nimport-values:\r\n  - child: foo.thing\r\n    parent: new.key\r\n````\r\n\r\nIn the above example, the values from the child path are placed at the specified location 'new.key' in the parent values as below:\r\n\r\n````\r\n# result values\r\nmything: yay\r\nnew:\r\n  key:\r\n    bar: true\r\n    baz: false\r\n    other:\r\n      - 1\r\n      - 2\r\n      - 3\r\n````\r\n\r\n## Non-existent import values\r\n\r\nIf a `import-values` field contains child paths that do not exist, a warning will be issued.\r\n\r\n## Mixed string and child/parent\r\n\r\nMixing the simple list of strings and child/parent dictionaries is supported and the below would be valid:\r\n\r\n````\r\n# requirements.yaml\r\n...\r\nimport-values:\r\n  - common\r\n  - child: foo.thing\r\n    parent: new.key\r\n````\r\n\r\n## Exports key convention\r\n\r\nTo facilitate the introspection of values intended to be consumed by a parent, it is suggested to follow a `exports:` key convention wherein those values are all contained in field named `exports:` as below:\r\n\r\n````\r\n# child/values.yaml\r\n\r\nexports:\r\n  foo: true\r\n  bar: false\r\nbaz:\r\n  pike: true\r\n....\r\n````\r\n\r\nBy following the above convention, tools will be able to better inspect and when necessary exclude the values intended for parent. Users that need the flexibility to ignore the convention are allowed to do so with the caveat that future analysis involving values intended for parent may be difficult or impossible.\r\n\r\n## Importing from Child to Parent to GrandParent\r\n\r\nBy using the imports-values mechanism at each level in the hierarchy, values can be imported from a child chart to its parent and then imported into the grandparent (and so on). \r\n\r\n````\r\n# parent requirements\r\nimports-values:\r\n  - child: data.foo\r\n    parent: imported-from-child\r\n\r\n# grandparent requirements\r\nimport-values:\r\n  - child: imported-from-child\r\n    parent: imported-from-child-via-parent\r\n\r\n\r\n```` ",
  "closed_at": "2017-04-04T20:12:16Z",
  "closed_by": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/89193?v=4",
    "events_url": "https://api.github.com/users/technosophos/events{/privacy}",
    "followers_url": "https://api.github.com/users/technosophos/followers",
    "following_url": "https://api.github.com/users/technosophos/following{/other_user}",
    "gists_url": "https://api.github.com/users/technosophos/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/technosophos",
    "id": 89193,
    "login": "technosophos",
    "node_id": "MDQ6VXNlcjg5MTkz",
    "organizations_url": "https://api.github.com/users/technosophos/orgs",
    "received_events_url": "https://api.github.com/users/technosophos/received_events",
    "repos_url": "https://api.github.com/users/technosophos/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/technosophos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/technosophos/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/technosophos"
  },
  "comments": 14,
  "comments_url": "https://api.github.com/repos/helm/helm/issues/1995/comments",
  "created_at": "2017-02-17T21:12:57Z",
  "events_url": "https://api.github.com/repos/helm/helm/issues/1995/events",
  "html_url": "https://github.com/helm/helm/issues/1995",
  "id": 208556985,
  "labels": [],
  "labels_url": "https://api.github.com/repos/helm/helm/issues/1995/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMDg1NTY5ODU=",
  "number": 1995,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/helm/helm",
  "state": "closed",
  "title": "proposal: allow import of child values via optional requirements field 'import-values'",
  "updated_at": "2018-07-18T19:42:06Z",
  "url": "https://api.github.com/repos/helm/helm/issues/1995",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/22244688?v=4",
    "events_url": "https://api.github.com/users/jascott1/events{/privacy}",
    "followers_url": "https://api.github.com/users/jascott1/followers",
    "following_url": "https://api.github.com/users/jascott1/following{/other_user}",
    "gists_url": "https://api.github.com/users/jascott1/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jascott1",
    "id": 22244688,
    "login": "jascott1",
    "node_id": "MDQ6VXNlcjIyMjQ0Njg4",
    "organizations_url": "https://api.github.com/users/jascott1/orgs",
    "received_events_url": "https://api.github.com/users/jascott1/received_events",
    "repos_url": "https://api.github.com/users/jascott1/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jascott1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jascott1/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jascott1"
  }
}