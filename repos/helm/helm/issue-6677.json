{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "<!-- If you need help or think you have found a bug, please help us with your issue by entering the following information (otherwise you can delete this text): -->\r\n\r\nOutput of `helm version`: \r\nversion.BuildInfo{Version:\"v3.0.0-beta.4\", GitCommit:\"7ffc879f137bd3a69eea53349b01f05e3d1d2385\", GitTreeState:\"dirty\", GoVersion:\"go1.13.1\"}\r\n\r\nRan into the Nil Pointer error when doing a `helm3 install <chart name> `. The chart used here is a helm2 chart loaded from a helm repo.\r\n\r\nNote: the same chart if I were to extract locally on the filesystem and then use the same command it works. \r\n\r\n```\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x98 pc=0x11234bb]\r\n\r\ngoroutine 1 [running]:\r\nhelm.sh/helm/v3/pkg/chart/loader.LoadFiles(0xc0002cd000, 0x110, 0x200, 0x110, 0x200, 0x0)\r\n\t/home/circleci/helm.sh/helm/pkg/chart/loader/load.go:107 +0xafb\r\nhelm.sh/helm/v3/pkg/chart/loader.LoadArchive(0x1bd0780, 0xc000588020, 0x0, 0xc000000000, 0xc000588020)\r\n\t/home/circleci/helm.sh/helm/pkg/chart/loader/archive.go:147 +0x87\r\nhelm.sh/helm/v3/pkg/chart/loader.LoadFile(0xc001d44000, 0x38, 0x0, 0x0, 0x0)\r\n\t/home/circleci/helm.sh/helm/pkg/chart/loader/archive.go:58 +0x1df\r\nhelm.sh/helm/v3/pkg/chart/loader.FileLoader.Load(...)\r\n\t/home/circleci/helm.sh/helm/pkg/chart/loader/archive.go:41\r\nhelm.sh/helm/v3/pkg/chart/loader.Load(0xc001d44000, 0x38, 0x1, 0x1, 0xc00190a450)\r\n\t/home/circleci/helm.sh/helm/pkg/chart/loader/load.go:62 +0x79\r\nmain.runInstall(0xc0000ec8f0, 0x2, 0xb, 0xc0001c8900, 0xc0005116e0, 0x1bd07a0, 0xc0000c6008, 0x1968a38, 0x4, 0x5d6d90)\r\n\t/home/circleci/helm.sh/helm/cmd/helm/install.go:174 +0x369\r\nmain.newInstallCmd.func1(0xc0002e7680, 0xc0000ec8f0, 0x2, 0xb, 0x0, 0x0)\r\n\t/home/circleci/helm.sh/helm/cmd/helm/install.go:115 +0x83\r\ngithub.com/spf13/cobra.(*Command).execute(0xc0002e7680, 0xc0000ec840, 0xb, 0xb, 0xc0002e7680, 0xc0000ec840)\r\n\t/go/pkg/mod/github.com/spf13/cobra@v0.0.5/command.go:826 +0x460\r\ngithub.com/spf13/cobra.(*Command).ExecuteC(0xc0004f0280, 0x1bd0700, 0xc0000c6008, 0xc0000aec40)\r\n\t/go/pkg/mod/github.com/spf13/cobra@v0.0.5/command.go:914 +0x2fb\r\ngithub.com/spf13/cobra.(*Command).Execute(...)\r\n\t/go/pkg/mod/github.com/spf13/cobra@v0.0.5/command.go:864\r\nmain.main()\r\n\t/home/circleci/helm.sh/helm/cmd/helm/helm.go:80 +0xd1\r\n```\r\n\r\nLooking at the error trace I have narrowed the issue to be an incorrectly ordered check below:\r\nhttps://github.com/helm/helm/blob/7ffc879f137bd3a69eea53349b01f05e3d1d2385/pkg/chart/loader/load.go#L107-L112\r\n\r\nThe nil check needs to be above APIVersion check.\r\nI built a local helm3 client with the reversed order and that seems to fix the issue.\r\nI will post a patch shortly",
  "closed_at": "2019-10-16T18:39:43Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/1360539?v=4",
    "events_url": "https://api.github.com/users/bacongobbler/events{/privacy}",
    "followers_url": "https://api.github.com/users/bacongobbler/followers",
    "following_url": "https://api.github.com/users/bacongobbler/following{/other_user}",
    "gists_url": "https://api.github.com/users/bacongobbler/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/bacongobbler",
    "id": 1360539,
    "login": "bacongobbler",
    "node_id": "MDQ6VXNlcjEzNjA1Mzk=",
    "organizations_url": "https://api.github.com/users/bacongobbler/orgs",
    "received_events_url": "https://api.github.com/users/bacongobbler/received_events",
    "repos_url": "https://api.github.com/users/bacongobbler/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/bacongobbler/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bacongobbler/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/bacongobbler"
  },
  "comments": 3,
  "comments_url": "https://api.github.com/repos/helm/helm/issues/6677/comments",
  "created_at": "2019-10-16T05:36:08Z",
  "events_url": "https://api.github.com/repos/helm/helm/issues/6677/events",
  "html_url": "https://github.com/helm/helm/issues/6677",
  "id": 507625349,
  "labels": [
    {
      "color": "cc317c",
      "default": false,
      "description": null,
      "id": 269212356,
      "name": "question/support",
      "node_id": "MDU6TGFiZWwyNjkyMTIzNTY=",
      "url": "https://api.github.com/repos/helm/helm/labels/question/support"
    },
    {
      "color": "e82969",
      "default": false,
      "description": "Issues and Pull Requests related to the major version v3",
      "id": 926755770,
      "name": "v3.x",
      "node_id": "MDU6TGFiZWw5MjY3NTU3NzA=",
      "url": "https://api.github.com/repos/helm/helm/labels/v3.x"
    }
  ],
  "labels_url": "https://api.github.com/repos/helm/helm/issues/6677/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1MDc2MjUzNDk=",
  "number": 6677,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/helm/helm",
  "state": "closed",
  "title": "[Helm3] Helm3 install results in panic: runtime error: invalid memory address or nil pointer dereference",
  "updated_at": "2020-06-24T05:13:10Z",
  "url": "https://api.github.com/repos/helm/helm/issues/6677",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/5290983?v=4",
    "events_url": "https://api.github.com/users/sidharthsurana/events{/privacy}",
    "followers_url": "https://api.github.com/users/sidharthsurana/followers",
    "following_url": "https://api.github.com/users/sidharthsurana/following{/other_user}",
    "gists_url": "https://api.github.com/users/sidharthsurana/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sidharthsurana",
    "id": 5290983,
    "login": "sidharthsurana",
    "node_id": "MDQ6VXNlcjUyOTA5ODM=",
    "organizations_url": "https://api.github.com/users/sidharthsurana/orgs",
    "received_events_url": "https://api.github.com/users/sidharthsurana/received_events",
    "repos_url": "https://api.github.com/users/sidharthsurana/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sidharthsurana/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sidharthsurana/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sidharthsurana"
  }
}