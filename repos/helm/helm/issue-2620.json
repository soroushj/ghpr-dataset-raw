{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "We have multiple environments (DEV, PROD) where we run same set of containers with slightly different setting. I didn\u2019t want to duplicate charts for each environment and for that reason I created parametrized charts using subcharts.  This is my directory structure:\r\n```\r\nstorm - Chart.yaml\r\n      - values.yaml\r\n      - requirements.yaml\r\n      - charts - storm-dev - Chart.yaml\r\n                           - values.yaml\r\n               - storm-prd - Chart.yaml\r\n                           - values.yaml\r\n      - templates - deployment.yaml\r\n                  - _helpers.tpl\r\n                  - job.yaml\r\n                  - secret.yaml\r\n```\r\nThe chart dependencies are defined as follows:\r\n```\r\n$ cat requirements.yaml \r\ndependencies:\r\n  - name: storm-dev\r\n    repository: \"file://charts/storm-dev\"\r\n    version: \">= 0.0.1\"\r\n    tags:\r\n      - dev-values\r\n    import-values:\r\n      - data\r\n\r\n  - name: storm-prd\r\n    repository: \"file://charts/storm-prd\"\r\n    version: \">= 0.0.1\"\r\n    tags:\r\n      - prd-values\r\n    import-values:\r\n      - data\r\n```\r\nParent chart's values.yaml file contains only following values:\r\n```\r\n$ cat values.yaml \r\n# Default values\r\n# This is a YAML-formatted file.\r\n# Declare variables to be passed into your templates.\r\n\r\ntags:\r\n  dev-values: false\r\n  prd-values: false\r\n```\r\nAll the actual values for templates are coming from subchart values.yaml files. I control the subchart values assignment by defining either dev-values or prd-values tag as true on the command line as true\r\n```\r\nhelm install -n v1 . --set tags.dev-values=true\r\n```\r\nThis approach kind of works on helm version 2.4.2. The only issue is that it throws warnings which I am trying to eliminate.\r\n```\r\n2017/06/25 19:49:04 Warning: ImportValues missing table: no table named \"storm-prd\" (map[tags:map[prd-values:false dev-values:true] storm-dev:map[global:map[] exports:map[data:map[ \u2026 ]]]])\r\n```\r\n\r\nI tried adding a condition in requirements.yaml file, but it didn\u2019t fix those warnings.\r\n\r\nWhen I tried to use version 2.5.0, but it didn\u2019t work at all. Subchart's values are not propagated to a main chart.\r\n\r\n```\r\n$ /usr/bin/helm.2.5.0 install -n legacy1 . --set tags.dev-values=true --debug --dry-run\r\n[debug] Created tunnel using local port: '49381'\r\n\r\n[debug] SERVER: \"localhost:49381\"\r\n\r\n[debug] Original chart version: \"\"\r\n[debug] CHART PATH: /home/robert/src/hubub-kubernetes/helm/storm\r\n\r\n2017/06/25 19:56:30 Warning: ImportValues missing table: no table named \"storm-dev\" (map[tags:map[dev-values:false prd-values:false]])\r\n2017/06/25 19:56:30 Warning: ImportValues missing table: no table named \"storm-prd\" (map[tags:map[dev-values:false prd-values:false]])\r\nNAME:   legacy1\r\nREVISION: 1\r\nRELEASED: Sun Jun 25 19:56:32 2017\r\nCHART: storm-0.1.0\r\nUSER-SUPPLIED VALUES:\r\ntags:\r\n  dev-values: true\r\n\r\nCOMPUTED VALUES:\r\ntags:\r\n  dev-values: true\r\n  prd-values: false\r\n\r\nHOOKS:\r\nMANIFEST:\r\n```\r\nRegarding my problem I want to ask few questions:\r\n1)\tIs there a better approach to have parametrized charts than what I am doing?\r\n2)\tAm I hitting a bug in version 2.5.0 or I am using non supported method?\r\n3)\tIs there a way to get rid of those warning messages? In my case I have main chart which consists of those application charts where each application has subcharts with values for each environment and this setup generates about a page of warning messages which I am trying to get rid of.\r\n\r\n",
  "closed_at": "2018-04-12T18:57:20Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/22244688?v=4",
    "events_url": "https://api.github.com/users/jascott1/events{/privacy}",
    "followers_url": "https://api.github.com/users/jascott1/followers",
    "following_url": "https://api.github.com/users/jascott1/following{/other_user}",
    "gists_url": "https://api.github.com/users/jascott1/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jascott1",
    "id": 22244688,
    "login": "jascott1",
    "node_id": "MDQ6VXNlcjIyMjQ0Njg4",
    "organizations_url": "https://api.github.com/users/jascott1/orgs",
    "received_events_url": "https://api.github.com/users/jascott1/received_events",
    "repos_url": "https://api.github.com/users/jascott1/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jascott1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jascott1/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jascott1"
  },
  "comments": 30,
  "comments_url": "https://api.github.com/repos/helm/helm/issues/2620/comments",
  "created_at": "2017-06-26T00:24:04Z",
  "events_url": "https://api.github.com/repos/helm/helm/issues/2620/events",
  "html_url": "https://github.com/helm/helm/issues/2620",
  "id": 238417513,
  "labels": [],
  "labels_url": "https://api.github.com/repos/helm/helm/issues/2620/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyMzg0MTc1MTM=",
  "number": 2620,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/helm/helm",
  "state": "closed",
  "title": "Charts with different set of values for each environment",
  "updated_at": "2019-07-09T12:30:12Z",
  "url": "https://api.github.com/repos/helm/helm/issues/2620",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/18036553?v=4",
    "events_url": "https://api.github.com/users/polasekr/events{/privacy}",
    "followers_url": "https://api.github.com/users/polasekr/followers",
    "following_url": "https://api.github.com/users/polasekr/following{/other_user}",
    "gists_url": "https://api.github.com/users/polasekr/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/polasekr",
    "id": 18036553,
    "login": "polasekr",
    "node_id": "MDQ6VXNlcjE4MDM2NTUz",
    "organizations_url": "https://api.github.com/users/polasekr/orgs",
    "received_events_url": "https://api.github.com/users/polasekr/received_events",
    "repos_url": "https://api.github.com/users/polasekr/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/polasekr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/polasekr/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/polasekr"
  }
}