{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1497123?v=4",
    "events_url": "https://api.github.com/users/michelleN/events{/privacy}",
    "followers_url": "https://api.github.com/users/michelleN/followers",
    "following_url": "https://api.github.com/users/michelleN/following{/other_user}",
    "gists_url": "https://api.github.com/users/michelleN/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/michelleN",
    "id": 1497123,
    "login": "michelleN",
    "node_id": "MDQ6VXNlcjE0OTcxMjM=",
    "organizations_url": "https://api.github.com/users/michelleN/orgs",
    "received_events_url": "https://api.github.com/users/michelleN/received_events",
    "repos_url": "https://api.github.com/users/michelleN/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/michelleN/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michelleN/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/michelleN"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/1497123?v=4",
      "events_url": "https://api.github.com/users/michelleN/events{/privacy}",
      "followers_url": "https://api.github.com/users/michelleN/followers",
      "following_url": "https://api.github.com/users/michelleN/following{/other_user}",
      "gists_url": "https://api.github.com/users/michelleN/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/michelleN",
      "id": 1497123,
      "login": "michelleN",
      "node_id": "MDQ6VXNlcjE0OTcxMjM=",
      "organizations_url": "https://api.github.com/users/michelleN/orgs",
      "received_events_url": "https://api.github.com/users/michelleN/received_events",
      "repos_url": "https://api.github.com/users/michelleN/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/michelleN/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michelleN/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/michelleN"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "Helm is ignoring the `\"helm.sh/hook\": test-success` annotation when the Pod definition is not the first yaml document in the file. \r\n\r\nFor example, this Pod definition is not recognized as a test:\r\n```\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ template \"fullname\" . }}-tests\r\ndata:\r\n  ui-test.sh: |-\r\n    #!/bin/bash -xe\r\n    curl {{.Release.Name}}-jenkins:8080/login\r\n---\r\napiVersion: v1\r\nkind: Pod\r\nmetadata:\r\n  name: \"{{.Release.Name}}-ui-test-{{ randAlphaNum 5 | lower }}\"\r\n  annotations:\r\n    \"helm.sh/hook\": test-success\r\n    \"pod.beta.kubernetes.io/init-containers\": '[\r\n      {\r\n        \"name\": \"test-framework\",\r\n        \"image\": \"foxish/bats:0.4\",\r\n        \"command\": [\"bash\", \"-c\", \"\r\n          set -ex\\n\r\n          # copy bats to tools dir\\n\r\n          cp -R /usr/local/libexec/ /tools/bats/\\n\r\n        \"],\r\n        \"volumeMounts\": [\r\n          {\"name\": \"tools\", \"mountPath\": \"/tools\"}\r\n        ]\r\n      }\r\n    ]'\r\nspec:\r\n  containers:\r\n    - name: {{.Release.Name}}-ui-test\r\n      image: {{.Values.Master.Image}}:{{.Values.Master.ImageTag}}\r\n      command: [\"/tools/bats/bats\", \"-t\", \"/tests/ui-test.sh\"]\r\n      volumeMounts:\r\n      - mountPath: /tests\r\n        name: tests\r\n        readOnly: true\r\n      - mountPath: /tools\r\n        name: tools\r\n  volumes:\r\n  - name: tests\r\n    configMap:\r\n      name: {{ template \"fullname\" . }}-tests\r\n  - name: tools\r\n    emptyDir: {}\r\n  restartPolicy: Never```",
  "closed_at": "2017-06-08T14:37:02Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1497123?v=4",
    "events_url": "https://api.github.com/users/michelleN/events{/privacy}",
    "followers_url": "https://api.github.com/users/michelleN/followers",
    "following_url": "https://api.github.com/users/michelleN/following{/other_user}",
    "gists_url": "https://api.github.com/users/michelleN/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/michelleN",
    "id": 1497123,
    "login": "michelleN",
    "node_id": "MDQ6VXNlcjE0OTcxMjM=",
    "organizations_url": "https://api.github.com/users/michelleN/orgs",
    "received_events_url": "https://api.github.com/users/michelleN/received_events",
    "repos_url": "https://api.github.com/users/michelleN/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/michelleN/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michelleN/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/michelleN"
  },
  "comments": 1,
  "comments_url": "https://api.github.com/repos/helm/helm/issues/2290/comments",
  "created_at": "2017-04-18T20:54:25Z",
  "events_url": "https://api.github.com/repos/helm/helm/issues/2290/events",
  "html_url": "https://github.com/helm/helm/issues/2290",
  "id": 222542794,
  "labels": [],
  "labels_url": "https://api.github.com/repos/helm/helm/issues/2290/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2020-07-13T16:36:00Z",
    "closed_issues": 156,
    "created_at": "2016-08-01T19:38:32Z",
    "creator": {
      "avatar_url": "https://avatars1.githubusercontent.com/u/89193?v=4",
      "events_url": "https://api.github.com/users/technosophos/events{/privacy}",
      "followers_url": "https://api.github.com/users/technosophos/followers",
      "following_url": "https://api.github.com/users/technosophos/following{/other_user}",
      "gists_url": "https://api.github.com/users/technosophos/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/technosophos",
      "id": 89193,
      "login": "technosophos",
      "node_id": "MDQ6VXNlcjg5MTkz",
      "organizations_url": "https://api.github.com/users/technosophos/orgs",
      "received_events_url": "https://api.github.com/users/technosophos/received_events",
      "repos_url": "https://api.github.com/users/technosophos/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/technosophos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/technosophos/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/technosophos"
    },
    "description": "Features to be triaged into an upcoming minor version release",
    "due_on": null,
    "html_url": "https://github.com/helm/helm/milestone/16",
    "id": 1916661,
    "labels_url": "https://api.github.com/repos/helm/helm/milestones/16/labels",
    "node_id": "MDk6TWlsZXN0b25lMTkxNjY2MQ==",
    "number": 16,
    "open_issues": 0,
    "state": "closed",
    "title": "Upcoming - Minor",
    "updated_at": "2020-08-14T17:14:14Z",
    "url": "https://api.github.com/repos/helm/helm/milestones/16"
  },
  "node_id": "MDU6SXNzdWUyMjI1NDI3OTQ=",
  "number": 2290,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/helm/helm",
  "state": "closed",
  "title": "Test annotation ignored when multiple definitions in same file",
  "updated_at": "2017-06-08T14:37:02Z",
  "url": "https://api.github.com/repos/helm/helm/issues/2290",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/410279?v=4",
    "events_url": "https://api.github.com/users/viglesiasce/events{/privacy}",
    "followers_url": "https://api.github.com/users/viglesiasce/followers",
    "following_url": "https://api.github.com/users/viglesiasce/following{/other_user}",
    "gists_url": "https://api.github.com/users/viglesiasce/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/viglesiasce",
    "id": 410279,
    "login": "viglesiasce",
    "node_id": "MDQ6VXNlcjQxMDI3OQ==",
    "organizations_url": "https://api.github.com/users/viglesiasce/orgs",
    "received_events_url": "https://api.github.com/users/viglesiasce/received_events",
    "repos_url": "https://api.github.com/users/viglesiasce/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/viglesiasce/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/viglesiasce/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/viglesiasce"
  }
}