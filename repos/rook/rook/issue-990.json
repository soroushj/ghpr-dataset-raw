{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/3718398?v=4",
    "events_url": "https://api.github.com/users/galexrt/events{/privacy}",
    "followers_url": "https://api.github.com/users/galexrt/followers",
    "following_url": "https://api.github.com/users/galexrt/following{/other_user}",
    "gists_url": "https://api.github.com/users/galexrt/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/galexrt",
    "id": 3718398,
    "login": "galexrt",
    "node_id": "MDQ6VXNlcjM3MTgzOTg=",
    "organizations_url": "https://api.github.com/users/galexrt/orgs",
    "received_events_url": "https://api.github.com/users/galexrt/received_events",
    "repos_url": "https://api.github.com/users/galexrt/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/galexrt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/galexrt/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/galexrt"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/3718398?v=4",
      "events_url": "https://api.github.com/users/galexrt/events{/privacy}",
      "followers_url": "https://api.github.com/users/galexrt/followers",
      "following_url": "https://api.github.com/users/galexrt/following{/other_user}",
      "gists_url": "https://api.github.com/users/galexrt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/galexrt",
      "id": 3718398,
      "login": "galexrt",
      "node_id": "MDQ6VXNlcjM3MTgzOTg=",
      "organizations_url": "https://api.github.com/users/galexrt/orgs",
      "received_events_url": "https://api.github.com/users/galexrt/received_events",
      "repos_url": "https://api.github.com/users/galexrt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/galexrt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/galexrt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/galexrt"
    }
  ],
  "author_association": "MEMBER",
  "body": "From discussion on Slack, it appears that the API pod will continue to use the list of monitors it was first created with.  If those monitors change over time, then it may try to connect to dead mons and time out, greatly increasing the time it takes to handle a request such as `rookctl status`.\r\n\r\nThe API service should use updated mon endpoints when handling requests.\r\n\r\nSlack link:\r\nhttps://rook-io.slack.com/archives/C46Q5UC05/p1505769147000040\r\n\r\nDiscussion copied here for posterity: \r\n>jared [2:12 PM] \r\nthat looks like OK status to me\u2026hmm, anyone else have an idea about why rook-api running `ceph status` would take much longer than when that is invoked from the toolbox??\r\nfury [2:14 PM] \r\ni am seeing some environment variables in the rook-api pod that still point to the old mon pods that were blown away when i broke that node\r\njared [2:14 PM] \r\none thought is that the API service doesn\u2019t do anything to keep it\u2019s mon map updated.  so if mons have moved around later on (you have mon 1, 3, and 4 now) that maybe rook-api is inefficient at finding/talking to mons to get the latest status?\r\nfury [2:14 PM] \r\nis it trying to ping one of those, failing, then moving onto the next, then the next?\r\njared [2:15 PM] \r\nha, i think we\u2019re going down the same page right now :slightly_smiling_face:\r\nfury [2:15 PM] \r\ni'm right behind you :stuck_out_tongue_winking_eye:\r\njared [2:16 PM] \r\njust out of curiousity, do you want to recycle your rook-api pod so that a new one comes up in its place?  then i wonder if `rookctl status` would go faster again\r\nfury [2:16 PM] \r\nwill that kill storage access for anyone using it at the moment?\r\n[2:17] \r\ni think i'm the only one using it right now but i might be wrong\r\njared [2:17 PM] \r\ni just about have a cluster up over here now, so i\u2019ll try it first :slightly_smiling_face:\r\nfury [2:18 PM] \r\nok, thanks :slightly_smiling_face: now that i'm running it in production i probably want to avoid killing pods unless i know it won't break things for more than a few seconds\r\n[2:18] \r\ngitlab i can kill its pod and it will start back up after a few minutes, but the rest of the pods continue to run (website, etc.)\r\n[2:18] \r\nand well, only two people use the gitlab right now (including me)\r\n[2:19] \r\nso that one's not so bad. but i have no clue from one moment to the next who's looking at the site\r\n[2:20] \r\neh i'm prolly fine\r\n[2:20] \r\ni'll kill it\r\nfury [2:20 PM] \r\ncrosses fingers :stuck_out_tongue_winking_eye: (edited)\r\njared [2:21 PM] \r\njust tried it over here, api pod came back up and toolbox still points to the rook-api service, so it can find it OK, even though there\u2019s a new api pod\r\nfury [2:21 PM] \r\ncame right back up yep\r\n[2:22] \r\nwish i could `watch time curl http://10.100.201.247:8124/status`\r\n[2:22] \r\nbut so far it's responding every time, 2 secs the first time and 0.6s every other\r\n[2:23] \r\nthat must've been it yep\r\njared [2:23 PM] \r\nOK great so that did help refresh it\u2019s connections to the mons, since that is populated from a config map that the operator keeps up to date.  when the new pod came up it got fresh monitor endpoints and is no longer timing out trying to reach stale ones?\r\n[2:23] \r\nvery interesting",
  "closed_at": "2017-10-13T17:26:23Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/990/comments",
  "created_at": "2017-09-18T21:35:47Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/990/events",
  "html_url": "https://github.com/rook/rook/issues/990",
  "id": 258628926,
  "labels": [
    {
      "color": "e99695",
      "default": false,
      "description": null,
      "id": 496363148,
      "name": "api",
      "node_id": "MDU6TGFiZWw0OTYzNjMxNDg=",
      "url": "https://api.github.com/repos/rook/rook/labels/api"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/990/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2018-01-02T03:49:47Z",
    "closed_issues": 86,
    "created_at": "2017-05-03T02:33:11Z",
    "creator": {
      "avatar_url": "https://avatars3.githubusercontent.com/u/1463491?v=4",
      "events_url": "https://api.github.com/users/bassam/events{/privacy}",
      "followers_url": "https://api.github.com/users/bassam/followers",
      "following_url": "https://api.github.com/users/bassam/following{/other_user}",
      "gists_url": "https://api.github.com/users/bassam/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/bassam",
      "id": 1463491,
      "login": "bassam",
      "node_id": "MDQ6VXNlcjE0NjM0OTE=",
      "organizations_url": "https://api.github.com/users/bassam/orgs",
      "received_events_url": "https://api.github.com/users/bassam/received_events",
      "repos_url": "https://api.github.com/users/bassam/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/bassam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bassam/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/bassam"
    },
    "description": "Ceph Block storage declared Beta on K8S /\r\nKubernetes 1.8 Support /\r\nRook volume plugin support in K8S /\r\nRook agent on client nodes /\r\nRook is upgradeable /\r\nSupport for local storage (and arbitrary volumes) underneath OSD pods /\r\nSupport for public cloud environments /\r\nImproved test matrix and more test coverage /\r\nCRDs for object storage and file system",
    "due_on": null,
    "html_url": "https://github.com/rook/rook/milestone/6",
    "id": 2496353,
    "labels_url": "https://api.github.com/repos/rook/rook/milestones/6/labels",
    "node_id": "MDk6TWlsZXN0b25lMjQ5NjM1Mw==",
    "number": 6,
    "open_issues": 0,
    "state": "closed",
    "title": "0.6",
    "updated_at": "2018-01-02T03:49:47Z",
    "url": "https://api.github.com/repos/rook/rook/milestones/6"
  },
  "node_id": "MDU6SXNzdWUyNTg2Mjg5MjY=",
  "number": 990,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "API service does not keep up with monmap changes",
  "updated_at": "2017-10-13T17:26:23Z",
  "url": "https://api.github.com/repos/rook/rook/issues/990",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  }
}