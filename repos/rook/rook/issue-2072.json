{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/5544378?v=4",
    "events_url": "https://api.github.com/users/ganeshmaharaj/events{/privacy}",
    "followers_url": "https://api.github.com/users/ganeshmaharaj/followers",
    "following_url": "https://api.github.com/users/ganeshmaharaj/following{/other_user}",
    "gists_url": "https://api.github.com/users/ganeshmaharaj/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ganeshmaharaj",
    "id": 5544378,
    "login": "ganeshmaharaj",
    "node_id": "MDQ6VXNlcjU1NDQzNzg=",
    "organizations_url": "https://api.github.com/users/ganeshmaharaj/orgs",
    "received_events_url": "https://api.github.com/users/ganeshmaharaj/received_events",
    "repos_url": "https://api.github.com/users/ganeshmaharaj/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ganeshmaharaj/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ganeshmaharaj/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ganeshmaharaj"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/5544378?v=4",
      "events_url": "https://api.github.com/users/ganeshmaharaj/events{/privacy}",
      "followers_url": "https://api.github.com/users/ganeshmaharaj/followers",
      "following_url": "https://api.github.com/users/ganeshmaharaj/following{/other_user}",
      "gists_url": "https://api.github.com/users/ganeshmaharaj/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ganeshmaharaj",
      "id": 5544378,
      "login": "ganeshmaharaj",
      "node_id": "MDQ6VXNlcjU1NDQzNzg=",
      "organizations_url": "https://api.github.com/users/ganeshmaharaj/orgs",
      "received_events_url": "https://api.github.com/users/ganeshmaharaj/received_events",
      "repos_url": "https://api.github.com/users/ganeshmaharaj/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ganeshmaharaj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ganeshmaharaj/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ganeshmaharaj"
    }
  ],
  "author_association": "NONE",
  "body": "**Is this a bug report or feature request?**\r\nBug Report\r\n\r\n**Deviation from expected behavior:**\r\nRook operator exits in creation of PVC and then enters loop of unable to create PVC.\r\n**Expected behavior:**\r\nPVC created properly.\r\n**How to reproduce it (minimal and precise):**\r\nCreate numerous PVC (>5) at the same time (in a single kubectl apply) on a rook cluster\r\n**Environment**:\r\n* OS (e.g. from /etc/os-release): Ubuntu 16.04\r\n* Kernel (e.g. `uname -a`):\r\nLinux cnat-srv-1 4.4.0-87-generic #110-Ubuntu SMP Tue Jul 18 12:55:35 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n* Cloud provider or hardware configuration: kubeadm\r\n* Rook version (use `rook version` inside of a Rook Pod): 0.8.1\r\n* Kubernetes version (use `kubectl version`):\r\nClient Version: version.Info{Major:\"1\", Minor:\"11\", GitVersion:\"v1.11.0\", GitCommit:\"91e7b4fd31fcd3d5f436da26c980becec37ceefe\", GitTreeState:\"clean\", BuildDate:\"2018-06-27T20:17:28Z\", GoVersion:\"go1.10.2\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"11\", GitVersion:\"v1.11.0\", GitCommit:\"91e7b4fd31fcd3d5f436da26c980becec37ceefe\", GitTreeState:\"clean\", BuildDate:\"2018-06-27T20:08:34Z\", GoVersion:\"go1.10.2\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n* Kubernetes cluster type (e.g. Tectonic, GKE, OpenShift): kubeadm\r\n* Storage backend status (e.g. for Ceph use `ceph health` in the [Rook Ceph toolbox](https://rook.io/docs/Rook/master/toolbox.html)): healthy\r\n\r\n```\r\n2018-08-27 15:09:57.267869 I | op-provisioner: creating volume with configuration {pool:replicapool clusterNamespace:rook-ceph fstype:}\r\n2018-08-27 15:09:57.267932 I | exec: Running command: rbd create replicapool/pvc-42775829-aa0b-11e8-8620-0025b500257e --size 3072 --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring\r\n\r\n2018-08-27 15:09:59.050598 I | op-provisioner: creating volume with configuration {pool:replicapool clusterNamespace:rook-ceph fstype:}\r\n2018-08-27 15:09:59.050640 I | exec: Running command: rbd create replicapool/pvc-433c9bb6-aa0b-11e8-8620-0025b500257e --size 1024 --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring\r\n2018-08-27 15:09:59.450261 I | op-provisioner: creating volume with configuration {pool:replicapool clusterNamespace:rook-ceph fstype:}\r\n2018-08-27 15:09:59.450299 I | exec: Running command: rbd create replicapool/pvc-43480416-aa0b-11e8-8620-0025b500257e --size 5120 --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring\r\n2018-08-27 15:10:00.475865 I | op-provisioner: creating volume with configuration {pool:replicapool clusterNamespace:rook-ceph fstype:}\r\n2018-08-27 15:10:00.475916 I | exec: Running command: rbd create replicapool/pvc-4352c43f-aa0b-11e8-8620-0025b500257e --size 5120 --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring\r\nE0827 15:10:00.950328       7 leaderelection.go:273] Failed to update lock: Operation cannot be fulfilled on persistentvolumeclaims \"db-db-admin-1\": the object has been modified; please apply your changes to the latest version and try again\r\n2018-08-27 15:10:04.550831 I | exec: Running command: rbd ls -l replicapool --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring --format json\r\n2018-08-27 15:10:05.450224 I | op-provisioner: creating volume with configuration {pool:replicapool clusterNamespace:rook-ceph fstype:}\r\n2018-08-27 15:10:05.450259 I | exec: Running command: rbd create replicapool/pvc-436f33d2-aa0b-11e8-8620-0025b500257e --size 5120 --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring\r\n2018-08-27 15:10:07.453563 I | exec: Running command: rbd ls -l replicapool --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring --format json\r\n2018-08-27 15:10:08.651269 I | exec: Running command: rbd ls -l replicapool --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring --format json\r\n2018-08-27 15:10:09.750128 I | exec: Running command: rbd ls -l replicapool --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring --format json\r\n2018-08-27 15:10:12.653163 I | exec: Running command: rbd ls -l replicapool --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring --format json\r\n2018-08-27 15:10:23.150449 I | operator: shutdown signal received, exiting...\r\n```\r\nWhen it restarts the following look occurs:\r\n```\r\nE0827 15:11:55.550288       7 controller.go:801] Failed to provision volume for claim \"app1/db-db-admin-1\" with StorageClass \"rook-ceph-block\": Failed to create rook block image replicapool/pvc-436f33d2-aa0b-11e8-8620-0025b500257e: failed to create image pvc-436f33d2-aa0b-11e8-8620-0025b500257e in pool replicapool of size 5368709120: Failed to complete '': exit status 17. rbd: create error: (17) File exists\r\n2018-08-27 15:11:54.551573 7f88fd477d40 -1 librbd: rbd image pvc-436f33d2-aa0b-11e8-8620-0025b500257e already exists\r\n. output: 2018-08-27 15:11:54.551573 7f88fd477d40 -1 librbd: rbd image pvc-436f33d2-aa0b-11e8-8620-0025b500257e already exists\r\nE0827 15:11:55.550404       7 goroutinemap.go:165] Operation for \"provision-app1/db-db-admin-1[436f33d2-aa0b-11e8-8620-0025b500257e]\" failed. No retries permitted until 2018-08-27 15:12:03.55037151 +0000 UTC m=+97.397060281 (durationBeforeRetry 8s). Error: Failed to create rook block image replicapool/pvc-436f33d2-aa0b-11e8-8620-0025b500257e: failed to create image pvc-436f33d2-aa0b-11e8-8620-0025b500257e in pool replicapool of size 5368709120: Failed to complete '': exit status 17. rbd: create error: (17) File exists\r\n2018-08-27 15:11:54.551573 7f88fd477d40 -1 librbd: rbd image pvc-436f33d2-aa0b-11e8-8620-0025b500257e already exists\r\n. output: 2018-08-27 15:11:54.551573 7f88fd477d40 -1 librbd: rbd image pvc-436f33d2-aa0b-11e8-8620-0025b500257e already exists\r\nE0827 15:11:55.650241       7 controller.go:801] Failed to provision volume for claim \"app1/pb-repositories-app1-app1-engine-app-baseline\" with StorageClass \"rook-ceph-block\": Failed to create rook block image replicapool/pvc-433c9bb6-aa0b-11e8-8620-0025b500257e: failed to create image pvc-433c9bb6-aa0b-11e8-8620-0025b500257e in pool replicapool of size 1073741824: Failed to complete '': exit status 17. rbd: create error: (17) File exists\r\n2018-08-27 15:11:54.950923 7f9b1e8d1d40 -1 librbd: rbd image pvc-433c9bb6-aa0b-11e8-8620-0025b500257e already exists\r\n. output: 2018-08-27 15:11:54.950923 7f9b1e8d1d40 -1 librbd: rbd image pvc-433c9bb6-aa0b-11e8-8620-0025b500257e already exists\r\nE0827 15:11:55.650358       7 goroutinemap.go:165] Operation for \"provision-app1/pb-repositories-app1-app1-engine-app-baseline[433c9bb6-aa0b-11e8-8620-0025b500257e]\" failed. No retries permitted until 2018-08-27 15:12:03.650319064 +0000 UTC m=+97.497007801 (durationBeforeRetry 8s). Error: Failed to create rook block image replicapool/pvc-433c9bb6-aa0b-11e8-8620-0025b500257e: failed to create image pvc-433c9bb6-aa0b-11e8-8620-0025b500257e in pool replicapool of size 1073741824: Failed to complete '': exit status 17. rbd: create error: (17) File exists\r\n2018-08-27 15:11:54.950923 7f9b1e8d1d40 -1 librbd: rbd image pvc-433c9bb6-aa0b-11e8-8620-0025b500257e already exists\r\n. output: 2018-08-27 15:11:54.950923 7f9b1e8d1d40 -1 librbd: rbd image pvc-433c9bb6-aa0b-11e8-8620-0025b500257e already exists\r\nE0827 15:11:55.750112       7 controller.go:801] Failed to provision volume for claim \"app1/db-db-session-config-1\" with StorageClass \"rook-ceph-block\": Failed to create rook block image replicapool/pvc-4352c43f-aa0b-11e8-8620-0025b500257e: failed to create image pvc-4352c43f-aa0b-11e8-8620-0025b500257e in pool replicapool of size 5368709120: Failed to complete '': exit status 17. rbd: create error: (17) File exists\r\n2018-08-27 15:11:55.050053 7f22ee6f8d40 -1 librbd: rbd image pvc-4352c43f-aa0b-11e8-8620-0025b500257e already exists\r\n. output: 2018-08-27 15:11:55.050053 7f22ee6f8d40 -1 librbd: rbd image pvc-4352c43f-aa0b-11e8-8620-0025b500257e already exists\r\nE0827 15:11:55.750203       7 goroutinemap.go:165] Operation for \"provision-app1/db-db-session-config-1[4352c43f-aa0b-11e8-8620-0025b500257e]\" failed. No retries permitted until 2018-08-27 15:12:03.75017653 +0000 UTC m=+97.596865257 (durationBeforeRetry 8s). Error: Failed to create rook block image replicapool/pvc-4352c43f-aa0b-11e8-8620-0025b500257e: failed to create image pvc-4352c43f-aa0b-11e8-8620-0025b500257e in pool replicapool of size 5368709120: Failed to complete '': exit status 17. rbd: create error: (17) File exists\r\n2018-08-27 15:11:55.050053 7f22ee6f8d40 -1 librbd: rbd image pvc-4352c43f-aa0b-11e8-8620-0025b500257e already exists\r\n. output: 2018-08-27 15:11:55.050053 7f22ee6f8d40 -1 librbd: rbd image pvc-4352c43f-aa0b-11e8-8620-0025b500257e already exists\r\nE0827 15:11:55.953280       7 controller.go:801] Failed to provision volume for claim \"app1/db-db-session-config-0\" with StorageClass \"rook-ceph-block\": Failed to create rook block image replicapool/pvc-43480416-aa0b-11e8-8620-0025b500257e: failed to create image pvc-43480416-aa0b-11e8-8620-0025b500257e in pool replicapool of size 5368709120: Failed to complete '': exit status 17. rbd: create error: (17) File exists\r\n2018-08-27 15:11:54.750203 7fac2ce34d40 -1 librbd: rbd image pvc-43480416-aa0b-11e8-8620-0025b500257e already exists\r\n. output: 2018-08-27 15:11:54.750203 7fac2ce34d40 -1 librbd: rbd image pvc-43480416-aa0b-11e8-8620-0025b500257e already exists\r\nE0827 15:11:55.953400       7 goroutinemap.go:165] Operation for \"provision-app1/db-db-session-config-0[43480416-aa0b-11e8-8620-0025b500257e]\" failed. No retries permitted until 2018-08-27 15:12:03.9533663 +0000 UTC m=+97.800055032 (durationBeforeRetry 8s). Error: Failed to create rook block image replicapool/pvc-43480416-aa0b-11e8-8620-0025b500257e: failed to create image pvc-43480416-aa0b-11e8-8620-0025b500257e in pool replicapool of size 5368709120: Failed to complete '': exit status 17. rbd: create error: (17) File exists\r\n2018-08-27 15:11:54.750203 7fac2ce34d40 -1 librbd: rbd image pvc-43480416-aa0b-11e8-8620-0025b500257e already exists\r\n. output: 2018-08-27 15:11:54.750203 7fac2ce34d40 -1 librbd: rbd image pvc-43480416-aa0b-11e8-8620-0025b500257e already exists\r\nE0827 15:11:56.156070       7 controller.go:801] Failed to provision volume for claim \"app1/svn-db\" with StorageClass \"rook-ceph-block\": Failed to create rook block image replicapool/pvc-42775829-aa0b-11e8-8620-0025b500257e: failed to create image pvc-42775829-aa0b-11e8-8620-0025b500257e in pool replicapool of size 3221225472: Failed to complete '': exit status 17. rbd: create error: (17) File exists\r\n2018-08-27 15:11:55.850190 7f61c8ad5d40 -1 librbd: rbd image pvc-42775829-aa0b-11e8-8620-0025b500257e already exists\r\n. output: 2018-08-27 15:11:55.850190 7f61c8ad5d40 -1 librbd: rbd image pvc-42775829-aa0b-11e8-8620-0025b500257e already exists\r\nE0827 15:11:56.156171       7 goroutinemap.go:165] Operation for \"provision-app1/svn-db[42775829-aa0b-11e8-8620-0025b500257e]\" failed. No retries permitted until 2018-08-27 15:12:04.156142499 +0000 UTC m=+98.002831222 (durationBeforeRetry 8s). Error: Failed to create rook block image replicapool/pvc-42775829-aa0b-11e8-8620-0025b500257e: failed to create image pvc-42775829-aa0b-11e8-8620-0025b500257e in pool replicapool of size 3221225472: Failed to complete '': exit status 17. rbd: create error: (17) File exists\r\n```\r\nThis problem seems to be related to rapid creation of PVC when charts like DBs are deployed ( in this case mongo).\r\n\r\n\r\n",
  "closed_at": "2018-09-12T15:44:05Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  },
  "comments": 5,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/2072/comments",
  "created_at": "2018-08-27T15:18:35Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/2072/events",
  "html_url": "https://github.com/rook/rook/issues/2072",
  "id": 354362224,
  "labels": [
    {
      "color": "00bbcc",
      "default": false,
      "description": "",
      "id": 496364161,
      "name": "block",
      "node_id": "MDU6TGFiZWw0OTYzNjQxNjE=",
      "url": "https://api.github.com/repos/rook/rook/labels/block"
    },
    {
      "color": "00aaaa",
      "default": false,
      "description": null,
      "id": 479820581,
      "name": "operator",
      "node_id": "MDU6TGFiZWw0Nzk4MjA1ODE=",
      "url": "https://api.github.com/repos/rook/rook/labels/operator"
    },
    {
      "color": "5522ee",
      "default": false,
      "description": "",
      "id": 626631231,
      "name": "reliability",
      "node_id": "MDU6TGFiZWw2MjY2MzEyMzE=",
      "url": "https://api.github.com/repos/rook/rook/labels/reliability"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/2072/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2020-01-28T21:43:43Z",
    "closed_issues": 89,
    "created_at": "2018-02-28T18:53:01Z",
    "creator": {
      "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
      "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
      "followers_url": "https://api.github.com/users/jbw976/followers",
      "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jbw976",
      "id": 4313439,
      "login": "jbw976",
      "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
      "organizations_url": "https://api.github.com/users/jbw976/orgs",
      "received_events_url": "https://api.github.com/users/jbw976/received_events",
      "repos_url": "https://api.github.com/users/jbw976/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jbw976"
    },
    "description": "",
    "due_on": null,
    "html_url": "https://github.com/rook/rook/milestone/10",
    "id": 3151476,
    "labels_url": "https://api.github.com/repos/rook/rook/milestones/10/labels",
    "node_id": "MDk6TWlsZXN0b25lMzE1MTQ3Ng==",
    "number": 10,
    "open_issues": 0,
    "state": "closed",
    "title": "0.9",
    "updated_at": "2020-01-28T21:43:43Z",
    "url": "https://api.github.com/repos/rook/rook/milestones/10"
  },
  "node_id": "MDU6SXNzdWUzNTQzNjIyMjQ=",
  "number": 2072,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "Rook Operator Exits Creating PVC",
  "updated_at": "2019-03-17T17:03:46Z",
  "url": "https://api.github.com/repos/rook/rook/issues/2072",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/221501?v=4",
    "events_url": "https://api.github.com/users/cwolfinger/events{/privacy}",
    "followers_url": "https://api.github.com/users/cwolfinger/followers",
    "following_url": "https://api.github.com/users/cwolfinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/cwolfinger/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/cwolfinger",
    "id": 221501,
    "login": "cwolfinger",
    "node_id": "MDQ6VXNlcjIyMTUwMQ==",
    "organizations_url": "https://api.github.com/users/cwolfinger/orgs",
    "received_events_url": "https://api.github.com/users/cwolfinger/received_events",
    "repos_url": "https://api.github.com/users/cwolfinger/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/cwolfinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cwolfinger/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/cwolfinger"
  }
}