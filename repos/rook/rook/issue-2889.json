{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/912735?v=4",
    "events_url": "https://api.github.com/users/leseb/events{/privacy}",
    "followers_url": "https://api.github.com/users/leseb/followers",
    "following_url": "https://api.github.com/users/leseb/following{/other_user}",
    "gists_url": "https://api.github.com/users/leseb/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/leseb",
    "id": 912735,
    "login": "leseb",
    "node_id": "MDQ6VXNlcjkxMjczNQ==",
    "organizations_url": "https://api.github.com/users/leseb/orgs",
    "received_events_url": "https://api.github.com/users/leseb/received_events",
    "repos_url": "https://api.github.com/users/leseb/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/leseb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leseb/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/leseb"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars3.githubusercontent.com/u/912735?v=4",
      "events_url": "https://api.github.com/users/leseb/events{/privacy}",
      "followers_url": "https://api.github.com/users/leseb/followers",
      "following_url": "https://api.github.com/users/leseb/following{/other_user}",
      "gists_url": "https://api.github.com/users/leseb/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/leseb",
      "id": 912735,
      "login": "leseb",
      "node_id": "MDQ6VXNlcjkxMjczNQ==",
      "organizations_url": "https://api.github.com/users/leseb/orgs",
      "received_events_url": "https://api.github.com/users/leseb/received_events",
      "repos_url": "https://api.github.com/users/leseb/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/leseb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leseb/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/leseb"
    }
  ],
  "author_association": "MEMBER",
  "body": "When doing an upgrade, each pod is recreated with the updated image.  We should gate each pod recreate with the Ceph status to make sure we are giving Ceph enough time to settle between these restarts.\r\n\r\nFor monitor, restarts are fast, so it is usually not an issue.  However, we have a new command pending ``ceph mon ok-to-stop <id>`` to check whether stopping a given monitor will break quorum.  Sometimes that is necessary (e.g., if there is only 1 mon), but when there are 3 or more, we should be more gentle and wait between mon restarts.\r\n\r\nFor the mgr, no check is necessary--just restart the mgr pods.\r\n\r\nFor OSDs, we need to be careful.  There is an existing command, ``ceph osd ok-to-stop`` that checks whether stopping the given OSD will make any data go unavailable.  We should (generally) wait for this to become true.  Note, however, that if there are pools with 1 replica, or the cluster is degraded for other reasons, it may never become true, so we may want to have a 'force' mode, or have it proceed anyway if a timeout expires.\r\n\r\nFor MDSs, a new command is pending ``ceph mds ok-to-stop <id>``.\r\n\r\nradosgw is stateless--restarting one at a time should be sufficient.\r\n\r\nSame for rbd-mirror.",
  "closed_at": "2019-07-17T09:54:23Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/912735?v=4",
    "events_url": "https://api.github.com/users/leseb/events{/privacy}",
    "followers_url": "https://api.github.com/users/leseb/followers",
    "following_url": "https://api.github.com/users/leseb/following{/other_user}",
    "gists_url": "https://api.github.com/users/leseb/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/leseb",
    "id": 912735,
    "login": "leseb",
    "node_id": "MDQ6VXNlcjkxMjczNQ==",
    "organizations_url": "https://api.github.com/users/leseb/orgs",
    "received_events_url": "https://api.github.com/users/leseb/received_events",
    "repos_url": "https://api.github.com/users/leseb/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/leseb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leseb/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/leseb"
  },
  "comments": 5,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/2889/comments",
  "created_at": "2019-03-25T15:28:29Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/2889/events",
  "html_url": "https://github.com/rook/rook/issues/2889",
  "id": 424966173,
  "labels": [
    {
      "color": "ef5c55",
      "default": false,
      "description": "main ceph tag",
      "id": 479456042,
      "name": "ceph",
      "node_id": "MDU6TGFiZWw0Nzk0NTYwNDI=",
      "url": "https://api.github.com/repos/rook/rook/labels/ceph"
    },
    {
      "color": "84b6eb",
      "default": false,
      "description": "",
      "id": 405241117,
      "name": "feature",
      "node_id": "MDU6TGFiZWw0MDUyNDExMTc=",
      "url": "https://api.github.com/repos/rook/rook/labels/feature"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/2889/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2020-03-31T19:33:42Z",
    "closed_issues": 148,
    "created_at": "2019-03-15T19:30:30Z",
    "creator": {
      "avatar_url": "https://avatars3.githubusercontent.com/u/3989526?v=4",
      "events_url": "https://api.github.com/users/BlaineEXE/events{/privacy}",
      "followers_url": "https://api.github.com/users/BlaineEXE/followers",
      "following_url": "https://api.github.com/users/BlaineEXE/following{/other_user}",
      "gists_url": "https://api.github.com/users/BlaineEXE/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/BlaineEXE",
      "id": 3989526,
      "login": "BlaineEXE",
      "node_id": "MDQ6VXNlcjM5ODk1MjY=",
      "organizations_url": "https://api.github.com/users/BlaineEXE/orgs",
      "received_events_url": "https://api.github.com/users/BlaineEXE/received_events",
      "repos_url": "https://api.github.com/users/BlaineEXE/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/BlaineEXE/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BlaineEXE/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/BlaineEXE"
    },
    "description": "",
    "due_on": null,
    "html_url": "https://github.com/rook/rook/milestone/12",
    "id": 4144795,
    "labels_url": "https://api.github.com/repos/rook/rook/milestones/12/labels",
    "node_id": "MDk6TWlsZXN0b25lNDE0NDc5NQ==",
    "number": 12,
    "open_issues": 0,
    "state": "closed",
    "title": "1.1",
    "updated_at": "2020-03-31T19:33:42Z",
    "url": "https://api.github.com/repos/rook/rook/milestones/12"
  },
  "node_id": "MDU6SXNzdWU0MjQ5NjYxNzM=",
  "number": 2889,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "Improve Ceph upgrade pod recreation gates",
  "updated_at": "2019-07-17T09:54:23Z",
  "url": "https://api.github.com/repos/rook/rook/issues/2889",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/433031?v=4",
    "events_url": "https://api.github.com/users/liewegas/events{/privacy}",
    "followers_url": "https://api.github.com/users/liewegas/followers",
    "following_url": "https://api.github.com/users/liewegas/following{/other_user}",
    "gists_url": "https://api.github.com/users/liewegas/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/liewegas",
    "id": 433031,
    "login": "liewegas",
    "node_id": "MDQ6VXNlcjQzMzAzMQ==",
    "organizations_url": "https://api.github.com/users/liewegas/orgs",
    "received_events_url": "https://api.github.com/users/liewegas/received_events",
    "repos_url": "https://api.github.com/users/liewegas/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/liewegas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/liewegas/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/liewegas"
  }
}