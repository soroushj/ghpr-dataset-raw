{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "* Bug Report\r\n\r\n**Bug Report**\r\n\r\nWhat happened: Install `rook` via `helm char` in local `minikube` environment\r\n```\r\nhelm install --name rook --namespace rook-system .\r\n```\r\nThe initial install command fails due to time-out:\r\n```\r\n2018-04-03 23:06:27.578954 I | exec: Running command: helm install local/rook --name rook --version v0.7.0-61.g5c4990a --namespace helm-ns\r\n2018-04-03 23:11:28.939453 E | testutil: Errors Encountered while executing helm command : Failed to complete '': exit status 1. Error: timed out waiting for the condition\r\n```\r\nAll subsequent install attempts fail with:\r\n```\r\n2018-04-03 23:11:34.585710 I | exec: Running command: helm install local/rook --name rook --version v0.7.0-61.g5c4990a --namespace helm-ns\r\n2018-04-03 23:11:34.741006 E | testutil: Errors Encountered while executing helm command : Failed to complete '': exit status 1. Error: a release named rook already exists.\r\n```\r\n\r\nWhat you expected to happen: `rook-operator` is up and running\r\n\r\nHow to reproduce it (minimal and precise):\r\nThis issue was discovered while testing #1471, specifically when helm's chart job: `wait-on-resource-job.yaml` was crashing, which lead to initial timeout on `helm install`. \r\nTo reproduce the issue, modify `wait-on-resource-job.yaml` to make it fail.\r\n\r\n**Environment**:\r\n* OS (e.g. from /etc/os-release): \r\n```\r\nNAME=\"Ubuntu\"\r\nVERSION=\"17.10 (Artful Aardvark)\"\r\nID=ubuntu\r\n```\r\n* Kernel (e.g. `uname -a`):Linux handspotizer 4.13.0-37-generic #42-Ubuntu SMP Wed Mar 7 14:13:23 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n* Cloud provider or hardware configuration: n/a\r\n* Rook version (use `rook version` inside of a Rook Pod): master\r\n* Kubernetes version (use `kubectl version`): `v1.9.4`\r\n* Kubernetes cluster type (e.g. Tectonic, GKE, OpenShift): `minikube`\r\n* Ceph status (use `ceph health` in the [Rook toolbox](https://Rook.io/docs/Rook/master/toolbox.html)): n/a\r\n",
  "closed_at": "2018-04-04T04:31:27Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/1620/comments",
  "created_at": "2018-04-04T00:56:18Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/1620/events",
  "html_url": "https://github.com/rook/rook/issues/1620",
  "id": 311048387,
  "labels": [],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/1620/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzMTEwNDgzODc=",
  "number": 1620,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "Bug: Perpetual Loop in helm_helper.go",
  "updated_at": "2018-04-04T04:31:27Z",
  "url": "https://api.github.com/repos/rook/rook/issues/1620",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/324803?v=4",
    "events_url": "https://api.github.com/users/ichekrygin/events{/privacy}",
    "followers_url": "https://api.github.com/users/ichekrygin/followers",
    "following_url": "https://api.github.com/users/ichekrygin/following{/other_user}",
    "gists_url": "https://api.github.com/users/ichekrygin/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ichekrygin",
    "id": 324803,
    "login": "ichekrygin",
    "node_id": "MDQ6VXNlcjMyNDgwMw==",
    "organizations_url": "https://api.github.com/users/ichekrygin/orgs",
    "received_events_url": "https://api.github.com/users/ichekrygin/received_events",
    "repos_url": "https://api.github.com/users/ichekrygin/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ichekrygin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ichekrygin/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ichekrygin"
  }
}