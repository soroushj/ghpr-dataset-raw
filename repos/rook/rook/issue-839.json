{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "Hi, \r\n \r\nI have a kubernetes cluster with only one master node where I run rook. Everything works as expected when running the cluster with https://raw.githubusercontent.com/rook/rook/master/demo/kubernetes/rook-cluster.yaml but if I change the cluster definition to use `/var/run/rook` as `dataDirHostPath`\r\n\r\nThe osd enters in a containerCrashbackLoop with the following error on the logs. \r\n\r\n```\r\n\r\n [ [WARN  tini (334)] Tini is not running as PID 1 and isn't registered as a child subreaper.\r\nZombie processes will not be re-parented to Tini, so zombie reaping won't work.\r\nTo fix the problem, use the -s option or set the environment variable TINI_SUBREAPER to register Tini as a child subreaper, or run Tini as PID 1.\r\n2017-07-27 08:18:23.076236 I | cephmon: parsing mon endpoints: rook-ceph-mon2=10.0.0.39:6790,rook-ceph-mon0=10.0.0.37:6790,rook-ceph-mon1=10.0.0.38:6790\r\n2017-07-27 08:18:23.076330 I | proc: Running process hostname with args: [ubuntuxenialxerus]\r\n2017-07-27 08:18:23.076336 I | exec: Running command: hostname ubuntuxenialxerus\r\n2017-07-27 08:18:23.077357 I | cephmon: writing config file /var/lib/rook/rook/rook.config\r\n2017-07-27 08:18:23.077443 I | cephmon: generated admin config in /var/lib/rook/rook\r\n2017-07-27 08:18:23.077454 I | cephosd: discovering hardware\r\n2017-07-27 08:18:23.077459 I | exec: Running command: lsblk --all --noheadings --list --output KNAME\r\n2017-07-27 08:18:23.079471 I | exec: Running command: lsblk /dev/fd0 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.080756 I | exec: Running command: sgdisk --print /dev/fd0\r\n2017-07-27 08:18:23.119349 W | inventory: skipping device fd0 with an unknown uuid. Failed to complete get disk fd0 uuid: exit status 2\r\n2017-07-27 08:18:23.119370 I | exec: Running command: lsblk /dev/loop0 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.120653 I | exec: Running command: lsblk /dev/loop1 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.121881 I | exec: Running command: lsblk /dev/loop2 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.123141 I | exec: Running command: lsblk /dev/loop3 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.124406 I | exec: Running command: lsblk /dev/loop4 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.125614 I | exec: Running command: lsblk /dev/loop5 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.126740 I | exec: Running command: lsblk /dev/loop6 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.127889 I | exec: Running command: lsblk /dev/loop7 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.129054 I | exec: Running command: lsblk /dev/sda --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.130315 I | exec: Running command: sgdisk --print /dev/sda\r\n2017-07-27 08:18:23.132205 I | exec: Running command: df --output=source,fstype\r\n2017-07-27 08:18:23.133150 I | exec: Running command: lsblk /dev/sda1 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.134434 I | exec: Running command: df --output=source,fstype\r\n2017-07-27 08:18:23.135991 I | exec: Running command: lsblk /dev/sda2 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.137263 I | exec: Running command: df --output=source,fstype \r\n2017-07-27 08:18:23.140370 I | exec: Running command: lsblk /dev/sda5 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.142169 I | exec: Running command: df --output=source,fstype\r\n2017-07-27 08:18:23.143139 I | exec: Running command: lsblk /dev/sr0 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2017-07-27 08:18:23.144403 I | cephosd: creating and starting the osds\r\n2017-07-27 08:18:23.144422 I | exec: Running command: lsblk /dev/sda --bytes --pairs --output NAME,SIZE,TYPE,PKNAME\r\n2017-07-27 08:18:23.145720 I | exec: Running command: blkid /dev/sda1 -s PARTLABEL -o value\r\n2017-07-27 08:18:23.147290 I | exec: Running command: blkid /dev/sda2 -s PARTLABEL -o value\r\n2017-07-27 08:18:23.148589 I | exec: Running command: blkid /dev/sda5 -s PARTLABEL -o value\r\n2017-07-27 08:18:23.150120 I | exec: Running command: df --output=source,fstype\r\n2017-07-27 08:18:23.151260 I | cephosd: skipping device sda that is in use (not by rook). fs: ext4, ownPartitions: false\r\n2017-07-27 08:18:23.151312 I | cephosd: configuring osd devices: &{Entries:map[]}\r\n2017-07-27 08:18:23.151340 I | cephosd: configuring osd dirs: map[/var/lib/rook:-1]\r\n2017-07-27 08:18:23.151471 I | exec: Running command: ceph osd create b9438e72-8cd3-445e-9bc7-93ac1d3e8896 --cluster=rook --conf=/var/lib/rook/rook/rook.config --keyring=/var/lib/rook/rook/client.admin.keyring --format json --out-file /tmp/073769202\r\n2017-07-27 08:18:23.383839 I | cephosd: successfully created OSD b9438e72-8cd3-445e-9bc7-93ac1d3e8896 with ID 3\r\n2017-07-27 08:18:23.384082 I | cephmon: writing config file /var/lib/rook/osd3/rook.config\r\n2017-07-27 08:18:23.384221 I | exec: Running command: ceph mon getmap --cluster=rook --conf=/var/lib/rook/rook/rook.config --keyring=/var/lib/rook/rook/client.admin.keyring --format json --out-file /tmp/248871849\r\n2017-07-27 08:18:23.599232 I | exec: got monmap epoch 3\r\n2017-07-27 08:18:23.599362 I | cephosd: Initializing OSD 3 file system at /var/lib/rook/osd3...\r\n2017-07-27 08:18:23.599452 I | proc: Running process ceph-osd with args: [--mkfs --mkkey --id=3 --cluster=rook --conf=/var/lib/rook/osd3/rook.config --osd-data=/var/lib/rook/osd3 --osd-uuid=b9438e72-8cd3-445e-9bc7-93ac1d3e8896 --monmap=/var/lib/rook/osd3/tmp/activate.monmap --osd-journal=/var/lib/rook/osd3/journal --keyring=/var/lib/rook/osd3/keyring]\r\n2017-07-27 08:18:23.599469 I | exec: Running command: ceph-osd --mkfs --mkkey --id=3 --cluster=rook --conf=/var/lib/rook/osd3/rook.config --osd-data=/var/lib/rook/osd3 --osd-uuid=b9438e72-8cd3-445e-9bc7-93ac1d3e8896 --monmap=/var/lib/rook/osd3/tmp/activate.monmap --osd-journal=/var/lib/rook/osd3/journal --keyring=/var/lib/rook/osd3/keyring\r\n2017-07-27 08:18:23.612389 I | mkfs-osd3: 2017-07-27 08:18:23.612303 7f43d098dc80  0 ceph version 322840bc7 (b322840bc716d86b322b7f78c31cc7f9ae42c1a4) luminous (dev), process (unknown), pid 418\r\n2017-07-27 08:18:23.615470 I | mkfs-osd3: 2017-07-27 08:18:23.615416 7f43d098dc80  0 filestore(/var/lib/rook/osd3) backend generic (magic 0x1021994) \r\n2017-07-27 08:18:23.617841 I | mkfs-osd3: 2017-07-27 08:18:23.617782 7f43d098dc80 -1 filestore(/var/lib/rook/osd3) mkjournal(1058): error creating journal on /var/lib/rook/osd3/journal: (22) Invalid argument\r\n2017-07-27 08:18:23.617862 I | mkfs-osd3: 2017-07-27 08:18:23.617815 7f43d098dc80 -1 OSD::mkfs: ObjectStore::mkfs failed with error -22\r\n2017-07-27 08:18:23.617925 I | mkfs-osd3: 2017-07-27 08:18:23.617877 7f43d098dc80 -1  ** ERROR: error creating empty object store in /var/lib/rook/osd3: (22) Invalid argument\r\n2017-07-27 08:18:23.619381 I | mkfs-osd3: 2017-07-27 08:18:23.617782 7f43d098dc80 -1 filestore(/var/lib/rook/osd3) mkjournal(1058): error creating journal on /var/lib/rook/osd3/journal: (22) Invalid argument\r\n2017-07-27 08:18:23.619396 I | mkfs-osd3: 2017-07-27 08:18:23.617815 7f43d098dc80 -1 OSD::mkfs: ObjectStore::mkfs failed with error -22\r\n2017-07-27 08:18:23.619403 I | mkfs-osd3: 2017-07-27 08:18:23.617877 7f43d098dc80 -1  ** ERROR: error creating empty object store in /var/lib/rook/osd3: (22) Invalid argument\r\n2017-07-27 08:18:23.619471 E | cephosd: failed to config osd in path /var/lib/rook. failed to initialize OSD at /var/lib/rook/osd3: failed osd mkfs for OSD ID 3, UUID b9438e72-8cd3-445e-9bc7-93ac1d3e8896, dataDir /var/lib/rook/osd3: failed to run ceph-osd: Failed to complete mkfs-osd3: exit status 1\r\n2017-07-27 08:18:23.619488 I | cephosd: 0/1 osd dirs succeeded on this node\r\nfailed to configure dirs map[/var/lib/rook:3]. failed to initialize OSD at /var/lib/rook/osd3: failed osd mkfs for OSD ID 3, UUID b9438e72-8cd3-445e-9bc7-93ac1d3e8896, dataDir /var/lib/rook/osd3: failed to run ceph-osd: Failed to complete mkfs-osd3: exit status 1 \r\n```\r\nLet me know if any additional information is required. ",
  "closed_at": "2017-08-03T15:41:13Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "comments": 7,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/839/comments",
  "created_at": "2017-07-26T15:43:39Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/839/events",
  "html_url": "https://github.com/rook/rook/issues/839",
  "id": 245766782,
  "labels": [],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/839/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUyNDU3NjY3ODI=",
  "number": 839,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "Unable to run rook with dataDirHostPath diferent than /var/lib/rook/",
  "updated_at": "2017-08-03T15:41:13Z",
  "url": "https://api.github.com/repos/rook/rook/issues/839",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/1160726?v=4",
    "events_url": "https://api.github.com/users/pokoli/events{/privacy}",
    "followers_url": "https://api.github.com/users/pokoli/followers",
    "following_url": "https://api.github.com/users/pokoli/following{/other_user}",
    "gists_url": "https://api.github.com/users/pokoli/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/pokoli",
    "id": 1160726,
    "login": "pokoli",
    "node_id": "MDQ6VXNlcjExNjA3MjY=",
    "organizations_url": "https://api.github.com/users/pokoli/orgs",
    "received_events_url": "https://api.github.com/users/pokoli/received_events",
    "repos_url": "https://api.github.com/users/pokoli/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/pokoli/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pokoli/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/pokoli"
  }
}