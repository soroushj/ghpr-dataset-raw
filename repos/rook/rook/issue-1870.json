{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/19730728?v=4",
    "events_url": "https://api.github.com/users/nakabonne/events{/privacy}",
    "followers_url": "https://api.github.com/users/nakabonne/followers",
    "following_url": "https://api.github.com/users/nakabonne/following{/other_user}",
    "gists_url": "https://api.github.com/users/nakabonne/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/nakabonne",
    "id": 19730728,
    "login": "nakabonne",
    "node_id": "MDQ6VXNlcjE5NzMwNzI4",
    "organizations_url": "https://api.github.com/users/nakabonne/orgs",
    "received_events_url": "https://api.github.com/users/nakabonne/received_events",
    "repos_url": "https://api.github.com/users/nakabonne/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/nakabonne/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nakabonne/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/nakabonne"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/19730728?v=4",
      "events_url": "https://api.github.com/users/nakabonne/events{/privacy}",
      "followers_url": "https://api.github.com/users/nakabonne/followers",
      "following_url": "https://api.github.com/users/nakabonne/following{/other_user}",
      "gists_url": "https://api.github.com/users/nakabonne/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/nakabonne",
      "id": 19730728,
      "login": "nakabonne",
      "node_id": "MDQ6VXNlcjE5NzMwNzI4",
      "organizations_url": "https://api.github.com/users/nakabonne/orgs",
      "received_events_url": "https://api.github.com/users/nakabonne/received_events",
      "repos_url": "https://api.github.com/users/nakabonne/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/nakabonne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nakabonne/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/nakabonne"
    }
  ],
  "author_association": "MEMBER",
  "body": "In [master build 663](https://jenkins.rook.io/blue/organizations/jenkins/rook%2Frook/detail/master/663/pipeline), the `TestCockroachDBClusterInstallation` integration test fails as shown in the [full logs](https://jenkins.rook.io/blue/rest/organizations/jenkins/pipelines/rook/pipelines/rook/branches/master/runs/663/nodes/41/steps/90/log/?start=0):\r\n```\r\n2018-07-10 21:02:49.651888 I | integrationTest: cockroachdb sql command exited, err: kubectl exec command /cockroach/cockroach failed on pod rook-cockroachdb-operator-7d5554bdc-qqqvc in namespace cockroachdb-ns-system: Failed to run: kubectl [exec -n cockroachdb-ns-system rook-cockroachdb-operator-7d5554bdc-qqqvc -- /cockroach/cockroach sql --insecure --host=cockroachdb-public.cockroachdb-ns -e create database rookcockroachdb; use rookcockroachdb; create table testtable ( testID int ); insert into testtable values (123456789); select * from testtable;] : Failed to complete 'kubectl': signal: interrupt. . output: . result: \r\n2018-07-10 21:02:49.651894 W | integrationTest: cockroachdb sql command failed, will try again\r\n2018-07-10 21:02:54.652075 I | exec: Running command: kubectl exec -n cockroachdb-ns-system rook-cockroachdb-operator-7d5554bdc-qqqvc -- /cockroach/cockroach sql --insecure --host=cockroachdb-public.cockroachdb-ns -e create database rookcockroachdb; use rookcockroachdb; create table testtable ( testID int ); insert into testtable values (123456789); select * from testtable;\r\n2018-07-10 21:02:58.027982 E | utils: Failed to execute: kubectl [exec -n cockroachdb-ns-system rook-cockroachdb-operator-7d5554bdc-qqqvc -- /cockroach/cockroach sql --insecure --host=cockroachdb-public.cockroachdb-ns -e create database rookcockroachdb; use rookcockroachdb; create table testtable ( testID int ); insert into testtable values (123456789); select * from testtable;] : Failed to complete 'kubectl': exit status 1. . Error: pq: database \"rookcockroachdb\" already exists\r\nFailed running \"sql\"\r\ncommand terminated with exit code 1\r\n```\r\n\r\nThis test performs a check on the cockroachdb installation by running a SQL command that creates a test database/table, inserts data into it and reads the data back.  It is typical for this command to time out a few times while the cockroachdb cluster is initializing.  At each timeout, the command is sent an interrupt.  However, sometimes the command will have actually completed under the covers even though the timeout is reached.  On the next attempt, the command is not idempotent, so it fails trying to create a table that already exists.\r\n\r\nThis can be improved so the test is more reliable (either the timeout should be more reliable, or the SQL command should be idempotent, or both).",
  "closed_at": "2019-03-14T19:19:30Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "comments": 8,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/1870/comments",
  "created_at": "2018-07-11T04:51:25Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/1870/events",
  "html_url": "https://github.com/rook/rook/issues/1870",
  "id": 340091057,
  "labels": [
    {
      "color": "1d76db",
      "default": false,
      "description": "Issues that are great for new contributors to familiarize themselves with Rook.",
      "id": 922093573,
      "name": "beginner",
      "node_id": "MDU6TGFiZWw5MjIwOTM1NzM=",
      "url": "https://api.github.com/repos/rook/rook/labels/beginner"
    },
    {
      "color": "84C441",
      "default": false,
      "description": "",
      "id": 915291772,
      "name": "cockroachdb",
      "node_id": "MDU6TGFiZWw5MTUyOTE3NzI=",
      "url": "https://api.github.com/repos/rook/rook/labels/cockroachdb"
    },
    {
      "color": "5319e7",
      "default": false,
      "description": "unit or integration testing",
      "id": 607329642,
      "name": "test",
      "node_id": "MDU6TGFiZWw2MDczMjk2NDI=",
      "url": "https://api.github.com/repos/rook/rook/labels/test"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/1870/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2020-01-28T21:43:45Z",
    "closed_issues": 119,
    "created_at": "2018-11-21T16:40:13Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
      "events_url": "https://api.github.com/users/travisn/events{/privacy}",
      "followers_url": "https://api.github.com/users/travisn/followers",
      "following_url": "https://api.github.com/users/travisn/following{/other_user}",
      "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/travisn",
      "id": 1048514,
      "login": "travisn",
      "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
      "organizations_url": "https://api.github.com/users/travisn/orgs",
      "received_events_url": "https://api.github.com/users/travisn/received_events",
      "repos_url": "https://api.github.com/users/travisn/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/travisn"
    },
    "description": "",
    "due_on": null,
    "html_url": "https://github.com/rook/rook/milestone/11",
    "id": 3838796,
    "labels_url": "https://api.github.com/repos/rook/rook/milestones/11/labels",
    "node_id": "MDk6TWlsZXN0b25lMzgzODc5Ng==",
    "number": 11,
    "open_issues": 0,
    "state": "closed",
    "title": "1.0",
    "updated_at": "2020-01-28T21:43:45Z",
    "url": "https://api.github.com/repos/rook/rook/milestones/11"
  },
  "node_id": "MDU6SXNzdWUzNDAwOTEwNTc=",
  "number": 1870,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "cockroachdb integration test fails because check is not idempotent",
  "updated_at": "2019-03-14T19:19:30Z",
  "url": "https://api.github.com/repos/rook/rook/issues/1870",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  }
}