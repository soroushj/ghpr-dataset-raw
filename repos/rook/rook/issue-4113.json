{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/18114231?v=4",
    "events_url": "https://api.github.com/users/Madhu-1/events{/privacy}",
    "followers_url": "https://api.github.com/users/Madhu-1/followers",
    "following_url": "https://api.github.com/users/Madhu-1/following{/other_user}",
    "gists_url": "https://api.github.com/users/Madhu-1/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/Madhu-1",
    "id": 18114231,
    "login": "Madhu-1",
    "node_id": "MDQ6VXNlcjE4MTE0MjMx",
    "organizations_url": "https://api.github.com/users/Madhu-1/orgs",
    "received_events_url": "https://api.github.com/users/Madhu-1/received_events",
    "repos_url": "https://api.github.com/users/Madhu-1/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/Madhu-1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Madhu-1/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/Madhu-1"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/18114231?v=4",
      "events_url": "https://api.github.com/users/Madhu-1/events{/privacy}",
      "followers_url": "https://api.github.com/users/Madhu-1/followers",
      "following_url": "https://api.github.com/users/Madhu-1/following{/other_user}",
      "gists_url": "https://api.github.com/users/Madhu-1/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Madhu-1",
      "id": 18114231,
      "login": "Madhu-1",
      "node_id": "MDQ6VXNlcjE4MTE0MjMx",
      "organizations_url": "https://api.github.com/users/Madhu-1/orgs",
      "received_events_url": "https://api.github.com/users/Madhu-1/received_events",
      "repos_url": "https://api.github.com/users/Madhu-1/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Madhu-1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Madhu-1/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Madhu-1"
    }
  ],
  "author_association": "NONE",
  "body": "<!-- **Are you in the right place?**\r\n1. For issues or feature requests, please create an issue in this repository.\r\n2. For general technical and non-technical questions, we are happy to help you on our [Rook.io Slack](https://slack.rook.io/).\r\n3. Did you already search the existing open issues for anything similar? -->\r\n\r\n**Is this a bug report or feature request?**\r\n* Feature Request\r\n\r\n**What should the feature do:**\r\n* I can define resource limits/requests for csi-cephfsplugin/csi-rbdplugin\r\n\r\n**What is use case behind this feature:**\r\n* For better resources control.\r\n\r\n**Environment**:\r\n<!-- Specific environment information that helps with the feature request -->\r\n* test k8s cluster deployed by kops (1.13), 3 worker nodes (m5a.xlarge), 1 master (c5.large), ceph cluster deployed by rook helm operator (1.1.2), cephfs. Default limits/requests applied for each namespace: \r\nlimits:\r\n  - default:\r\n      cpu: 500m\r\n      memory: 512Mi\r\n    defaultRequest:\r\n      cpu: 100m\r\n      memory: 384Mi\r\n\r\nWhen I was performing performance test for cephfs from a container:\r\n![image](https://user-images.githubusercontent.com/26551078/66931182-671b6d00-f03e-11e9-963c-d0d5219d62c0.png)\r\nI'm experiencing an issue with \"ceph-fuse\" process got killed on the worker because of OOMkiller:\r\n```[ 1241.386565] Task in /kubepods/burstable/pod489d6aa7-f023-11e9-8421-0a78cabc5da4/f870326a4153803c0361282b38a5864148ff0eae96b3e4b222a675c699d0d935 killed as a result of limit of /kubepods/burstable/pod489d6aa7-f023-11e9-8421-0a78cabc5da4/f870326a4153803c0361282b38a5864148ff0eae96b3e4b222a675c699d0d935\r\n[ 1241.386573] memory: usage 524288kB, limit 524288kB, failcnt 308336\r\n[ 1241.386574] memory+swap: usage 0kB, limit 9007199254740988kB, failcnt 0\r\n[ 1241.386575] kmem: usage 5348kB, limit 9007199254740988kB, failcnt 0\r\n[ 1241.386576] Memory cgroup stats for /kubepods/burstable/pod489d6aa7-f023-11e9-8421-0a78cabc5da4/f870326a4153803c0361282b38a5864148ff0eae96b3e4b222a675c699d0d935: cache:48KB rss:518892KB rss_huge:0KB shmem:0KB mapped_file:0KB dirty:0KB writeback:0KB inactive_anon:0KB active_anon:518852KB inactive_file:0KB active_file:0KB unevictable:0KB\r\n[ 1241.386588] [ pid ]   uid  tgid total_vm      rss pgtables_bytes swapents oom_score_adj name\r\n[ 1241.386648] [ 7656]     0  7656    33823     3452   135168        0           976 cephcsi\r\n[ 1241.386668] [21003]     0 21003   478706   128060  1462272        0           976 ceph-fuse\r\n[ 1241.386678] Memory cgroup out of memory: Kill process 21003 (ceph-fuse) score 1925 or sacrifice child\r\n[ 1241.391943] Killed process 21003 (ceph-fuse) total-vm:1914824kB, anon-rss:512240kB, file-rss:0kB, shmem-rss:0kB\r\n[ 1241.416738] oom_reaper: reaped process 21003 (ceph-fuse), now anon-rss:0kB, file-rss:0kB, shmem-rss:0kB\r\n```\r\n\r\nhere is a docker stats output at the moment of OOMkiller:\r\n![image](https://user-images.githubusercontent.com/26551078/66931156-5a971480-f03e-11e9-93ae-e6784d99e484.png)\r\n\r\nDue to that, I'd recommend implementing the ability to define resource limit/requests for plugins even if you don't have a default limitranger set.\r\nPlease note, I didn't have such issues with RBD.",
  "closed_at": "2020-04-29T14:09:20Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "comments": 5,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/4113/comments",
  "created_at": "2019-10-16T15:05:00Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/4113/events",
  "html_url": "https://github.com/rook/rook/issues/4113",
  "id": 507912998,
  "labels": [
    {
      "color": "ef5c55",
      "default": false,
      "description": "main ceph tag",
      "id": 479456042,
      "name": "ceph",
      "node_id": "MDU6TGFiZWw0Nzk0NTYwNDI=",
      "url": "https://api.github.com/repos/rook/rook/labels/ceph"
    },
    {
      "color": "5ccfd1",
      "default": false,
      "description": "",
      "id": 1232322795,
      "name": "csi",
      "node_id": "MDU6TGFiZWwxMjMyMzIyNzk1",
      "url": "https://api.github.com/repos/rook/rook/labels/csi"
    },
    {
      "color": "84b6eb",
      "default": false,
      "description": "",
      "id": 405241117,
      "name": "feature",
      "node_id": "MDU6TGFiZWw0MDUyNDExMTc=",
      "url": "https://api.github.com/repos/rook/rook/labels/feature"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/4113/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU1MDc5MTI5OTg=",
  "number": 4113,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "Add ability to configure resource limits/requests for ceph-csi plugins",
  "updated_at": "2020-04-29T14:09:20Z",
  "url": "https://api.github.com/repos/rook/rook/issues/4113",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/13018569?v=4",
    "events_url": "https://api.github.com/users/sfesfizh/events{/privacy}",
    "followers_url": "https://api.github.com/users/sfesfizh/followers",
    "following_url": "https://api.github.com/users/sfesfizh/following{/other_user}",
    "gists_url": "https://api.github.com/users/sfesfizh/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sfesfizh",
    "id": 13018569,
    "login": "sfesfizh",
    "node_id": "MDQ6VXNlcjEzMDE4NTY5",
    "organizations_url": "https://api.github.com/users/sfesfizh/orgs",
    "received_events_url": "https://api.github.com/users/sfesfizh/received_events",
    "repos_url": "https://api.github.com/users/sfesfizh/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sfesfizh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sfesfizh/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sfesfizh"
  }
}