{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
      "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
      "followers_url": "https://api.github.com/users/jbw976/followers",
      "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jbw976",
      "id": 4313439,
      "login": "jbw976",
      "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
      "organizations_url": "https://api.github.com/users/jbw976/orgs",
      "received_events_url": "https://api.github.com/users/jbw976/received_events",
      "repos_url": "https://api.github.com/users/jbw976/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jbw976"
    }
  ],
  "author_association": "MEMBER",
  "body": "After some testing around it seems that the metrics for IOPS and throughput are always zero, as can be seen here: https://snapshot.raintank.io/dashboard/snapshot/KiMnh4syynFvqYdu3akRPWqngjlgq8z6?refresh=10s&orgId=2 (ignore the bad latency :grin:).\r\n\r\nThe prometheus used here is started from the `demo/kubernetes/monitoring/` directory.\r\n\r\nAlso the `rook-api-*` pod metrics endpoint also reports zeros, other metrics are \"correct\":\r\n```\r\n# HELP ceph_cache_evict_io_bytes Rate of bytes being evicted from the cache pool per second\r\n# TYPE ceph_cache_evict_io_bytes gauge\r\nceph_cache_evict_io_bytes 0\r\n# HELP ceph_cache_flush_io_bytes Rate of bytes being flushed from the cache pool per second\r\n# TYPE ceph_cache_flush_io_bytes gauge\r\nceph_cache_flush_io_bytes 0\r\n# HELP ceph_cache_promote_io_ops Total cache promote operations measured per second\r\n# TYPE ceph_cache_promote_io_ops gauge\r\nceph_cache_promote_io_ops 0\r\n# HELP ceph_client_io_ops Total client ops on the cluster measured per second\r\n# TYPE ceph_client_io_ops gauge\r\nceph_client_io_ops 0\r\n# HELP ceph_client_io_read_bytes Rate of bytes being read by all clients per second\r\n# TYPE ceph_client_io_read_bytes gauge\r\nceph_client_io_read_bytes 0\r\n# HELP ceph_client_io_read_ops Total client read I/O ops on the cluster measured per second\r\n# TYPE ceph_client_io_read_ops gauge\r\nceph_client_io_read_ops 0\r\n# HELP ceph_client_io_write_bytes Rate of bytes being written by all clients per second\r\n# TYPE ceph_client_io_write_bytes gauge\r\nceph_client_io_write_bytes 0\r\n# HELP ceph_client_io_write_ops Total client write I/O ops on the cluster measured per second\r\n# TYPE ceph_client_io_write_ops gauge\r\nceph_client_io_write_ops 0\r\n```\r\n~~Is this an issue in the rook-api or are those metrics to be implemented?~~\r\n\r\n***\r\n\r\nI just saw errors in the rook-api logs:\r\n```\r\n2017-08-10 17:30:41.009113 E | cephcollectors: failed collecting osd perf stats: failed to get osd perf: exit status 22\r\n2017-08-10 17:30:41.009201 I | exec: Running command: ceph osd dump --cluster=rook --conf=/var/lib/rook/rook/rook.config --keyring=/var/lib/rook/rook/client.admin.keyring --format json --out-file /tmp/535485873\r\n2017-08-10 17:30:41.161225 I | exec: Running command: ceph osd df --cluster=rook --conf=/var/lib/rook/rook/rook.config --keyring=/var/lib/rook/rook/client.admin.keyring --format json --out-file /tmp/037689180\r\n2017-08-10 17:30:41.457929 I | exec: no valid command found; 10 closest matches:\r\nosd crush tree {--show-shadow}\r\nosd crush class rm <class>\r\nosd crush rule create-erasure <name> {<profile>}\r\nosd crush rule rm <name>\r\nosd crush rule create-simple <name> <root> <type> {firstn|indep}\r\nosd crush rule create-replicated <name> <root> <type> {<class>}\r\nosd crush get-tunable straw_calc_version\r\nosd crush show-tunables\r\nosd crush tunables legacy|argonaut|bobtail|firefly|hammer|jewel|optimal|default\r\nosd crush set-tunable straw_calc_version <int>\r\nError EINVAL: invalid command\r\n2017-08-10 17:30:41.458013 E | cephcollectors: failed collecting osd metrics: failed to get osd df: exit status 22\r\n```",
  "closed_at": "2017-08-11T23:19:22Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/891/comments",
  "created_at": "2017-08-10T12:34:27Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/891/events",
  "html_url": "https://github.com/rook/rook/issues/891",
  "id": 249331400,
  "labels": [],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/891/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2018-01-02T03:49:47Z",
    "closed_issues": 86,
    "created_at": "2017-05-03T02:33:11Z",
    "creator": {
      "avatar_url": "https://avatars3.githubusercontent.com/u/1463491?v=4",
      "events_url": "https://api.github.com/users/bassam/events{/privacy}",
      "followers_url": "https://api.github.com/users/bassam/followers",
      "following_url": "https://api.github.com/users/bassam/following{/other_user}",
      "gists_url": "https://api.github.com/users/bassam/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/bassam",
      "id": 1463491,
      "login": "bassam",
      "node_id": "MDQ6VXNlcjE0NjM0OTE=",
      "organizations_url": "https://api.github.com/users/bassam/orgs",
      "received_events_url": "https://api.github.com/users/bassam/received_events",
      "repos_url": "https://api.github.com/users/bassam/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/bassam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bassam/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/bassam"
    },
    "description": "Ceph Block storage declared Beta on K8S /\r\nKubernetes 1.8 Support /\r\nRook volume plugin support in K8S /\r\nRook agent on client nodes /\r\nRook is upgradeable /\r\nSupport for local storage (and arbitrary volumes) underneath OSD pods /\r\nSupport for public cloud environments /\r\nImproved test matrix and more test coverage /\r\nCRDs for object storage and file system",
    "due_on": null,
    "html_url": "https://github.com/rook/rook/milestone/6",
    "id": 2496353,
    "labels_url": "https://api.github.com/repos/rook/rook/milestones/6/labels",
    "node_id": "MDk6TWlsZXN0b25lMjQ5NjM1Mw==",
    "number": 6,
    "open_issues": 0,
    "state": "closed",
    "title": "0.6",
    "updated_at": "2018-01-02T03:49:47Z",
    "url": "https://api.github.com/repos/rook/rook/milestones/6"
  },
  "node_id": "MDU6SXNzdWUyNDkzMzE0MDA=",
  "number": 891,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "IOPS and Throughput metric always zero",
  "updated_at": "2017-08-11T23:19:22Z",
  "url": "https://api.github.com/repos/rook/rook/issues/891",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/3718398?v=4",
    "events_url": "https://api.github.com/users/galexrt/events{/privacy}",
    "followers_url": "https://api.github.com/users/galexrt/followers",
    "following_url": "https://api.github.com/users/galexrt/following{/other_user}",
    "gists_url": "https://api.github.com/users/galexrt/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/galexrt",
    "id": 3718398,
    "login": "galexrt",
    "node_id": "MDQ6VXNlcjM3MTgzOTg=",
    "organizations_url": "https://api.github.com/users/galexrt/orgs",
    "received_events_url": "https://api.github.com/users/galexrt/received_events",
    "repos_url": "https://api.github.com/users/galexrt/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/galexrt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/galexrt/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/galexrt"
  }
}