{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "NONE",
  "body": "**Is this a bug report or feature request?**\r\n* Bug Report\r\n\r\n**Deviation from expected behavior:**\r\n\r\nThere are only two monitors:\r\n```\r\nsh-4.2$ ceph -s\r\n  cluster:\r\n    id:     08f51f08-9551-488f-9419-787a7717555e\r\n    health: HEALTH_OK\r\n \r\n  services:\r\n    mon: 2 daemons, quorum k,l (age 31h)\r\n[...]\r\n```\r\n```\r\n> oc get po -n rook-ceph | grep mon\r\nrook-ceph-mon-k-56b79f9b8f-thmbz                                  1/1     Running       0          9d\r\nrook-ceph-mon-k-canary-76975f59fb-sdc8k                           0/1     Pending       0          83s\r\nrook-ceph-mon-l-6595d78777-9mhps                                  1/1     Running       0          9d\r\n```\r\n\r\nSo there are indeed only two running.  The canary cannot run, because it cannot mount the RWO volume that is attached to `rook-ceph-mon-k-56b79f9b8f-thmbz`.\r\n\r\n```\r\n> oc get pvc\r\nNAME              STATUS   VOLUME              CAPACITY   ACCESS MODES   STORAGECLASS   AGE\r\nrook-ceph-mon-i   Bound    local-pv-5965673e   5Gi        RWO            local-nvme     9d\r\nrook-ceph-mon-k   Bound    local-pv-304622ef   5Gi        RWO            local-nvme     9d\r\nrook-ceph-mon-l   Bound    local-pv-e26b53e2   5Gi        RWO            local-nvme     9d\r\n```\r\n\r\nInterestingly, I did not get any alert, that there are only two monitors running.  That's a problem as well!\r\n\r\n**Expected behavior:**\r\n\r\nThree monitors running.\r\n\r\n\r\n**File(s) to submit**:\r\n\r\n* Cluster CR (custom resource), typically called `cluster.yaml`, if necessary\r\nhttps://paste.centos.org/view/5ab7cce2\r\n\r\nThe relevant part might be\r\n\r\n```\r\n  mon:                                      \r\n    count: 3                                                                                              \r\n    allowMultiplePerNode: false                                                                           \r\n    volumeClaimTemplate:               \r\n      spec:                                                                                               \r\n        storageClassName: local-nvme                                                                      \r\n        resources:                                                                                                                                                                                                  \r\n          requests:                                                                                                                                                                                                 \r\n            storage: 5Gi                    \r\n\r\n```\r\n\r\n* Operator's logs, if necessary\r\n\r\nhttps://paste.centos.org/view/90dc0742\r\n\r\n* Crashing pod(s) logs, if necessary\r\n\r\n To get logs, use `kubectl -n <namespace> logs <pod name>`\r\nWhen pasting logs, always surround them with backticks or use the `insert code` button from the Github UI.\r\nRead [Github documentation if you need help](https://help.github.com/en/articles/creating-and-highlighting-code-blocks).\r\n\r\n**Environment**:\r\nThis is on OKD 4.4.\r\n```\r\n> oc get clusterversion\r\nversion   4.4.0-0.okd-2020-05-23-055148-beta5   True        False         15d     Cluster version is 4.4.0-0.okd-2020-05-23-055148-beta5\r\n```\r\n* OS (e.g. from /etc/os-release):\r\n* Kernel (e.g. `uname -a`):\r\n* Cloud provider or hardware configuration:\r\n* Rook version (use `rook version` inside of a Rook Pod):\r\n```\r\nsh-4.2$ rook version\r\nrook: v1.3.5\r\ngo: go1.13.8\r\n```\r\n\r\n* Storage backend version (e.g. for ceph do `ceph -v`):\r\n\r\n* Kubernetes version (use `kubectl version`): \r\n```\r\n> oc version\r\nClient Version: 4.5.0-202003312031-25645af\r\nServer Version: 4.4.0-0.okd-2020-05-23-055148-beta5\r\nKubernetes Version: v1.17.1\r\n```\r\n\r\n* Kubernetes cluster type (e.g. Tectonic, GKE, OpenShift): Openshift\r\n",
  "closed_at": "2020-06-18T15:22:08Z",
  "closed_by": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/912735?v=4",
    "events_url": "https://api.github.com/users/leseb/events{/privacy}",
    "followers_url": "https://api.github.com/users/leseb/followers",
    "following_url": "https://api.github.com/users/leseb/following{/other_user}",
    "gists_url": "https://api.github.com/users/leseb/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/leseb",
    "id": 912735,
    "login": "leseb",
    "node_id": "MDQ6VXNlcjkxMjczNQ==",
    "organizations_url": "https://api.github.com/users/leseb/orgs",
    "received_events_url": "https://api.github.com/users/leseb/received_events",
    "repos_url": "https://api.github.com/users/leseb/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/leseb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leseb/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/leseb"
  },
  "comments": 16,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/5644/comments",
  "created_at": "2020-06-11T13:55:26Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/5644/events",
  "html_url": "https://github.com/rook/rook/issues/5644",
  "id": 637037218,
  "labels": [
    {
      "color": "ee0000",
      "default": true,
      "description": "",
      "id": 405241115,
      "name": "bug",
      "node_id": "MDU6TGFiZWw0MDUyNDExMTU=",
      "url": "https://api.github.com/repos/rook/rook/labels/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/5644/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU2MzcwMzcyMTg=",
  "number": 5644,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "rook-ceph only two monitors running, strange canary",
  "updated_at": "2020-08-25T17:20:13Z",
  "url": "https://api.github.com/repos/rook/rook/issues/5644",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/296430?v=4",
    "events_url": "https://api.github.com/users/ibotty/events{/privacy}",
    "followers_url": "https://api.github.com/users/ibotty/followers",
    "following_url": "https://api.github.com/users/ibotty/following{/other_user}",
    "gists_url": "https://api.github.com/users/ibotty/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/ibotty",
    "id": 296430,
    "login": "ibotty",
    "node_id": "MDQ6VXNlcjI5NjQzMA==",
    "organizations_url": "https://api.github.com/users/ibotty/orgs",
    "received_events_url": "https://api.github.com/users/ibotty/received_events",
    "repos_url": "https://api.github.com/users/ibotty/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/ibotty/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ibotty/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/ibotty"
  }
}