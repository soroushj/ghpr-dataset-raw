{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
      "events_url": "https://api.github.com/users/travisn/events{/privacy}",
      "followers_url": "https://api.github.com/users/travisn/followers",
      "following_url": "https://api.github.com/users/travisn/following{/other_user}",
      "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/travisn",
      "id": 1048514,
      "login": "travisn",
      "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
      "organizations_url": "https://api.github.com/users/travisn/orgs",
      "received_events_url": "https://api.github.com/users/travisn/received_events",
      "repos_url": "https://api.github.com/users/travisn/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/travisn"
    }
  ],
  "author_association": "MEMBER",
  "body": "To make it easier to troubleshoot the Ceph daemons, the pod names should match the daemon names wherever possible. \r\n\r\n### Stateless daemons\r\n\r\n#### MDS\r\nThe name of the mds will be the same as the pod name. MDS is stateless therefore maintaining a consistent name is not needed. \r\n\r\nCurrently the mds daemon name only consists of the random k8s pod suffix such as `fn72k`, which means now we would use more of the pod name. If the pod name is `rook-ceph-mds-myfs-5f8556bd99-fn72k`, the daemon would be `mds.myfs-5f8556bd99-fn72k`.\r\n\r\n#### RGW\r\nClients need to know the service name rather than the pod name. The rgw service will start with the service name for the `rgw_zone` and `rgw_zonegroup` settings. Need to investigate if the daemon name is exposed in the service map.\r\n\r\n#### Mgr\r\nThere is only one mgr in Rook named `rook-ceph-mgr`. The mgr name needs to match the service name rather than the pod name. The service name is constant so that clients can connect to the dashboard and prometheus metrics. There is no need for multiple mgrs since Kubernetes will failover the pod automatically. The name is currently `rook-ceph-mgr0` so we can remove the `0` suffix.\r\n\r\nThe pod can be queried with a label:\r\n```\r\nkubectl -n rook-ceph get pod -l app=rook-ceph-mgr\r\n```\r\n\r\n### Mons and OSDs\r\n\r\n#1656 will name the osds to match the OSD IDs and #1751 will take care of renaming the mons to follow this pattern. However, the mon and osd pod names will still have a random k8s suffix in addition to the daemon name. For example, the daemon name and deployment name for a mon would be `rook-ceph-mon-a`, while its pod name might be `rook-ceph-mon-a-5f8556bd99-gjpd8`. \r\n\r\nThe recommended way to work with the mon and osd pods will to be use labels. This example shows how a specific mon or osd pod might be queried.\r\n```\r\nkubectl -n rook-ceph get pod -l mon=rook-ceph-mon-a\r\n```",
  "closed_at": "2018-06-15T19:53:52Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/1752/comments",
  "created_at": "2018-05-29T20:57:24Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/1752/events",
  "html_url": "https://github.com/rook/rook/issues/1752",
  "id": 327484849,
  "labels": [
    {
      "color": "ef5c55",
      "default": false,
      "description": "main ceph tag",
      "id": 479456042,
      "name": "ceph",
      "node_id": "MDU6TGFiZWw0Nzk0NTYwNDI=",
      "url": "https://api.github.com/repos/rook/rook/labels/ceph"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/1752/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2020-01-28T21:43:40Z",
    "closed_issues": 62,
    "created_at": "2017-11-06T17:57:26Z",
    "creator": {
      "avatar_url": "https://avatars3.githubusercontent.com/u/1463491?v=4",
      "events_url": "https://api.github.com/users/bassam/events{/privacy}",
      "followers_url": "https://api.github.com/users/bassam/followers",
      "following_url": "https://api.github.com/users/bassam/following{/other_user}",
      "gists_url": "https://api.github.com/users/bassam/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/bassam",
      "id": 1463491,
      "login": "bassam",
      "node_id": "MDQ6VXNlcjE0NjM0OTE=",
      "organizations_url": "https://api.github.com/users/bassam/orgs",
      "received_events_url": "https://api.github.com/users/bassam/received_events",
      "repos_url": "https://api.github.com/users/bassam/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/bassam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bassam/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/bassam"
    },
    "description": "* Multiple storage backends\r\n  * Full design\r\n  * Refactor code base and repositories to enable\r\n  * Consider support for Minio, potentially early support for other backends time permitting\r\n* Switch CRDs to API Aggregation\r\n* Run on arbitrary PVs\r\n* Remove Rook API and CLI\r\n* Migrate CI and release pipelines to a solution hosted by the CNCF\r\n* Run with Least Privileged and possibly without privileged containers\r\n* Shutdown / restart issues\r\n* Support Kubernetes 1.7+ only\r\n* Ceph features and improvements\r\n  * Adding/removing disks (lifecycle issues, failures, 1 OSD per pod, etc.)\r\n  * Placement group balancer support (ceph-mgr module)\r\n  * Mon reliability (restarts, failing over too fast, ip changes, etc.)\r\n  * Mimic support",
    "due_on": null,
    "html_url": "https://github.com/rook/rook/milestone/8",
    "id": 2891896,
    "labels_url": "https://api.github.com/repos/rook/rook/milestones/8/labels",
    "node_id": "MDk6TWlsZXN0b25lMjg5MTg5Ng==",
    "number": 8,
    "open_issues": 0,
    "state": "closed",
    "title": "0.8",
    "updated_at": "2020-01-28T21:43:40Z",
    "url": "https://api.github.com/repos/rook/rook/milestones/8"
  },
  "node_id": "MDU6SXNzdWUzMjc0ODQ4NDk=",
  "number": 1752,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "Ceph daemon names should match k8s pod names where possible",
  "updated_at": "2018-06-15T19:53:52Z",
  "url": "https://api.github.com/repos/rook/rook/issues/1752",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  }
}