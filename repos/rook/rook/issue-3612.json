{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/9363998?v=4",
    "events_url": "https://api.github.com/users/sp98/events{/privacy}",
    "followers_url": "https://api.github.com/users/sp98/followers",
    "following_url": "https://api.github.com/users/sp98/following{/other_user}",
    "gists_url": "https://api.github.com/users/sp98/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sp98",
    "id": 9363998,
    "login": "sp98",
    "node_id": "MDQ6VXNlcjkzNjM5OTg=",
    "organizations_url": "https://api.github.com/users/sp98/orgs",
    "received_events_url": "https://api.github.com/users/sp98/received_events",
    "repos_url": "https://api.github.com/users/sp98/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sp98/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sp98/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sp98"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/9363998?v=4",
      "events_url": "https://api.github.com/users/sp98/events{/privacy}",
      "followers_url": "https://api.github.com/users/sp98/followers",
      "following_url": "https://api.github.com/users/sp98/following{/other_user}",
      "gists_url": "https://api.github.com/users/sp98/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/sp98",
      "id": 9363998,
      "login": "sp98",
      "node_id": "MDQ6VXNlcjkzNjM5OTg=",
      "organizations_url": "https://api.github.com/users/sp98/orgs",
      "received_events_url": "https://api.github.com/users/sp98/received_events",
      "repos_url": "https://api.github.com/users/sp98/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/sp98/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sp98/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/sp98"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "**Is this a bug report or feature request?**\r\n* Bug Report\r\n\r\n**Deviation from expected behavior:**\r\n- While running multiple OSD on top of PVCs, some of the OSD fail randomly. \r\n\r\n**Expected behavior:**\r\n- All the OSD should run successfully without failure.\r\n\r\n**How to reproduce it (minimal and precise):**\r\n1. Create the cluster environment. (AWS or any local setup with Vagrant). \r\n2. Have Persistence Volume and Persistence Volume Claims based on the number of OSDs to be created. \r\n3. Apply the common.yaml file. \r\n4. Apply the operator.yaml file. \r\n5. Apply the cluster-on-pvc.yaml file with 'count', say, 10 (to start 10 OSD)\r\n6. Observe the OSD prepare PODs. \r\n- Some (1 or 2) of the OSD prepare PODs will restart and ultimately fail and corresponding OSDs will never get created\r\n\r\nError logs:\r\n\r\n- OSD Prepare POD logs:\r\n\r\n```\r\n2019-08-07 10:01:43.930960 I | cephcmd: desired devices to configure osds: [{Name:/mnt/cluster1-set1-3-0-template-1-pp2t2 OSDsPerDevice:1 IsFilter:false}]\r\n2019-08-07 10:01:43.934091 I | rookcmd: starting Rook v1.0.0-318.g031c3bd7.dirty with arguments '/rook/rook ceph osd provision'\r\n2019-08-07 10:01:43.934109 I | rookcmd: flag values: --cluster-id=e019bc7a-4783-40cd-a253-bf7e0c4004f4, --data-device-filter=, --data-devices=/mnt/cluster1-set1-3-0-template-1-pp2t2, --data-directories=, --encrypted-device=false, --force-format=false, --help=false, --location=, --log-flush-frequency=5s, --log-level=INFO, --metadata-device=, --node-name=cluster1-set1-3-0-template-1-pp2t2, --operator-image=, --osd-database-size=20480, --osd-journal-size=5120, --osd-store=, --osd-wal-size=576, --osds-per-device=1, --pvc-backed-osd=true, --service-account=\r\n2019-08-07 10:01:43.934116 I | op-mon: parsing mon endpoints: c=10.109.221.193:6789,a=10.96.84.1:6789,b=10.110.117.47:6789\r\n2019-08-07 10:01:43.958412 W | cephconfig: failed to add config file override from '/etc/rook/config/override.conf': open /etc/rook/config/override.conf: no such file or directory\r\n2019-08-07 10:01:43.958427 I | cephconfig: writing config file /var/lib/rook/rook-ceph/rook-ceph.config\r\n2019-08-07 10:01:43.958527 I | cephconfig: copying config to /etc/ceph/ceph.conf\r\n2019-08-07 10:01:43.958644 I | cephconfig: generated admin config in /var/lib/rook/rook-ceph\r\n2019-08-07 10:01:43.958649 I | cephosd: discovering hardware\r\n2019-08-07 10:01:43.958665 I | exec: Running command: lsblk /mnt/cluster1-set1-3-0-template-1-pp2t2 --bytes --nodeps --pairs --output SIZE,ROTA,RO,TYPE,PKNAME\r\n2019-08-07 10:01:43.969180 I | exec: Running command: sgdisk --print /mnt/cluster1-set1-3-0-template-1-pp2t2\r\n2019-08-07 10:01:43.972595 I | cephosd: creating and starting the osds\r\n2019-08-07 10:01:43.972614 I | exec: Running command: lsblk /mnt/cluster1-set1-3-0-template-1-pp2t2 --bytes --pairs --output NAME,SIZE,TYPE,PKNAME\r\n2019-08-07 10:01:43.975214 I | cephosd: /mnt/cluster1-set1-3-0-template-1-pp2t2 found in the desired devices\r\n2019-08-07 10:01:43.984976 I | cephosd: configuring osd devices: {\"Entries\":{\"/mnt/cluster1-set1-3-0-template-1-pp2t2\":{\"Data\":-1,\"Metadata\":null,\"Config\":{\"Name\":\"/mnt/cluster1-set1-3-0-template-1-pp2t2\",\"OSDsPerDevice\":1,\"IsFilter\":false},\"LegacyPartitionsFound\":false}}}\r\n2019-08-07 10:01:43.993032 I | cephosd: device /mnt/cluster1-set1-3-0-template-1-pp2t2 to be configured by ceph-volume\r\n2019-08-07 10:01:43.993058 I | cephosd: 0/0 pre-ceph-volume osd devices succeeded on this node\r\n2019-08-07 10:01:43.993377 I | exec: Running command: ceph auth get-or-create-key client.bootstrap-osd mon allow profile bootstrap-osd --connect-timeout=15 --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring --format json --out-file /tmp/168398674\r\n2019-08-07 10:01:44.599838 I | exec: Running command: stdbuf -oL sed -i -e s#udev_sync = 1#udev_sync = 0# /etc/lvm/lvm.conf\r\n2019-08-07 10:01:44.607965 I | exec: Running command: stdbuf -oL sed -i -e s#udev_rules = 1#udev_rules = 0# /etc/lvm/lvm.conf\r\n2019-08-07 10:01:44.618415 I | exec: Running command: stdbuf -oL sed -i -e s#use_lvmetad = 1#use_lvmetad = 0# /etc/lvm/lvm.conf\r\n2019-08-07 10:01:44.627997 I | exec: Running command: stdbuf -oL sed -i -e s#scan = \\[ \"/dev\" \\]#scan = [ \"/dev\", \"/mnt\" ]# /etc/lvm/lvm.conf\r\n2019-08-07 10:01:44.635056 I | exec: Running command: stdbuf -oL sed -i -e 0,/# filter =.*/{s%# filter =.*% filter = [ \"a|^/mnt/.*| r|.*/|\" ]%} /etc/lvm/lvm.conf\r\n2019-08-07 10:01:44.646724 I | cephosd: configuring new device /mnt/cluster1-set1-3-0-template-1-pp2t2\r\n2019-08-07 10:01:44.646744 I | exec: Running command: stdbuf -oL ceph-volume lvm prepare --no-systemd --data /mnt/cluster1-set1-3-0-template-1-pp2t2\r\n2019-08-07 10:01:59.552106 I | cephosd: SP - failed ceph-volume. Failed to complete '': exit status 1. -->  RuntimeError: Command failed with exit code 250: /bin/ceph-osd --cluster ceph --osd-objectstore bluestore --mkfs -i 3 --monmap /var/lib/ceph/osd/ceph-3/activate.monmap --keyfile - --osd-data /var/lib/ceph/osd/ceph-3/ --osd-uuid 9e94854a-9662-4041-b0e2-229ae8a2940b --setuser ceph --setgroup ceph\r\n```\r\n**File(s) to submit**:\r\nceph-volume-logs (2).txt\r\n\r\n**Environment**:\r\n* OS (e.g. from /etc/os-release):\r\n* Kernel (e.g. `uname -a`):\r\n* Cloud provider or hardware configuration:\r\n* Rook version (use `rook version` inside of a Rook Pod):\r\n* Storage backend version (e.g. for ceph do `ceph -v`):\r\n* Kubernetes version (use `kubectl version`): v1.15.1\r\n* Kubernetes cluster type (e.g. Tectonic, GKE, OpenShift):\r\n* Storage backend status (e.g. for Ceph use `ceph health` in the [Rook Ceph toolbox](https://rook.io/docs/rook/master/ceph-toolbox.html)):\r\n",
  "closed_at": "2019-09-06T12:59:58Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "comments": 14,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/3612/comments",
  "created_at": "2019-08-13T14:57:12Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/3612/events",
  "html_url": "https://github.com/rook/rook/issues/3612",
  "id": 480205581,
  "labels": [
    {
      "color": "ee0000",
      "default": true,
      "description": "",
      "id": 405241115,
      "name": "bug",
      "node_id": "MDU6TGFiZWw0MDUyNDExMTU=",
      "url": "https://api.github.com/repos/rook/rook/labels/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/3612/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0ODAyMDU1ODE=",
  "number": 3612,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "[OSD on PVC] OSD fails randomly while running on PVC",
  "updated_at": "2019-09-06T12:59:58Z",
  "url": "https://api.github.com/repos/rook/rook/issues/3612",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/9363998?v=4",
    "events_url": "https://api.github.com/users/sp98/events{/privacy}",
    "followers_url": "https://api.github.com/users/sp98/followers",
    "following_url": "https://api.github.com/users/sp98/following{/other_user}",
    "gists_url": "https://api.github.com/users/sp98/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/sp98",
    "id": 9363998,
    "login": "sp98",
    "node_id": "MDQ6VXNlcjkzNjM5OTg=",
    "organizations_url": "https://api.github.com/users/sp98/orgs",
    "received_events_url": "https://api.github.com/users/sp98/received_events",
    "repos_url": "https://api.github.com/users/sp98/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/sp98/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sp98/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/sp98"
  }
}