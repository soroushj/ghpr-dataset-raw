{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/29669302?v=4",
    "events_url": "https://api.github.com/users/arm64b/events{/privacy}",
    "followers_url": "https://api.github.com/users/arm64b/followers",
    "following_url": "https://api.github.com/users/arm64b/following{/other_user}",
    "gists_url": "https://api.github.com/users/arm64b/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/arm64b",
    "id": 29669302,
    "login": "arm64b",
    "node_id": "MDQ6VXNlcjI5NjY5MzAy",
    "organizations_url": "https://api.github.com/users/arm64b/orgs",
    "received_events_url": "https://api.github.com/users/arm64b/received_events",
    "repos_url": "https://api.github.com/users/arm64b/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/arm64b/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/arm64b/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/arm64b"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/29669302?v=4",
      "events_url": "https://api.github.com/users/arm64b/events{/privacy}",
      "followers_url": "https://api.github.com/users/arm64b/followers",
      "following_url": "https://api.github.com/users/arm64b/following{/other_user}",
      "gists_url": "https://api.github.com/users/arm64b/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/arm64b",
      "id": 29669302,
      "login": "arm64b",
      "node_id": "MDQ6VXNlcjI5NjY5MzAy",
      "organizations_url": "https://api.github.com/users/arm64b/orgs",
      "received_events_url": "https://api.github.com/users/arm64b/received_events",
      "repos_url": "https://api.github.com/users/arm64b/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/arm64b/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arm64b/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/arm64b"
    }
  ],
  "author_association": "MEMBER",
  "body": "<!-- **Are you in the right place?**\r\n1. For issues or feature requests, please create an issue in this repository.\r\n2. For general technical and non-technical questions, we are happy to help you on our [Rook.io Slack](https://Rook-io.slack.com).\r\n3. Did you already search the existing open issues for anything similar? -->\r\n\r\n**Is this a bug report or feature request?**\r\n* Bug Report\r\n\r\n**Deviation from expected behavior:**\r\nThere's no `osd` pod(s) running inside the ceph cluster\r\n**Expected behavior:**\r\nThe `osd` should be running inside the ceph cluster started up by the Rook\r\n**How to reproduce it (minimal and precise):**\r\nChange the cluster.yml file as below:\r\n```\r\n--- a/cluster/examples/kubernetes/ceph/cluster.yaml\r\n+++ b/cluster/examples/kubernetes/ceph/cluster.yaml\r\n@@ -106,7 +106,7 @@ spec:\r\n #    mon:\r\n #    osd:\r\n   storage: # cluster level storage configuration and selection\r\n-    useAllNodes: true\r\n+    useAllNodes: false\r\n     useAllDevices: false\r\n     deviceFilter:\r\n     location:\r\n@@ -121,7 +121,7 @@ spec:\r\n #    - path: /rook/storage-dir\r\n # Individual nodes and their config can be specified as well, but 'useAllNodes' above must be set to false. Then, only the named\r\n # nodes below will be used as storage resources.  Each node's 'name' field should match their 'kubernetes.io/hostname' label.\r\n-#    nodes:\r\n+    nodes:\r\n #    - name: \"172.17.4.101\"\r\n #      directories: # specific directories to use for storage can be specified for each node\r\n #      - path: \"/rook/storage-dir\"\r\n@@ -132,9 +132,9 @@ spec:\r\n #        requests:\r\n #          cpu: \"500m\"\r\n #          memory: \"1024Mi\"\r\n-#    - name: \"172.17.4.201\"\r\n-#      devices: # specific devices to use for storage can be specified for each node\r\n-#      - name: \"sdb\"\r\n+    - name: \"10.169.40.30\"\r\n+      devices: # specific devices to use for storage can be specified for each node\r\n+      - name: \"sda\"\r\n```\r\nThen create the cluster:\r\n```\r\nkubectl create -f operator.yaml\r\nkubectl create -f cluster.yaml\r\n```\r\nThere's no osd pod(s) running inside the ceph cluster:\r\n```\r\n# kubectl -n rook-ceph get pod\r\nNAME                               READY     STATUS    RESTARTS   AGE\r\nrook-ceph-mgr-a-86995b7897-xpplc   1/1       Running   0          28m\r\nrook-ceph-mon0-r6bzl               1/1       Running   0          28m\r\nrook-ceph-mon1-2c6vg               1/1       Running   0          28m\r\nrook-ceph-mon2-nhkj5               1/1       Running   0          28m\r\n```\r\nThe logs of `operator`:\r\n```\r\n2018-08-03 02:41:01.394414 I | op-mgr: dashboard service started\r\n2018-08-03 02:41:01.394453 I | op-osd: start running osds in namespace rook-ceph\r\n2018-08-03 02:41:01.394663 I | exec: Running command: ceph osd set noscrub --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring --format json --out-file /tmp/663172730\r\n2018-08-03 02:41:02.874869 I | exec: noscrub is set\r\n2018-08-03 02:41:02.875188 I | exec: Running command: ceph osd set nodeep-scrub --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring --format json --out-file /tmp/877693329\r\n2018-08-03 02:41:04.605210 I | exec: nodeep-scrub is set\r\n2018-08-03 02:41:04.814780 I | op-osd: 0 of the 1 storage nodes are valid\r\n2018-08-03 02:41:04.814811 I | op-osd: checking if orchestration is still in progress\r\n2018-08-03 02:41:04.860498 I | op-osd: start provisioning the osds on nodes, if needed\r\n2018-08-03 02:41:04.860524 I | op-osd: start osds after provisioning is completed, if needed\r\n2018-08-03 02:41:05.056150 I | op-osd: checking if any nodes were removed\r\n2018-08-03 02:41:05.059752 I | op-osd: processing 0 removed nodes\r\n2018-08-03 02:41:05.059772 I | op-osd: done processing removed nodes\r\n2018-08-03 02:41:05.059781 I | op-osd: completed running osds in namespace rook-ceph\r\n2018-08-03 02:41:05.059977 I | exec: Running command: ceph osd unset noscrub --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring --format json --out-file /tmp/621189564\r\n2018-08-03 02:41:06.830407 I | exec: noscrub is unset\r\n2018-08-03 02:41:06.830779 I | exec: Running command: ceph osd unset nodeep-scrub --cluster=rook-ceph --conf=/var/lib/rook/rook-ceph/rook-ceph.config --keyring=/var/lib/rook/rook-ceph/client.admin.keyring --format json --out-file /tmp/174747627\r\n2018-08-03 02:41:08.116266 I | exec: nodeep-scrub is unset\r\n2018-08-03 02:41:08.116465 I | op-cluster: Done creating rook instance in namespace rook-ceph\r\n```\r\n<!-- Please let us know any circumstances for reproduction of your bug. -->\r\n\r\n**Environment**:\r\n* OS (e.g. from /etc/os-release):\r\n```\r\nNAME=\"Ubuntu\"\r\nVERSION=\"16.04.4 LTS (Xenial Xerus)\"\r\nID=ubuntu\r\nID_LIKE=debian\r\nPRETTY_NAME=\"Ubuntu 16.04.4 LTS\"\r\nVERSION_ID=\"16.04\"\r\nHOME_URL=\"http://www.ubuntu.com/\"\r\nSUPPORT_URL=\"http://help.ubuntu.com/\"\r\nBUG_REPORT_URL=\"http://bugs.launchpad.net/ubuntu/\"\r\nVERSION_CODENAME=xenial\r\nUBUNTU_CODENAME=xenial\r\n```\r\n* Kernel (e.g. `uname -a`):\r\nLinux huawei-d05 4.15.2 #2 SMP Fri Jul 27 11:02:30 CST 2018 aarch64 aarch64 aarch64 GNU/Linux\r\n* Cloud provider or hardware configuration:\r\nLocal arm64 servers\r\n* Rook version (use `rook version` inside of a Rook Pod):\r\nv0.8.0-41.g9a6c9d68.dirty\r\n* Kubernetes version (use `kubectl version`):\r\n1.8.5\r\n* Kubernetes cluster type (e.g. Tectonic, GKE, OpenShift):\r\n* Storage backend status (e.g. for Ceph use `ceph health` in the [Rook Ceph toolbox](https://rook.io/docs/Rook/master/toolbox.html)):\r\n",
  "closed_at": "2018-08-07T05:32:51Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "comments": 5,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/1988/comments",
  "created_at": "2018-08-03T06:49:39Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/1988/events",
  "html_url": "https://github.com/rook/rook/issues/1988",
  "id": 347279324,
  "labels": [
    {
      "color": "ef5c55",
      "default": false,
      "description": "main ceph tag",
      "id": 479456042,
      "name": "ceph",
      "node_id": "MDU6TGFiZWw0Nzk0NTYwNDI=",
      "url": "https://api.github.com/repos/rook/rook/labels/ceph"
    },
    {
      "color": "00aaaa",
      "default": false,
      "description": null,
      "id": 479820581,
      "name": "operator",
      "node_id": "MDU6TGFiZWw0Nzk4MjA1ODE=",
      "url": "https://api.github.com/repos/rook/rook/labels/operator"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/1988/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWUzNDcyNzkzMjQ=",
  "number": 1988,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "No `osd` pods running inside the ceph cluster ",
  "updated_at": "2018-12-08T18:28:28Z",
  "url": "https://api.github.com/repos/rook/rook/issues/1988",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/29669302?v=4",
    "events_url": "https://api.github.com/users/arm64b/events{/privacy}",
    "followers_url": "https://api.github.com/users/arm64b/followers",
    "following_url": "https://api.github.com/users/arm64b/following{/other_user}",
    "gists_url": "https://api.github.com/users/arm64b/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/arm64b",
    "id": 29669302,
    "login": "arm64b",
    "node_id": "MDQ6VXNlcjI5NjY5MzAy",
    "organizations_url": "https://api.github.com/users/arm64b/orgs",
    "received_events_url": "https://api.github.com/users/arm64b/received_events",
    "repos_url": "https://api.github.com/users/arm64b/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/arm64b/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/arm64b/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/arm64b"
  }
}