{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
      "events_url": "https://api.github.com/users/travisn/events{/privacy}",
      "followers_url": "https://api.github.com/users/travisn/followers",
      "following_url": "https://api.github.com/users/travisn/following{/other_user}",
      "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/travisn",
      "id": 1048514,
      "login": "travisn",
      "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
      "organizations_url": "https://api.github.com/users/travisn/orgs",
      "received_events_url": "https://api.github.com/users/travisn/received_events",
      "repos_url": "https://api.github.com/users/travisn/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/travisn"
    }
  ],
  "author_association": "NONE",
  "body": "**Is this a bug report or feature request?**\r\n* Bug Report\r\n\r\n**Deviation from expected behavior:**\r\nSELinux Relabeling is enabled on mounted ceph flexvolume, even though ROOK_ENABLE_SELINUX_RELABELING is set \u2018false\u2019 on Operator manifest.\r\n\r\n**Expected behavior:**\r\nSELinux should be disabled on ceph flexvolume mounted on Pod/container.\r\n\r\n**How to reproduce it (minimal and precise):**\r\nUsing v0.9.3 of Rook/Ceph/Flexvolume:\r\n\r\nOperator ENV:\r\n```\r\n    Environment:\r\n      FLEXVOLUME_DIR_PATH:                /var/lib/kubelet/volumeplugins\r\n      ROOK_ALLOW_MULTIPLE_FILESYSTEMS:    false\r\n      ROOK_LOG_LEVEL:                     INFO\r\n      ROOK_MON_HEALTHCHECK_INTERVAL:      45s\r\n      ROOK_MON_OUT_TIMEOUT:               300s\r\n      ROOK_DISCOVER_DEVICES_INTERVAL:     60m\r\n      ROOK_HOSTPATH_REQUIRES_PRIVILEGED:  false\r\n      ROOK_ENABLE_SELINUX_RELABELING:     false\r\n      ROOK_ENABLE_FSGROUP:                false\r\n      NODE_NAME:                           (v1:spec.nodeName)\r\n      POD_NAME:                           rook-ceph-operator-77d576f4b8-bfk7z (v1:metadata.name)\r\n      POD_NAMESPACE:                      rook-ceph-system (v1:metadata.namespace)\r\n    Mounts:\r\n      /etc/ceph from default-config-dir (rw)\r\n      /var/lib/rook from rook-config (rw)\r\n      /var/run/secrets/kubernetes.io/serviceaccount from rook-ceph-system-token-4tv9x (ro)\r\n\r\n```\r\nAgent Env variables from output:\r\n```\r\n- args:\r\n    - ceph\r\n    - agent\r\n    env:\r\n    - name: POD_NAMESPACE\r\n      valueFrom:\r\n        fieldRef:\r\n          apiVersion: v1\r\n          fieldPath: metadata.namespace\r\n    - name: NODE_NAME\r\n      valueFrom:\r\n        fieldRef:\r\n          apiVersion: v1\r\n          fieldPath: spec.nodeName\r\n    - name: AGENT_MOUNT_SECURITY_MODE\r\n      value: Any\r\n    - name: ROOK_ENABLE_SELINUX_RELABELING\r\n      value: \"false\"\r\n    - name: ROOK_ENABLE_FSGROUP\r\n      value: \"false\"\r\n    image: rook/ceph:v0.9.3\r\n    imagePullPolicy: IfNotPresent\r\n    name: rook-ceph-agent\r\n\r\n```\r\nPod Volume Mount:\r\n\r\n```\r\n  - flexVolume:\r\n      driver: ceph.rook.io/rook-ceph-system\r\n      fsType: ceph\r\n      options:\r\n        clusterName: rook-ceph\r\n        fsname: rookfs\r\n```\r\n\r\nAgent Logs:\r\n\r\n```\r\n2019-03-21 15:35:34.260690 I | flexdriver: mounting ceph filesystem rookfs on /opt/rke/var/lib/kubelet/pods/f790977b-4bee-11e9-866c-000d3a374b8f/volumes/ceph.rook.io~rook-ceph-system/jenkins-home\r\n2019-03-21 15:35:34.279003 I | cephmon: parsing mon endpoints: a=10.43.244.77:6790,b=10.43.209.227:6790,c=10.43.240.137:6790\r\n2019-03-21 15:35:34.279159 I | op-mon: loaded: maxMonID=2, mons=map[b:0xc0006f4340 c:0xc0006f43c0 a:0xc0006f42c0], mapping=&{Node:map[c:0xc0006c8240 a:0xc0006c81e0 b:0xc0006c8210] Port:map[]}\r\n2019-03-21 15:35:34.285722 I | flexdriver: mounting ceph filesystem rookfs on 10.43.244.77:6790,10.43.209.227:6790,10.43.240.137:6790:/ to /opt/rke/var/lib/kubelet/pods/f790977b-4bee-11e9-866c-000d3a374b8f/volumes/ceph.rook.io~rook-ceph-system/jenkins-home\r\n2019-03-21 15:35:34.467067 I | flexdriver:\r\n2019-03-21 15:35:34.467482 I | flexdriver: ceph filesystem rookfs has been attached and mounted\r\n\r\n```\r\n\r\nDocker Mount Info:\r\n\r\n```\r\n        {\r\n                \"Type\": \"bind\",\r\n                \"Source\": \"/opt/rke/var/lib/kubelet/pods/f790977b-4bee-11e9-866c-000d3a374b8f/volumes/ceph.rook.io~rook-ceph-system/jenkins-home\",\r\n                \"Destination\": \"/var/jenkins_home\",\r\n                \"Mode\": \"Z\",\r\n                \"RW\": true,\r\n                \"Propagation\": \"rprivate\"\r\n            }\r\n\r\nBind: \"/opt/rke/var/lib/kubelet/pods/f790977b-4bee-11e9-866c-000d3a374b8f/volumes/ceph.rook.io~rook-ceph-system/jenkins-home:/var/jenkins_home:Z\u201d,\r\n\r\n\"Driver\": \"overlay2\",\r\n\"Platform\": \"linux\u201d,\r\n\"MountLabel\": \"system_u:object_r:svirt_lxc_file_t:s0:c209,c745\",\r\n\"ProcessLabel\": \"system_u:system_r:svirt_lxc_net_t:s0:c209,c745\",\r\n\r\n```\r\nNode Mount info:\r\n\r\n```\r\n|-/opt/rke/var/lib/kubelet/pods/524890cb-4f29-11e9-866c-000d3a374b8f/volumes/ceph.rook.io~rook/jenkins-home                    10.43.160.104:6790,10.43.45.191:6790,10.43.207.107:6790:/\r\n|     ceph        rw,relatime,seclabel,name=admin,secret=<hidden>,acl,mds_namespace=rookfs\r\n```\r\n\r\n**Environment**:\r\n* OS (e.g. from /etc/os-release): CoreOS 2023.5.0 \r\n* Kernel (e.g. `uname -a`): 4.19.25-coreos  \r\n* Cloud provider or hardware configuration: Azure\r\n* Rook version (use `rook version` inside of a Rook Pod): v0.9.3\r\n* Ceph Image: ceph/ceph:v13.2.4-20190109\r\n* Kubernetes version (use `kubectl version`): v1.11.6\r\n* Kubernetes cluster type (e.g. Tectonic, GKE, OpenShift): RKE/Azure\r\n* Storage backend status : health_ok\r\n",
  "closed_at": "2019-04-30T23:31:42Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "comments": 2,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/2892/comments",
  "created_at": "2019-03-25T18:07:55Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/2892/events",
  "html_url": "https://github.com/rook/rook/issues/2892",
  "id": 425044021,
  "labels": [
    {
      "color": "ee0000",
      "default": true,
      "description": "",
      "id": 405241115,
      "name": "bug",
      "node_id": "MDU6TGFiZWw0MDUyNDExMTU=",
      "url": "https://api.github.com/repos/rook/rook/labels/bug"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/2892/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2020-01-28T21:43:45Z",
    "closed_issues": 119,
    "created_at": "2018-11-21T16:40:13Z",
    "creator": {
      "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
      "events_url": "https://api.github.com/users/travisn/events{/privacy}",
      "followers_url": "https://api.github.com/users/travisn/followers",
      "following_url": "https://api.github.com/users/travisn/following{/other_user}",
      "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/travisn",
      "id": 1048514,
      "login": "travisn",
      "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
      "organizations_url": "https://api.github.com/users/travisn/orgs",
      "received_events_url": "https://api.github.com/users/travisn/received_events",
      "repos_url": "https://api.github.com/users/travisn/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/travisn"
    },
    "description": "",
    "due_on": null,
    "html_url": "https://github.com/rook/rook/milestone/11",
    "id": 3838796,
    "labels_url": "https://api.github.com/repos/rook/rook/milestones/11/labels",
    "node_id": "MDk6TWlsZXN0b25lMzgzODc5Ng==",
    "number": 11,
    "open_issues": 0,
    "state": "closed",
    "title": "1.0",
    "updated_at": "2020-01-28T21:43:45Z",
    "url": "https://api.github.com/repos/rook/rook/milestones/11"
  },
  "node_id": "MDU6SXNzdWU0MjUwNDQwMjE=",
  "number": 2892,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "SELinux relabeling enabled on mount even though ENV variables for ROOK_ENABLE_SELINUX_RELABELING is set \u2018false\u2019.",
  "updated_at": "2019-04-30T23:31:42Z",
  "url": "https://api.github.com/repos/rook/rook/issues/2892",
  "user": {
    "avatar_url": "https://avatars3.githubusercontent.com/u/8434421?v=4",
    "events_url": "https://api.github.com/users/shawnj/events{/privacy}",
    "followers_url": "https://api.github.com/users/shawnj/followers",
    "following_url": "https://api.github.com/users/shawnj/following{/other_user}",
    "gists_url": "https://api.github.com/users/shawnj/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/shawnj",
    "id": 8434421,
    "login": "shawnj",
    "node_id": "MDQ6VXNlcjg0MzQ0MjE=",
    "organizations_url": "https://api.github.com/users/shawnj/orgs",
    "received_events_url": "https://api.github.com/users/shawnj/received_events",
    "repos_url": "https://api.github.com/users/shawnj/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/shawnj/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shawnj/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/shawnj"
  }
}