{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/242417?v=4",
    "events_url": "https://api.github.com/users/dotnwat/events{/privacy}",
    "followers_url": "https://api.github.com/users/dotnwat/followers",
    "following_url": "https://api.github.com/users/dotnwat/following{/other_user}",
    "gists_url": "https://api.github.com/users/dotnwat/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/dotnwat",
    "id": 242417,
    "login": "dotnwat",
    "node_id": "MDQ6VXNlcjI0MjQxNw==",
    "organizations_url": "https://api.github.com/users/dotnwat/orgs",
    "received_events_url": "https://api.github.com/users/dotnwat/received_events",
    "repos_url": "https://api.github.com/users/dotnwat/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/dotnwat/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dotnwat/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/dotnwat"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/242417?v=4",
      "events_url": "https://api.github.com/users/dotnwat/events{/privacy}",
      "followers_url": "https://api.github.com/users/dotnwat/followers",
      "following_url": "https://api.github.com/users/dotnwat/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotnwat/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/dotnwat",
      "id": 242417,
      "login": "dotnwat",
      "node_id": "MDQ6VXNlcjI0MjQxNw==",
      "organizations_url": "https://api.github.com/users/dotnwat/orgs",
      "received_events_url": "https://api.github.com/users/dotnwat/received_events",
      "repos_url": "https://api.github.com/users/dotnwat/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/dotnwat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotnwat/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/dotnwat"
    }
  ],
  "author_association": "CONTRIBUTOR",
  "body": "Currently the storage that a monitor uses is based on the `dataDirHostPath` specified in the cluster CRD. This feature request will use the persistent volume abstraction to provide storage to monitors that are provisioned in the cloud (e.g. an ebs volume) or a local volume.\r\n\r\n**note**: the `dataDirHostPath` should remain (perhaps renamed) to hold logging and crash data.\r\n\r\nWhen backed by a network volume type this feature will free monitors from their strict host affinity. This is useful for migrating monitors efficiently during power down / upgrade / failure events as the block device can be moved to a new host without requiring a new monitor to be constructed.\r\n\r\nCompared to PV storage for OSDs, (1) the requirements of monitor storage are modest (e.g. 10s of gigabytes), and (2) raw devices are unnecessary: monitors can consume a standard file system.\r\n\r\n### Major changes:\r\n\r\n* Transition to the use of StatefulSets rather than the current use of Deployment types. One StatefulSet per monitor will be the deployment strategy. By choosing a 1-1 mapping, managing the naming will be simplified, and StatefulSets themselves will also handle pvc creation, pod association, and management.\r\n\r\n* The CRD will now contain a PVC template int he monitor spec\r\n\r\n### Host Networking\r\n\r\nHost network will not be supported for non-local PVCs (at least not yet) as this would require additional complexity in updating the IP address to which a monitor is associated when it is moved. When using non-host networking, the service object in k8s handles the IP migration transparently.\r\n\r\n### Scheduling\r\n\r\nThis feature and the current implementation of monitor management in Rook relate to the feature request https://github.com/rook/rook/issues/2603 that adds support for scheduling to be failure-domain aware.\r\n\r\nBaked into the design of the monitor orchestration is an assumption that (1) monitor pod scheduling/placement is performed manually and that (2) this allows the IP address of a monitor node to be node before pods are created.\r\n\r\nRefactoring the design to loosen the requirement of knowing the IP address prior to pod creation would allow us to take full advantage of the k8s scheduler (in which case the IP address in host networking mode _would not be known_).\r\n\r\nSince we are still supporting networking, prior to such a refactor we need to retain the explicit / manual scheduling of monitor pods, which https://github.com/rook/rook/issues/2603 covers.",
  "closed_at": "2019-08-03T04:25:57Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "comments": 10,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/3351/comments",
  "created_at": "2019-06-24T22:09:08Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/3351/events",
  "html_url": "https://github.com/rook/rook/issues/3351",
  "id": 460118247,
  "labels": [
    {
      "color": "ef5c55",
      "default": false,
      "description": "main ceph tag",
      "id": 479456042,
      "name": "ceph",
      "node_id": "MDU6TGFiZWw0Nzk0NTYwNDI=",
      "url": "https://api.github.com/repos/rook/rook/labels/ceph"
    },
    {
      "color": "84b6eb",
      "default": false,
      "description": "",
      "id": 405241117,
      "name": "feature",
      "node_id": "MDU6TGFiZWw0MDUyNDExMTc=",
      "url": "https://api.github.com/repos/rook/rook/labels/feature"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/3351/labels{/name}",
  "locked": false,
  "milestone": null,
  "node_id": "MDU6SXNzdWU0NjAxMTgyNDc=",
  "number": 3351,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "ceph: mon's should use persistent volume storage",
  "updated_at": "2019-08-03T04:25:57Z",
  "url": "https://api.github.com/repos/rook/rook/issues/3351",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/242417?v=4",
    "events_url": "https://api.github.com/users/dotnwat/events{/privacy}",
    "followers_url": "https://api.github.com/users/dotnwat/followers",
    "following_url": "https://api.github.com/users/dotnwat/following{/other_user}",
    "gists_url": "https://api.github.com/users/dotnwat/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/dotnwat",
    "id": 242417,
    "login": "dotnwat",
    "node_id": "MDQ6VXNlcjI0MjQxNw==",
    "organizations_url": "https://api.github.com/users/dotnwat/orgs",
    "received_events_url": "https://api.github.com/users/dotnwat/received_events",
    "repos_url": "https://api.github.com/users/dotnwat/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/dotnwat/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dotnwat/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/dotnwat"
  }
}