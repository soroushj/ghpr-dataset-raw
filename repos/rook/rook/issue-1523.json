{
  "active_lock_reason": null,
  "assignee": null,
  "assignees": [],
  "author_association": "CONTRIBUTOR",
  "body": "Hello,\r\n\r\nI wanted to ask a question about the implementation of the [Ceph config parameters for networking](http://docs.ceph.com/docs/master/rados/configuration/network-config-ref/#ceph-networks). \r\nI'm trying to use different networks for my Rook cluster to be able to use QoS on my network switches to make sure the Rook cluster always has the bandwidth available it needs.\r\nI was walking through the Rook code and a found a few references to the implementation: \r\n- [`rook/pkg/daemon/ceph/mon/config.go`](https://github.com/rook/rook/blob/021046792b64875b984ea1e120d722211b8addc5/pkg/daemon/ceph/mon/config.go#L69): The monitor config has the option for Public and Cluster network\r\n- [`rook/pkg/clusterd/network.go`](https://github.com/rook/rook/blob/021046792b64875b984ea1e120d722211b8addc5/pkg/clusterd/network.go#L26): The clusterd also has the option available. It's probably just a way of testing and implementing.\r\nAnyone who can give me a suggestion on how to start? I tried already using the `ConfigMap` override option and the cluster using `hostNetwork: true`. This was the configmap I used:\r\n\r\n```\r\napiVersion: v1\r\nmetadata:\r\n  name: rook-config-override\r\n  namespace: rook\r\ndata:\r\n  config: |\r\n    [global]\r\n    public network =  10.111.0.0/16\r\n    cluster network = 10.112.0.0/16\r\n```\r\n\r\nBut the automatically created part of the config has an address field containing the range of the default route (`10.101.0.0/16`). I can see the override is also implemented, but Ceph uses the `public addr 10.101.0.10` and `cluster addr 10.101.0.10` fields from the generated config rather then the `public network 10.111.0.0/16` and `cluster network 10.112.0.0/16` filled with the overridden configmap.\r\n\r\nConcerning the results from the code, it seems the option already exists, could it be they can be provided in the cluster yaml? \r\n\r\nAny suggestions are welcome!\r\nI'll try to update the docs when it's working.\r\n\r\nBest regards,\r\nHacor",
  "closed_at": "2018-11-29T06:51:04Z",
  "closed_by": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/1048514?v=4",
    "events_url": "https://api.github.com/users/travisn/events{/privacy}",
    "followers_url": "https://api.github.com/users/travisn/followers",
    "following_url": "https://api.github.com/users/travisn/following{/other_user}",
    "gists_url": "https://api.github.com/users/travisn/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/travisn",
    "id": 1048514,
    "login": "travisn",
    "node_id": "MDQ6VXNlcjEwNDg1MTQ=",
    "organizations_url": "https://api.github.com/users/travisn/orgs",
    "received_events_url": "https://api.github.com/users/travisn/received_events",
    "repos_url": "https://api.github.com/users/travisn/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/travisn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/travisn/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/travisn"
  },
  "comments": 20,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/1523/comments",
  "created_at": "2018-02-26T09:52:30Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/1523/events",
  "html_url": "https://github.com/rook/rook/issues/1523",
  "id": 300171559,
  "labels": [
    {
      "color": "ef5c55",
      "default": false,
      "description": "main ceph tag",
      "id": 479456042,
      "name": "ceph",
      "node_id": "MDU6TGFiZWw0Nzk0NTYwNDI=",
      "url": "https://api.github.com/repos/rook/rook/labels/ceph"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/1523/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2020-01-28T21:43:43Z",
    "closed_issues": 89,
    "created_at": "2018-02-28T18:53:01Z",
    "creator": {
      "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
      "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
      "followers_url": "https://api.github.com/users/jbw976/followers",
      "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jbw976",
      "id": 4313439,
      "login": "jbw976",
      "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
      "organizations_url": "https://api.github.com/users/jbw976/orgs",
      "received_events_url": "https://api.github.com/users/jbw976/received_events",
      "repos_url": "https://api.github.com/users/jbw976/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jbw976"
    },
    "description": "",
    "due_on": null,
    "html_url": "https://github.com/rook/rook/milestone/10",
    "id": 3151476,
    "labels_url": "https://api.github.com/repos/rook/rook/milestones/10/labels",
    "node_id": "MDk6TWlsZXN0b25lMzE1MTQ3Ng==",
    "number": 10,
    "open_issues": 0,
    "state": "closed",
    "title": "0.9",
    "updated_at": "2020-01-28T21:43:43Z",
    "url": "https://api.github.com/repos/rook/rook/milestones/10"
  },
  "node_id": "MDU6SXNzdWUzMDAxNzE1NTk=",
  "number": 1523,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "Using separate networks for Ceph cluster",
  "updated_at": "2019-10-15T23:06:23Z",
  "url": "https://api.github.com/repos/rook/rook/issues/1523",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/7940367?v=4",
    "events_url": "https://api.github.com/users/hacor/events{/privacy}",
    "followers_url": "https://api.github.com/users/hacor/followers",
    "following_url": "https://api.github.com/users/hacor/following{/other_user}",
    "gists_url": "https://api.github.com/users/hacor/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/hacor",
    "id": 7940367,
    "login": "hacor",
    "node_id": "MDQ6VXNlcjc5NDAzNjc=",
    "organizations_url": "https://api.github.com/users/hacor/orgs",
    "received_events_url": "https://api.github.com/users/hacor/received_events",
    "repos_url": "https://api.github.com/users/hacor/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/hacor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hacor/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/hacor"
  }
}