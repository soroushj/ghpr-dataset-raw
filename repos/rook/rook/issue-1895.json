{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/3718398?v=4",
    "events_url": "https://api.github.com/users/galexrt/events{/privacy}",
    "followers_url": "https://api.github.com/users/galexrt/followers",
    "following_url": "https://api.github.com/users/galexrt/following{/other_user}",
    "gists_url": "https://api.github.com/users/galexrt/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/galexrt",
    "id": 3718398,
    "login": "galexrt",
    "node_id": "MDQ6VXNlcjM3MTgzOTg=",
    "organizations_url": "https://api.github.com/users/galexrt/orgs",
    "received_events_url": "https://api.github.com/users/galexrt/received_events",
    "repos_url": "https://api.github.com/users/galexrt/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/galexrt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/galexrt/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/galexrt"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars1.githubusercontent.com/u/3718398?v=4",
      "events_url": "https://api.github.com/users/galexrt/events{/privacy}",
      "followers_url": "https://api.github.com/users/galexrt/followers",
      "following_url": "https://api.github.com/users/galexrt/following{/other_user}",
      "gists_url": "https://api.github.com/users/galexrt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/galexrt",
      "id": 3718398,
      "login": "galexrt",
      "node_id": "MDQ6VXNlcjM3MTgzOTg=",
      "organizations_url": "https://api.github.com/users/galexrt/orgs",
      "received_events_url": "https://api.github.com/users/galexrt/received_events",
      "repos_url": "https://api.github.com/users/galexrt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/galexrt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/galexrt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/galexrt"
    }
  ],
  "author_association": "NONE",
  "body": "My Storage nodes have the label `role=storage-node` and tainted with `storage=true:NoSchedule`.\r\n\r\nIn my cluster config, I have this under placement field:\r\n```\r\nplacement:\r\n    all:\r\n      nodeAffinity:\r\n        requiredDuringSchedulingIgnoredDuringExecution:\r\n          nodeSelectorTerms:\r\n          - matchExpressions:\r\n            - key: role\r\n              operator: In\r\n              values:\r\n              - storage-node\r\n      tolerations:\r\n      - key: \"storage\"\r\n        operator: \"Exists\"\r\n        effect: \"NoSchedule\"\r\n  storage: \r\n    useAllNodes: false\r\n    useAllDevices: false\r\n    devices:\r\n    - name: \"vda2\"\r\n\r\n    nodes:\r\n    - name: \"storage-node-1\"\r\n    - name: \"storage-node-2\"\r\n    - name: \"storage-node-3\"\r\n```\r\nEvery thing works fines, mon pods are being scheduled in the storage nodes, agent in all nodes.\r\n\r\nBut no osd pod get scheduled. They stay in pending state because no Node is available for them. Using the dashboard I check their manifest file and didn't found the `toleration` field. So by adding this to the osd pods:\r\n```\r\n\"tolerations\": [\r\n      {\r\n        \"key\": \"storage\",\r\n        \"operator\": \"Exists\",\r\n        \"effect\": \"NoSchedule\"\r\n      }\r\n ]\r\n```\r\n\r\nThe pods got scheduled and I have my first PVC in bound state.\r\n\r\n**Deviation from expected behavior:**\r\nToleration being set in osd pods, but it's not.\r\n\r\n**Expected behavior:**\r\nToleration being set in osd pods\r\n\r\n**How to reproduce it (minimal and precise):**\r\nTaint storage nodes.\r\n\r\n**Environment**:\r\n* OS (e.g. from /etc/os-release):\r\n```\r\nNAME=\"Ubuntu\"\r\nVERSION=\"16.04.3 LTS (Xenial Xerus)\"\r\nID=ubuntu\r\nID_LIKE=debian\r\nPRETTY_NAME=\"Ubuntu 16.04.3 LTS\"\r\nVERSION_ID=\"16.04\"\r\nHOME_URL=\"http://www.ubuntu.com/\"\r\nSUPPORT_URL=\"http://help.ubuntu.com/\"\r\nBUG_REPORT_URL=\"http://bugs.launchpad.net/ubuntu/\"\r\nVERSION_CODENAME=xenial\r\nUBUNTU_CODENAME=xenial\r\n```\r\n* Kernel (e.g. `uname -a`):\r\n```\r\nLinux k8s-master-1 4.4.0-112-generic #135-Ubuntu SMP Fri Jan 19 11:48:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n* Cloud provider or hardware configuration:\r\nExoscale. \r\n* Rook version (use `rook version` inside of a Rook Pod):\r\nrook: v0.7.0-284.g863c10f\r\n* Kubernetes version (use `kubectl version`):\r\n```\r\nClient Version: version.Info{Major:\"1\", Minor:\"11\", GitVersion:\"v1.11.0\", GitCommit:\"91e7b4fd31fcd3d5f436da26c980becec37ceefe\", GitTreeState:\"clean\", BuildDate:\"2018-06-27T22:29:25Z\", GoVersion:\"go1.10.3\", Compiler:\"gc\", Platform:\"darwin/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"10\", GitVersion:\"v1.10.5\", GitCommit:\"32ac1c9073b132b8ba18aa830f46b77dcceb0723\", GitTreeState:\"clean\", BuildDate:\"2018-06-21T11:34:22Z\", GoVersion:\"go1.9.3\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n```\r\n* Kubernetes cluster type (e.g. Tectonic, GKE, OpenShift):\r\nInstalled using kubespray.\r\n* Storage backend status (e.g. for Ceph use `ceph health` in the [Rook Ceph toolbox](https://rook.io/docs/Rook/master/toolbox.html)):\r\nHEALTH_OK\r\n",
  "closed_at": "2018-07-17T19:34:20Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  },
  "comments": 4,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/1895/comments",
  "created_at": "2018-07-17T08:31:56Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/1895/events",
  "html_url": "https://github.com/rook/rook/issues/1895",
  "id": 341817569,
  "labels": [],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/1895/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2020-01-28T21:43:40Z",
    "closed_issues": 62,
    "created_at": "2017-11-06T17:57:26Z",
    "creator": {
      "avatar_url": "https://avatars3.githubusercontent.com/u/1463491?v=4",
      "events_url": "https://api.github.com/users/bassam/events{/privacy}",
      "followers_url": "https://api.github.com/users/bassam/followers",
      "following_url": "https://api.github.com/users/bassam/following{/other_user}",
      "gists_url": "https://api.github.com/users/bassam/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/bassam",
      "id": 1463491,
      "login": "bassam",
      "node_id": "MDQ6VXNlcjE0NjM0OTE=",
      "organizations_url": "https://api.github.com/users/bassam/orgs",
      "received_events_url": "https://api.github.com/users/bassam/received_events",
      "repos_url": "https://api.github.com/users/bassam/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/bassam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bassam/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/bassam"
    },
    "description": "* Multiple storage backends\r\n  * Full design\r\n  * Refactor code base and repositories to enable\r\n  * Consider support for Minio, potentially early support for other backends time permitting\r\n* Switch CRDs to API Aggregation\r\n* Run on arbitrary PVs\r\n* Remove Rook API and CLI\r\n* Migrate CI and release pipelines to a solution hosted by the CNCF\r\n* Run with Least Privileged and possibly without privileged containers\r\n* Shutdown / restart issues\r\n* Support Kubernetes 1.7+ only\r\n* Ceph features and improvements\r\n  * Adding/removing disks (lifecycle issues, failures, 1 OSD per pod, etc.)\r\n  * Placement group balancer support (ceph-mgr module)\r\n  * Mon reliability (restarts, failing over too fast, ip changes, etc.)\r\n  * Mimic support",
    "due_on": null,
    "html_url": "https://github.com/rook/rook/milestone/8",
    "id": 2891896,
    "labels_url": "https://api.github.com/repos/rook/rook/milestones/8/labels",
    "node_id": "MDk6TWlsZXN0b25lMjg5MTg5Ng==",
    "number": 8,
    "open_issues": 0,
    "state": "closed",
    "title": "0.8",
    "updated_at": "2020-01-28T21:43:40Z",
    "url": "https://api.github.com/repos/rook/rook/milestones/8"
  },
  "node_id": "MDU6SXNzdWUzNDE4MTc1Njk=",
  "number": 1895,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "Tolerations in osd pods not being set",
  "updated_at": "2019-02-20T13:03:22Z",
  "url": "https://api.github.com/repos/rook/rook/issues/1895",
  "user": {
    "avatar_url": "https://avatars1.githubusercontent.com/u/2049730?v=4",
    "events_url": "https://api.github.com/users/Segflow/events{/privacy}",
    "followers_url": "https://api.github.com/users/Segflow/followers",
    "following_url": "https://api.github.com/users/Segflow/following{/other_user}",
    "gists_url": "https://api.github.com/users/Segflow/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/Segflow",
    "id": 2049730,
    "login": "Segflow",
    "node_id": "MDQ6VXNlcjIwNDk3MzA=",
    "organizations_url": "https://api.github.com/users/Segflow/orgs",
    "received_events_url": "https://api.github.com/users/Segflow/received_events",
    "repos_url": "https://api.github.com/users/Segflow/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/Segflow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Segflow/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/Segflow"
  }
}