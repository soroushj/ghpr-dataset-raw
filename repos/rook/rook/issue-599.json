{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
      "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
      "followers_url": "https://api.github.com/users/jbw976/followers",
      "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jbw976",
      "id": 4313439,
      "login": "jbw976",
      "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
      "organizations_url": "https://api.github.com/users/jbw976/orgs",
      "received_events_url": "https://api.github.com/users/jbw976/received_events",
      "repos_url": "https://api.github.com/users/jbw976/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jbw976"
    }
  ],
  "author_association": "MEMBER",
  "body": "When running the rook operator's volume provisioner to create RBD storage in our CI environment, which is on an Ubuntu 16.04 LTS VM with kernel 4.4, the provisioner creates the block image but the RBD plugin fails to map and mount it.\r\n\r\nThese messages from `dmesg` show what looks like root cause:\r\n```\r\n[ 2992.389399] ceph_oid_set_name 'rbd_id.kubernetes-dynamic-pvc-0fd5988f-2516-11e7-aa55-02420ac00002-0fd85d37-2516-11e7-b212-0a580ac00203' len 103 vs 100, truncating\r\n<ommitted>\r\n[ 2992.392072] rbd: image replicapool/kubernetes-dynamic-pvc-0fd5988f-2516-11e7-aa55-02420ac00002-0fd85d37-2516-11e7-b212-0a580ac00203 does not exist\r\n```\r\n\r\nAccording to https://www.spinics.net/lists/ceph-devel/msg27755.html, `rbd map` will fail for image names longer than 100 chars.\r\n\r\nThis appears to be fixed in 4.7+ kernels here: https://github.com/torvalds/linux/commit/d30291b985d1854565d7f2c82a4457869d5265e8#diff-040a9fdaed0040bc9753eb3bf9c45b7e\r\n\r\nSince the image name that operator's volume provisioner creates are of constant length, we can ensure that they are always less than 100 chars and be compatible with older kernels.",
  "closed_at": "2017-04-21T15:07:24Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/599/comments",
  "created_at": "2017-04-20T04:34:29Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/599/events",
  "html_url": "https://github.com/rook/rook/issues/599",
  "id": 222946948,
  "labels": [
    {
      "color": "00bbcc",
      "default": false,
      "description": "",
      "id": 496364161,
      "name": "block",
      "node_id": "MDU6TGFiZWw0OTYzNjQxNjE=",
      "url": "https://api.github.com/repos/rook/rook/labels/block"
    },
    {
      "color": "ad0036",
      "default": false,
      "description": "Ceph core components / functionality",
      "id": 496386717,
      "name": "ceph-rados",
      "node_id": "MDU6TGFiZWw0OTYzODY3MTc=",
      "url": "https://api.github.com/repos/rook/rook/labels/ceph-rados"
    },
    {
      "color": "bfdadc",
      "default": false,
      "description": null,
      "id": 497213973,
      "name": "kubernetes",
      "node_id": "MDU6TGFiZWw0OTcyMTM5NzM=",
      "url": "https://api.github.com/repos/rook/rook/labels/kubernetes"
    },
    {
      "color": "00aaaa",
      "default": false,
      "description": null,
      "id": 479820581,
      "name": "operator",
      "node_id": "MDU6TGFiZWw0Nzk4MjA1ODE=",
      "url": "https://api.github.com/repos/rook/rook/labels/operator"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/599/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2017-05-04T00:02:56Z",
    "closed_issues": 58,
    "created_at": "2017-02-06T18:39:47Z",
    "creator": {
      "avatar_url": "https://avatars1.githubusercontent.com/u/1994300?v=4",
      "events_url": "https://api.github.com/users/DanKerns/events{/privacy}",
      "followers_url": "https://api.github.com/users/DanKerns/followers",
      "following_url": "https://api.github.com/users/DanKerns/following{/other_user}",
      "gists_url": "https://api.github.com/users/DanKerns/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/DanKerns",
      "id": 1994300,
      "login": "DanKerns",
      "node_id": "MDQ6VXNlcjE5OTQzMDA=",
      "organizations_url": "https://api.github.com/users/DanKerns/orgs",
      "received_events_url": "https://api.github.com/users/DanKerns/received_events",
      "repos_url": "https://api.github.com/users/DanKerns/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/DanKerns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DanKerns/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/DanKerns"
    },
    "description": "Kubernetes Operator is expanded to provide full lifecycle support for the Rook components with a focus on getting the RADOS layer (MON and OSD) to be reliable. We will be building a new volume plugin for Kubelet that improves the overall experience of using Rook storage. Also more support for integration into Kubernetes API through third-party resources.\r\n\r\nAdd support for Ceph's filestore which is production-grade now. Rook will support Kraken (default) and Luminous (option) in this milestone.\r\n\r\nAdd initial monitoring support for Rook through Prometheus. \r\n\r\nImprove the build process so that Rook releases come out of Jenkins and add integration testing.",
    "due_on": "2017-03-27T07:00:00Z",
    "html_url": "https://github.com/rook/rook/milestone/4",
    "id": 2303640,
    "labels_url": "https://api.github.com/repos/rook/rook/milestones/4/labels",
    "node_id": "MDk6TWlsZXN0b25lMjMwMzY0MA==",
    "number": 4,
    "open_issues": 0,
    "state": "closed",
    "title": "v0.4",
    "updated_at": "2017-05-23T22:13:56Z",
    "url": "https://api.github.com/repos/rook/rook/milestones/4"
  },
  "node_id": "MDU6SXNzdWUyMjI5NDY5NDg=",
  "number": 599,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "volume provisioner fails on kernels older than 4.7",
  "updated_at": "2017-04-21T15:07:24Z",
  "url": "https://api.github.com/repos/rook/rook/issues/599",
  "user": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  }
}