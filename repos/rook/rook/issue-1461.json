{
  "active_lock_reason": null,
  "assignee": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  },
  "assignees": [
    {
      "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
      "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
      "followers_url": "https://api.github.com/users/jbw976/followers",
      "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jbw976",
      "id": 4313439,
      "login": "jbw976",
      "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
      "organizations_url": "https://api.github.com/users/jbw976/orgs",
      "received_events_url": "https://api.github.com/users/jbw976/received_events",
      "repos_url": "https://api.github.com/users/jbw976/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jbw976"
    }
  ],
  "author_association": "NONE",
  "body": "Is this a bug report or feature request?\r\n* Bug Report\r\n\r\n**Bug Report**\r\n\r\nWhat happened: After updating a rook cluster config map to remove a node the rook operator updates the node's OSD replicaset to use a configmap `rook-config-override`. That configmap appears to be empty. The OSD then begins to crash loop. The replicaset for the OSD still exists. The operator waits for the OSD to report some success status back but doesn't.\r\n\r\nWhat you expected to happen:\r\nThe OSD pod gracefully downs and purges its OSDs and reports successful back the operator after which the node is removed and the OSD replicaset and configmap are deleted.\r\n\r\nHow to reproduce it (minimal and precise):\r\nProvision a ceph cluster using Filestore devices. Use a cluster configuration that specifies `useAllNodes: false` and explicitly specify the nodes to use. Once the cluster is up and healthy remove a node from the config and replace it in kubernetes. Rook will begin the process of removing the node. The OSD replicaset will enter a crash loop state.\r\n\r\nDoes this have an impact on existing features:\r\n\r\n**Environment**:\r\n* OS (e.g. from /etc/os-release): Ubuntu 16.04\r\n* Kernel (e.g. `uname -a`): Linux 4.4.0-1048-aws\r\n* Cloud provider or hardware configuration: AWS, EBS volumes\r\n* Rook version (use `rook version` inside of a Rook Pod): v0.6.0-196.gcec49a6\r\n* Kubernetes version (use `kubectl version`): 1.8.3\r\n* Kubernetes cluster type (e.g. Tectonic, GKE, OpenShift): custom\r\n* Ceph status (use `ceph health` in the [Rook toolbox] (https://Rook.io/docs/Rook/master/toolbox.html)): HEALTH_OK prior to attempting to remove a node.\r\n",
  "closed_at": "2018-02-20T00:54:35Z",
  "closed_by": {
    "avatar_url": "https://avatars2.githubusercontent.com/u/4313439?v=4",
    "events_url": "https://api.github.com/users/jbw976/events{/privacy}",
    "followers_url": "https://api.github.com/users/jbw976/followers",
    "following_url": "https://api.github.com/users/jbw976/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbw976/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/jbw976",
    "id": 4313439,
    "login": "jbw976",
    "node_id": "MDQ6VXNlcjQzMTM0Mzk=",
    "organizations_url": "https://api.github.com/users/jbw976/orgs",
    "received_events_url": "https://api.github.com/users/jbw976/received_events",
    "repos_url": "https://api.github.com/users/jbw976/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/jbw976/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbw976/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/jbw976"
  },
  "comments": 0,
  "comments_url": "https://api.github.com/repos/rook/rook/issues/1461/comments",
  "created_at": "2018-01-30T17:26:29Z",
  "events_url": "https://api.github.com/repos/rook/rook/issues/1461/events",
  "html_url": "https://github.com/rook/rook/issues/1461",
  "id": 292869232,
  "labels": [
    {
      "color": "00aaaa",
      "default": false,
      "description": null,
      "id": 479820581,
      "name": "operator",
      "node_id": "MDU6TGFiZWw0Nzk4MjA1ODE=",
      "url": "https://api.github.com/repos/rook/rook/labels/operator"
    }
  ],
  "labels_url": "https://api.github.com/repos/rook/rook/issues/1461/labels{/name}",
  "locked": false,
  "milestone": {
    "closed_at": "2018-08-03T22:26:42Z",
    "closed_issues": 62,
    "created_at": "2018-02-12T17:12:56Z",
    "creator": {
      "avatar_url": "https://avatars3.githubusercontent.com/u/1463491?v=4",
      "events_url": "https://api.github.com/users/bassam/events{/privacy}",
      "followers_url": "https://api.github.com/users/bassam/followers",
      "following_url": "https://api.github.com/users/bassam/following{/other_user}",
      "gists_url": "https://api.github.com/users/bassam/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/bassam",
      "id": 1463491,
      "login": "bassam",
      "node_id": "MDQ6VXNlcjE0NjM0OTE=",
      "organizations_url": "https://api.github.com/users/bassam/orgs",
      "received_events_url": "https://api.github.com/users/bassam/received_events",
      "repos_url": "https://api.github.com/users/bassam/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/bassam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bassam/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/bassam"
    },
    "description": "",
    "due_on": null,
    "html_url": "https://github.com/rook/rook/milestone/9",
    "id": 3108603,
    "labels_url": "https://api.github.com/repos/rook/rook/milestones/9/labels",
    "node_id": "MDk6TWlsZXN0b25lMzEwODYwMw==",
    "number": 9,
    "open_issues": 0,
    "state": "closed",
    "title": "0.7",
    "updated_at": "2018-08-03T22:26:42Z",
    "url": "https://api.github.com/repos/rook/rook/milestones/9"
  },
  "node_id": "MDU6SXNzdWUyOTI4NjkyMzI=",
  "number": 1461,
  "performed_via_github_app": null,
  "repository_url": "https://api.github.com/repos/rook/rook",
  "state": "closed",
  "title": "Filestore devices aren't correctly looking up the partition where the OSD's data lives",
  "updated_at": "2018-02-20T00:54:35Z",
  "url": "https://api.github.com/repos/rook/rook/issues/1461",
  "user": {
    "avatar_url": "https://avatars0.githubusercontent.com/u/208667?v=4",
    "events_url": "https://api.github.com/users/andrewmyhre/events{/privacy}",
    "followers_url": "https://api.github.com/users/andrewmyhre/followers",
    "following_url": "https://api.github.com/users/andrewmyhre/following{/other_user}",
    "gists_url": "https://api.github.com/users/andrewmyhre/gists{/gist_id}",
    "gravatar_id": "",
    "html_url": "https://github.com/andrewmyhre",
    "id": 208667,
    "login": "andrewmyhre",
    "node_id": "MDQ6VXNlcjIwODY2Nw==",
    "organizations_url": "https://api.github.com/users/andrewmyhre/orgs",
    "received_events_url": "https://api.github.com/users/andrewmyhre/received_events",
    "repos_url": "https://api.github.com/users/andrewmyhre/repos",
    "site_admin": false,
    "starred_url": "https://api.github.com/users/andrewmyhre/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andrewmyhre/subscriptions",
    "type": "User",
    "url": "https://api.github.com/users/andrewmyhre"
  }
}